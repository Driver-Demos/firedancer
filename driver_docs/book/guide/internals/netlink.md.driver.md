# Purpose
The provided content is a documentation excerpt detailing the integration of the Firedancer networking stack with the Linux netlink interface. This file is a configuration and architectural overview document that explains how Firedancer leverages netlink to achieve efficient and secure networking operations with minimal configuration. The document outlines the use of XDP for fast packet processing, which requires certain kernel-level operations to be handled within the Firedancer software, specifically routing and neighbor resolution. It describes the architecture of the "netlink tile," which isolates netlink interactions to enhance security and performance by caching network information in shared memory. The document also details the data flow between various components, emphasizing security measures and performance optimizations, such as the use of a read-only cache and deduplication of neighbor solicitation requests. This file is crucial for developers and system administrators to understand the network configuration and security architecture of the Firedancer stack within a Linux environment.
# Content Summary
The provided document outlines the integration of the Firedancer userland networking stack with the Linux netlink interface, emphasizing a mostly zero-configuration approach for interoperability. This integration is designed to contrast with other fast networking stacks that often require complex configurations or dedicated IP addresses. The document details how Firedancer leverages the eXpress Data Path (XDP) for efficient packet processing, which necessitates handling certain tasks traditionally managed by the kernel, such as routing and link-level neighbor resolution, within the Firedancer software itself.

A key component of this integration is the use of a separate "netlink tile" to handle netlink requests, which enhances both security and performance. The netlink tile isolates the netlink interface from untrusted user traffic, reducing security risks, and utilizes shared memory caches to minimize the frequency of netlink requests, thereby improving performance. The shared memory region, referred to as "netbase," stores a read-only cache of critical networking information, including interface tables, IPv4 route tables, and neighbor tables for XDP-enabled Ethernet interfaces.

Security considerations are paramount, as the netlink interface presents a significant attack surface. The netlink tile operates with an rtnetlink socket, subscribing to route and neighbor table changes and issuing specific requests. Importantly, all netlink interactions can be performed by a regular unprivileged user on certain Linux distributions, such as RHEL 8 with a Linux 4.18 kernel.

The document also describes various data flows within the system, highlighting how net tiles interact with the netbase, how sysadmin changes propagate through the netlink tile, and how neighbor discovery is managed. Notably, the netlink tile is responsible for deduplicating neighbor solicitation requests and forwarding them to the kernel, ensuring efficient and secure handling of untrusted traffic.

Finally, the document touches on routing and neighbor discovery mechanisms. Firedancer supports simple routing tables, synchronizing only the "local" and "main" tables, and does not support policy-based routing or additional tables. Neighbor discovery is managed using a concurrent open-addressed hash table to store ARP entries, maintaining synchronization with the kernel. This comprehensive integration ensures Firedancer's networking stack operates efficiently and securely within a Linux environment.
