<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Shell script to download, configure, and test a Solana ledger for the Firedancer project.

# Purpose
This script is a Bash executable designed to manage and process a ledger for a development network. It sets up environment variables and processes command-line arguments to control the behavior of the script, such as whether to redownload resources. The script includes functions to authenticate with Google Cloud, download and extract ledger data, and configure the ledger for testing. It modifies configuration files and runs a series of commands to initialize, backtest, and finalize the ledger setup. Additionally, it performs operations to import and compare ledger data, ensuring the integrity of the ledger by checking checksums before and after execution.
# Global Variables

---
### DUMP
- **Type**: `string`
- **Description**: The `DUMP` variable is a global string variable that specifies the directory path where ledger data will be dumped. It defaults to './dump' if not set by the user.
- **Use**: Used to define the directory path for storing ledger data during the script execution.


---
### OBJDIR
- **Type**: `string`
- **Description**: Defines the directory path where the build artifacts are located. It defaults to 'build/native/gcc' if not set by the user.
- **Use**: Used to specify the location of the binaries and scripts for the 'firedancer-dev' and related commands.


---
### LEDGER
- **Type**: ``string``
- **Description**: Contains the name of the ledger used in the script, specifically 'devnet-398736132-solcap'. This string is used to identify and manage the ledger files and directories during the script's execution.
- **Use**: Used to specify the ledger name for downloading, extracting, and processing ledger-related files.


---
### REDOWNLOAD
- **Type**: `integer`
- **Description**: A global variable that determines whether the script should redownload the ledger data. It is initialized to 1, indicating that redownload is enabled by default.
- **Use**: Used to control the redownload behavior of the ledger data, with the option to disable it via command-line arguments.


# Functions

---
### download\_and\_extract\_ledger
Downloads and extracts a ledger file from Google Cloud Storage, authenticating if necessary.
- **Inputs**: None
- **Logic and Control Flow**:
    - Prints a message indicating the start of the download process.
    - Checks if the `firedancer-scratch` or `firedancer-ci` service accounts are authenticated using `gcloud auth list`.
    - If neither service account is authenticated, attempts to authenticate using key files located at `/etc/firedancer-scratch-bucket-key.json` and `/etc/firedancer-ci-78fff3e07c8b.json`.
    - Uses `gcloud storage cat` to download the ledger file from the specified Google Cloud Storage bucket and pipes it to `tar` to extract it into the `DUMP` directory.
- **Output**: No explicit return value; the function performs side effects by downloading and extracting files.



---
Made with ❤️ by [Driver](https://www.driver.ai/)