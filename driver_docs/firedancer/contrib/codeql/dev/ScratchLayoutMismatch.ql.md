<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

A CodeQL query to detect mismatches between FD_LAYOUT and FD_SCRATCH macros in C++ code.

# Purpose
The code is a query script designed to identify mismatches between specific macro invocations related to layout and scratch operations in a codebase. It focuses on the macros `FD_LAYOUT_APPEND`, `FD_LAYOUT_INIT`, `FD_LAYOUT_FINI`, and their corresponding scratch allocation macros `FD_SCRATCH_ALLOC_APPEND`, `FD_SCRATCH_ALLOC_INIT`, `FD_SCRATCH_ALLOC_FINI`. The script performs a syntactic comparison to detect inconsistencies between these macros, which can lead to potential issues in the code.

The script defines two main classes: `LayoutOption` and `ScratchOption`, both extending `MacroInvocation`. These classes encapsulate the logic for identifying the relevant macro invocations and determining their relative positions in the code. The `LayoutOption` class includes methods to find macros located above or below a given macro in the same file, ensuring that no other macros intervene. It also includes a `matches` predicate to compare the syntax of layout and scratch macros. Similarly, the `ScratchOption` class identifies scratch macros and checks their positions relative to layout macros.

The script concludes with a query that selects `ScratchOption` instances that do not have a matching `LayoutOption`. It issues a warning message indicating that the `FD_SCRATCH_ALLOC_*` macros do not match the `FD_LAYOUT_*` macros. This functionality is useful for developers to ensure consistency and correctness in the use of these macros within their codebase.
# Imports and Dependencies

---
- `cpp`
- `filter`


# Data Structures

---
### LayoutOption
- **Type**: ``class``
- **Members**:
    - ``getAbove``: Finds a `LayoutOption` instance located above the current instance in the same file.
    - ``getBelow``: Finds a `LayoutOption` instance located below the current instance in the same file.
    - ``syntaxCompare``: Compares the expanded arguments of two `LayoutOption` instances at a specified index.
    - ``matches``: Checks if a `ScratchOption` instance matches the current `LayoutOption` instance based on macro names and argument syntax.
- **Description**: Represents a macro invocation for layout options, specifically handling macros like `FD_LAYOUT_APPEND`, `FD_LAYOUT_INIT`, and `FD_LAYOUT_FINI`. It provides methods to find related `LayoutOption` instances above or below the current instance in the same file and to compare syntax with `ScratchOption` instances to identify mismatches.


---
### ScratchOption
- **Type**: ``class``
- **Members**:
    - ``ScratchOption``: Represents a macro invocation for scratch allocation macros.
    - ``ScratchOption()``: Initializes the `ScratchOption` with specific macro names and checks if the location is included.
    - ``getAbove()``: Finds a `LayoutOption` above the current `ScratchOption` in the same file.
    - ``getBelow()``: Finds a `LayoutOption` below the current `ScratchOption` in the same file.
- **Description**: Represents a macro invocation for scratch allocation macros, specifically `FD_SCRATCH_ALLOC_APPEND`, `FD_SCRATCH_ALLOC_INIT`, and `FD_SCRATCH_ALLOC_FINI`. It provides methods to find corresponding `LayoutOption` instances that are located above or below the current instance in the same file, ensuring that the macros are correctly aligned in terms of their syntactic structure.



---
Made with ❤️ by [Driver](https://www.driver.ai/)