<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Detects accidental use of '=' instead of '==' in C++ code, focusing on reliability and correctness.

# Purpose
This code is a static analysis query designed to identify potential errors in C++ code where the assignment operator `=` is used instead of the comparison operator `==`. The query is part of a static analysis tool that checks for reliability and correctness issues in C++ code. It specifically targets instances where an assignment is used in a context that controls a boolean expression, such as within conditional statements or logical operations, which can lead to unintended behavior if the programmer's intent was to perform a comparison.

The code defines several classes and predicates to implement this functionality. The `UndefReachability` class extends `StackVariableReachability` to determine if a stack variable is used before it is defined, which is crucial for identifying erroneous assignments. The `BooleanControllingAssignment` class and its subclasses, `BooleanControllingAssignmentInExpr` and `BooleanControllingAssignmentInStmt`, represent assignments that control boolean expressions. These classes include logic to determine if such assignments are permissible or if they should be flagged as potential errors.

The query uses predicates like `candidateResult` and `candidateVariable` to filter and identify assignments that are likely errors. The `select` statement at the end of the code outputs the identified assignments with a message indicating the potential misuse of the `=` operator. This query is intended to be part of a larger static analysis framework, providing developers with insights into possible coding mistakes that could affect the reliability and correctness of their C++ programs.
# Imports and Dependencies

---
- `cpp`
- `semmle.code.cpp.controlflow.StackVariableReachability`
- `filter`


# Data Structures

---
### UndefReachability
- **Type**: ``class``
- **Members**:
    - ``UndefReachability``: Extends the `StackVariableReachability` class to track the reachability of stack variables that are not initialized.
    - ``isSource``: Overrides the predicate to identify source nodes where a stack variable is declared without initialization.
    - ``isSink``: Overrides the predicate to identify sink nodes where a stack variable is accessed.
    - ``isBarrier``: Overrides the predicate to identify barrier nodes where a stack variable is assigned a value.
- **Description**: Represents a specialized class that extends `StackVariableReachability` to determine the reachability of uninitialized stack variables in control flow graphs. It defines predicates to identify source nodes (declaration without initialization), sink nodes (access points), and barrier nodes (assignment points) for stack variables, ensuring that variables are tracked from their declaration to their first use or assignment.


---
### BooleanControllingAssignment
- **Type**: ``abstract class``
- **Members**:
    - ``isWhitelisted``: An abstract predicate that determines if the assignment is allowed.
- **Description**: Represents an abstract class that extends `AssignExpr` and is used to identify assignments that control boolean expressions, where the assignment might be mistaken for a comparison. It includes an abstract predicate `isWhitelisted` to determine if the assignment is permissible under certain conditions.


---
### BooleanControllingAssignmentInExpr
- **Type**: ``class``
- **Members**:
    - `BooleanControllingAssignmentInExpr`: Represents a boolean controlling assignment within an expression.
    - `BooleanControllingAssignmentInExpr()`: Constructor that checks if the assignment is part of a logical operation or a conditional expression.
    - `isWhitelisted()`: Predicate that determines if the assignment is allowed based on parenthesization and logical operation context.
- **Description**: Represents a boolean controlling assignment that occurs within an expression, specifically when the assignment is part of a logical operation or a conditional expression. The class includes a constructor to identify the context of the assignment and an overridden predicate `isWhitelisted` to determine if the assignment is permissible based on specific conditions, such as parenthesization and the presence of logical operations.


---
### BooleanControllingAssignmentInStmt
- **Type**: ``class``
- **Members**:
    - ``BooleanControllingAssignmentInStmt``: Represents a boolean controlling assignment within a statement.
    - ``BooleanControllingAssignmentInStmt()``: Constructor that checks if the assignment is in the condition of an `IfStmt`, `ForStmt`, `WhileStmt`, or `DoStmt`.
    - ``isWhitelisted()``: Predicate that checks if the assignment is parenthesized.
- **Description**: Represents a boolean controlling assignment that occurs within the condition of control flow statements such as `if`, `for`, `while`, or `do` statements. It extends the `BooleanControllingAssignment` class and includes a constructor to identify its presence in specific control flow conditions. The `isWhitelisted` predicate determines if the assignment is parenthesized, which affects its treatment in the analysis.


# Functions

---
### getComparisonOperand
Retrieves an operand from a `BinaryLogicalOperation` expression.
- **Inputs**:
    - `op`: A `BinaryLogicalOperation` object from which to retrieve an operand.
- **Logic and Control Flow**:
    - Call the `getAnOperand` method on the `BinaryLogicalOperation` object `op`.
- **Output**: An `Expr` object representing one of the operands of the `BinaryLogicalOperation`.



---
Made with ❤️ by [Driver](https://www.driver.ai/)