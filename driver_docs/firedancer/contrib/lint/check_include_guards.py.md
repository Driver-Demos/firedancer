<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Verifies C/C++ header include guards against Firedancer code style.

# Purpose
This script checks C/C++ header files to ensure that their include guards conform to a specific naming convention used in the Firedancer code style. The script recursively searches for header files with the `.h` extension within the `src` directory, excluding files with `.pb.h` in their names. For each header file, it verifies the presence and correctness of the include guards. The expected format for the include guard is `HEADER_fd_` followed by the file path, with periods, slashes, and hyphens replaced by underscores.

The script defines a function [`check_file`](<#check_file>) that reads each header file and checks the first non-comment, non-whitespace lines for the `#ifndef` and `#define` directives. It compares the include guard name in the file with the expected name based on the Firedancer style. If the include guard is missing or does not match the expected format, the script prints a message indicating the discrepancy. The [`main`](<#main>) function orchestrates the file search and checking process, and the script changes the working directory to the parent directory of the script's location before execution.
# Imports and Dependencies

---
- `pathlib.Path`
- `os`


# Functions

---
### check\_file<!-- {{#callable:firedancer/contrib/lint/check_include_guards.check_file}} -->
[View Source →](<../../../../contrib/lint/check_include_guards.py#L10>)

Verifies if C/C++ header include guards match the expected Firedancer code style.
- **Inputs**:
    - `path`: The file path to the C/C++ header file to check.
- **Logic and Control Flow**:
    - Create the expected include guard name by replacing '.', '/', and '-' in the file path with '_'.
    - Open the file at the given path in read mode.
    - Read lines from the file, skipping lines that are whitespace or start with '/* ' or '// '.
    - Check if the first non-comment line starts with '#ifndef ' and the next line starts with '#define '. If not, print a message indicating the include guard is missing.
    - Compare the substrings of the first two lines after '#ifndef ' and '#define '. If they do not match, exit the function.
    - Check if the include guard name matches the expected guard name. If not, print a message indicating the mismatch.
- **Output**: None. Prints messages to standard output if there are issues with the include guards.


---
### main<!-- {{#callable:firedancer/contrib/lint/check_include_guards.main}} -->
[View Source →](<../../../../contrib/lint/check_include_guards.py#L27>)

Recursively finds and checks C/C++ header files for include guard compliance with Firedancer code style.
- **Inputs**: None
- **Logic and Control Flow**:
    - Uses `Path.rglob` to recursively find all `.h` files in the `./src` directory.
    - Skips files with `.pb.h` in their name.
    - Calls [`check_file`](<#check_file>) on each valid header file to verify include guards.
    - Catches `IOError` exceptions and prints an error message if a file cannot be read.
- **Output**: No return value; prints error messages for files with missing or incorrect include guards.
- **Functions Called**:
    - [`firedancer/contrib/lint/check_include_guards.check_file`](<#check_file>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)