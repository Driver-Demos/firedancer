<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Guide for configuring the Firedancer host operator system using the `fdctl configure` command, detailing stages like `hugetlbfs`, `sysctl`, and `ethtool` settings.

# Purpose
The `fdctl configure` command is used to set up the host operator system for Firedancer, ensuring it runs correctly by configuring various system components. It includes stages such as `hugetlbfs`, `sysctl`, `hyperthreads`, `ethtool-channels`, `ethtool-offloads`, `ethtool-loopback`, and `snapshots`, each serving a specific purpose. The `hugetlbfs` stage reserves large memory pages for performance, while `sysctl` adjusts kernel parameters for optimal operation. The `hyperthreads` stage ensures critical tasks have dedicated CPU cores, and `ethtool` stages configure network device settings to enhance network performance and compatibility. The `snapshots` stage manages the directory for blockchain state snapshots. Each stage has specific privilege requirements and dependencies, and the command can be run in different modes (`init`, `check`, `fini`) to configure, verify, or unconfigure these settings.
# Content Summary
The provided content describes the configuration process for the `fdctl configure` command, which is used to set up the host operator system for the Firedancer application. This command ensures that the system is correctly configured to run Firedancer by performing several tasks, each referred to as a "stage." The stages include configuring memory pages, kernel parameters, CPU core usage, and network device settings.

1. **hugetlbfs**: This stage reserves huge (2MiB) and gigantic (1GiB) memory pages for Firedancer. It involves increasing the number of available pages in the kernel and assigning them to Firedancer by creating specific `hugetlbfs` mounts. This stage requires root privileges and must be performed after every system reboot.

2. **sysctl**: This stage configures kernel parameters to optimize Firedancer's performance. It ensures that certain parameters meet minimum required values, such as file mapping and opening limits. The `init` mode requires root privileges or `CAP_SYS_ADMIN`, while the `fini` mode does not alter kernel parameters.

3. **hyperthreads**: This stage checks if the CPU is hyperthreaded and ensures that critical Firedancer jobs have dedicated cores. It warns the operator if hyperthreaded pairs are online, which could affect performance.

4. **ethtool-channels**: This stage configures network device channels to optimize packet processing using receive side scaling (RSS). It offers three modes: simple, dedicated, and auto, each affecting how network queues are managed. Root privileges are required for this stage.

5. **ethtool-offloads**: This stage disables certain network device offloads, such as generic-receive-offload, which are incompatible with Firedancer's XDP usage. It requires root privileges and is performed once after boot.

6. **ethtool-loopback**: This stage disables `tx-udp-segmentation` for loopback devices to ensure compatibility with Firedancer's network traffic. It requires root privileges and is performed once after boot.

7. **snapshots**: This stage manages the snapshots directory used by validators to catch up with the blockchain state. It creates the directory during initialization and removes it during finalization.

The `fdctl configure` command can be run in different modes (`init`, `check`, `fini`) to configure, verify, or unconfigure these stages. Each stage has specific privilege requirements and dependencies, and some stages must be reconfigured after a system reboot.

---
Made with ❤️ by [Driver](https://www.driver.ai/)