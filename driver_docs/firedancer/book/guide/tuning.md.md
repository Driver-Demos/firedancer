<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Guide for performance tuning of the Firedancer validator, detailing thread assignments, configuration, and benchmarking.

# Purpose
The Firedancer validator configuration file is used to optimize the performance of the validator by managing the allocation of threads and CPU cores to specific tasks, known as tiles. Each tile represents a distinct job, such as network packet handling (`net`), transaction verification (`verify`), and block data distribution (`shred`). The configuration file allows users to adjust the number of threads assigned to these tiles and their CPU core affinities, which is crucial for tuning the validator's performance. The file also includes settings for benchmarking, enabling users to test and measure transaction throughput under different configurations. The configuration is essential for ensuring that the validator operates efficiently, especially under varying network conditions and workloads.
# Content Summary
The provided content describes the configuration and performance tuning of the Firedancer validator, which is a component of a blockchain system. The validator operates using multiple threads, each assigned to specific tasks known as "tiles." There are fifteen distinct types of tiles, each responsible for different functions such as network communication, transaction verification, and data storage. The configuration of these tiles, including their count and CPU core assignment, is crucial for optimizing the validator's performance.

The default configuration is specified in a `default.toml` file, where only certain tiles (`net`, `quic`, `verify`, `bank`, and `shred`) have adjustable counts. The `affinity` string in the configuration file determines the CPU cores assigned to these tiles. The Firedancer validator also uses an Agave process for additional functionalities, with its CPU core assignment specified by the `agave_affinity` string.

Performance tuning involves adjusting the number of tiles and their CPU core assignments to handle transaction throughput effectively. The document provides performance metrics for each tile type on an Intel Icelake core, with recommendations for the `mainnet-beta` network conditions. For instance, the `verify` tile is identified as a bottleneck, suggesting the need for multiple instances to improve performance.

The document also describes a benchmarking tool included with Firedancer, which measures transaction throughput in transactions per second (TPS). This tool helps test local configurations but does not account for network-wide limitations such as consensus limits on block size. The benchmark runs on a single machine and involves generating, signing, and sending transactions to the validator.

A sample configuration for benchmarking on a 32-core AMD EPYC processor is provided, demonstrating how to adjust tile counts and CPU core assignments to achieve higher TPS rates. The document highlights the importance of disabling certain features, like transaction history tracking, to prevent performance bottlenecks during benchmarking.

Overall, the content provides detailed instructions for configuring and tuning the Firedancer validator to optimize its performance in processing blockchain transactions.

---
Made with ❤️ by [Driver](https://www.driver.ai/)