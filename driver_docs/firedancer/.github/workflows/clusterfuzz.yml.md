<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

GitHub Actions workflow for building, testing, and publishing artifacts with fuzzing and coverage.

# Purpose
This GitHub Actions workflow file automates the process of building, testing, and publishing software artifacts for a project named ARFuzz. The workflow is triggered by `workflow_call` and `workflow_dispatch` events, allowing it to be executed manually or as part of another workflow. It defines two main jobs: `solfuzz-build-and-publish` and `ARfuzz-publish`. The `solfuzz-build-and-publish` job compiles shared objects with and without coverage enabled, lists artifacts, and uploads them to GitHub Artifacts. The `ARfuzz-publish` job builds fuzz tests, lists the compiled binary directory structure, and uploads the results. It also dispatches an event to another repository using a POST request to trigger further processing. The workflow uses environment variables and matrix strategies to handle different build configurations and machine types, ensuring flexibility and scalability in the build and deployment process.
# Content Summary
This configuration file is a GitHub Actions workflow file designed to automate the build and publication process for a project named "Publish to ARFuzz." The workflow is triggered by two events: `workflow_call` and `workflow_dispatch`.

The workflow consists of two main jobs: `solfuzz-build-and-publish` and `ARfuzz-publish`.

1. **solfuzz-build-and-publish Job:**
   - **Environment Setup:** The job runs on the latest Ubuntu environment and sets several environment variables, including `MACHINE`, `OBJ_DIR`, `COV_BUILD_DIR`, `COV_OBJ_DIR`, and `EXTRAS`.
   - **Steps:**
     - **Checkout Code:** Uses the `actions/checkout@v5` action to clone the repository with submodules.
     - **Dependencies:** Uses a custom action to set up dependencies with the Clang compiler and additional development tools.
     - **Install Packages:** Updates the package list and installs `zip` and `zstd`.
     - **Build Shared Objects:** Utilizes the `asymmetric-research/clusterfuzz-fuzzbot-builder` action to build shared objects and enable coverage.
     - **Artifact Management:** Lists artifacts, copies source files, and renames coverage files to prevent overwriting.
     - **Upload Artifacts:** Uses `actions/upload-artifact@v5` to upload shared objects and coverage-enabled shared objects with a retention period of 14 days.

2. **ARfuzz-publish Job:**
   - **Matrix Strategy:** The job uses a matrix strategy to handle different machine configurations, specifically `linux_clang_haswell`.
   - **Environment Setup:** Similar to the first job, it runs on Ubuntu and sets environment variables for the machine and additional tools.
   - **Steps:**
     - **Checkout Code:** Again uses `actions/checkout@v5` to clone the repository with submodules.
     - **Dependencies:** Sets up additional development tools.
     - **Install Packages:** Updates the package list and installs `zip` and `zstd`.
     - **Build Fuzz Tests:** Uses the `asymmetric-research/clusterfuzz-fuzzbot-builder` action to build fuzz tests.
     - **List Directory Structure:** Lists the compiled binary directory structure.
     - **Upload Artifacts:** Zips and uploads artifacts to GitHub with a retention period of 10 days.
     - **Get Commit Hash:** Retrieves the current commit hash.
     - **Dispatch AR Fuzz Bundler:** Sends a POST request to trigger the AR Fuzz Bundler with relevant data, including artifact ID, bundle type, commit hash, and run ID.

This workflow automates the build, testing, and artifact management processes, facilitating continuous integration and deployment for the project.

---
Made with ❤️ by [Driver](https://www.driver.ai/)