<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

API for basic URL handling, including parsing and unescaping, with limitations on compliance and features.

# Purpose
The `fd_url.h` file is a C header file that provides a basic API for handling URLs. It defines a structure `fd_url_t` that holds pointers to different components of a URL, such as the scheme, host, port, and the remaining path, query, or fragment. The file includes function prototypes for [`fd_url_parse_cstr`](<#fd_url_parse_cstr>), a simple URL parser that supports only HTTP and HTTPS schemes and does not comply with RFC standards, and [`fd_url_unescape`](<#fd_url_unescape>), which removes percent-encoded characters in a string. The header also defines several error codes, such as `FD_URL_ERR_SCHEME` and `FD_URL_ERR_HOST_OVERSZ`, to indicate specific parsing errors.
# Imports and Dependencies

---
- `../../util/fd_util_base.h`


# Data Structures

---
### fd\_url
- **Type**: ``struct``
- **Members**:
    - `scheme`: Pointer to the scheme part of the URL.
    - `scheme_len`: Length of the scheme part of the URL.
    - `host`: Pointer to the host part of the URL.
    - `host_len`: Length of the host part of the URL, with a maximum of 255 characters.
    - `port`: Pointer to the port part of the URL.
    - `port_len`: Length of the port part of the URL.
    - `tail`: Pointer to the tail part of the URL, which includes path, query, and fragment.
    - `tail_len`: Length of the tail part of the URL.
- **Description**: Holds pointers and lengths for different components of a URL, including scheme, host, port, and tail, to facilitate URL parsing and manipulation.


---
### fd\_url\_t
- **Type**: ``struct``
- **Members**:
    - `scheme`: Pointer to the scheme part of the URL string.
    - `scheme_len`: Length of the scheme part of the URL string.
    - `host`: Pointer to the host part of the URL string.
    - `host_len`: Length of the host part of the URL string, with a maximum of 255.
    - `port`: Pointer to the port part of the URL string.
    - `port_len`: Length of the port part of the URL string.
    - `tail`: Pointer to the tail part of the URL string, which includes path, query, and fragment.
    - `tail_len`: Length of the tail part of the URL string.
- **Description**: Holds pointers and lengths for different components of a URL string, including scheme, host, port, and tail (path, query, fragment).


# Function Declarations (Public API)

---
### fd\_url\_parse\_cstr<!-- {{#callable_declaration:fd_url_parse_cstr}} -->
[View Source →](<../../../../../src/waltz/http/fd_url.h#L33>)

Parses a URL string into its components.
- **Description**: Use this function to parse a URL string into its components such as scheme, host, and port. It supports only 'http' and 'https' schemes and does not handle userinfo or any part of the URL after the authority. The function requires a valid URL string of at least 8 characters and a pre-allocated `fd_url_t` structure to store the parsed components. If the `opt_err` parameter is provided, it will contain an error code on return, indicating success or the type of error encountered.
- **Inputs**:
    - `url`: A pointer to a pre-allocated `fd_url_t` structure where the parsed URL components will be stored. Must not be null.
    - `url_str`: A pointer to the URL string to parse. Must not be null and must point to a string of at least 8 characters.
    - `url_str_len`: The length of the URL string. Must be at least 8 to accommodate the shortest valid URL scheme.
    - `opt_err`: An optional pointer to an integer where the function will store an error code. If null, the function uses an internal variable to store the error code.
- **Output**: Returns a pointer to the `fd_url_t` structure containing the parsed URL components, or null if an error occurs.
- **See Also**: [`fd_url_parse_cstr`](<fd_url.c.md#fd_url_parse_cstr>)  (Implementation)


---
### fd\_url\_unescape<!-- {{#callable_declaration:fd_url_unescape}} -->
[View Source →](<../../../../../src/waltz/http/fd_url.h#L52>)

Undoes percent-encoded escapes in a string in-place.
- **Description**: Use this function to convert percent-encoded characters in a string back to their original form. It processes the input string in-place, meaning the original string is modified directly. This function is useful when you need to decode URL-encoded data. Ensure that the input string is properly null-terminated and that the length parameter accurately reflects the string's length. The function does not handle invalid percent-encoding gracefully, so input should be well-formed.
- **Inputs**:
    - `msg`: A pointer to the string to decode. The string must be null-terminated, and the caller retains ownership. The function modifies this string in-place.
    - `len`: The length of the string to decode. It must accurately reflect the number of characters in the string, excluding the null terminator.
- **Output**: Returns the length of the decoded string.
- **See Also**: [`fd_url_unescape`](<fd_url.c.md#fd_url_unescape>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)