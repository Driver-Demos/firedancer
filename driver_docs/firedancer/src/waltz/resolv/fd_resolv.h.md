<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for DNS query operations with functions for expanding domain names and making queries.

# Purpose
This code is a C header file that declares two functions related to DNS resolution. The [`fd_dn_expand`](<#fd_dn_expand>) function is used to expand a compressed domain name to a full domain name, taking pointers to the base, end, and source of the compressed data, and writing the result to a destination buffer. The [`fd_res_mkquery`](<#fd_res_mkquery>) function constructs a DNS query, given the operation type, domain name, class, and type, and writes the query to a specified buffer. Both functions are marked with the `__attribute__((__visibility__("hidden")))` attribute, indicating they are intended for internal use within the shared library or executable. The file includes a utility header `fd_util_base.h` and uses macros `FD_PROTOTYPES_BEGIN` and `FD_PROTOTYPES_END` to manage function prototype declarations.
# Imports and Dependencies

---
- `../../util/fd_util_base.h`


# Function Declarations (Public API)

---
### fd\_dn\_expand<!-- {{#callable_declaration:fd_dn_expand}} -->
[View Source →](<../../../../../src/waltz/resolv/fd_resolv.h#L6>)

Expands a compressed domain name to a full domain name.
- **Description**: Use this function to convert a compressed domain name from a DNS message into a full domain name. It reads from the `src` pointer within the bounds defined by `base` and `end`, and writes the expanded domain name to the `dest` buffer. Ensure that `space` is sufficient to hold the expanded name, including the null terminator. The function returns the length of the compressed name or -1 if an error occurs, such as when `src` is at or beyond `end`, or if `space` is non-positive.
- **Inputs**:
    - `base`: Pointer to the start of the DNS message. Must not be null.
    - `end`: Pointer to the end of the DNS message. Must not be null and must be greater than or equal to `base`.
    - `src`: Pointer to the start of the compressed domain name within the DNS message. Must not be null and must be less than `end`.
    - `dest`: Pointer to the buffer where the expanded domain name will be written. Must not be null and must have enough space as specified by `space`.
    - `space`: Maximum number of bytes available in `dest` for the expanded domain name, including the null terminator. Must be positive.
- **Output**: Returns the length of the compressed domain name on success, or -1 on error.
- **See Also**: [`fd_dn_expand`](<fd_dn_expand.c.md#fd_dn_expand>)  (Implementation)


---
### fd\_res\_mkquery<!-- {{#callable_declaration:fd_res_mkquery}} -->
[View Source →](<../../../../../src/waltz/resolv/fd_resolv.h#L15>)

Constructs a DNS query message.
- **Description**: Use this function to create a DNS query message with specified parameters. It requires a valid domain name and constructs the query in the provided buffer. Ensure the buffer is large enough to hold the query. The function returns the size of the query on success or -1 on failure. Callers must handle cases where the domain name is too long or the buffer is insufficient.
- **Inputs**:
    - `op`: An integer representing the operation code. Valid values are between 0 and 15 inclusive. Values outside this range result in a return value of -1.
    - `dname`: A pointer to a null-terminated string representing the domain name. The domain name must not end with more than one period. If the domain name is too long, the function returns -1.
    - `class`: An integer representing the class of the query. Valid values are between 0 and 255 inclusive. Values outside this range result in a return value of -1.
    - `type`: An integer representing the type of the query. Valid values are between 0 and 255 inclusive. Values outside this range result in a return value of -1.
    - `buf`: A pointer to a buffer where the constructed query will be stored. The buffer must be large enough to hold the query. The function writes the query to this buffer.
    - `buflen`: An integer representing the length of the buffer. It must be at least as large as the constructed query. If the buffer is too small, the function returns -1.
- **Output**: Returns the size of the constructed query on success, or -1 on failure.
- **See Also**: [`fd_res_mkquery`](<fd_res_mkquery.c.md#fd_res_mkquery>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)