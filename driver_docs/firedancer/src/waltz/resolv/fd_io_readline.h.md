<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Helper functions for buffered line reads from an input stream, including `fd_io_fgets` and `fd_io_fgetc`.

# Purpose
The `fd_io_readline.h` file is a C header file that provides function prototypes for buffered line reading operations. It includes the `fd_io.h` header file from a relative path, indicating a dependency on utility functions for input/output operations. The file declares two functions: [`fd_io_fgets`](<#fd_io_fgets>) and [`fd_io_fgetc`](<#fd_io_fgetc>). The [`fd_io_fgets`](<#fd_io_fgets>) function reads bytes from a buffered input stream into a character array until a specified maximum length is reached, a newline character is encountered, or the end of the file is reached. It returns a pointer to the string or `NULL` if an error occurs, and it updates an error code. The [`fd_io_fgetc`](<#fd_io_fgetc>) function reads a single character from the input stream and also updates an error code. These functions are designed to handle non-blocking input streams with a specified buffer size.
# Imports and Dependencies

---
- `../../util/io/fd_io.h`


# Function Declarations (Public API)

---
### fd\_io\_fgets<!-- {{#callable_declaration:fd_io_fgets}} -->
[View Source →](<../../../../../src/waltz/resolv/fd_io_readline.h#L8>)

Reads a line from a buffered input stream into a string.
- **Description**: Use this function to read a line of text from a buffered input stream into a provided character array. It reads up to `str_max-1` characters or until a newline character is encountered, whichever comes first. The function returns a null-terminated string in `str` and sets `*err` to 0 if a newline is found, or -1 if the end of the file is reached before any bytes are read. If an error occurs, it returns NULL and sets `*err` to a positive error number. Ensure the input stream's buffer size is at least `str_max` and that it operates in non-blocking mode.
- **Inputs**:
    - `str`: A pointer to a character array where the function will store the read line. The array must have space for at least `str_max` characters. The caller retains ownership and must ensure it is not null.
    - `str_max`: The maximum number of characters to read, including the null terminator. Must be at least 1.
    - `istream`: A pointer to a `fd_io_buffered_istream_t` object representing the input stream to read from. Must not be null.
    - `err`: A pointer to an integer where the function will store the error code. Must not be null.
- **Output**: Returns a pointer to the null-terminated string in `str` if successful, or NULL if an error occurs or EOF is reached before reading any bytes.
- **See Also**: [`fd_io_fgets`](<fd_io_readline.c.md#fd_io_fgets>)  (Implementation)


---
### fd\_io\_fgetc<!-- {{#callable_declaration:fd_io_fgetc}} -->
[View Source →](<../../../../../src/waltz/resolv/fd_io_readline.h#L26>)

Reads a character from a buffered input stream.
- **Description**: Use this function to read a single character from a buffered input stream. It attempts to read a character from the stream and returns it as an integer. If the stream is empty, it tries to fetch more data. If an error occurs during this process, or if the end of the stream is reached without reading any character, the function returns -1 and sets the error code accordingly. This function is useful when you need to process input character by character. Ensure that the input stream is properly initialized before calling this function.
- **Inputs**:
    - `istream`: A pointer to a `fd_io_buffered_istream_t` object representing the buffered input stream. Must not be null. The stream should be initialized and ready for reading.
    - `err`: A pointer to an integer where the function will store the error code. Must not be null. The error code is set to 0 on success, or a positive error number if an error occurs, or -1 if the end of the stream is reached without reading any character.
- **Output**: Returns the next character from the input stream as an integer, or -1 if an error occurs or the end of the stream is reached.
- **See Also**: [`fd_io_fgetc`](<fd_io_readline.c.md#fd_io_fgetc>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)