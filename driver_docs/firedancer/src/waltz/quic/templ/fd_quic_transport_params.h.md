<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines and manages QUIC transport parameters, including encoding, decoding, and parameter manipulation functions.

# Purpose
The code is a C header file that defines structures and functions for handling QUIC transport parameters. It provides a macro [`FD_QUIC_TRANSPORT_PARAMS`](<#fd_quic_transport_params>) to define various transport parameters used in QUIC connections, such as `original_destination_connection_id`, `max_idle_timeout_ms`, and `stateless_reset_token`. Each parameter is associated with a unique identifier, type, default value, and description. The file also defines a structure `fd_quic_transport_params` to store these parameters, with macros to set and unset parameter values.

The file includes functions for parsing, encoding, and dumping QUIC transport parameters. The function [`fd_quic_tp_parse_varint`](<#fd_quic_tp_parse_varint>) parses a variable-length integer from a buffer, while [`fd_quic_decode_transport_params`](<#fd_quic_decode_transport_params>) parses a buffer into the transport parameters structure, ignoring unknown parameters. The function [`fd_quic_encode_transport_params`](<#fd_quic_encode_transport_params>) encodes the transport parameters into a buffer, and [`fd_quic_dump_transport_params`](<#fd_quic_dump_transport_params>) outputs the parameters to a specified file stream. This header file is intended to be included in other C files that require manipulation of QUIC transport parameters, providing a structured way to handle these parameters in QUIC protocol implementations.
# Imports and Dependencies

---
- `../../../util/fd_util_base.h`
- `stdio.h`


# Data Structures

---
### fd\_quic\_transport\_params
- **Type**: ``struct``
- **Members**:
    - `original_destination_connection_id`: Stores the original destination connection ID from the first Initial packet sent by the client.
    - `max_idle_timeout_ms`: Specifies the maximum idle timeout in milliseconds.
    - `stateless_reset_token`: Contains a 16-byte token used for verifying a stateless reset.
    - `max_udp_payload_size`: Defines the maximum UDP payload size the endpoint is willing to receive.
    - `initial_max_data`: Indicates the initial maximum amount of data that can be sent on the connection.
    - `initial_max_stream_data_bidi_local`: Specifies the initial flow control limit for locally initiated bidirectional streams.
    - `initial_max_stream_data_bidi_remote`: Specifies the initial flow control limit for peer-initiated bidirectional streams.
    - `initial_max_stream_data_uni`: Specifies the initial flow control limit for unidirectional streams.
    - `initial_max_streams_bidi`: Contains the initial maximum number of bidirectional streams the endpoint can initiate.
    - `initial_max_streams_uni`: Contains the initial maximum number of unidirectional streams the endpoint can initiate.
    - `ack_delay_exponent`: Indicates an exponent used to decode the ACK Delay field in the ACK frame.
    - `max_ack_delay`: Specifies the maximum time in milliseconds the endpoint will delay sending acknowledgments.
    - `disable_active_migration`: Indicates if the endpoint does not support active connection migration.
    - `preferred_address`: Contains the server's preferred address for changing server address at the end of the handshake.
    - `active_connection_id_limit`: Specifies the maximum number of connection IDs the endpoint is willing to store.
    - `initial_source_connection_id`: Stores the value included in the Source Connection ID field of the first Initial packet sent by the endpoint.
    - `retry_source_connection_id`: Stores the value included in the Source Connection ID field of a Retry packet sent by the server.
- **Description**: The `fd_quic_transport_params` struct defines various transport parameters used in QUIC connections, including connection IDs, timeout settings, flow control limits, and other configuration options. Each parameter is associated with a specific type and may have a default value. The struct is used to manage and encode/decode these parameters for QUIC communication.


---
### fd\_quic\_transport\_params\_t
- **Type**: ``struct``
- **Members**:
    - `original_destination_connection_id`: Stores the original destination connection ID from the first Initial packet sent by the client.
    - `max_idle_timeout_ms`: Specifies the maximum idle timeout in milliseconds.
    - `stateless_reset_token`: Contains a 16-byte token used for verifying a stateless reset.
    - `max_udp_payload_size`: Indicates the maximum UDP payload size the endpoint is willing to receive.
    - `initial_max_data`: Holds the initial maximum amount of data that can be sent on the connection.
    - `initial_max_stream_data_bidi_local`: Specifies the initial flow control limit for locally initiated bidirectional streams.
    - `initial_max_stream_data_bidi_remote`: Specifies the initial flow control limit for peer-initiated bidirectional streams.
    - `initial_max_stream_data_uni`: Specifies the initial flow control limit for unidirectional streams.
    - `initial_max_streams_bidi`: Contains the initial maximum number of bidirectional streams the endpoint can initiate.
    - `initial_max_streams_uni`: Contains the initial maximum number of unidirectional streams the endpoint can initiate.
    - `ack_delay_exponent`: Indicates the exponent used to decode the ACK Delay field in the ACK frame.
    - `max_ack_delay`: Specifies the maximum time in milliseconds the endpoint will delay sending acknowledgments.
    - `disable_active_migration`: Indicates if the endpoint does not support active connection migration.
    - `preferred_address`: Contains the server's preferred address for changing server address at the end of the handshake.
    - `active_connection_id_limit`: Specifies the maximum number of connection IDs from the peer that an endpoint is willing to store.
    - `initial_source_connection_id`: Holds the value included in the Source Connection ID field of the first Initial packet sent by the endpoint.
    - `retry_source_connection_id`: Contains the value included in the Source Connection ID field of a Retry packet by the server.
- **Description**: `fd_quic_transport_params_t` is a `struct` that defines various transport parameters for QUIC connections, including connection IDs, timeout settings, flow control limits, and other configuration options. Each parameter is associated with a specific type and may have a default value or constraints. The structure is used to manage and encode/decode these parameters during the QUIC handshake process.


# Functions

---
### fd\_quic\_tp\_parse\_varint<!-- {{#callable:fd_quic_tp_parse_varint}} -->
[View Source →](<../../../../../../src/waltz/quic/templ/fd_quic_transport_params.h#L241>)

Parses a variable-length integer from a buffer and updates the buffer pointer and size.
- **Inputs**:
    - ``buf``: A pointer to a pointer to an unsigned character buffer from which to parse the variable-length integer.
    - ``buf_sz``: A pointer to an unsigned long representing the size of the buffer.
- **Logic and Control Flow**:
    - Check if `*buf_sz` is zero; if true, return the maximum unsigned long value as an error indicator.
    - Calculate the width of the variable-length integer based on the first byte of the buffer.
    - Check if `*buf_sz` is less than the calculated width; if true, return the maximum unsigned long value as an error indicator.
    - Initialize `value` with the lower 6 bits of the first byte of the buffer.
    - Iterate over the remaining bytes up to the calculated width, shifting `value` left by 8 bits and adding the next byte.
    - Advance the buffer pointer by the width of the parsed integer.
    - Decrease `*buf_sz` by the width of the parsed integer.
- **Output**: Returns the parsed variable-length integer as an unsigned long, or the maximum unsigned long value if an error occurs.


# Function Declarations (Public API)

---
### fd\_quic\_dump\_transport\_param\_desc<!-- {{#callable_declaration:fd_quic_dump_transport_param_desc}} -->
[View Source →](<../../../../../../src/waltz/quic/templ/fd_quic_transport_params.h#L202>)

Writes transport parameter descriptions to a file.
- **Description**: Use this function to output descriptions of QUIC transport parameters to a specified file stream. This is useful for logging or debugging purposes when you need to understand the transport parameters being used. Ensure that the file stream is open and writable before calling this function. The function does not validate the file stream, so passing an invalid or closed stream will result in undefined behavior.
- **Inputs**:
    - `out`: A pointer to a `FILE` object where the transport parameter descriptions will be written. Must not be null and should be open for writing. The caller is responsible for managing the file stream, including opening and closing it.
- **Output**: None
- **See Also**: [`fd_quic_dump_transport_param_desc`](<fd_quic_transport_params.c.md#fd_quic_dump_transport_param_desc>)  (Implementation)


---
### fd\_quic\_decode\_transport\_params<!-- {{#callable_declaration:fd_quic_decode_transport_params}} -->
[View Source →](<../../../../../../src/waltz/quic/templ/fd_quic_transport_params.h#L268>)

Decodes transport parameters from a buffer.
- **Description**: Use this function to decode QUIC transport parameters from a given buffer into a `fd_quic_transport_params_t` structure. This function processes the buffer sequentially, extracting each transport parameter and updating the buffer pointer and size accordingly. It returns an error if a parameter size exceeds the remaining buffer size or if a parameter cannot be parsed. Ensure the buffer contains valid encoded transport parameters before calling this function.
- **Inputs**:
    - `params`: A pointer to a `fd_quic_transport_params_t` structure where the decoded transport parameters will be stored. Must not be null.
    - `buf`: A pointer to the buffer containing encoded transport parameters. Must not be null.
    - `buf_sz`: The size of the buffer in bytes. Must be greater than zero.
- **Output**: Returns 0 on success, or -1 if a parameter size is out of bounds or a parameter cannot be parsed.
- **See Also**: [`fd_quic_decode_transport_params`](<fd_quic_transport_params.c.md#fd_quic_decode_transport_params>)  (Implementation)


---
### fd\_quic\_dump\_transport\_params<!-- {{#callable_declaration:fd_quic_dump_transport_params}} -->
[View Source →](<../../../../../../src/waltz/quic/templ/fd_quic_transport_params.h#L274>)

Outputs transport parameters to a specified file stream.
- **Description**: Use this function to print the transport parameters to a specified output stream, such as a file or standard output. This is useful for debugging or logging purposes to understand the current transport parameters being used. Ensure that the `params` pointer is valid and points to a properly initialized `fd_quic_transport_params_t` structure. The `out` parameter must be a valid, open file stream where the output can be written. The function does not modify the input parameters or the file stream.
- **Inputs**:
    - `params`: A pointer to a `fd_quic_transport_params_t` structure containing the transport parameters to be printed. Must not be null.
    - `out`: A pointer to a `FILE` stream where the transport parameters will be printed. Must be a valid, open file stream.
- **Output**: None
- **See Also**: [`fd_quic_dump_transport_params`](<fd_quic_transport_params.c.md#fd_quic_dump_transport_params>)  (Implementation)


---
### fd\_quic\_encode\_transport\_params<!-- {{#callable_declaration:fd_quic_encode_transport_params}} -->
[View Source →](<../../../../../../src/waltz/quic/templ/fd_quic_transport_params.h#L286>)

Encodes QUIC transport parameters into a buffer.
- **Description**: Use this function to encode QUIC transport parameters into a specified buffer. Ensure that the buffer has sufficient size to hold the encoded parameters. The function processes each transport parameter that is marked as present in the `params` structure. It is important to verify that the buffer size is adequate to prevent overflow. The function returns the number of bytes written to the buffer, which can be used to confirm successful encoding.
- **Inputs**:
    - `buf`: A pointer to the buffer where encoded transport parameters will be written. The buffer must be pre-allocated and have enough space to hold the encoded data. The caller retains ownership of the buffer.
    - `buf_sz`: The size of the buffer pointed to by `buf`. It must be large enough to accommodate the encoded transport parameters. If the buffer is too small, the function may not encode all parameters.
    - `params`: A pointer to a `fd_quic_transport_params_t` structure containing the transport parameters to encode. Each parameter that is marked as present will be encoded. The caller retains ownership of this structure.
- **Output**: Returns the number of bytes written to the buffer. This indicates the size of the encoded data.
- **See Also**: [`fd_quic_encode_transport_params`](<fd_quic_transport_params.c.md#fd_quic_encode_transport_params>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)