<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for encoding and decoding IPv4 and UDP headers in the QUIC protocol.

# Purpose
The code is a C header file that provides functions for encoding and decoding IPv4 and UDP headers. It includes several other header files that define structures and types used in the QUIC protocol implementation. The file defines inline functions such as `fd_quic_decode_ip4`, [`fd_quic_encode_ip4`](<#fd_quic_encode_ip4>), `fd_quic_decode_udp`, and [`fd_quic_encode_udp`](<#fd_quic_encode_udp>). These functions handle the conversion of network headers between host byte order and network byte order, which is necessary for network communication.

The functions in this file are designed to work with IPv4 and UDP headers, ensuring that they are correctly formatted for transmission over a network. The file uses macros and types defined in the included headers to perform operations like byte-swapping and memory copying. The functions return the size of the processed header or a failure code if the provided buffer size is insufficient. This header file is part of a larger QUIC protocol implementation, as indicated by the inclusion of other QUIC-related headers.
# Imports and Dependencies

---
- `fd_quic_proto_structs.h`
- `fd_quic_common.h`
- `fd_quic_types.h`
- `templ/fd_quic_parsers_decl.h`
- `templ/fd_quic_templ.h`
- `templ/fd_quic_frames_templ.h`
- `templ/fd_quic_undefs.h`
- `templ/fd_quic_templ_dump_decl.h`
- `templ/fd_quic_max_footprint.h`
- `templ/fd_quic_encoders_decl.h`
- `../../util/net/fd_ip4.h`
- `../../util/net/fd_udp.h`


# Global Variables

---
### fd\_quic\_decode\_ip4
- **Type**: `function`
- **Description**: Parses an IPv4 header from a buffer and stores it in host byte order in the `out` parameter. The function checks if the buffer size is sufficient and if the version and header length are valid before performing the parsing.
- **Use**: Used to decode an IPv4 header from a network buffer into a host byte order structure.


---
### fd\_quic\_decode\_udp
- **Type**: `function`
- **Description**: Decodes a UDP header from a buffer into a `fd_udp_hdr_t` structure in host byte order. The function checks if the buffer size is sufficient to contain a UDP header and performs a byte swap to convert the header to host byte order.
- **Use**: Used to parse UDP headers from network byte order to host byte order.


# Functions

---
### fd\_quic\_encode\_ip4<!-- {{#callable:fd_quic_encode_ip4}} -->
[View Source →](<../../../../../src/waltz/quic/fd_quic_proto.h#L61>)

Encodes an IPv4 header into a buffer for network transmission.
- **Inputs**:
    - ``buf``: A pointer to a buffer where the encoded IPv4 header will be stored.
    - ``sz``: The size of the buffer `buf` in bytes.
    - ``frame``: A pointer to an `fd_ip4_hdr_t` structure representing the IPv4 header in host byte order.
- **Logic and Control Flow**:
    - Check if `sz` is less than the size of `fd_ip4_hdr_t`; if true, return `FD_QUIC_PARSE_FAIL`.
    - Copy the `frame` into a local variable `netorder`.
    - Convert `netorder` to network byte order using `fd_ip4_hdr_bswap`.
    - Copy the network byte order `netorder` into the buffer `buf`.
    - Return the size of `fd_ip4_hdr_t`.
- **Output**: Returns the size of the IPv4 header written to `buf` or `FD_QUIC_PARSE_FAIL` if the buffer size `sz` is insufficient.


---
### fd\_quic\_encode\_udp<!-- {{#callable:fd_quic_encode_udp}} -->
[View Source →](<../../../../../src/waltz/quic/fd_quic_proto.h#L94>)

Encodes a UDP header into a buffer for transmission over the network.
- **Inputs**:
    - ``buf``: A pointer to a buffer where the encoded UDP header will be stored.
    - ``sz``: The size of the buffer `buf` in bytes.
    - ``frame``: A pointer to a `fd_udp_hdr_t` structure representing the UDP header in host byte order.
- **Logic and Control Flow**:
    - Check if the buffer size `sz` is smaller than the size of a UDP header (`sizeof(fd_udp_hdr_t)`).
    - If the buffer size is insufficient, return `FD_QUIC_PARSE_FAIL`.
    - Copy the UDP header from `frame` to a temporary variable `netorder`.
    - Convert the byte order of `netorder` to network byte order using `fd_udp_hdr_bswap`.
    - Copy the converted UDP header from `netorder` to the buffer `buf`.
    - Return the size of the UDP header (`sizeof(fd_udp_hdr_t)`).
- **Output**: Returns the number of bytes written to the buffer, or `FD_QUIC_PARSE_FAIL` if the buffer size is too small.



---
Made with ❤️ by [Driver](https://www.driver.ai/)