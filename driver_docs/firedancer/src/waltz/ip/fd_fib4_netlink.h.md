<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

APIs for importing routes from Linux netlink with error codes and functions for route table operations.

# Purpose
The `fd_fib4_netlink.h` file is a C header file that provides APIs for importing routing information from Linux netlink into a Forwarding Information Base (FIB). It is specifically designed for use on Linux systems, as indicated by the conditional compilation directive `#if defined(__linux__)`. The file defines several error codes prefixed with `FD_FIB_NETLINK_` to indicate the status of netlink import operations, such as success or various types of errors. The primary function, [`fd_fib4_netlink_load_table`](<#fd_fib4_netlink_load_table>), is responsible for mirroring a route table from netlink to a FIB object, using a specified `table_id` to identify the route table. Additionally, the file declares the function [`fd_fib4_netlink_strerror`](<#fd_fib4_netlink_strerror>), which returns a constant string describing the error code passed to it.
# Imports and Dependencies

---
- `fd_fib4.h`
- `fd_netlink1.h`


# Function Declarations (Public API)

---
### fd\_fib4\_netlink\_load\_table<!-- {{#callable_declaration:fd_fib4_netlink_load_table}} -->
[View Source →](<../../../../../src/waltz/ip/fd_fib4_netlink.h#L19>)

Mirrors a route table from netlink to a FIB.
- **Description**: Use this function to import and mirror a specified route table from the Linux netlink interface into a Forwarding Information Base (FIB). Ensure that the `netlink` parameter has a valid and usable rtnetlink socket before calling. The function logs diagnostic information at the debug level and errors at the warning level. It returns success or specific error codes based on the operation's outcome. On success, the FIB may not precisely mirror the route table, as unsupported routes may be converted to blackhole routes. On failure, the FIB will blackhole all packets, and the netlink socket will be ready for the next request unless an I/O error occurs.
- **Inputs**:
    - `fib`: A writable join to a `fd_fib4_t` object where the route table will be mirrored. The caller must ensure this is valid and writable.
    - `netlink`: A pointer to a `fd_netlink_t` object with a usable rtnetlink socket. The caller must ensure this is valid and properly initialized.
    - `table_id`: An unsigned integer specifying the ID of the route table to mirror. Valid values are in the range [0, 2^31). Common values include RT_TABLE_LOCAL (255) and RT_TABLE_MAIN (254).
- **Output**: Returns `FD_FIB_NETLINK_SUCCESS` on success. On failure, returns specific error codes: `FD_FIB_NETLINK_ERR_OOPS`, `FD_FIB_NETLINK_ERR_IO`, `FD_FIB_NETLINK_ERR_INTR`, or `FD_FIB_NETLINK_ERR_SPACE`. The netlink socket is ready for the next request unless `FD_FIB_NETLINK_ERR_IO` occurs.
- **See Also**: [`fd_fib4_netlink_load_table`](<fd_fib4_netlink.c.md#fd_fib4_netlink_load_table>)  (Implementation)


---
### fd\_fib4\_netlink\_strerror<!-- {{#callable_declaration:fd_fib4_netlink_strerror}} -->
[View Source →](<../../../../../src/waltz/ip/fd_fib4_netlink.h#L50>)

Returns a string description of a netlink error code.
- **Description**: Use this function to obtain a human-readable string that describes a specific netlink error code. This is useful for logging or displaying error messages to users. The function maps known error codes to predefined strings and returns "unknown" for any unrecognized error codes. It is important to ensure that the error code provided is one of the defined constants to get a meaningful description.
- **Inputs**:
    - `err`: An integer representing the netlink error code. Valid values are defined constants such as `FD_FIB_NETLINK_SUCCESS`, `FD_FIB_NETLINK_ERR_OOPS`, `FD_FIB_NETLINK_ERR_IO`, `FD_FIB_NETLINK_ERR_INTR`, and `FD_FIB_NETLINK_ERR_SPACE`. If the value is not one of these, the function returns "unknown".
- **Output**: A constant string describing the error code. Returns "success", "oops", "io", "interrupt", "out of space", or "unknown" based on the input error code.
- **See Also**: [`fd_fib4_netlink_strerror`](<fd_fib4_netlink.c.md#fd_fib4_netlink_strerror>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)