<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

A test for SHA-512 pre-processing using the cocotb framework with random message lengths and conditions.

# Purpose
The code is a test suite for a digital design verification environment using the Cocotb framework. It defines an asynchronous test function [`test`](<#test>) that interacts with a device under test (DUT) to verify its behavior. The test initializes input signals `i_w` and `i_v` to zero and sets up a clock signal on the DUT's `clk` line. It also uses the `wd_cocotil` module to manage reset toggling and to monitor signal activity.

The test generates random transactions with varying message lengths and sends them to the DUT. It uses the `wd_cocotil.random_tr` function to create these transactions, which are then appended to the `q_o_sha_pre` list. The test simulates backpressure and random gaps in the input signal flow to test the DUT's handling of such conditions. The transactions are encoded into a `BinaryValue` object, which is then assigned to the DUT's input signals. The test continues until all generated transactions are processed, ensuring that the DUT's output is monitored throughout the process.
# Imports and Dependencies

---
- `random`
- `cocotb`
- `cocotb.clock.Clock`
- `cocotb.triggers.Timer`
- `cocotb.triggers.RisingEdge`
- `cocotb.triggers.ReadOnly`
- `cocotb.binary.BinaryValue`
- `wd_cocotil`


# Functions

---
### test<!-- {{#callable:firedancer/src/wiredancer/sim/sha512_pre/test.test}} -->
[View Source →](<../../../../../../src/wiredancer/sim/sha512_pre/test.py#L11>)

Simulates a testbench for a digital design by generating random transactions and managing signal values.
- **Decorators**: `@cocotb.test`
- **Inputs**:
    - `dut`: The device under test, which is a digital design component that the testbench interacts with.
- **Logic and Control Flow**:
    - Initialize the input signals `i_w` and `i_v` to 0.
    - Create an empty list `q_o_sha_pre` to store transaction data.
    - Start the clock and reset processes using `cocotb.start` and custom utility functions from `wd_cocotil`.
    - Wait for 1024 clock cycles to allow the system to stabilize post-reset.
    - Calculate parameters `W` and `M` based on the device under test's attributes and external metadata.
    - Generate random message lengths and transactions, storing them in `q_o_sha_pre`.
    - For each transaction, manage the message transmission by checking and setting signal values, handling backpressure, and inserting random gaps.
    - Construct a `BinaryValue` object to represent the message and control signals, updating the device under test's input signals accordingly.
    - Continue the process until all messages are sent, then set `i_v` to 0.
    - Wait until all transactions in `q_o_sha_pre` are processed.
- **Output**: No explicit return value; the function operates asynchronously to simulate a testbench environment.



---
Made with ❤️ by [Driver](https://www.driver.ai/)