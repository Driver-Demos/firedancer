<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Documentation for building, using, and running WireDancer on AWS-F1, including SigVerify API and design details.

# Purpose
The document provides detailed instructions and information for building, configuring, and running the WireDancer (WD) functionalities on AWS-F1 series EC2 instances. It outlines the necessary steps to set up the environment, including cloning the AWS-FPGA repository and configuring the FPGA with the WD image. The document also describes the asynchronous API used by WD, which involves pushing requests and receiving results through a mechanism called `tango.mcache`. Additionally, it explains the SigVerify function, which uses hardware acceleration to perform ED25519 signature verification at high throughput. The document includes technical details about the pipeline design and the steps involved in the ED25519 verification process, emphasizing the use of pipelining and parallelism to achieve high throughput while maintaining reasonable latency.
# Content Summary
The provided content is a detailed technical documentation for the WireDancer (WD) functionalities within a software codebase, specifically focusing on its integration with the AWS-F1 series platform and its SigVerify function. Below is a summary of the key functional details:

### Overview
- **WireDancer (WD)**: This directory contains resources for building and using WireDancer functionalities, which are designed to work with AWS-F1 series platforms.
- **Supported Platforms**: The primary supported platform is the AWS-F1 series.
- **Available Functions**: The main function available is SigVerify, which is used for signature verification.

### Using WireDancer (WD) Inside FD
- **Asynchronous API**: WD uses an asynchronous API, leveraging the Tango mcache mechanism to publish results back into FD. Requests are sent using a push model, and results are returned in the same manner.

### WD API Functions
- **`wd_init_pci(wd_wksp_t*, uint64_t slots)`**: Initializes PCIe interfacing with FPGA cards, allowing multiple cards to be specified via the `slots` argument.
- **`wd_free_pci(wd_wksp_t*)`**: Frees PCIe resources.

### Building and Running WD
- **Building for AWS-F1**: Requires an EC2 build machine. The process involves cloning the AWS-FPGA repository, replacing specific files, and rebuilding the project.
- **Running on AWS-F1**: Involves setting up an EC2 F1 machine, cloning the AWS-FPGA repository, installing the SDK, loading the WD image, and configuring and running various components of the FD system.

### WD-SigVerify
- **Purpose**: SigVerify is used for ED25519 signature verification, a computationally intensive task. WD.SigVerify uses hardware acceleration to achieve high throughput with a single FPGA.
- **Throughput**: The AWS-F1 architecture achieves 1000 Kps with one core, compared to 30 Kps on a Skylake 2.4GHz architecture requiring 33 cores.
- **API Functions**:
  - **`wd_ed25519_verify_init_req`**: Initializes the request API, allowing configuration of response handling.
  - **`wd_ed25519_verify_init_resp`**: Initializes the response API.
  - **`wd_ed25519_verify_req`**: Submits a new verification request to the accelerator.

### Design and Implementation
- **Pipeline Design**: The design maximizes throughput by using pipelining and parallelism, compensating for the lower clock speed of FPGAs compared to CPUs.
- **Batchless Parallelism**: Transactions are processed independently and in parallel, without requiring batching.
- **Pipeline Steps**: The verification process is broken into four steps (SHA, SV0, SV1, SV2), each optimized for performance and throughput.

### Pipeline and Algorithm Details
- **Pipeline Design**: Utilizes a credit-based chain link system to manage different latency and throughput across pipeline stages.
- **Algorithm Steps**:
  - **SHA**: Performs SHA-512 hashing and modular reduction.
  - **SV0**: Handles point decompression and sanity checks.
  - **SV1**: Executes optimized double-scalar double-point multiplication.
  - **SV2**: Conducts point equality checks using modular multiplications.

This documentation provides a comprehensive guide for developers to build, run, and understand the WireDancer functionalities, particularly focusing on the SigVerify process and its integration with AWS-F1 platforms.

---
Made with ❤️ by [Driver](https://www.driver.ai/)