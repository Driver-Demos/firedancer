<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines and implements a command to start a development validator using pthreads.

# Purpose
This C source code file defines functions and structures to manage the initialization and execution of a development validator in a multithreaded environment. The [`spawn_agave`](<#spawn_agave>) function creates a new thread using `pthread_create`, which runs the [`agave_main1`](<#agave_main1>) function. This function, in turn, calls [`agave_boot`](<#agave_boot>) with a configuration parameter. The `pthread_setname_np` function assigns a name to the created thread for easier identification. The [`fddev_dev_cmd_fn`](<#fddev_dev_cmd_fn>) function acts as a command handler, invoking `dev_cmd_fn` with the [`spawn_agave`](<#spawn_agave>) function as a parameter. The `fd_action_dev` structure defines an action with metadata such as name, arguments, function pointer, permissions, and a description, which is used to start the development validator.
# Imports and Dependencies

---
- `../../shared_dev/commands/dev.h`
- `errno.h`
- `pthread.h`


# Global Variables

---
### fd\_action\_dev
- **Type**: ``action_t``
- **Description**: Defines an action for starting a development validator with specific parameters and permissions.
- **Use**: Used to configure and execute the 'dev' command in a development environment.


# Functions

---
### agave\_main1<!-- {{#callable:agave_main1}} -->
[View Source →](<../../../../../../src/app/fddev/commands/dev.c#L10>)

Calls the [`agave_boot`](<../../fdctl/commands/run_agave.c.md#agave_boot>) function with the provided arguments and returns `NULL`.
- **Inputs**:
    - `args`: A pointer to the arguments passed to the [`agave_boot`](<../../fdctl/commands/run_agave.c.md#agave_boot>) function, typically of type `config_t`.
- **Logic and Control Flow**:
    - Call the [`agave_boot`](<../../fdctl/commands/run_agave.c.md#agave_boot>) function with `args` as its argument.
    - Return `NULL`.
- **Output**: Returns `NULL` after calling [`agave_boot`](<../../fdctl/commands/run_agave.c.md#agave_boot>).
- **Functions Called**:
    - [`agave_boot`](<../../fdctl/commands/run_agave.c.md#agave_boot>)


---
### spawn\_agave<!-- {{#callable:spawn_agave}} -->
[View Source →](<../../../../../../src/app/fddev/commands/dev.c#L16>)

Creates a new thread to run the `agave_main1` function with the given configuration and sets the thread's name.
- **Inputs**:
    - `config`: A pointer to a `config_t` structure that contains configuration data for the thread.
- **Logic and Control Flow**:
    - Declare a `pthread_t` variable named `pthread`.
    - Call `pthread_create` to create a new thread that runs the `agave_main1` function, passing `config` as an argument.
    - If `pthread_create` fails, log an error message with the error number and description.
    - Call `pthread_setname_np` to set the name of the thread to `fdSolMain`.
    - If `pthread_setname_np` fails, log an error message with the error number and description.
- **Output**: No return value.


---
### fddev\_dev\_cmd\_fn<!-- {{#callable:fddev_dev_cmd_fn}} -->
[View Source →](<../../../../../../src/app/fddev/commands/dev.c#L23>)

Calls the `dev_cmd_fn` function with the provided arguments and a function pointer to `spawn_agave`.
- **Inputs**:
    - `args`: A pointer to an `args_t` structure containing command arguments.
    - `config`: A pointer to a `config_t` structure containing configuration settings.
- **Logic and Control Flow**:
    - Calls the `dev_cmd_fn` function with `args`, `config`, and the function pointer `spawn_agave`.
- **Output**: No direct output; it delegates execution to `dev_cmd_fn`.


# Function Declarations (Public API)

---
### agave\_boot<!-- {{#callable_declaration:agave_boot}} -->
[View Source →](<../../../../../../src/app/fddev/commands/dev.c#L7>)

Boots the Agave validator with the specified configuration.
- **Description**: Use this function to start the Agave validator with a given configuration. It prepares and executes the necessary setup based on the provided configuration parameters. This function must be called with a valid configuration structure that contains all required settings for the validator. It does not return a value and will exit the process if it encounters a critical error during execution. Ensure that the configuration is correctly populated before calling this function.
- **Inputs**:
    - `config`: A pointer to a `config_t` structure containing the configuration settings for the Agave validator. This parameter must not be null and should be fully initialized with valid data before calling the function. The function does not modify the configuration data, and the caller retains ownership.
- **Output**: None
- **See Also**: [`agave_boot`](<../../fdctl/commands/run_agave.c.md#agave_boot>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)