<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

APIs for constructing and configuring a Firedancer topology, including setup functions for various components.

# Purpose
The `topology.h` file defines APIs for constructing and configuring a Firedancer topology. It is a C header file that provides function prototypes for setting up various components of a Firedancer system. The file includes the `fd_config.h` header, which suggests that it relies on shared configuration structures or definitions. The primary purpose of this file is to facilitate the initialization and configuration of different topology elements within a Firedancer application.

The file contains function prototypes for initializing a validator configuration ([`fd_topo_initialize`](<#fd_topo_initialize>)) and setting up various topology components such as banks, funk, progcache, runtime publication, store, and transaction cache. Each setup function takes a `fd_topo_t` pointer and other parameters specific to the component being configured, such as workspace names and resource limits. Additionally, the file provides a function to configure a topology tile ([`fd_topo_configure_tile`](<#fd_topo_configure_tile>)). These functions are intended to be used by other parts of the Firedancer application to construct and manage the system's topology, ensuring that all components are correctly initialized and configured according to the specified parameters.
# Imports and Dependencies

---
- `../shared/fd_config.h`


# Function Declarations (Public API)

---
### setup\_topo\_bank\_hash\_cmp<!-- {{#callable_declaration:setup_topo_bank_hash_cmp}} -->
[View Source →](<../../../../../src/app/firedancer/topology.h#L16>)

Sets up a bank hash comparison object in the topology.
- **Description**: Use this function to create and configure a bank hash comparison object within a given topology. This function requires a valid topology object and a workspace name to identify the specific configuration. Ensure that the topology object is properly initialized before calling this function. The function returns a pointer to the created topology object, which can be used for further operations or configuration.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` object representing the topology. Must not be null and should be initialized before use.
    - `wksp_name`: A constant character pointer representing the name of the workspace. Must not be null and should point to a valid, null-terminated string.
- **Output**: Returns a pointer to an `fd_topo_obj_t` object representing the bank hash comparison setup. If the operation fails, the return value may be null.
- **See Also**: [`setup_topo_bank_hash_cmp`](<topology.c.md#setup_topo_bank_hash_cmp>)  (Implementation)


---
### setup\_topo\_banks<!-- {{#callable_declaration:setup_topo_banks}} -->
[View Source →](<../../../../../src/app/firedancer/topology.h#L19>)

Configures a topology object for bank management.
- **Description**: Use this function to set up a topology object for managing banks within a Firedancer topology. It requires a valid topology object and workspace name. The function also sets properties for maximum live slots and fork width, which are essential for bank configuration. Ensure that the `topo` parameter is properly initialized before calling this function. The function returns a pointer to the configured topology object, which can be used for further operations.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must be initialized and not null.
    - `wksp_name`: A constant character pointer representing the workspace name. Must not be null.
    - `max_live_slots`: An unsigned long integer specifying the maximum number of live slots. Must be a valid non-negative value.
    - `max_fork_width`: An unsigned long integer specifying the maximum fork width. Must be a valid non-negative value.
- **Output**: Returns a pointer to an `fd_topo_obj_t` structure representing the configured bank topology object.
- **See Also**: [`setup_topo_banks`](<topology.c.md#setup_topo_banks>)  (Implementation)


---
### setup\_topo\_funk<!-- {{#callable_declaration:setup_topo_funk}} -->
[View Source →](<../../../../../src/app/firedancer/topology.h#L25>)

Configures a topology object for a 'funk' component.
- **Description**: Use this function to set up a 'funk' component within a given topology. It requires specifying the workspace name and resource limits, such as maximum account records, database transactions, and heap size in GiB. This function must be called with a valid topology object and workspace name. It returns a pointer to the configured topology object, or logs an error if the parameters are invalid or if workspace partition estimation fails. Ensure that the workspace name exists in the topology before calling this function.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `wksp_name`: A constant character pointer representing the name of the workspace. Must not be null and should correspond to an existing workspace in the topology.
    - `max_account_records`: An unsigned long specifying the maximum number of account records. Must be a valid positive number.
    - `max_database_transactions`: An unsigned long specifying the maximum number of database transactions. Must be a valid positive number.
    - `heap_size_gib`: An unsigned long specifying the heap size in GiB. Must be a valid positive number.
- **Output**: Returns a pointer to an `fd_topo_obj_t` structure representing the configured 'funk' component. Logs an error and does not return if parameters are invalid or if workspace partition estimation fails.
- **See Also**: [`setup_topo_funk`](<topology.c.md#setup_topo_funk>)  (Implementation)


---
### setup\_topo\_progcache<!-- {{#callable_declaration:setup_topo_progcache}} -->
[View Source →](<../../../../../src/app/firedancer/topology.h#L32>)

Sets up a program cache in the topology.
- **Description**: Use this function to configure a program cache within a given topology. It requires a valid topology object and workspace name. The function sets parameters for cache entries, database transactions, and heap size. Ensure that the heap size is sufficient to accommodate the calculated footprint based on the cache and transaction limits. This function returns a topology object representing the program cache, which can be used for further operations.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `wksp_name`: A string representing the name of the workspace. Must not be null.
    - `max_cache_entries`: An unsigned long specifying the maximum number of cache entries. Must be a valid number.
    - `max_database_transactions`: An unsigned long specifying the maximum number of database transactions. Must be a valid number.
    - `heap_size_gib`: An unsigned long specifying the heap size in GiB. Must be large enough to accommodate the required footprint.
- **Output**: Returns a pointer to an `fd_topo_obj_t` representing the configured program cache.
- **See Also**: [`setup_topo_progcache`](<topology.c.md#setup_topo_progcache>)  (Implementation)


---
### setup\_topo\_store<!-- {{#callable_declaration:setup_topo_store}} -->
[View Source →](<../../../../../src/app/firedancer/topology.h#L44>)

Creates a topology store object and sets its properties.
- **Description**: Use this function to create a topology store object within a given topology and set its properties. This function is useful when you need to configure a store object with specific parameters such as `fec_max` and `part_cnt`. Ensure that the `topo` parameter is a valid pointer to a `fd_topo_t` structure and that `wksp_name` is a valid string. The function returns a pointer to the created `fd_topo_obj_t` object, which represents the store in the topology.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `wksp_name`: A constant character pointer representing the workspace name. Must be a valid, null-terminated string.
    - `fec_max`: An unsigned long integer specifying the maximum FEC value for the store. Must be a valid unsigned long.
    - `part_cnt`: An unsigned integer specifying the partition count for the store. Must be a valid unsigned integer.
- **Output**: Returns a pointer to an `fd_topo_obj_t` object representing the created store. The function will return null if the creation fails.
- **See Also**: [`setup_topo_store`](<topology.c.md#setup_topo_store>)  (Implementation)


---
### setup\_topo\_txncache<!-- {{#callable_declaration:setup_topo_txncache}} -->
[View Source →](<../../../../../src/app/firedancer/topology.h#L50>)

Configures a transaction cache in the topology.
- **Description**: Use this function to set up a transaction cache object within a given topology. It requires a valid topology object and a workspace name to identify the cache. The function also needs the maximum number of live slots and the maximum number of transactions per slot to configure the cache. Ensure that the topology object is properly initialized before calling this function. The function returns a pointer to the configured transaction cache object.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` object representing the topology. Must not be null and must be initialized before use.
    - `wksp_name`: A constant character pointer representing the name of the workspace. Must not be null.
    - `max_live_slots`: An unsigned long integer specifying the maximum number of live slots. Must be a valid positive number.
    - `max_txn_per_slot`: An unsigned long integer specifying the maximum number of transactions per slot. Must be a valid positive number.
- **Output**: Returns a pointer to an `fd_topo_obj_t` object representing the configured transaction cache.
- **See Also**: [`setup_topo_txncache`](<topology.c.md#setup_topo_txncache>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)