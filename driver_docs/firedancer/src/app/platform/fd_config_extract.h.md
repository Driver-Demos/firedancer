<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Utilities for querying and validating configuration data from a pod structure, with logging for warnings.

# Purpose
The code in this file is a C header file that provides utility functions for querying and validating configuration data stored in a "pod" structure. A pod is a data structure used to store configuration options, and the functions in this file help extract and validate different types of data from it. The file includes functions to retrieve configuration values as strings, unsigned long integers, unsigned integers, unsigned short integers, boolean values, and floating-point numbers. Each function checks the type of the value stored in the pod and logs a warning if the type is incorrect or if the value is out of bounds.

The file also defines a function, [`fdctl_pod_find_leftover`](<#fdctl_pod_find_leftover>), which recursively checks the pod for any unrecognized configuration options and logs warnings for each. This function is useful for identifying configuration options that are not processed by the application, helping users to correct or update their configuration files. The header file includes necessary dependencies from other utility files and uses macros to manage function prototypes. The functions are designed to be used internally within the application to ensure that configuration data is correctly interpreted and validated.
# Imports and Dependencies

---
- `../../util/fd_util.h`
- `../../util/pod/fd_pod.h`


# Functions

---
### fdctl\_cfg\_get\_cstr\_<!-- {{#callable:fdctl_cfg_get_cstr_}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L19>)

Copies a C-string from a `fd_pod_info_t` structure to a provided buffer if the string is valid and fits within the buffer size.
- **Inputs**:
    - `out`: A pointer to a character array where the C-string will be copied.
    - `out_sz`: The size of the output buffer `out`.
    - `info`: A pointer to a `fd_pod_info_t` structure containing the C-string to be copied.
    - `path`: A string representing the path used for logging purposes.
- **Logic and Control Flow**:
    - Check if `info->val_type` is `FD_POD_VAL_TYPE_CSTR`; if not, log a warning and return 0.
    - Retrieve the C-string from `info->val` and calculate its length including the null terminator.
    - Check if the length of the C-string exceeds `out_sz`; if so, log a warning and return 0.
    - Copy the C-string to the `out` buffer using `fd_memcpy`.
    - Return 1 to indicate success.
- **Output**: Returns 1 if the C-string is successfully copied to the output buffer, otherwise returns 0.


---
### fdctl\_cfg\_get\_ulong<!-- {{#callable:fdctl_cfg_get_ulong}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L41>)

Extracts an unsigned long integer from a `fd_pod_info_t` structure based on its value type.
- **Inputs**:
    - `out`: A pointer to an unsigned long where the extracted value will be stored.
    - `out_sz`: The size of the output buffer, which is not used in this function.
    - `info`: A pointer to a `fd_pod_info_t` structure containing the value to extract.
    - `path`: A string representing the path to the value, used for logging purposes.
- **Logic and Control Flow**:
    - Initialize a variable `num` to store the extracted value.
    - Check the `val_type` of `info`.
    - If `val_type` is `FD_POD_VAL_TYPE_LONG`, decode the value as an unsigned long, convert it to a signed long, and check if it is negative.
    - If the value is negative, log a warning and return 0.
    - If the value is not negative, cast it to an unsigned long.
    - If `val_type` is `FD_POD_VAL_TYPE_ULONG`, decode the value directly as an unsigned long.
    - If `val_type` is neither, log a warning and return 0.
    - Store the extracted value in `out` and return 1.
- **Output**: Returns 1 if the extraction is successful, otherwise returns 0.


---
### fdctl\_cfg\_get\_uint<!-- {{#callable:fdctl_cfg_get_uint}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L70>)

Converts a value from a configuration pod to an unsigned integer if it is within bounds.
- **Inputs**:
    - `out`: A pointer to an unsigned integer where the result will be stored.
    - `out_sz`: The size of the output buffer, marked as unused.
    - `info`: A pointer to a `fd_pod_info_t` structure containing the configuration data.
    - `path`: A string representing the path to the configuration value within the pod.
- **Logic and Control Flow**:
    - Calls [`fdctl_cfg_get_ulong`](<#fdctl_cfg_get_ulong>) to retrieve a value from the configuration pod as an unsigned long.
    - Checks if the retrieved value exceeds `UINT_MAX`.
    - Logs a warning and returns 0 if the value is out of bounds.
    - Casts the value to an unsigned integer and stores it in `out`.
    - Returns 1 to indicate success.
- **Output**: Returns 1 if the conversion is successful and the value is within bounds, otherwise returns 0.
- **Functions Called**:
    - [`fdctl_cfg_get_ulong`](<#fdctl_cfg_get_ulong>)


---
### fdctl\_cfg\_get\_ushort<!-- {{#callable:fdctl_cfg_get_ushort}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L85>)

Converts a configuration value to an unsigned short integer if it is within bounds.
- **Inputs**:
    - `out`: A pointer to a `ushort` where the function will store the converted value.
    - `out_sz`: The size of the output buffer, marked as unused in this function.
    - `info`: A pointer to a `fd_pod_info_t` structure containing the configuration value to convert.
    - `path`: A string representing the path to the configuration value, used for logging purposes.
- **Logic and Control Flow**:
    - Calls [`fdctl_cfg_get_ulong`](<#fdctl_cfg_get_ulong>) to retrieve the configuration value as an `ulong` and stores it in `num`.
    - Checks if the retrieved `num` is greater than `USHORT_MAX`.
    - Logs a warning and returns 0 if `num` is out of bounds.
    - Casts `num` to `ushort` and stores it in the location pointed to by `out`.
    - Returns 1 to indicate successful conversion.
- **Output**: Returns 1 if the conversion is successful, otherwise returns 0.
- **Functions Called**:
    - [`fdctl_cfg_get_ulong`](<#fdctl_cfg_get_ulong>)


---
### fdctl\_cfg\_get\_bool<!-- {{#callable:fdctl_cfg_get_bool}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L100>)

Converts a POD integer value to a boolean and stores it in the output parameter.
- **Inputs**:
    - `out`: A pointer to an integer where the function will store the converted boolean value.
    - `out_sz`: An unused parameter, typically for size, marked with `FD_PARAM_UNUSED`.
    - `info`: A pointer to a `fd_pod_info_t` structure containing the POD value to convert.
    - `path`: A string representing the path to the POD value, used for logging purposes.
- **Logic and Control Flow**:
    - Check if `info->val_type` is `FD_POD_VAL_TYPE_INT`; if not, log a warning and return 0.
    - Decode the unsigned long value from `info->val` using `fd_ulong_svw_dec`.
    - Convert the decoded unsigned long to an integer using `fd_int_zz_dec` and store it in `*out`.
    - Return 1 to indicate success.
- **Output**: Returns 1 if the conversion is successful, otherwise returns 0.


---
### fdctl\_cfg\_get\_float<!-- {{#callable:fdctl_cfg_get_float}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L114>)

Converts a value from a `fd_pod_info_t` structure to a float and stores it in the provided output variable.
- **Inputs**:
    - `out`: A pointer to a float where the function will store the converted value.
    - `out_sz`: An unused parameter, typically representing the size of the output buffer.
    - `info`: A pointer to a `fd_pod_info_t` structure containing the value to convert.
    - `path`: A string representing the path to the value, used for logging purposes.
- **Logic and Control Flow**:
    - Check the `val_type` of the `info` structure to determine the type of value stored.
    - If the value type is `FD_POD_VAL_TYPE_LONG`, decode the value as an unsigned long, convert it to a signed long, check if it is negative, and if not, cast it to a float.
    - If the value type is `FD_POD_VAL_TYPE_ULONG`, decode the value as an unsigned long and cast it to a float.
    - If the value type is `FD_POD_VAL_TYPE_FLOAT`, load the float value directly from the `info` structure.
    - If the value type is not recognized, log a warning and return 0.
    - Store the converted float value in the location pointed to by `out`.
    - Return 1 to indicate success.
- **Output**: Returns 1 if the conversion is successful, otherwise returns 0.


# Function Declarations (Public API)

---
### fdctl\_pod\_find\_leftover<!-- {{#callable_declaration:fdctl_pod_find_leftover}} -->
[View Source →](<../../../../../src/app/platform/fd_config_extract.h#L7>)

Logs warnings for unrecognized configuration keys in a pod.
- **Description**: Use this function to identify and log warnings for any unrecognized configuration keys present in a pod after loading configuration files. This helps in ensuring that all configuration options are recognized and valid. It is important to call this function after loading configurations into the pod to verify that no extraneous or incorrect keys are present. The function will log a warning for each unrecognized key found, providing a path to the key within the configuration structure.
- **Inputs**:
    - `pod`: A pointer to the pod structure to be checked for unrecognized keys. Must not be null. The function assumes the pod is already populated with configuration data.
- **Output**: Returns 1 if no unrecognized keys are found, otherwise returns 0 and logs a warning for each unrecognized key.
- **See Also**: [`fdctl_pod_find_leftover`](<fd_config_extract.c.md#fdctl_pod_find_leftover>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)