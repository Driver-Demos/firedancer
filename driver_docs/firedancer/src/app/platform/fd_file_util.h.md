<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Utilities for reading and writing integers to files, directory management, and retrieving executable paths.

# Purpose
This C header file defines a set of utility functions for file operations. It includes functions to read and write unsigned integers (`uint` and `ulong`) from and to files, with error handling through return values and `errno`. The file also provides functions for directory management, such as [`fd_file_util_mkdir_all`](<#fd_file_util_mkdir_all>), which creates directories recursively with specified ownership and permissions, and [`fd_file_util_rmtree`](<#fd_file_util_rmtree>), which removes directory contents recursively. Additionally, [`fd_file_util_self_exe`](<#fd_file_util_self_exe>) retrieves the full path of the current executable, and [`fd_file_util_read_all`](<#fd_file_util_read_all>) reads the entire contents of a file into memory using `mmap`. These functions facilitate common file and directory operations with error handling and are intended for use in applications requiring file manipulation.
# Imports and Dependencies

---
- `../../util/fd_util.h`


# Functions

---
### fd\_file\_util\_write\_uint<!-- {{#callable:fd_file_util_write_uint}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L29>)

Writes an unsigned integer to a specified file path by calling another function that handles unsigned long integers.
- **Inputs**:
    - ``path``: A constant character pointer representing the file path where the unsigned integer will be written.
    - ``value``: An unsigned integer that will be written to the specified file path.
- **Logic and Control Flow**:
    - Calls the [`fd_file_util_write_ulong`](<fd_file_util.c.md#fd_file_util_write_ulong>) function with `path` and `value` as arguments.
    - Returns the result of the [`fd_file_util_write_ulong`](<fd_file_util.c.md#fd_file_util_write_ulong>) function call.
- **Output**: Returns zero on success, or -1 on failure, with `errno` set appropriately.
- **Functions Called**:
    - [`fd_file_util_write_ulong`](<fd_file_util.c.md#fd_file_util_write_ulong>)


# Function Declarations (Public API)

---
### fd\_file\_util\_read\_ulong<!-- {{#callable_declaration:fd_file_util_read_ulong}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L14>)

Read an unsigned long integer from a file.
- **Description**: Use this function to read an unsigned long integer from a file specified by its path. The function expects the file to contain a single line with a valid unsigned long integer followed by a newline or EOF. It returns zero on success and writes the integer to the provided pointer. If the file cannot be opened, read, or does not contain a valid unsigned long integer, the function returns -1 and sets `errno` to indicate the error. Ensure the file path is valid and the pointer to store the value is not null.
- **Inputs**:
    - `path`: A constant character pointer to the file path. Must not be null. The file should be readable and contain a valid unsigned long integer.
    - `value`: A pointer to an unsigned long where the function will store the read value. Must not be null. Caller retains ownership.
- **Output**: Returns 0 on success and writes the unsigned long integer to the provided pointer. Returns -1 on failure and sets `errno`.
- **See Also**: [`fd_file_util_read_ulong`](<fd_file_util.c.md#fd_file_util_read_ulong>)  (Implementation)


---
### fd\_file\_util\_read\_uint<!-- {{#callable_declaration:fd_file_util_read_uint}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L18>)

Reads an unsigned integer from a file.
- **Description**: Use this function to read an unsigned integer from a file specified by the given path. It writes the read value to the provided pointer if successful. The file must contain a single line with a valid unsigned integer followed by EOF or a newline. If the file does not meet these criteria or if the value exceeds the maximum for an unsigned integer, the function returns -1 and sets `errno` to `ERANGE`. Ensure the file path is valid and accessible before calling this function.
- **Inputs**:
    - `path`: A pointer to a null-terminated string specifying the file path. Must not be null. The file should be readable and contain a valid unsigned integer.
    - `value`: A pointer to an unsigned integer where the read value will be stored. Must not be null. The function writes to this location if successful.
- **Output**: Returns 0 on success, with the unsigned integer written to the location pointed to by `value`. Returns -1 on failure, with `errno` set to indicate the error.
- **See Also**: [`fd_file_util_read_uint`](<fd_file_util.c.md#fd_file_util_read_uint>)  (Implementation)


---
### fd\_file\_util\_write\_ulong<!-- {{#callable_declaration:fd_file_util_write_ulong}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L25>)

Writes an unsigned long integer to a specified file path.
- **Description**: Use this function to write an unsigned long integer to a file at the specified path. The function opens the file in write-only mode, creating it if it does not exist, and truncating it if it does. It writes the integer followed by a newline character. If the operation is successful, the function returns zero. If an error occurs, such as failure to open, write, or close the file, the function returns -1 and sets `errno` to indicate the error. Ensure the file path is valid and writable before calling this function.
- **Inputs**:
    - `path`: A pointer to a null-terminated string specifying the file path. Must not be null. The file at this path will be opened in write-only mode, created if it does not exist, and truncated if it does.
    - `value`: The unsigned long integer to write to the file. There are no restrictions on the value itself.
- **Output**: Returns zero on success. On failure, returns -1 and sets `errno` to indicate the error.
- **See Also**: [`fd_file_util_write_ulong`](<fd_file_util.c.md#fd_file_util_write_ulong>)  (Implementation)


---
### fd\_file\_util\_mkdir\_all<!-- {{#callable_declaration:fd_file_util_mkdir_all}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L49>)

Recursively creates directories for a specified path.
- **Description**: Use this function to ensure that all directories in a specified path exist, creating any that do not. It assigns ownership of newly created directories to the specified user and group IDs and sets their permissions to allow read, write, and execute access only for the owner. Existing directories are not modified. If the `is_dir` parameter is non-zero, the function will also attempt to create the final directory in the path. On success, the function returns zero. On failure, it returns -1 and sets `errno` to indicate the error, which could be due to issues with directory creation, ownership assignment, or permission setting. Note that partial directory structures may remain if the function fails partway through.
- **Inputs**:
    - `path`: A null-terminated string representing the directory path to create. Must not be null and should not exceed `PATH_MAX` characters. The caller retains ownership.
    - `uid`: The user ID to assign as the owner of any newly created directories. Must be a valid user ID.
    - `gid`: The group ID to assign as the owner of any newly created directories. Must be a valid group ID.
    - `is_dir`: An integer flag indicating whether to create the final directory in the path. Non-zero to create, zero to skip.
- **Output**: Returns zero on success. On failure, returns -1 and sets `errno` to indicate the error.
- **See Also**: [`fd_file_util_mkdir_all`](<fd_file_util.c.md#fd_file_util_mkdir_all>)  (Implementation)


---
### fd\_file\_util\_rmtree<!-- {{#callable_declaration:fd_file_util_rmtree}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L66>)

Recursively removes directory contents and optionally the directory itself.
- **Description**: Use this function to delete all contents of a specified directory. If the `remove_root` parameter is non-zero, the directory itself is also removed; otherwise, it is left empty. This function is useful for cleaning up directories and their contents. It returns zero on success and -1 on failure, with `errno` set to indicate the error. Be aware that on failure, the directory may be partially deleted, with some files and directories removed and others not.
- **Inputs**:
    - `path`: A string representing the path to the directory whose contents are to be removed. Must not be null. The path should point to a valid directory.
    - `remove_root`: An integer flag indicating whether to remove the directory itself. If non-zero, the directory is removed; if zero, the directory is left empty.
- **Output**: Returns zero on success. On failure, returns -1 and sets `errno` to indicate the error. The directory may be partially modified on failure.
- **See Also**: [`fd_file_util_rmtree`](<fd_file_util.c.md#fd_file_util_rmtree>)  (Implementation)


---
### fd\_file\_util\_self\_exe<!-- {{#callable_declaration:fd_file_util_self_exe}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L77>)

Retrieves the full path of the current executable.
- **Description**: Use this function to obtain the absolute path of the currently running executable. It writes the path into the provided buffer, which must have a size of at least `PATH_MAX` elements. This function is useful when you need to know the location of the executable for operations like logging, configuration, or resource management. It returns an error if it cannot determine the path or if the path exceeds the buffer size, setting `errno` to indicate the specific error.
- **Inputs**:
    - `path`: A buffer with at least `PATH_MAX` elements where the function will write the full path of the current executable. The buffer must be pre-allocated by the caller. If the function fails, the contents of the buffer are undefined.
- **Output**: Returns 0 on success, with the path written to the provided buffer. Returns -1 on failure, with `errno` set to indicate the error.
- **See Also**: [`fd_file_util_self_exe`](<fd_file_util.c.md#fd_file_util_self_exe>)  (Implementation)


---
### fd\_file\_util\_read\_all<!-- {{#callable_declaration:fd_file_util_read_all}} -->
[View Source →](<../../../../../src/app/platform/fd_file_util.h#L86>)

Reads all file contents into a newly mapped memory region.
- **Description**: Use this function to read the entire contents of a file specified by the path into a memory region that is mapped using `mmap`. This function is useful when you need to access the entire file content in memory. It returns a pointer to the mapped memory region on success, or `MAP_FAILED` on failure. The caller must ensure to unmap the memory region when it is no longer needed. The function sets `out_sz` to the size of the file on success; otherwise, the value of `out_sz` is undefined. Ensure the file exists and is readable before calling this function.
- **Inputs**:
    - `path`: A constant character pointer to the file path. The file must exist and be readable. The caller retains ownership of the string.
    - `out_sz`: A pointer to an unsigned long where the function will store the size of the file on success. The pointer must not be null.
- **Output**: Returns a pointer to the mapped memory region containing the file contents on success, or `MAP_FAILED` on failure.
- **See Also**: [`fd_file_util_read_all`](<fd_file_util.c.md#fd_file_util_read_all>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)