<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Network utility functions for interface index retrieval, network namespace management, and IP address acquisition.

# Purpose
This C header file defines a set of utility functions for network operations. The function [`fd_net_util_internet_ifindex`](<#fd_net_util_internet_ifindex>) determines the interface index (`ifindex`) that routes to the public internet, specifically to the IP address 8.8.8.8. The function [`fd_net_util_netns_enter`](<#fd_net_util_netns_enter>) allows a process to enter a specified network namespace, while [`fd_net_util_netns_restore`](<#fd_net_util_netns_restore>) attempts to restore the process to its original network namespace. Additionally, [`fd_net_util_if_addr`](<#fd_net_util_if_addr>) retrieves the IP address of a specified network interface. Each function returns zero on success and -1 on failure, with `errno` set to indicate the error. The file includes `fd_util.h` for utility functions and constants.
# Imports and Dependencies

---
- `../../util/fd_util.h`


# Function Declarations (Public API)

---
### fd\_net\_util\_internet\_ifindex<!-- {{#callable_declaration:fd_net_util_internet_ifindex}} -->
[View Source →](<../../../../../src/app/platform/fd_net_util.h#L17>)

Finds the network interface index for routing to a specific public IP.
- **Description**: Use this function to find the index of the network interface that routes to the public internet address 8.8.8.8. It is useful when you need to determine which network interface is used for internet connectivity. The function returns zero on success and writes the interface index to the provided pointer. If no interface is found, or if an error occurs, it returns -1 and sets `errno` to indicate the error. The function must be called with a valid pointer to store the result, and the caller should check the return value to handle errors appropriately.
- **Inputs**:
    - `ifindex`: A pointer to an unsigned integer where the function will store the interface index. Must not be null. The value is undefined if the function fails.
- **Output**: Returns 0 on success with the interface index written to `ifindex`. Returns -1 on failure, with `errno` set to indicate the error.
- **See Also**: [`fd_net_util_internet_ifindex`](<fd_net_util.c.md#fd_net_util_internet_ifindex>)  (Implementation)


---
### fd\_net\_util\_netns\_enter<!-- {{#callable_declaration:fd_net_util_netns_enter}} -->
[View Source →](<../../../../../src/app/platform/fd_net_util.h#L39>)

Attempts to enter a specified network namespace.
- **Description**: Use this function to change the network namespace of the calling process to the one specified by the given name. This is useful when you need to operate within a different network context. If `original_netns` is provided, it may store the file descriptor of the current network namespace, allowing you to return to it later. Be aware that even if the function fails, the process might still have entered the new network namespace, so you should not assume any valid state on failure and may need to abort.
- **Inputs**:
    - `name`: A pointer to a null-terminated string that specifies the name of the network namespace to enter. Must not be null. If the name is too long, the function returns -1 and sets errno to ENAMETOOLONG.
    - `original_netns`: A pointer to an integer where the file descriptor of the original network namespace may be stored. Can be null if you do not need to restore the original namespace later. If not null, the caller is responsible for closing this file descriptor when it is no longer needed.
- **Output**: Returns 0 on success, indicating the process is now in the specified network namespace. Returns -1 on failure, with errno set to indicate the error. The original network namespace file descriptor may be set even if the function fails.
- **See Also**: [`fd_net_util_netns_enter`](<fd_net_util.c.md#fd_net_util_netns_enter>)  (Implementation)


---
### fd\_net\_util\_netns\_restore<!-- {{#callable_declaration:fd_net_util_netns_restore}} -->
[View Source →](<../../../../../src/app/platform/fd_net_util.h#L61>)

Restores the process to the original network namespace.
- **Description**: Use this function to return the process to its original network namespace after it has been changed. This is typically done after a successful call to `fd_net_util_netns_enter`. The function closes the file descriptor to the original network namespace upon success, so the caller does not need to close it. If the function fails, the process might still be in the original network namespace, but the file descriptor might not be closed. In such cases, the caller should not assume a valid state and should consider aborting the operation.
- **Inputs**:
    - `original_fd`: The file descriptor for the original network namespace, obtained from `fd_net_util_netns_enter`. Must be a valid file descriptor. The function closes this descriptor on success.
- **Output**: Returns 0 on success, indicating the process is in the original network namespace. Returns -1 on failure, with `errno` set to indicate the error. The file descriptor might not be closed on failure.
- **See Also**: [`fd_net_util_netns_restore`](<fd_net_util.c.md#fd_net_util_netns_restore>)  (Implementation)


---
### fd\_net\_util\_if\_addr<!-- {{#callable_declaration:fd_net_util_if_addr}} -->
[View Source →](<../../../../../src/app/platform/fd_net_util.h#L71>)

Gets the IP address of a specified network interface.
- **Description**: Use this function to obtain the IP address of a specific network interface. It requires the name of the interface and a pointer to store the resulting IP address. The function returns zero on success, with the IP address written to the provided pointer. If the function fails, it returns -1, sets errno appropriately, and the value pointed to by the address pointer is undefined. Ensure that the interface name is valid and that the pointer for the address is not null before calling this function.
- **Inputs**:
    - `interface`: The name of the network interface to query. Must be a valid, null-terminated string. The function does not modify this string.
    - `addr`: A pointer to an unsigned integer where the function will store the IP address of the interface. Must not be null. The value is undefined if the function fails.
- **Output**: Returns zero on success with the IP address written to the provided pointer. Returns -1 on failure, with errno set appropriately.
- **See Also**: [`fd_net_util_if_addr`](<fd_net_util.c.md#fd_net_util_if_addr>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)