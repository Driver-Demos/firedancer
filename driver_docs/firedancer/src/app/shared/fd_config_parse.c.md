<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Parses and validates configuration data for the Firedancer application, handling various configuration options and paths.

# Purpose
The code is a C source file that provides functionality for extracting and validating configuration data from a data structure referred to as a "pod." It defines several functions, including [`fd_config_extract_podh`](<#fd_config_extract_podh>), [`fd_config_extract_podf`](<#fd_config_extract_podf>), and `fd_config_extract_pod`, which are responsible for populating configuration structures (`fd_configh_t`, `fd_configf_t`, and `fd_config_t`) with values extracted from the pod. The code uses macros such as `CFG_POP`, `CFG_POP1`, `CFG_POP_ARRAY`, and [`CFG_POP_TABLE`](<#cfg_pop_table>) to facilitate the extraction of various configuration parameters, which include paths, network settings, snapshot configurations, and other system parameters.

The file also includes a function [`fd_config_check_configf`](<#fd_config_check_configf>) that performs validation checks on certain configuration paths to ensure they meet specific criteria, such as length and format. Additionally, the code handles configuration renaming through the `CFG_RENAMED` macro, which logs warnings if deprecated configuration options are used. The file is intended to be part of a larger system, as indicated by the inclusion of other header files and the use of external logging and utility functions. The code does not define public APIs or external interfaces but rather focuses on internal configuration management.
# Imports and Dependencies

---
- `../platform/fd_config_extract.h`
- `../platform/fd_config_macros.c`
- `fd_config_private.h`


# Functions

---
### fd\_config\_check\_configf<!-- {{#callable:fd_config_check_configf}} -->
[View Source →](<../../../../../src/app/shared/fd_config_parse.c#L5>)

Validates the `snapshots` path in the `config` structure to ensure it is not too long and is an absolute path.
- **Inputs**:
    - ``config``: A pointer to an `fd_config_t` structure containing configuration data, specifically the `snapshots` path to validate.
    - ``config_f``: A pointer to an `fd_configf_t` structure, which is not used in this function.
- **Logic and Control Flow**:
    - Ignore the `config_f` parameter as it is not used.
    - Check if the length of `config->paths.snapshots` exceeds `PATH_MAX-1UL`.
    - If the length exceeds, log an error indicating the path is too long.
    - Check if `config->paths.snapshots` is not empty and does not start with a '/'.
    - If the path is not absolute, log an error indicating it must start with a '/' character.
- **Output**: No return value; logs errors if the `snapshots` path is invalid.


---
### fd\_config\_extract\_podh<!-- {{#callable:fd_config_extract_podh}} -->
[View Source →](<../../../../../src/app/shared/fd_config_parse.c#L17>)

Extracts configuration settings from a given `pod` and populates the `config` structure with these settings.
- **Inputs**:
    - `pod`: A pointer to an unsigned character array representing the configuration data source.
    - `config`: A pointer to an `fd_configh_t` structure where the extracted configuration settings will be stored.
- **Logic and Control Flow**:
    - Uses `CFG_POP`, `CFG_POP1`, `CFG_POP_ARRAY`, and `CFG_POP1_ARRAY` macros to extract various configuration settings from the `pod` and assign them to corresponding fields in the `config` structure.
    - Handles different types of configuration settings including strings (`cstr`), unsigned integers (`uint`), and booleans (`bool`).
    - Returns the `config` structure after populating it with the extracted settings.
- **Output**: A pointer to the `fd_configh_t` structure containing the extracted configuration settings.


---
### fd\_config\_extract\_podf<!-- {{#callable:fd_config_extract_podf}} -->
[View Source →](<../../../../../src/app/shared/fd_config_parse.c#L76>)

Extracts configuration settings from a given pod and populates a `fd_configf_t` structure.
- **Inputs**:
    - `pod`: A pointer to an unsigned character array representing the pod from which configuration settings are extracted.
    - `config`: A pointer to a `fd_configf_t` structure where the extracted configuration settings will be stored.
- **Logic and Control Flow**:
    - Uses `CFG_POP` macros to extract various configuration settings from the `pod` and assigns them to corresponding fields in the `config` structure.
    - Extracts settings related to gossip, layout, funk, runtime, store, and snapshots, among others.
    - Handles arrays and tables using `CFG_POP_ARRAY` and `CFG_POP_TABLE` macros.
    - Finalizes table extraction with `CFG_POP_TABLE_FINI`.
    - Returns the populated `config` structure.
- **Output**: Returns a pointer to the `fd_configf_t` structure containing the extracted configuration settings.


---
### CFG\_POP\_TABLE<!-- {{#callable:CFG_POP_TABLE}} -->
[View Source →](<../../../../../src/app/shared/fd_config_parse.c#L108>)

Extracts configuration data from a given `pod` and populates the `config` structure with the extracted values.
- **Inputs**:
    - `pod`: A pointer to an `uchar` array representing the configuration data source.
    - `config`: A pointer to an `fd_config_t` structure where the extracted configuration data will be stored.
- **Logic and Control Flow**:
    - Uses `CFG_POP` macros to extract various configuration parameters from the `pod` and assigns them to corresponding fields in the `config` structure.
    - Checks if the `config->is_firedancer` flag is set to determine which set of configuration paths to populate.
    - If `config->is_firedancer` is true, extracts additional paths related to `firedancer` configuration.
    - If `config->is_firedancer` is false, extracts paths related to `frankendancer` configuration using `CFG_POP1` macros.
    - Renames certain configuration options using the `CFG_RENAMED` macro to ensure compatibility with updated configuration paths.
    - Checks for leftover configuration data in the `pod` using `fdctl_pod_find_leftover` and returns `NULL` if any is found.
- **Output**: Returns a pointer to the populated `fd_config_t` structure, or `NULL` if an error occurs during extraction or if leftover configuration data is found.



---
Made with ❤️ by [Driver](https://www.driver.ai/)