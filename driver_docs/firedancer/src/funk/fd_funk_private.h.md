<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Internal APIs for iterating over all funk record and transaction objects in a non-concurrent environment.

# Purpose
The `fd_funk_private.h` file defines internal APIs for iterating over funk record and transaction objects. These APIs are not intended for public use due to their lack of optimization and potential safety concerns. The file includes two main iterator structures: `fd_funk_all_iter_t` and `fd_funk_txn_all_iter_t`. The `fd_funk_all_iter_t` structure is used to iterate over all funk record objects within all transactions, while the `fd_funk_txn_all_iter_t` structure is used to iterate over all funk transaction objects. Both iterators assume that there are no concurrent write accesses to the funk instance during their operation.

The file provides several static functions to manage the iteration process. For `fd_funk_all_iter_t`, functions such as [`fd_funk_all_iter_new`](<#fd_funk_all_iter_new>), [`fd_funk_all_iter_done`](<#fd_funk_all_iter_done>), [`fd_funk_all_iter_next`](<#fd_funk_all_iter_next>), and [`fd_funk_all_iter_ele_const`](<#fd_funk_all_iter_ele_const>) are defined to initialize the iterator, check if the iteration is complete, move to the next element, and access the current element, respectively. Similarly, for `fd_funk_txn_all_iter_t`, functions like [`fd_funk_txn_all_iter_new`](<#fd_funk_txn_all_iter_new>), [`fd_funk_txn_all_iter_done`](<#fd_funk_txn_all_iter_done>), [`fd_funk_txn_all_iter_next`](<#fd_funk_txn_all_iter_next>), and [`fd_funk_txn_all_iter_ele_const`](<#fd_funk_txn_all_iter_ele_const>) are provided. These functions facilitate the traversal of the underlying data structures, ensuring that null entries are skipped during iteration. The file is a C header file and is intended to be included in other source files where these internal iteration functionalities are required.
# Imports and Dependencies

---
- `fd_funk.h`


# Data Structures

---
### fd\_funk\_all\_iter
- **Type**: ``struct``
- **Members**:
    - `rec_map`: Holds the record map for the iterator.
    - `chain_cnt`: Stores the total number of chains in the record map.
    - `chain_idx`: Tracks the current chain index being iterated over.
    - `rec_map_iter`: Holds the current iterator state for the record map.
- **Description**: Iterates over all funk record objects in all funk transactions, assuming no concurrent write accesses to the funk instance during its lifetime. It is not optimized for performance and has a high fixed cost, even for empty databases.


---
### fd\_funk\_all\_iter\_t
- **Type**: ``struct``
- **Members**:
    - `rec_map`: Holds the record map for the iterator.
    - `chain_cnt`: Stores the total number of chains in the record map.
    - `chain_idx`: Tracks the current chain index being iterated over.
    - `rec_map_iter`: Maintains the current position within the record map.
- **Description**: Iterates over all funk record objects in all funk transactions, assuming no concurrent write accesses to the funk instance during its lifetime. It is not optimized for performance and has a high fixed cost, even for empty databases. The structure uses a record map and iterates through chains, skipping null entries to access each record sequentially.


---
### fd\_funk\_txn\_all\_iter\_t
- **Type**: ``struct``
- **Members**:
    - `txn_map`: Holds the transaction map for iteration.
    - `chain_cnt`: Stores the total number of chains in the transaction map.
    - `chain_idx`: Tracks the current chain index during iteration.
    - `txn_map_iter`: Represents the current iterator position in the transaction map.
- **Description**: Iterates over all transaction objects in a funk instance, assuming no concurrent write access during its lifetime. It uses a transaction map to traverse through each transaction, maintaining the current position with `chain_idx` and `txn_map_iter`. The structure is designed to skip null entries and continue iteration until all transactions are processed.


# Functions

---
### fd\_funk\_all\_iter\_skip\_nulls<!-- {{#callable:fd_funk_all_iter_skip_nulls}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L33>)

Skips over null entries in a funk record iterator until a valid entry is found or the end of the chain is reached.
- **Inputs**:
    - `iter`: A pointer to an `fd_funk_all_iter_t` structure, which represents the current state of the funk record iterator.
- **Logic and Control Flow**:
    - Check if `iter->chain_idx` is equal to `iter->chain_cnt`; if true, return immediately as there are no more chains to process.
    - Enter a loop that continues as long as `fd_funk_rec_map_iter_done(iter->rec_map_iter)` returns true, indicating the current iterator position is null or invalid.
    - Increment `iter->chain_idx` to move to the next chain.
    - Check if the updated `iter->chain_idx` is equal to `iter->chain_cnt`; if true, break the loop as there are no more chains to process.
    - Update `iter->rec_map_iter` to point to the iterator of the next chain using `fd_funk_rec_map_iter(&iter->rec_map, iter->chain_idx)`.
- **Output**: None. The function modifies the `iter` structure in place to skip null entries.


---
### fd\_funk\_all\_iter\_new<!-- {{#callable:fd_funk_all_iter_new}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L44>)

Initializes an iterator to traverse all records in a funk instance.
- **Inputs**:
    - ``funk``: A pointer to a `fd_funk_t` structure representing the funk instance to iterate over.
    - ``iter``: A pointer to a `fd_funk_all_iter_t` structure where the iterator state will be stored.
- **Logic and Control Flow**:
    - Copies the record map from the `funk` instance to the `iter` structure.
    - Retrieves the chain count from the record map and stores it in `iter->chain_cnt`.
    - Initializes `iter->chain_idx` to 0 to start iteration from the beginning.
    - Initializes `iter->rec_map_iter` to the first iterator of the record map.
    - Calls [`fd_funk_all_iter_skip_nulls`](<#fd_funk_all_iter_skip_nulls>) to skip any null entries in the record map.
- **Output**: No return value; the function initializes the `iter` structure for iteration.
- **Functions Called**:
    - [`fd_funk_all_iter_skip_nulls`](<#fd_funk_all_iter_skip_nulls>)


---
### fd\_funk\_all\_iter\_done<!-- {{#callable:fd_funk_all_iter_done}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L54>)

Checks if the iteration over all funk records is complete.
- **Inputs**:
    - ``iter``: A pointer to a `fd_funk_all_iter_t` structure representing the current state of the iteration.
- **Logic and Control Flow**:
    - Compare `iter->chain_idx` with `iter->chain_cnt`.
    - Return 1 (true) if `iter->chain_idx` is equal to `iter->chain_cnt`, indicating the iteration is complete.
    - Return 0 (false) otherwise, indicating the iteration is not complete.
- **Output**: An integer value indicating whether the iteration is complete (1) or not (0).


---
### fd\_funk\_all\_iter\_next<!-- {{#callable:fd_funk_all_iter_next}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L59>)

Advances the iterator to the next non-null record in the record map.
- **Inputs**:
    - ``iter``: A pointer to an `fd_funk_all_iter_t` structure, which represents the current state of the iterator over funk record objects.
- **Logic and Control Flow**:
    - Call `fd_funk_rec_map_iter_next` to advance the `rec_map_iter` to the next record in the map.
    - Call [`fd_funk_all_iter_skip_nulls`](<#fd_funk_all_iter_skip_nulls>) to skip over any null records, ensuring the iterator points to a valid record or reaches the end.
- **Output**: No direct output; the function modifies the `iter` structure to point to the next valid record.
- **Functions Called**:
    - [`fd_funk_all_iter_skip_nulls`](<#fd_funk_all_iter_skip_nulls>)


---
### fd\_funk\_all\_iter\_ele\_const<!-- {{#callable:fd_funk_all_iter_ele_const}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L65>)

Returns a constant pointer to the current record in the iteration over all funk records.
- **Inputs**:
    - ``iter``: A pointer to an `fd_funk_all_iter_t` structure, which represents the current state of the iteration over all funk records.
- **Logic and Control Flow**:
    - Calls the function `fd_funk_rec_map_iter_ele_const` with `iter->rec_map_iter` as the argument.
    - Returns the result of the `fd_funk_rec_map_iter_ele_const` function call.
- **Output**: A constant pointer to an `fd_funk_rec_t` structure, representing the current record in the iteration.


---
### fd\_funk\_all\_iter\_ele<!-- {{#callable:fd_funk_all_iter_ele}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L70>)

Returns the current element from the record map iterator within a funk all iterator.
- **Inputs**:
    - ``iter``: A pointer to an `fd_funk_all_iter_t` structure, which contains the state of the iteration over all funk record objects.
- **Logic and Control Flow**:
    - Calls `fd_funk_rec_map_iter_ele` with `iter->rec_map_iter` to retrieve the current element from the record map iterator.
- **Output**: A pointer to an `fd_funk_rec_t` structure, representing the current record element in the iteration.


---
### fd\_funk\_txn\_all\_iter\_skip\_nulls<!-- {{#callable:fd_funk_txn_all_iter_skip_nulls}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L101>)

Skips over null transaction map iterators in a transaction iterator.
- **Inputs**:
    - `iter`: A pointer to an `fd_funk_txn_all_iter_t` structure representing the transaction iterator.
- **Logic and Control Flow**:
    - Check if `chain_idx` is equal to `chain_cnt`; if true, return immediately.
    - Enter a loop that continues while `fd_funk_txn_map_iter_done` returns true for `txn_map_iter`.
    - Increment `chain_idx` and check if it equals `chain_cnt`; if true, break the loop.
    - Update `txn_map_iter` to the next iterator in the transaction map using `fd_funk_txn_map_iter`.
- **Output**: No output is returned; the function modifies the `iter` structure in place.


---
### fd\_funk\_txn\_all\_iter\_new<!-- {{#callable:fd_funk_txn_all_iter_new}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L112>)

Initializes an iterator to traverse all transactions in a funk instance.
- **Inputs**:
    - ``funk``: A pointer to a `fd_funk_t` structure representing the funk instance containing the transactions to iterate over.
    - ``iter``: A pointer to a `fd_funk_txn_all_iter_t` structure that will be initialized to iterate over the transactions.
- **Logic and Control Flow**:
    - Copies the transaction map from the `funk` instance to the `iter` structure.
    - Determines the number of chains in the transaction map and stores it in `iter->chain_cnt`.
    - Initializes `iter->chain_idx` to 0 to start iteration from the first chain.
    - Initializes `iter->txn_map_iter` to the iterator for the first chain in the transaction map.
    - Calls [`fd_funk_txn_all_iter_skip_nulls`](<#fd_funk_txn_all_iter_skip_nulls>) to skip any null entries in the transaction map.
- **Output**: No return value; the function initializes the `iter` structure for iteration.
- **Functions Called**:
    - [`fd_funk_txn_all_iter_skip_nulls`](<#fd_funk_txn_all_iter_skip_nulls>)


---
### fd\_funk\_txn\_all\_iter\_done<!-- {{#callable:fd_funk_txn_all_iter_done}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L122>)

Checks if the iteration over all funk transactions is complete.
- **Inputs**:
    - `iter`: A pointer to a `fd_funk_txn_all_iter_t` structure representing the current state of the transaction iterator.
- **Logic and Control Flow**:
    - Compare `iter->chain_idx` with `iter->chain_cnt`.
    - Return 1 if they are equal, indicating the iteration is complete.
    - Return 0 if they are not equal, indicating the iteration is not complete.
- **Output**: Returns an integer: 1 if the iteration is complete, 0 otherwise.


---
### fd\_funk\_txn\_all\_iter\_next<!-- {{#callable:fd_funk_txn_all_iter_next}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L127>)

Advances the transaction iterator to the next non-null transaction in the transaction map.
- **Inputs**:
    - `iter`: A pointer to an `fd_funk_txn_all_iter_t` structure, which represents the current state of the transaction iterator.
- **Logic and Control Flow**:
    - Call `fd_funk_txn_map_iter_next` to advance the `txn_map_iter` to the next transaction in the map.
    - Call [`fd_funk_txn_all_iter_skip_nulls`](<#fd_funk_txn_all_iter_skip_nulls>) to skip over any null transactions, ensuring the iterator points to a valid transaction or reaches the end.
- **Output**: No direct output is returned, but the `iter` is updated to point to the next valid transaction or the end of the transaction map.
- **Functions Called**:
    - [`fd_funk_txn_all_iter_skip_nulls`](<#fd_funk_txn_all_iter_skip_nulls>)


---
### fd\_funk\_txn\_all\_iter\_ele\_const<!-- {{#callable:fd_funk_txn_all_iter_ele_const}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L133>)

Returns a constant pointer to the current transaction element in the transaction map iterator.
- **Inputs**:
    - `iter`: A pointer to an `fd_funk_txn_all_iter_t` structure, which is an iterator over all funk transaction objects.
- **Logic and Control Flow**:
    - Calls the function `fd_funk_txn_map_iter_ele_const` with `iter->txn_map_iter` as the argument.
    - Returns the result of the `fd_funk_txn_map_iter_ele_const` function call.
- **Output**: A constant pointer to an `fd_funk_txn_t` structure, representing the current transaction element in the iterator.


---
### fd\_funk\_txn\_all\_iter\_ele<!-- {{#callable:fd_funk_txn_all_iter_ele}} -->
[View Source →](<../../../../src/funk/fd_funk_private.h#L138>)

Returns the current transaction element from a transaction iterator.
- **Inputs**:
    - `iter`: A pointer to an `fd_funk_txn_all_iter_t` structure, which represents the iterator over all funk transaction objects.
- **Logic and Control Flow**:
    - Calls the function `fd_funk_txn_map_iter_ele` with `iter->txn_map_iter` as the argument.
    - Returns the result of the `fd_funk_txn_map_iter_ele` function call.
- **Output**: A pointer to an `fd_funk_txn_t` structure, representing the current transaction element in the iterator.



---
Made with ❤️ by [Driver](https://www.driver.ai/)