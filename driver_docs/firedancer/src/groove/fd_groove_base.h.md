<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines error codes, key management, and block alignment for the fd_groove module.

# Purpose
The code is a C header file that defines the foundational components and APIs for a module related to "groove" operations. It includes error code definitions, key management, and block alignment specifications. The error codes, such as `FD_GROOVE_SUCCESS` and `FD_GROOVE_ERR_INVAL`, provide a standardized way to handle and interpret errors within the groove operations. The [`fd_groove_strerror`](<#fd_groove_strerror>) function converts these error codes into human-readable strings, facilitating debugging and error reporting.

The file also defines a `fd_groove_key_t` type, which is a union used to represent keys for groove records. The keys are designed to be compact and can be initialized using functions like `fd_groove_key_init` and [`fd_groove_key_init_ulong`](<#fd_groove_key_init_ulong>). These functions ensure that keys are properly formatted and aligned. Additionally, the file provides utility functions such as [`fd_groove_key_eq`](<#fd_groove_key_eq>) for key comparison and [`fd_groove_key_hash`](<#fd_groove_key_hash>) for generating hash values from keys. The block API specifies that groove data objects are backed by blocks with a specific alignment and footprint, which are both set to 512 bytes, aligning with typical high-performance computing I/O standards.
# Imports and Dependencies

---
- `../util/fd_util.h`


# Data Structures

---
### fd\_groove\_key
- **Type**: ``union``
- **Members**:
    - ``c``: An array of `char` with a size defined by `FD_GROOVE_KEY_FOOTPRINT`.
    - ``uc``: An array of `uchar` with a size defined by `FD_GROOVE_KEY_FOOTPRINT`.
    - ``ul``: An array of `ulong` with a size of `FD_GROOVE_KEY_FOOTPRINT / sizeof(ulong)`.
- **Description**: A `union` that provides multiple ways to access a groove record key, allowing it to be treated as an array of `char`, `uchar`, or `ulong`, with a total footprint defined by `FD_GROOVE_KEY_FOOTPRINT` and aligned according to `FD_GROOVE_KEY_ALIGN`.


---
### fd\_groove\_key\_t
- **Type**: `union`
- **Members**:
    - ``c``: An array of characters with a size defined by `FD_GROOVE_KEY_FOOTPRINT`.
    - ``uc``: An array of unsigned characters with a size defined by `FD_GROOVE_KEY_FOOTPRINT`.
    - ``ul``: An array of unsigned long integers with a size of `FD_GROOVE_KEY_FOOTPRINT / sizeof(ulong)`.
- **Description**: Identifies a groove record using a compact binary key, which can also store a C-style string if it meets specific conditions. The union provides multiple views of the key data, allowing it to be accessed as an array of characters, unsigned characters, or unsigned long integers. The key is aligned to an 8-byte boundary and has a fixed footprint of 32 bytes.


# Functions

---
### fd\_groove\_key\_init\_ulong<!-- {{#callable:fd_groove_key_init_ulong}} -->
[View Source →](<../../../../src/groove/fd_groove_base.h#L87>)

Initializes a `fd_groove_key_t` structure with four `ulong` values.
- **Inputs**:
    - `k`: A pointer to a `fd_groove_key_t` structure to initialize.
    - `k0`: The first `ulong` value to set in the key.
    - `k1`: The second `ulong` value to set in the key.
    - `k2`: The third `ulong` value to set in the key.
    - `k3`: The fourth `ulong` value to set in the key.
- **Logic and Control Flow**:
    - Assigns `k0` to the first element of the `ul` array in the `fd_groove_key_t` structure pointed to by `k`.
    - Assigns `k1` to the second element of the `ul` array in the `fd_groove_key_t` structure pointed to by `k`.
    - Assigns `k2` to the third element of the `ul` array in the `fd_groove_key_t` structure pointed to by `k`.
    - Assigns `k3` to the fourth element of the `ul` array in the `fd_groove_key_t` structure pointed to by `k`.
- **Output**: Returns the pointer `k` to the initialized `fd_groove_key_t` structure.


---
### fd\_groove\_key\_eq<!-- {{#callable:fd_groove_key_eq}} -->
[View Source →](<../../../../src/groove/fd_groove_base.h#L102>)

Tests two `fd_groove_key_t` keys for equality by comparing their `ulong` arrays.
- **Inputs**:
    - `ka`: A pointer to the first `fd_groove_key_t` key to compare.
    - `kb`: A pointer to the second `fd_groove_key_t` key to compare.
- **Logic and Control Flow**:
    - Retrieve the `ulong` arrays from both `ka` and `kb` keys.
    - Perform bitwise XOR operations between corresponding elements of the two `ulong` arrays.
    - Combine the results of the XOR operations using bitwise OR operations.
    - Return the negation of the final combined result, which indicates equality if zero.
- **Output**: Returns 1 if the keys are equal, otherwise returns 0.


---
### fd\_groove\_key\_hash<!-- {{#callable:fd_groove_key_hash}} -->
[View Source →](<../../../../src/groove/fd_groove_base.h#L118>)

Computes a 64-bit hash for a given key using a seed to select the hash function.
- **Inputs**:
    - `ka`: A pointer to a `fd_groove_key_t` structure that contains the key to hash.
    - `seed`: A 64-bit unsigned long integer used to select the specific hash function.
- **Logic and Control Flow**:
    - Extracts the array of unsigned long integers from the key `ka`.
    - XORs each element of the array with the `seed`.
    - Applies the `fd_ulong_hash` function to each XORed result.
    - Combines the hash results using XOR operations to produce the final hash value.
- **Output**: Returns a 64-bit unsigned long integer representing the hash of the key.


# Function Declarations (Public API)

---
### fd\_groove\_strerror<!-- {{#callable_declaration:fd_groove_strerror}} -->
[View Source →](<../../../../src/groove/fd_groove_base.h#L25>)

Converts an error code to a human-readable string.
- **Description**: Use this function to obtain a human-readable description of an error code returned by other functions in the `fd_groove` API. This is useful for logging or displaying error messages to users. The function accepts an error code and returns a constant string describing the error. The returned string is always non-null and has an infinite lifetime, meaning it does not need to be freed or managed by the caller.
- **Inputs**:
    - `err`: An integer representing an error code from the `fd_groove` API. Valid values include `FD_GROOVE_SUCCESS`, `FD_GROOVE_ERR_INVAL`, `FD_GROOVE_ERR_AGAIN`, `FD_GROOVE_ERR_CORRUPT`, `FD_GROOVE_ERR_EMPTY`, `FD_GROOVE_ERR_FULL`, and `FD_GROOVE_ERR_KEY`. If the error code is not recognized, the function returns "unknown".
- **Output**: A constant character pointer to a string describing the error. The string is non-null and has an infinite lifetime.
- **See Also**: [`fd_groove_strerror`](<fd_groove_base.c.md#fd_groove_strerror>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)