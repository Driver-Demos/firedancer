<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions to enable or disable features in a feature set based on various criteria.

# Purpose
The code provides functionality for managing feature flags within a system. It includes functions to enable or disable all features, enable features that have been cleaned up based on a given cluster version, and enable specific one-off features. The functions operate on a data structure of type `fd_features_t`, which likely represents a collection of feature flags. The code uses an iterator pattern to traverse through feature identifiers of type `fd_feature_id_t`, enabling or disabling them as needed.

The functions [`fd_features_enable_all`](<#fd_features_enable_all>) and [`fd_features_disable_all`](<#fd_features_disable_all>) iterate over all features and set their states to enabled or disabled, respectively. The [`fd_features_enable_cleaned_up`](<#fd_features_enable_cleaned_up>) function enables features that have been cleaned up in versions up to and including a specified cluster version, while disabling others. The [`fd_features_enable_one_offs`](<#fd_features_enable_one_offs>) function enables specific features identified by public keys, which are decoded from Base58 strings. This code is part of a broader system for feature management, likely intended to be used as a library or module within a larger application.
# Imports and Dependencies

---
- `fd_features.h`


# Functions

---
### fd\_features\_enable\_all<!-- {{#callable:fd_features_enable_all}} -->
[View Source →](<../../../../../src/flamenco/features/fd_features.c#L3>)

Enables all features by setting their state to `0UL`.
- **Inputs**:
    - ``f``: A pointer to an `fd_features_t` structure that holds the feature states to modify.
- **Logic and Control Flow**:
    - Initialize a feature iterator using `fd_feature_iter_init()` to get the first feature ID.
    - Check if the iteration is complete using `fd_feature_iter_done(id)`; continue if not done.
    - For each feature ID, call `fd_features_set(f, id, 0UL)` to enable the feature by setting its state to `0UL`.
    - Move to the next feature ID using `fd_feature_iter_next(id)` and repeat the process.
- **Output**: No return value; the function modifies the feature states in the `fd_features_t` structure pointed to by `f`.
- **Functions Called**:
    - [`fd_feature_iter_init`](<fd_features.h.md#fd_feature_iter_init>)
    - [`fd_feature_iter_done`](<fd_features.h.md#fd_feature_iter_done>)
    - [`fd_feature_iter_next`](<fd_features.h.md#fd_feature_iter_next>)
    - [`fd_features_set`](<fd_features.h.md#fd_features_set>)


---
### fd\_features\_disable\_all<!-- {{#callable:fd_features_disable_all}} -->
[View Source →](<../../../../../src/flamenco/features/fd_features.c#L12>)

Disables all features in the given feature set.
- **Inputs**:
    - `f`: A pointer to an `fd_features_t` structure representing the feature set to modify.
- **Logic and Control Flow**:
    - Initialize a feature ID iterator using `fd_feature_iter_init()`.
    - Check if the iterator has reached the end using `fd_feature_iter_done()` in a loop.
    - For each feature ID, call `fd_features_set()` to disable the feature by setting it to `FD_FEATURE_DISABLED`.
- **Output**: No return value; the function modifies the feature set pointed to by `f`.
- **Functions Called**:
    - [`fd_feature_iter_init`](<fd_features.h.md#fd_feature_iter_init>)
    - [`fd_feature_iter_done`](<fd_features.h.md#fd_feature_iter_done>)
    - [`fd_feature_iter_next`](<fd_features.h.md#fd_feature_iter_next>)
    - [`fd_features_set`](<fd_features.h.md#fd_features_set>)


---
### fd\_features\_enable\_cleaned\_up<!-- {{#callable:fd_features_enable_cleaned_up}} -->
[View Source →](<../../../../../src/flamenco/features/fd_features.c#L21>)

Enables or disables features based on their cleanup version compared to the given cluster version.
- **Inputs**:
    - ``f``: A pointer to `fd_features_t`, which represents the feature set to modify.
    - ``cluster_version``: A pointer to `fd_cluster_version_t`, which contains the major, minor, and patch version numbers of the cluster.
- **Logic and Control Flow**:
    - Initialize a feature iterator using `fd_feature_iter_init()` to iterate over all feature IDs.
    - For each feature ID, check if its `cleaned_up` version is less than or equal to the `cluster_version`.
    - If the `cleaned_up` version is less than or equal to the `cluster_version`, enable the feature by setting it to `0UL` using `fd_features_set()`.
    - If the `cleaned_up` version is greater than the `cluster_version`, disable the feature by setting it to `FD_FEATURE_DISABLED` using `fd_features_set()`.
- **Output**: No return value; modifies the feature set `f` in place.
- **Functions Called**:
    - [`fd_feature_iter_init`](<fd_features.h.md#fd_feature_iter_init>)
    - [`fd_feature_iter_done`](<fd_features.h.md#fd_feature_iter_done>)
    - [`fd_feature_iter_next`](<fd_features.h.md#fd_feature_iter_next>)
    - [`fd_features_set`](<fd_features.h.md#fd_features_set>)


---
### fd\_features\_enable\_one\_offs<!-- {{#callable:fd_features_enable_one_offs}} -->
[View Source →](<../../../../../src/flamenco/features/fd_features.c#L36>)

Enables specific features in a feature set based on a list of one-off public keys.
- **Inputs**:
    - `f`: A pointer to an `fd_features_t` structure where features will be enabled.
    - `one_offs`: An array of strings representing one-off public keys in Base58 format.
    - `one_offs_cnt`: The number of one-off public keys in the `one_offs` array.
    - `slot`: An unsigned long integer representing the slot number to set for the enabled features.
- **Logic and Control Flow**:
    - Initialize a 32-byte array `pubkey` to store decoded public keys.
    - Iterate over each public key string in the `one_offs` array.
    - Decode each public key string from Base58 format into the `pubkey` array.
    - Initialize a feature ID iterator using `fd_feature_iter_init()`.
    - Iterate over each feature ID using the iterator until `fd_feature_iter_done()` returns true.
    - Compare the decoded `pubkey` with the current feature ID's public key using `memcmp()`.
    - If a match is found, enable the feature in `f` by calling `fd_features_set()` with the feature ID and `slot`, then break out of the loop.
- **Output**: No return value; the function modifies the `fd_features_t` structure pointed to by `f`.
- **Functions Called**:
    - [`fd_feature_iter_init`](<fd_features.h.md#fd_feature_iter_init>)
    - [`fd_feature_iter_done`](<fd_features.h.md#fd_feature_iter_done>)
    - [`fd_feature_iter_next`](<fd_features.h.md#fd_feature_iter_next>)
    - [`fd_features_set`](<fd_features.h.md#fd_features_set>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)