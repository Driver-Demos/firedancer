<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Type definitions for the cross-program-invocation (CPI) API in both C and Rust ABIs for a virtual machine.

# Purpose
The code defines a header file for the cross-program invocation (CPI) API used in a virtual machine environment. It provides type definitions for both C and Rust ABIs, which are essential for handling CPI syscalls. The file includes several structures that represent instructions and account metadata, which are used to facilitate communication between the virtual machine and the CPI syscall handlers. These structures are designed to be compatible with both C and Rust, reflecting the dual nature of the Solana protocol's API.

The header file ensures that the defined types are aligned correctly in the virtual machine's address space, although it notes potential alignment issues in the host address space. It includes macros to define alignment and size requirements for each structure. The file also contains structures that abstract over the differences between Rust and C ABIs, such as `fd_vm_rc_refcell` and `fd_vm_rc_refcell_vec`, which are used to manage memory and references in a way that is compatible with both languages. The header file is intended to be included indirectly through `fd_vm_syscall.h`, ensuring that it is used in the correct context within the larger system.
# Data Structures

---
### fd\_vm\_c\_instruction
- **Type**: ``struct``
- **Members**:
    - `program_id_addr`: Stores the address of the program ID in the virtual machine address space.
    - `accounts_addr`: Stores the address of the accounts array in the virtual machine address space.
    - `accounts_len`: Stores the length of the accounts array.
    - `data_addr`: Stores the address of the data array in the virtual machine address space.
    - `data_len`: Stores the length of the data array.
- **Description**: Defines a packed structure used in the C ABI for cross-program invocation syscall API, containing addresses and lengths for program ID, accounts, and data in the virtual machine address space.


---
### fd\_vm\_c\_instruction\_t
- **Type**: ``struct``
- **Members**:
    - `program_id_addr`: Contains the address of the program ID in the VM address space.
    - `accounts_addr`: Contains the address of the accounts array in the VM address space.
    - `accounts_len`: Specifies the number of accounts in the accounts array.
    - `data_addr`: Contains the address of the data array in the VM address space.
    - `data_len`: Specifies the length of the data array.
- **Description**: Defines a structure for representing an instruction in the C ABI for the cross-program invocation syscall API. It includes fields for program ID, accounts, and data, all of which are represented by their respective addresses and lengths in the virtual machine's address space. The structure is packed to ensure no padding is added between fields, which is crucial for maintaining the exact layout required by the API.


---
### fd\_vm\_c\_account\_meta
- **Type**: ``struct``
- **Members**:
    - `pubkey_addr`: Stores the address of the public key.
    - `is_writable`: Indicates if the account is writable.
    - `is_signer`: Indicates if the account is a signer.
- **Description**: Defines metadata for an account in the cross-program invocation (CPI) API, including the public key address and flags for writability and signer status.


---
### fd\_vm\_c\_account\_meta\_t
- **Type**: ``struct``
- **Members**:
    - `pubkey_addr`: Contains the address of the public key in the VM address space.
    - `is_writable`: Indicates if the account is writable with a boolean value.
    - `is_signer`: Indicates if the account is a signer with a boolean value.
- **Description**: Defines metadata for an account in the cross-program invocation (CPI) API, including the public key address and flags for writability and signer status. This structure is part of the C ABI for the CPI syscall API and is used to pass untrusted data from the virtual machine to the CPI syscall handlers.


---
### fd\_vm\_c\_account\_info
- **Type**: ``struct``
- **Members**:
    - `pubkey_addr`: The address of the public key in the VM address space.
    - `lamports_addr`: The address of the lamports in the VM address space.
    - `data_sz`: The size of the data associated with the account.
    - `data_addr`: The address of the data in the VM address space.
    - `owner_addr`: The address of the account owner in the VM address space.
    - `rent_epoch`: The epoch at which the account will next be charged rent.
    - `is_signer`: Indicates if the account is a signer.
    - `is_writable`: Indicates if the account is writable.
    - `executable`: Indicates if the account is executable.
- **Description**: Represents account information in the C ABI for the cross-program invocation syscall API, containing addresses and metadata related to account permissions and status in the virtual machine address space.


---
### fd\_vm\_c\_account\_info\_t
- **Type**: `struct`
- **Members**:
    - `pubkey_addr`: Contains the address of the public key in VM address space.
    - `lamports_addr`: Contains the address of the lamports in VM address space.
    - `data_sz`: Specifies the size of the data associated with the account.
    - `data_addr`: Contains the address of the data in VM address space.
    - `owner_addr`: Contains the address of the account owner in VM address space.
    - `rent_epoch`: Indicates the epoch at which the account will next be charged rent.
    - `is_signer`: Indicates if the account is a signer.
    - `is_writable`: Indicates if the account is writable.
    - `executable`: Indicates if the account is executable.
- **Description**: Represents account information in the cross-program invocation (CPI) API for a virtual machine, containing addresses and metadata related to account properties such as public key, lamports, data, owner, and permissions.


---
### fd\_vm\_rust\_vec
- **Type**: ``struct``
- **Members**:
    - `addr`: Stores the address of the data buffer.
    - `cap`: Represents the capacity of the vector.
    - `len`: Indicates the current length of the vector.
- **Description**: Represents a Rust-style vector (`Vec<_>`) in a C environment, using a packed structure to ensure alignment and size constraints are met for cross-program invocation in a virtual machine context. The structure includes fields for the address of the data buffer, the capacity of the vector, and the current length of the vector, facilitating operations on dynamic arrays in a memory-efficient manner.


---
### fd\_vm\_rust\_vec\_t
- **Type**: ``struct``
- **Members**:
    - `addr`: Stores the address of the vector's data in memory.
    - `cap`: Represents the capacity of the vector, indicating the total number of elements it can hold.
    - `len`: Indicates the current number of elements in the vector.
- **Description**: Represents a Rust-style vector (`Vec<_>`) in C, using the default allocator, with fields to manage the memory address, capacity, and length of the vector.


---
### fd\_vm\_rust\_instruction
- **Type**: `struct`
- **Members**:
    - `accounts`: A vector pointing to `fd_vm_rust_account_meta_t` structures.
    - `data`: A vector pointing to a sequence of bytes.
    - `pubkey`: A 32-byte array representing a public key.
- **Description**: Represents a packed structure used in the Rust ABI for cross-program invocation (CPI) syscalls, containing vectors for account metadata and data, along with a public key.


---
### fd\_vm\_rust\_instruction\_t
- **Type**: `struct`
- **Members**:
    - `accounts`: A `fd_vm_rust_vec_t` that points to `fd_vm_rust_account_meta_t`.
    - `data`: A `fd_vm_rust_vec_t` that points to bytes.
    - `pubkey`: An array of 32 `uchar` representing the public key.
- **Description**: Defines a Rust ABI structure for cross-program invocation (CPI) syscall API, containing vectors for account metadata and data, along with a public key.


---
### fd\_vm\_rust\_account\_meta
- **Type**: ``struct``
- **Members**:
    - `pubkey`: An array of 32 unsigned characters representing the public key.
    - `is_signer`: An unsigned character indicating if the account is a signer.
    - `is_writable`: An unsigned character indicating if the account is writable.
- **Description**: Defines metadata for an account in the Rust ABI for the cross-program-invocation syscall API, including the public key, signer status, and writability.


---
### fd\_vm\_rust\_account\_meta\_t
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: An array of 32 unsigned characters representing the public key.
    - ``is_signer``: An unsigned character indicating if the account is a signer.
    - ``is_writable``: An unsigned character indicating if the account is writable.
- **Description**: Defines metadata for an account in the Rust ABI for the cross-program-invocation syscall API, including the public key, signer status, and writability.


---
### fd\_vm\_rust\_account\_info
- **Type**: ``struct``
- **Members**:
    - `pubkey_addr`: Points to an array of 32 unsigned characters representing the public key.
    - `lamports_box_addr`: Points to a reference-counted object with an embedded RefCell pointing to an unsigned 64-bit integer.
    - `data_box_addr`: Points to a reference-counted object with an embedded RefCell containing a slice pointing to bytes.
    - `owner_addr`: Points to an array of 32 unsigned characters representing the owner's public key.
    - `rent_epoch`: Stores the rent epoch as an unsigned long integer.
    - `is_signer`: Indicates if the account is a signer with an unsigned character.
    - `is_writable`: Indicates if the account is writable with an unsigned character.
    - `executable`: Indicates if the account is executable with an unsigned character.
    - `_padding_0`: Provides padding with an array of 5 unsigned characters.
- **Description**: Represents account information in the Rust ABI for the cross-program-invocation syscall API, with fields for public key, lamports, data, owner, rent epoch, and flags for signer, writable, and executable status, all packed for alignment.


---
### fd\_vm\_rust\_account\_info\_t
- **Type**: ``struct fd_vm_rust_account_info``
- **Members**:
    - ``pubkey_addr``: Stores the address pointing to a 32-byte public key.
    - ``lamports_box_addr``: Stores the address pointing to a reference-counted box containing a `u64` value.
    - ``data_box_addr``: Stores the address pointing to a reference-counted box containing a slice of bytes.
    - ``owner_addr``: Stores the address pointing to a 32-byte owner public key.
    - ``rent_epoch``: Indicates the epoch at which the account will next owe rent.
    - ``is_signer``: Indicates if the account is a signer.
    - ``is_writable``: Indicates if the account is writable.
    - ``executable``: Indicates if the account is executable.
    - ``_padding_0``: Provides padding for alignment purposes.
- **Description**: Represents account information in the Rust ABI for the cross-program-invocation syscall API. It includes addresses for public key, lamports, data, and owner, as well as flags for signer status, writability, and executability. The structure is packed and aligned to 8 bytes, with padding to ensure proper alignment.


---
### fd\_vm\_rc\_refcell
- **Type**: ``struct``
- **Members**:
    - `strong`: Holds the strong reference count for the reference-counted object.
    - `weak`: Holds the weak reference count for the reference-counted object.
    - `borrow`: Tracks the borrow state of the `RefCell`.
    - `payload`: Contains the underlying data of the `RefCell`.
- **Description**: Defines a packed structure that combines reference counting (`Rc`) and interior mutability (`RefCell`) mechanisms, allowing for shared ownership and mutable access to the underlying data in a memory-efficient manner.


---
### fd\_vm\_rc\_refcell\_t
- **Type**: ``struct``
- **Members**:
    - `strong`: Represents the strong reference count for the `Rc`.
    - `weak`: Represents the weak reference count for the `Rc`.
    - `borrow`: Tracks the borrow state for the `RefCell`.
    - `payload`: Holds the underlying data managed by the `RefCell`.
- **Description**: Defines the in-memory layout of a Rust `Rc<RefCell<T>>` type, which is used to manage reference counting and borrowing for shared data in a safe manner. The `strong` and `weak` fields manage the reference counts, while the `borrow` field tracks the borrowing state. The `payload` is an array that contains the actual data being managed.


---
### fd\_vm\_rc\_refcell\_vec
- **Type**: ``struct``
- **Members**:
    - `strong`: Holds the strong reference count for the `Rc`.
    - `weak`: Holds the weak reference count for the `Rc`.
    - `borrow`: Tracks the borrow state for the `RefCell`.
    - `addr`: Stores the address of the slice.
    - `len`: Stores the length of the slice.
- **Description**: Represents a packed structure that combines reference counting (`Rc`) and interior mutability (`RefCell`) with a slice, providing fields for strong and weak reference counts, borrow state, and slice address and length.


---
### fd\_vm\_rc\_refcell\_vec\_t
- **Type**: `struct`
- **Members**:
    - `strong`: Represents the strong reference count for the `Rc`.
    - `weak`: Represents the weak reference count for the `Rc`.
    - `borrow`: Tracks the borrow state for the `RefCell`.
    - `addr`: Holds the address of the slice.
    - `len`: Indicates the length of the slice.
- **Description**: Represents a vector-like structure that combines reference counting (`Rc`) and interior mutability (`RefCell`) with a slice, allowing for shared ownership and mutable access to a sequence of elements.


---
### fd\_vm\_rc\_refcell\_ref
- **Type**: ``struct``
- **Members**:
    - `strong`: Holds the strong reference count for the reference-counted object.
    - `weak`: Holds the weak reference count for the reference-counted object.
    - `borrow`: Tracks the borrowing state of the `RefCell`.
    - `addr`: Stores the address of the referenced object.
- **Description**: Represents a reference-counted object with a `RefCell` in a packed structure, providing fields for strong and weak reference counts, borrowing state, and the address of the referenced object.


---
### fd\_vm\_rc\_refcell\_ref\_t
- **Type**: ``struct``
- **Members**:
    - `strong`: Represents the strong reference count for the `Rc`.
    - `weak`: Represents the weak reference count for the `Rc`.
    - `borrow`: Tracks the borrow state for the `RefCell`.
    - `addr`: Holds the address of the reference.
- **Description**: Defines a structure for managing reference counting and borrowing in a Rust-like `Rc<RefCell<T>>` pattern, specifically for handling references (`Ref`) in a virtual machine context.


---
### fd\_vm\_cpi\_caller\_account
- **Type**: ``struct``
- **Members**:
    - `lamports`: Pointer to an unsigned long representing the account's lamports.
    - `owner`: Pointer to a `fd_pubkey_t` representing the account's owner.
    - `orig_data_len`: Unsigned long representing the original length of the account's data.
    - `serialized_data`: Pointer to an unsigned char array representing serialized data, or NULL if direct mapping is used.
    - `serialized_data_len`: Unsigned long representing the length of the serialized data.
    - `vm_data_vaddr`: Unsigned long representing the virtual machine data virtual address.
    - `ref_to_len_in_vm`: Pointer to an unsigned long representing a reference to the length in the virtual machine.
- **Description**: Represents an account in a cross-program invocation (CPI) syscall, abstracting over Rust/C ABI differences. It stores information about the account's lamports, owner, original data length, serialized data, and virtual machine data address. The structure supports both direct mapping and delayed translation of virtual addresses.


---
### fd\_vm\_cpi\_caller\_account\_t
- **Type**: ``struct``
- **Members**:
    - `lamports`: Pointer to an unsigned long integer representing the lamports.
    - `owner`: Pointer to a `fd_pubkey_t` representing the account owner.
    - `orig_data_len`: Unsigned long integer representing the original data length.
    - `serialized_data`: Pointer to an unsigned character array representing serialized data, or NULL if direct mapping.
    - `serialized_data_len`: Unsigned long integer representing the length of the serialized data.
    - `vm_data_vaddr`: Unsigned long integer representing the virtual machine data virtual address.
    - `ref_to_len_in_vm`: Pointer to an unsigned long integer representing a reference to the length in the virtual machine.
- **Description**: Represents an account in a cross-program invocation (CPI) syscall, abstracting over Rust/C ABI differences and caching translation results or storing virtual addresses for later translation.



---
Made with ❤️ by [Driver](https://www.driver.ai/)