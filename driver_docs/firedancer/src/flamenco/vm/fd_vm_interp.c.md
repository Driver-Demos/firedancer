<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements virtual machine execution functions with and without tracing capabilities.

# Purpose
The code defines two functions, [`fd_vm_exec_notrace`](<#fd_vm_exec_notrace>) and [`fd_vm_exec_trace`](<#fd_vm_exec_trace>), which are part of a virtual machine (VM) execution module. These functions execute a VM with and without tracing capabilities, respectively. Both functions use a common template, `fd_vm_interp_core.c`, to perform the core interpretation tasks. The functions extract necessary variables from the `fd_vm_t` structure, such as `text`, `text_cnt`, `entry_pc`, `calldests`, `syscalls`, `region_haddr`, `region_ld_sz`, `region_st_sz`, `reg`, and `shadow`, which are essential for the VM's operation. The [`fd_vm_exec_trace`](<#fd_vm_exec_trace>) function enables execution and memory tracing by defining specific macros before including the core interpretation template.

The module includes headers `fd_vm_base.h`, `fd_vm_private.h`, and `fd_dump_pb.h`, indicating dependencies on base VM definitions, private VM details, and possibly a debugging or testing utility. The code is structured to allow for different execution modes, with a focus on modularity and configurability, as suggested by the comments indicating potential future improvements. The functions return an error code, `err`, which is initialized to `FD_VM_SUCCESS`, indicating the success or failure of the VM execution.
# Imports and Dependencies

---
- `fd_vm_base.h`
- `fd_vm_private.h`
- `../runtime/tests/fd_dump_pb.h`
- `fd_vm_interp_core.c`


# Functions

---
### fd\_vm\_exec\_notrace<!-- {{#callable:fd_vm_exec_notrace}} -->
[View Source →](<../../../../../src/flamenco/vm/fd_vm_interp.c#L8>)

Executes a virtual machine without enabling execution or memory tracing.
- **Inputs**:
    - `vm`: A pointer to an `fd_vm_t` structure representing the virtual machine to execute.
- **Logic and Control Flow**:
    - Undefines `FD_VM_INTERP_EXE_TRACING_ENABLED` and `FD_VM_INTERP_MEM_TRACING_ENABLED` to disable tracing.
    - Extracts necessary variables from the `vm` structure, such as `text`, `text_cnt`, `entry_pc`, `calldests`, `syscalls`, `region_haddr`, `region_ld_sz`, `region_st_sz`, `reg`, and `shadow`.
    - Sets `frame_max` to `FD_VM_STACK_FRAME_MAX`.
    - Initializes `err` to `FD_VM_SUCCESS`.
    - Includes and executes the `fd_vm_interp_core.c` file to run the virtual machine.
    - Returns the `err` variable.
- **Output**: Returns an integer error code, `FD_VM_SUCCESS` if execution is successful.


---
### fd\_vm\_exec\_trace<!-- {{#callable:fd_vm_exec_trace}} -->
[View Source →](<../../../../../src/flamenco/vm/fd_vm_interp.c#L40>)

Executes a virtual machine with execution and memory tracing enabled.
- **Inputs**:
    - `vm`: A pointer to an `fd_vm_t` structure representing the virtual machine to execute.
- **Logic and Control Flow**:
    - Defines `FD_VM_INTERP_EXE_TRACING_ENABLED` and `FD_VM_INTERP_MEM_TRACING_ENABLED` to enable tracing.
    - Extracts necessary variables from the `vm` structure, such as `text`, `text_cnt`, `entry_pc`, `calldests`, `syscalls`, `region_haddr`, `region_ld_sz`, `region_st_sz`, `reg`, and `shadow`.
    - Sets `frame_max` to `FD_VM_STACK_FRAME_MAX`.
    - Initializes `err` to `FD_VM_SUCCESS`.
    - Includes and executes the `fd_vm_interp_core.c` file, which contains the core logic for the virtual machine execution.
    - Undefines `FD_VM_INTERP_EXE_TRACING_ENABLED` and `FD_VM_INTERP_MEM_TRACING_ENABLED` after execution.
    - Returns the `err` variable indicating the success or failure of the execution.
- **Output**: An integer representing the success (`FD_VM_SUCCESS`) or failure of the virtual machine execution.



---
Made with ❤️ by [Driver](https://www.driver.ai/)