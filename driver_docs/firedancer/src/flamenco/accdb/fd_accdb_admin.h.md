<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines structures and functions for managing account database transactions and integrity checks.

# Purpose
This C header file defines the interface for managing an account database administration structure, `fd_accdb_admin_t`, which is used in conjunction with the `fd_funk_t` type. The file provides function prototypes for operations on the account database, including joining and leaving the database (`fd_accdb_admin_join` and [`fd_accdb_admin_leave`](<#fd_accdb_admin_leave>)), and transaction-level operations such as creating a new fork node ([`fd_accdb_attach_child`](<#fd_accdb_attach_child>)), merging a fork node into the database root ([`fd_accdb_advance_root`](<#fd_accdb_advance_root>)), removing a fork node and its children ([`fd_accdb_cancel`](<#fd_accdb_cancel>)), clearing all database entries and transactions ([`fd_accdb_clear`](<#fd_accdb_clear>)), and verifying the integrity of the data structure ([`fd_accdb_verify`](<#fd_accdb_verify>)). The header file includes a reference to another header, `fd_funk.h`, which is likely related to the `fd_funk_t` type used within the `fd_accdb_admin` structure.
# Imports and Dependencies

---
- `../../funk/fd_funk.h`


# Data Structures

---
### fd\_accdb\_admin
- **Type**: ``struct``
- **Members**:
    - ``funk``: An array of one `fd_funk_t` element.
- **Description**: The `fd_accdb_admin` structure contains a single member, `funk`, which is an array of one `fd_funk_t` element. This structure is used to manage account database operations, such as creating and managing transaction forks, advancing the database root, and verifying data structure integrity.


---
### fd\_accdb\_admin\_t
- **Type**: ``struct``
- **Members**:
    - ``funk``: An array of one `fd_funk_t` element, representing the core data structure for account database operations.
- **Description**: The `fd_accdb_admin_t` structure is a wrapper around the `fd_funk_t` data structure, which is used to manage account database operations. It provides a set of functions to join and leave the database, manage transaction-level operations such as creating, advancing, and canceling fork nodes, and perform integrity checks on the database. The structure is designed to facilitate the administration of account databases in a transactional context.


# Function Declarations (Public API)

---
### fd\_accdb\_admin\_leave<!-- {{#callable_declaration:fd_accdb_admin_leave}} -->
[View Source →](<../../../../../src/flamenco/accdb/fd_accdb_admin.h#L18>)

Leaves the administrative context of an account database.
- **Description**: Use this function to exit the administrative context of an account database. It must be called when the administrative operations are complete. The function requires a valid `fd_accdb_admin_t` pointer and will log a critical error if the pointer is null. It also attempts to leave the underlying funk context, logging a critical error if this operation fails. This function returns the `admin` pointer, allowing for potential chaining of operations.
- **Inputs**:
    - `admin`: A pointer to an `fd_accdb_admin_t` structure representing the administrative context to leave. Must not be null. The function logs a critical error if this parameter is null.
    - `opt_shfunk`: An optional pointer to a location where the function can store a result from the underlying funk context. Can be null if no result is needed. The function does not log an error if this parameter is null.
- **Output**: Returns the `admin` pointer provided as input.
- **See Also**: [`fd_accdb_admin_leave`](<fd_accdb_admin.c.md#fd_accdb_admin_leave>)  (Implementation)


---
### fd\_accdb\_attach\_child<!-- {{#callable_declaration:fd_accdb_attach_child}} -->
[View Source →](<../../../../../src/flamenco/accdb/fd_accdb_admin.h#L36>)

Creates a new transaction fork node in the account database.
- **Description**: Use this function to create a new transaction fork node in the account database, branching from a specified parent transaction. This function is useful when you need to extend the transaction history with a new transaction that is linked to an existing frozen parent or the root. Ensure that the number of non-root transactions is less than the maximum allowed before calling this function. This function does not return a value and does not modify the input parameters.
- **Inputs**:
    - `admin`: A pointer to an `fd_accdb_admin_t` structure representing the account database. Must not be null. The caller retains ownership.
    - `xid_parent`: A pointer to a `fd_funk_txn_xid_t` structure representing the parent transaction ID. Must not be null. The caller retains ownership.
    - `xid_new`: A pointer to a `fd_funk_txn_xid_t` structure representing the new transaction ID to be created. Must not be null. The caller retains ownership.
- **Output**: None
- **See Also**: [`fd_accdb_attach_child`](<fd_accdb_admin.c.md#fd_accdb_attach_child>)  (Implementation)


---
### fd\_accdb\_advance\_root<!-- {{#callable_declaration:fd_accdb_advance_root}} -->
[View Source →](<../../../../../src/flamenco/accdb/fd_accdb_admin.h#L45>)

Merges a specified fork node into the database root.
- **Description**: Use this function to merge a specified fork node, identified by its transaction ID, into the root of the account database. This operation assumes that the specified transaction is a root transaction and not a child of another transaction. It is critical to ensure that the transaction ID provided corresponds to a valid transaction that is a root, as the function will log a critical error and terminate if the transaction is not found or is not a root. This function should be used when you need to consolidate changes from a fork node into the main database structure.
- **Inputs**:
    - `admin`: A pointer to an `fd_accdb_admin_t` structure representing the account database. Must not be null. The caller retains ownership.
    - `xid`: A pointer to a `fd_funk_txn_xid_t` structure representing the transaction ID of the fork node to merge. Must not be null. The function will log a critical error if the transaction ID is invalid or not found.
- **Output**: None
- **See Also**: [`fd_accdb_advance_root`](<fd_accdb_admin.c.md#fd_accdb_advance_root>)  (Implementation)


---
### fd\_accdb\_cancel<!-- {{#callable_declaration:fd_accdb_cancel}} -->
[View Source →](<../../../../../src/flamenco/accdb/fd_accdb_admin.h#L52>)

Removes a fork node and its children by transaction ID.
- **Description**: Use this function to remove a specific fork node and all its child nodes from the account database. This operation is recursive and will delete the specified node and all its descendants. Ensure that the transaction ID provided corresponds to an existing node in the database. If the transaction ID does not exist, the function will log a critical error. This function should be used when you need to cancel a transaction and its associated data.
- **Inputs**:
    - `admin`: A pointer to an `fd_accdb_admin_t` structure representing the account database. Must not be null. The caller retains ownership.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure representing the transaction ID of the fork node to remove. Must not be null. The transaction ID must exist in the database, or a critical error will be logged.
- **Output**: None
- **See Also**: [`fd_accdb_cancel`](<fd_accdb_admin.c.md#fd_accdb_cancel>)  (Implementation)


---
### fd\_accdb\_clear<!-- {{#callable_declaration:fd_accdb_clear}} -->
[View Source →](<../../../../../src/flamenco/accdb/fd_accdb_admin.h#L58>)

Removes all account database entries and transactions.
- **Description**: Use this function to clear all entries and transactions from the account database. It is useful when you need to reset the database to an empty state. Ensure that no other operations are being performed on the database when calling this function to avoid data inconsistencies.
- **Inputs**:
    - `admin`: A pointer to an `fd_accdb_admin_t` structure representing the account database to clear. Must not be null. The caller retains ownership of the pointer.
- **Output**: None
- **See Also**: [`fd_accdb_clear`](<fd_accdb_admin.c.md#fd_accdb_clear>)  (Implementation)


---
### fd\_accdb\_verify<!-- {{#callable_declaration:fd_accdb_verify}} -->
[View Source →](<../../../../../src/flamenco/accdb/fd_accdb_admin.h#L64>)

Performs integrity checks on the account database.
- **Description**: Use this function to perform comprehensive integrity checks on the account database managed by the given `fd_accdb_admin_t` instance. It is important to ensure that no other operations are concurrently accessing the database when this function is called, as it assumes exclusive access to the data structures. This function is useful for verifying the consistency and correctness of the database state, especially after significant modifications or before critical operations.
- **Inputs**:
    - `admin`: A pointer to an `fd_accdb_admin_t` structure representing the account database to verify. Must not be null. The function assumes that the caller has exclusive access to the database during the verification process.
- **Output**: None
- **See Also**: [`fd_accdb_verify`](<fd_accdb_admin.c.md#fd_accdb_verify>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)