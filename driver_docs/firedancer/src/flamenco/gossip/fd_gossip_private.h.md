<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures, constants, and functions for handling gossip protocol messages in the Firedancer codebase.

# Purpose
The code is a C header file that defines private structures, constants, and functions for handling gossip protocol messages in a distributed system. It includes definitions for various message types and their associated data structures, such as `fd_gossip_view`, `fd_gossip_view_crds_value`, and `fd_gossip_view_contact_info`. These structures are used to represent different components of gossip messages, including contact information, votes, and duplicate shreds. The file also defines constants for message types and value types, such as `FD_GOSSIP_MESSAGE_PULL_REQUEST` and `FD_GOSSIP_VALUE_VOTE`, which are used to categorize and process different kinds of gossip messages.

The header file provides inline functions and macros for converting time units and calculating size bounds for message components. It includes functions for parsing and initializing gossip messages, such as [`fd_gossip_msg_parse`](<#fd_gossip_msg_parse>) and [`fd_gossip_pull_request_init`](<#fd_gossip_pull_request_init>). These functions facilitate the encoding and decoding of gossip messages, ensuring that they conform to the specified size constraints. The file is intended to be included in other C source files that implement the gossip protocol, providing the necessary data structures and utility functions to manage and process gossip messages efficiently.
# Imports and Dependencies

---
- `fd_gossip_types.h`
- `../../util/fd_util.h`
- `../../disco/fd_disco_base.h`
- `stddef.h`


# Data Structures

---
### fd\_gossip\_view\_ipaddr
- **Type**: ``struct``
- **Members**:
    - ``is_ip6``: Indicates if the IP address is IPv6 (non-zero) or IPv4 (zero).
    - ``ip4``: Stores the IPv4 address when `is_ip6` is zero.
    - ``ip6_off``: Stores the offset for the IPv6 address when `is_ip6` is non-zero.
- **Description**: Represents an IP address that can be either IPv4 or IPv6, using a union to store the address data based on the `is_ip6` flag.


---
### fd\_gossip\_view\_ipaddr\_t
- **Type**: ``struct``
- **Members**:
    - ``is_ip6``: Indicates if the IP address is IPv6 (non-zero) or IPv4 (zero).
    - ``ip4``: Stores the IPv4 address when `is_ip6` is zero.
    - ``ip6_off``: Stores the offset for the IPv6 address when `is_ip6` is non-zero.
- **Description**: Represents an IP address in a gossip network, with a flag to indicate whether the address is IPv4 or IPv6, and a union to store the address data accordingly.


---
### fd\_gossip\_view\_socket
- **Type**: ``struct``
- **Members**:
    - `key`: An unsigned character representing a unique identifier for the socket.
    - `index`: An unsigned character indicating the position or order of the socket.
    - `offset`: An unsigned short representing the offset, encoded as a variable-length integer.
- **Description**: Defines a structure for representing a socket in the gossip view, with fields for a unique key, an index, and an offset. The `offset` field is encoded as a variable-length integer, which allows for efficient storage and transmission of the offset value within the encoded form.


---
### fd\_gossip\_view\_socket\_t
- **Type**: ``struct``
- **Members**:
    - ``key``: An 8-bit unsigned character representing a unique identifier for the socket.
    - ``index``: An 8-bit unsigned character representing the index of the socket.
    - ``offset``: A 16-bit unsigned short representing the offset, encoded as a variable integer.
- **Description**: Defines a structure for representing a socket in the gossip view, with fields for a unique key, an index, and an offset. The `offset` field is encoded as a variable integer, which allows for efficient storage and transmission of socket information within the gossip protocol.


---
### fd\_gossip\_view\_version
- **Type**: ``struct``
- **Members**:
    - `major`: Major version number of the gossip view.
    - `minor`: Minor version number of the gossip view.
    - `patch`: Patch version number of the gossip view.
    - `commit`: First 4 bytes of the commit hash.
    - `feature_set`: Feature set encoded as a bitmask.
    - `client`: Client identifier.
- **Description**: Defines a version structure for a gossip view, including major, minor, and patch version numbers, a commit hash, a feature set bitmask, and a client identifier.


---
### fd\_gossip\_view\_version\_t
- **Type**: ``struct``
- **Members**:
    - `major`: Major version number of the software.
    - `minor`: Minor version number of the software.
    - `patch`: Patch version number of the software.
    - `commit`: First 4 bytes of the commit hash.
    - `feature_set`: Feature set encoded as a bitmask.
    - `client`: Client identifier.
- **Description**: Represents a version of a software component in the gossip protocol, including major, minor, and patch version numbers, a commit hash, a feature set bitmask, and a client identifier.


---
### fd\_gossip\_view\_contact\_info
- **Type**: ``struct``
- **Members**:
    - ``contact_info``: An array of `fd_contact_info_t` structures, holding contact information.
    - ``ip6_cnt``: A count of IPv6 addresses.
    - ``unrecognized_socket_tag_cnt``: A count of unrecognized socket tags.
    - ``ext_len``: The length of the extension data.
    - ``ext_off``: The offset of the extension data.
- **Description**: The `fd_gossip_view_contact_info` structure stores contact information for a gossip protocol, including an array of contact information, counts of IPv6 addresses and unrecognized socket tags, and details about extension data length and offset.


---
### fd\_gossip\_view\_contact\_info\_t
- **Type**: ``struct``
- **Members**:
    - ``contact_info``: An array of `fd_contact_info_t` structures, each representing contact information.
    - ``ip6_cnt``: A count of IPv6 addresses.
    - ``unrecognized_socket_tag_cnt``: A count of unrecognized socket tags.
    - ``ext_len``: The length of the extensions array.
    - ``ext_off``: The offset to the start of the extensions array.
- **Description**: The `fd_gossip_view_contact_info_t` structure holds contact information for a gossip view, including an array of contact information entries, counts of IPv6 addresses and unrecognized socket tags, and details about the extensions array such as its length and offset.


---
### fd\_gossip\_view\_node\_instance
- **Type**: ``struct``
- **Members**:
    - ``token``: A unique identifier of type `ulong` for the node instance.
- **Description**: Represents a node instance in the gossip protocol, identified by a unique `token`. This structure is part of the gossip view, which is used to manage and track the state of nodes in a distributed network.


---
### fd\_gossip\_view\_node\_instance\_t
- **Type**: ``struct``
- **Members**:
    - `token`: A unique identifier for the node instance.
- **Description**: Represents a node instance in the gossip protocol, identified by a unique `token`.


---
### fd\_gossip\_view\_vote
- **Type**: ``struct``
- **Members**:
    - `index`: An unsigned character representing the index of the vote.
    - `txn_sz`: An unsigned long representing the size of the transaction.
    - `txn_off`: An unsigned short representing the offset of the transaction.
- **Description**: Defines a structure for representing a gossip view vote, which includes an index, transaction size, and transaction offset. This structure is used in the context of gossip protocols to manage and track votes within a network.


---
### fd\_gossip\_view\_vote\_t
- **Type**: ``struct``
- **Members**:
    - ``index``: An `uchar` representing the index of the vote.
    - ``txn_sz``: An `ulong` representing the size of the transaction.
    - ``txn_off``: A `ushort` representing the offset of the transaction.
- **Description**: The `fd_gossip_view_vote_t` structure is used to represent a vote in the gossip protocol. It contains fields for the index of the vote, the size of the transaction, and the offset of the transaction within the message payload. This structure is part of the gossip protocol's data representation, which is used to manage and transmit voting information across nodes.


---
### fd\_gossip\_view\_epoch\_slots
- **Type**: ``struct``
- **Members**:
    - ``index``: Stores an unsigned character value representing the index of the epoch slot.
- **Description**: Represents a simple data structure with a single member, `index`, which is used to store an index value for epoch slots in the gossip protocol. This structure is part of a larger system for managing and communicating epoch slot information within a gossip network.


---
### fd\_gossip\_view\_epoch\_slots\_t
- **Type**: ``struct``
- **Members**:
    - ``index``: An `uchar` representing the index of the epoch slot.
- **Description**: Represents a view of epoch slots in the gossip protocol, encapsulating a single field `index` which is used to identify or reference a specific epoch slot within the gossip data structure.


---
### fd\_gossip\_view\_duplicate\_shred
- **Type**: ``struct``
- **Members**:
    - `index`: A `ushort` representing the index of the duplicate shred.
    - `slot`: A `ulong` representing the slot number associated with the duplicate shred.
    - `num_chunks`: A `uchar` indicating the total number of chunks in the duplicate shred.
    - `chunk_index`: A `uchar` representing the index of the current chunk within the duplicate shred.
    - `chunk_len`: A `ulong` specifying the length of the current chunk.
    - `chunk_off`: A `ushort` indicating the offset of the current chunk within the duplicate shred.
- **Description**: Represents a view of a duplicate shred in the gossip protocol, containing information about its index, slot, and chunk details.


---
### fd\_gossip\_view\_duplicate\_shred\_t
- **Type**: ``struct``
- **Members**:
    - `index`: A `ushort` representing the index of the duplicate shred.
    - `slot`: A `ulong` indicating the slot number associated with the duplicate shred.
    - `num_chunks`: A `uchar` specifying the number of chunks in the duplicate shred.
    - `chunk_index`: A `uchar` representing the index of the current chunk within the duplicate shred.
    - `chunk_len`: A `ulong` indicating the length of the current chunk.
    - `chunk_off`: A `ushort` representing the offset of the current chunk within the duplicate shred.
- **Description**: Represents a duplicate shred in the gossip protocol, containing information about its index, slot, number of chunks, and details about the current chunk such as its index, length, and offset.


---
### fd\_gossip\_view\_snapshot\_hash\_pair\_t
- **Type**: ``struct``
- **Members**:
    - ``full_off``: Offset to the full snapshot hashes (slot, hash) pair.
    - ``inc_len``: Length of the incremental snapshot hashes.
    - ``inc_off``: Offset to start of incremental snapshot hashes pair.
- **Description**: Defines offsets and lengths for managing full and incremental snapshot hashes in a gossip view.


---
### fd\_gossip\_view\_snapshot\_hashes
- **Type**: ``struct``
- **Members**:
    - `full_off`: Offset to the full snapshot hashes (slot, hash) pair.
    - `inc_len`: Length of the incremental snapshot hashes.
    - `inc_off`: Offset to start of incremental snapshot hashes pair.
- **Description**: The `fd_gossip_view_snapshot_hashes` structure manages offsets and lengths for full and incremental snapshot hashes within a gossip message. It uses `ushort` and `ulong` types to store offsets and lengths, ensuring efficient access to snapshot hash data in the message payload.


---
### fd\_gossip\_view\_snapshot\_hashes\_t
- **Type**: ``struct``
- **Members**:
    - ``full_off``: Offset to the full snapshot hashes (slot, hash) pair.
    - ``inc_len``: Length of the incremental snapshot hashes.
    - ``inc_off``: Offset to start of incremental snapshot hashes pair.
- **Description**: The `fd_gossip_view_snapshot_hashes_t` structure manages offsets and lengths for full and incremental snapshot hashes within a gossip message. It provides a way to locate and handle snapshot hash data efficiently in the context of gossip protocol operations.


---
### fd\_gossip\_view\_crds\_value
- **Type**: ``struct``
- **Members**:
    - ``value_off``: Start of CRDS value data in payload.
    - ``signature_off``: Offset for the signature in the payload.
    - ``pubkey_off``: Offset for the public key in the payload.
    - ``wallclock_nanos``: Wallclock time in nanoseconds.
    - ``length``: Length of the value in bytes, including the signature.
    - ``tag``: Tag to identify the type of CRDS value.
    - ``ci_view``: Array of contact information views.
    - ``node_instance``: Array of node instance views.
    - ``vote``: Array of vote views.
    - ``epoch_slots``: Array of epoch slots views.
    - ``duplicate_shred``: Array of duplicate shred views.
    - ``lowest_slot``: Lowest slot value.
    - ``snapshot_hashes``: Array of snapshot hashes views.
- **Description**: Represents a CRDS (Cluster Replicated Data Store) value in a gossip protocol, containing various offsets, a wallclock timestamp, a length, a tag, and a union of different possible data types such as contact information, node instances, votes, epoch slots, duplicate shreds, lowest slot, and snapshot hashes.


---
### fd\_gossip\_view\_crds\_value\_t
- **Type**: ``struct``
- **Members**:
    - ``value_off``: Start of CRDS value data in payload.
    - ``signature_off``: Offset to the signature in the payload.
    - ``pubkey_off``: Offset to the public key in the payload.
    - ``wallclock_nanos``: Wallclock time in nanoseconds.
    - ``length``: Length of the value in bytes, including the signature.
    - ``tag``: Tag indicating the type of CRDS value.
    - ``ci_view``: Array of contact info views.
    - ``node_instance``: Array of node instance views.
    - ``vote``: Array of vote views.
    - ``epoch_slots``: Array of epoch slots views.
    - ``duplicate_shred``: Array of duplicate shred views.
    - ``lowest_slot``: Lowest slot value.
    - ``snapshot_hashes``: Array of snapshot hashes views.
- **Description**: Represents a CRDS (Conflict-free Replicated Data Store) value in the gossip protocol, containing various fields and unions to store different types of CRDS data such as contact info, node instances, votes, epoch slots, duplicate shreds, lowest slots, and snapshot hashes. The structure includes offsets for value data, signature, and public key, as well as a wallclock time in nanoseconds, length of the value, and a tag to identify the type of CRDS value.


---
### fd\_gossip\_view\_crds\_container
- **Type**: ``struct``
- **Members**:
    - `from_off`: Offset from which CRDS values are considered.
    - `crds_values_len`: Length of the CRDS values array.
    - `crds_values`: Array of CRDS values with a maximum size defined by `FD_GOSSIP_MSG_MAX_CRDS`.
- **Description**: Holds a collection of CRDS values used in gossip protocol messages, with fields to manage the offset and length of the CRDS values array.


---
### fd\_gossip\_view\_crds\_container\_t
- **Type**: ``struct``
- **Members**:
    - `from_off`: Offset to the start of the CRDS values in the payload.
    - `crds_values_len`: Number of CRDS values contained in the structure.
    - `crds_values`: Array of CRDS values with a maximum size defined by `FD_GOSSIP_MSG_MAX_CRDS`.
- **Description**: Manages a collection of CRDS (Conflict-free Replicated Data Structures) values, which are used in gossip protocols to share and synchronize data across distributed systems. The structure includes an offset to the start of the CRDS values, the number of CRDS values, and an array to store these values. This container is essential for handling the data exchange in gossip messages, ensuring efficient data replication and consistency.


---
### fd\_gossip\_view\_pull\_response\_t
- **Type**: ``struct``
- **Members**:
    - ``from_off``: Offset to the start of the CRDS values in the payload.
    - ``crds_values_len``: Number of CRDS values contained in the structure.
    - ``crds_values``: Array of CRDS values with a maximum size defined by `FD_GOSSIP_MSG_MAX_CRDS`.
- **Description**: Defines a container for CRDS values used in gossip protocol messages, specifically for pull responses. It includes an offset to the start of the CRDS values, the number of CRDS values, and an array to store these values. This structure is used to manage and organize CRDS data within gossip messages, facilitating the exchange of information between nodes in a network.


---
### fd\_gossip\_view\_push\_t
- **Type**: `typedef struct`
- **Members**:
    - `from_off`: Offset to the start of the CRDS values in the payload.
    - `crds_values_len`: Number of CRDS values in the container.
    - `crds_values`: Array of CRDS values with a maximum size defined by `FD_GOSSIP_MSG_MAX_CRDS`.
- **Description**: Defines a container for CRDS values used in gossip messages, providing offsets and lengths to manage the CRDS data within a message payload.


---
### fd\_gossip\_view\_pull\_request
- **Type**: ``struct``
- **Members**:
    - `bloom_keys_len`: Length of the bloom keys.
    - `bloom_keys_offset`: Offset for the bloom keys.
    - `bloom_len`: Length of the bloom filter.
    - `bloom_bits_offset`: Offset for the bloom filter bits.
    - `bloom_bits_cnt`: Count of the bloom filter bits.
    - `bloom_num_bits_set`: Number of bits set in the bloom filter.
    - `mask`: Mask value used in the request.
    - `mask_bits`: Number of bits in the mask.
    - `pr_ci`: Array of `fd_gossip_view_crds_value_t` representing CRDS values.
- **Description**: Represents a pull request in the gossip protocol, containing information about bloom filters and CRDS values for efficient data dissemination.


---
### fd\_gossip\_view\_pull\_request\_t
- **Type**: ``struct``
- **Members**:
    - `bloom_keys_len`: Length of the bloom keys.
    - `bloom_keys_offset`: Offset to the bloom keys.
    - `bloom_len`: Length of the bloom filter.
    - `bloom_bits_offset`: Offset to the bloom filter bits.
    - `bloom_bits_cnt`: Count of bits in the bloom filter.
    - `bloom_num_bits_set`: Number of bits set in the bloom filter.
    - `mask`: Mask value used in the request.
    - `mask_bits`: Number of bits in the mask.
    - `pr_ci`: Array of CRDS values related to contact information.
- **Description**: Represents a pull request in the gossip protocol, containing information about bloom filters and CRDS values for efficient data dissemination and filtering.


---
### fd\_gossip\_view\_prune
- **Type**: ``struct``
- **Members**:
    - `pubkey_off`: Offset to the public key in the message payload.
    - `origins_len`: Length of the origins data.
    - `origins_off`: Offset to the origins data in the message payload.
    - `destination_off`: Offset to the destination data in the message payload.
    - `wallclock`: Wallclock time in milliseconds.
    - `signature_off`: Offset to the signature in the message payload.
    - `wallclock_nanos`: Wallclock time in nanoseconds.
- **Description**: Represents a structure used in gossip protocol messages to manage offsets and lengths of various components such as public keys, origins, destinations, and signatures, along with wallclock times in both milliseconds and nanoseconds.


---
### fd\_gossip\_view\_prune\_t
- **Type**: ``struct``
- **Members**:
    - `pubkey_off`: Offset to the public key in the message payload.
    - `origins_len`: Length of the origins array.
    - `origins_off`: Offset to the origins array in the message payload.
    - `destination_off`: Offset to the destination in the message payload.
    - `wallclock`: Wallclock time in milliseconds.
    - `signature_off`: Offset to the signature in the message payload.
    - `wallclock_nanos`: Wallclock time in nanoseconds.
- **Description**: Represents a gossip view prune message, which includes offsets and lengths for various components such as public key, origins, destination, and signature, as well as wallclock time in both milliseconds and nanoseconds.


---
### fd\_gossip\_view\_ping
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: An array of 32 unsigned characters representing the public key.
    - ``ping_token``: An array of 32 unsigned characters used as a ping token.
    - ``signature``: An array of 64 unsigned characters representing the signature.
- **Description**: The `fd_gossip_view_ping` structure is a packed data structure used in the gossip protocol to represent a ping message. It contains a public key, a ping token, and a signature, all of which are essential for verifying the authenticity and integrity of the ping message in the network communication.


---
### fd\_gossip\_view\_ping\_t
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: An array of 32 unsigned characters representing the public key.
    - ``ping_token``: An array of 32 unsigned characters representing the ping token.
    - ``signature``: An array of 64 unsigned characters representing the signature.
- **Description**: `fd_gossip_view_ping_t` is a packed structure used in gossip protocol messages to represent a ping message. It contains a public key, a ping token, and a signature, all of which are arrays of unsigned characters. This structure is designed to be directly cast onto the payload bytes of a message, facilitating efficient data handling in network communications.


---
### fd\_gossip\_view\_pong
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: An array of 32 unsigned characters representing the public key.
    - ``ping_hash``: An array of 32 unsigned characters representing the hash of the ping.
    - ``signature``: An array of 64 unsigned characters representing the signature.
- **Description**: The `fd_gossip_view_pong` structure is a packed data structure used in the gossip protocol to represent a pong message. It contains a public key, a hash of the ping message, and a signature, all of which are used to verify the authenticity and integrity of the pong message in the communication process.


---
### fd\_gossip\_view\_pong\_t
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: A 32-byte array that stores the public key.
    - ``ping_hash``: A 32-byte array that stores the hash of the ping message.
    - ``signature``: A 64-byte array that stores the signature for verification.
- **Description**: Represents a gossip protocol pong message, which includes a public key, a hash of the ping message, and a signature for authentication purposes. This structure is used in network communication to acknowledge receipt of a ping message and verify the identity of the sender.


---
### fd\_gossip\_view
- **Type**: ``struct``
- **Members**:
    - ``tag``: Stores a tag that identifies the type of gossip message.
    - ``pull_request``: An array of one `fd_gossip_view_pull_request_t` structure for pull request messages.
    - ``pull_response``: An array of one `fd_gossip_view_pull_response_t` structure for pull response messages.
    - ``push``: An array of one `fd_gossip_view_push_t` structure for push messages.
    - ``prune``: An array of one `fd_gossip_view_prune_t` structure for prune messages.
    - ``ping_pong_off``: Stores an offset for ping/pong messages.
- **Description**: Represents a gossip message view that can hold different types of gossip messages, such as pull requests, pull responses, push messages, and prune messages, using a union to store only one type of message at a time, identified by the `tag` field.


---
### fd\_gossip\_view\_t
- **Type**: ``struct``
- **Members**:
    - ``tag``: Stores the type of gossip message as an unsigned character.
    - ``pull_request``: Holds a single `fd_gossip_view_pull_request_t` structure for pull request messages.
    - ``pull_response``: Holds a single `fd_gossip_view_pull_response_t` structure for pull response messages.
    - ``push``: Holds a single `fd_gossip_view_push_t` structure for push messages.
    - ``prune``: Holds a single `fd_gossip_view_prune_t` structure for prune messages.
    - ``ping_pong_off``: Stores the offset for ping or pong messages as an unsigned short.
- **Description**: Represents a gossip message view in the system, encapsulating different types of gossip messages such as pull requests, pull responses, pushes, prunes, and ping/pong messages, with a tag indicating the message type and a union to store the specific message data.


# Functions

---
### fd\_contact\_info\_get\_socket<!-- {{#callable:fd_contact_info_get_socket}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L321>)

Retrieves a socket from a contact information structure using a specified tag.
- **Inputs**:
    - ``ci``: A pointer to a constant `fd_contact_info_t` structure that contains socket information.
    - ``tag``: An unsigned character representing the index of the socket to retrieve.
- **Logic and Control Flow**:
    - Checks if the `tag` is greater than or equal to `FD_CONTACT_INFO_SOCKET_CNT` using `FD_UNLIKELY` macro.
    - If the `tag` is invalid, logs an error message using `FD_LOG_ERR`.
    - Returns the socket at the index specified by `tag` from the `sockets` array in the `ci` structure.
- **Output**: Returns an `fd_ip4_port_t` representing the socket at the specified tag index.


---
### fd\_contact\_info\_gossip\_socket<!-- {{#callable:fd_contact_info_gossip_socket}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L330>)

Retrieves the gossip socket port from a contact information structure.
- **Inputs**:
    - ``ci``: A pointer to a constant `fd_contact_info_t` structure containing contact information.
- **Logic and Control Flow**:
    - Calls the [`fd_contact_info_get_socket`](<#fd_contact_info_get_socket>) function with the `ci` pointer and the `FD_CONTACT_INFO_SOCKET_GOSSIP` tag.
    - Returns the result of the [`fd_contact_info_get_socket`](<#fd_contact_info_get_socket>) function call.
- **Output**: Returns the gossip socket port as an `fd_ip4_port_t` type.
- **Functions Called**:
    - [`fd_contact_info_get_socket`](<#fd_contact_info_get_socket>)


---
### fd\_gossip\_pull\_request\_max\_filter\_bits<!-- {{#callable:fd_gossip_pull_request_max_filter_bits}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L340>)

Calculates the maximum number of bits available for a filter in a gossip pull request message.
- **Inputs**:
    - `num_keys`: The number of keys in the pull request.
    - `contact_info_crds_sz`: The size of the contact information CRDS value.
    - `payload_sz`: The total size of the payload.
- **Logic and Control Flow**:
    - Subtracts fixed sizes for various components from `payload_sz`, including discriminant, keys length, keys, has_bits, bloom vector length, bloom bits count, bloom number of bits set, mask, mask bits, and contact information CRDS size.
    - Multiplies the result by 8 to convert the size from bytes to bits.
- **Output**: Returns the maximum number of bits available for the filter.


# Function Declarations (Public API)

---
### fd\_gossip\_msg\_parse<!-- {{#callable_declaration:fd_gossip_msg_parse}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L335>)

Parses a gossip message from a payload.
- **Description**: Use this function to parse a gossip message from a given payload and populate the provided view structure with the parsed data. Ensure that the payload size does not exceed the maximum transmission unit (MTU) defined by `FD_GOSSIP_MTU`. The function expects the payload to contain a valid message type tag, which it uses to determine the specific parsing logic to apply. If the message type is unknown, the function logs a warning and returns zero. The function assumes that the payload is correctly formatted and that the view structure is initialized before calling.
- **Inputs**:
    - `view`: A pointer to an `fd_gossip_view_t` structure where the parsed message data will be stored. Must not be null.
    - `payload`: A pointer to the payload data to parse. Must not be null and should point to a valid memory region of at least `payload_sz` bytes.
    - `payload_sz`: The size of the payload in bytes. Must be greater than zero and less than or equal to `FD_GOSSIP_MTU`. If the size is invalid, the function will not proceed with parsing.
- **Output**: Returns the number of bytes consumed from the payload if parsing is successful, or zero if an error occurs.
- **See Also**: [`fd_gossip_msg_parse`](<fd_gossip_msg_parse.c.md#fd_gossip_msg_parse>)  (Implementation)


---
### fd\_gossip\_pull\_request\_init<!-- {{#callable_declaration:fd_gossip_pull_request_init}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L357>)

Initializes a gossip pull request message.
- **Description**: Use this function to initialize a gossip pull request message in the provided payload buffer. It sets up the message with the specified number of keys, bits, and mask parameters, and includes contact information. Ensure the payload buffer is large enough to accommodate the message, as defined by the maximum transmission unit (MTU). The function outputs pointers to the bloom filter keys, bits, and the number of bits set, and returns the size of the payload used. If the contact information size exceeds the available space, the function returns an error.
- **Inputs**:
    - `payload`: A pointer to the buffer where the pull request message will be initialized. Must not be null and should have a size of at least `payload_sz`.
    - `payload_sz`: The size of the `payload` buffer. Must be less than or equal to `FD_GOSSIP_MTU`.
    - `num_keys`: The number of keys to include in the bloom filter. Determines the size of the bloom keys array.
    - `num_bits`: The number of bits for the bloom filter. If zero, no bloom bits are included.
    - `mask`: A mask value to include in the message.
    - `mask_bits`: The number of bits in the mask.
    - `contact_info_crds`: A pointer to the contact information to include in the message. Must not be null if `contact_info_crds_sz` is greater than zero.
    - `contact_info_crds_sz`: The size of the contact information. Must not exceed the remaining space in the payload after other fields are set.
    - `out_bloom_keys`: A pointer to a location where the function will store the address of the bloom keys array. Must not be null.
    - `out_bloom_bits`: A pointer to a location where the function will store the address of the bloom bits array, or NULL if `num_bits` is zero. Must not be null.
    - `out_bits_set`: A pointer to a location where the function will store the address of the number of bits set in the bloom filter. Must not be null.
    - `out_payload_sz`: A pointer to a location where the function will store the size of the payload used. Must not be null.
- **Output**: Returns 0 on success, or -1 if the contact information size exceeds the available space in the payload.
- **See Also**: [`fd_gossip_pull_request_init`](<fd_gossip_msg_ser.c.md#fd_gossip_pull_request_init>)  (Implementation)


---
### fd\_gossip\_contact\_info\_encode<!-- {{#callable_declaration:fd_gossip_contact_info_encode}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L371>)

Encodes contact information into a buffer.
- **Description**: Use this function to encode contact information into a specified buffer for transmission or storage. Ensure that the buffer size does not exceed the maximum transmission unit (MTU) defined by `FD_GOSSIP_MTU`. The function requires valid contact information and a buffer with sufficient capacity. It optionally provides the size of the encoded data. If the encoding process fails, the function returns an error code.
- **Inputs**:
    - `contact_info`: A pointer to a `fd_contact_info_t` structure containing the contact information to encode. Must not be null.
    - `out_buf`: A pointer to a buffer where the encoded contact information will be stored. Must not be null.
    - `out_buf_cap`: The capacity of the `out_buf` buffer in bytes. Must be greater than or equal to the size of the encoded data.
    - `opt_encoded_sz`: An optional pointer to a `ulong` where the function will store the size of the encoded data. Can be null if the size is not needed.
- **Output**: Returns 0 on success. If encoding fails, an error code is returned.
- **See Also**: [`fd_gossip_contact_info_encode`](<fd_gossip_msg_ser.c.md#fd_gossip_contact_info_encode>)  (Implementation)


---
### fd\_gossip\_crds\_vote\_encode<!-- {{#callable_declaration:fd_gossip_crds_vote_encode}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_private.h#L377>)

Encodes a CRDS vote into a buffer.
- **Description**: Use this function to encode a CRDS vote into a specified buffer. This function requires a buffer to store the encoded data, a transaction, and an identity public key. It also requires the current time in nanoseconds. The function reserves space for a signature and encodes the vote type, identity public key, transaction, and timestamp into the buffer. Optionally, it can return the size of the encoded data. Ensure the buffer is large enough to hold the encoded data to prevent overflow.
- **Inputs**:
    - `out_buf`: A pointer to the buffer where the encoded vote will be stored. Must not be null and should have sufficient capacity to hold the encoded data.
    - `out_buf_sz`: The size of the output buffer in bytes. Must be large enough to accommodate the encoded vote data.
    - `txn`: A pointer to the transaction data to encode. Must not be null.
    - `txn_sz`: The size of the transaction data in bytes. Determines how much of the transaction data is encoded.
    - `identity_pubkey`: A pointer to the identity public key. Must not be null and must be 32 bytes in length.
    - `now`: The current time in nanoseconds. Used to encode the timestamp in the vote.
    - `opt_encoded_sz`: An optional pointer to a variable where the function will store the size of the encoded data. Can be null if the size is not needed.
- **Output**: Returns 0 on success. If `opt_encoded_sz` is provided, it will contain the size of the encoded data.
- **See Also**: [`fd_gossip_crds_vote_encode`](<fd_gossip_msg_ser.c.md#fd_gossip_crds_vote_encode>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)