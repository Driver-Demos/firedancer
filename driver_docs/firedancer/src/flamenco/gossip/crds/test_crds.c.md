<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests the basic creation and initialization of CRDS structures in the Firedancer codebase.

# Purpose
The code is a C test program that verifies the basic functionality of creating and joining a `fd_crds` object. It includes necessary headers and defines a static function [`test_crds_new_basic`](<#test_crds_new_basic>) to test the creation of a `fd_crds` object with specified maximum elements and purged elements. The function allocates aligned memory for the `fd_crds` object, initializes a random number generator, and creates a `fd_crds` object using `fd_crds_new`. It then joins the `fd_crds` object with `fd_crds_join` and checks for successful creation and joining using `FD_TEST` assertions. The [`main`](<#main>) function initializes the environment, calls the test function, logs the success of the test, and then halts the program.
# Imports and Dependencies

---
- `../../../util/fd_util.h`
- `fd_crds.h`
- `stdlib.h`


# Functions

---
### test\_crds\_new\_basic<!-- {{#callable:test_crds_new_basic}} -->
[View Source →](<../../../../../../src/flamenco/gossip/crds/test_crds.c#L6>)

Tests the creation and initialization of a CRDS (Coordinate Reference Data System) structure with specified parameters.
- **Inputs**: None
- **Logic and Control Flow**:
    - Define `ele_max` as 1024 and `purged_max` as 512 to set the maximum elements and purged elements for the CRDS.
    - Allocate aligned memory for the CRDS using `aligned_alloc` with alignment from `fd_crds_align()` and size from `fd_crds_footprint(ele_max, purged_max)`.
    - Check if memory allocation is successful using `FD_TEST`.
    - Initialize a random number generator `rng` using `fd_rng_new` and `fd_rng_join`, and verify its success with `FD_TEST`.
    - Declare a static `fd_gossip_out_ctx_t` structure `gossip_out` initialized to zero.
    - Create a new CRDS structure `shcrds` using [`fd_crds_new`](<fd_crds.c.md#fd_crds_new>) with the allocated memory, random number generator, element limits, and gossip context, then verify its success with `FD_TEST`.
    - Join the CRDS structure using [`fd_crds_join`](<fd_crds.c.md#fd_crds_join>) to obtain a `fd_crds_t` pointer `crds`, and verify its success with `FD_TEST`.
    - Free the allocated memory using `free`.
- **Output**: No output is returned as the function is void and primarily performs tests with assertions.
- **Functions Called**:
    - [`fd_crds_align`](<fd_crds.c.md#fd_crds_align>)
    - [`fd_crds_footprint`](<fd_crds.c.md#fd_crds_footprint>)
    - [`fd_crds_new`](<fd_crds.c.md#fd_crds_new>)
    - [`fd_crds_join`](<fd_crds.c.md#fd_crds_join>)


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../../src/flamenco/gossip/crds/test_crds.c#L29>)

Initializes the environment, runs a basic test for CRDS, logs the result, and then halts the program.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of strings representing the command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Executes the [`test_crds_new_basic`](<#test_crds_new_basic>) function to perform a basic test on CRDS functionality.
    - Logs a notice message indicating the test passed using `FD_LOG_NOTICE`.
    - Calls `fd_halt` to terminate the program cleanly.
    - Returns 0 to indicate successful execution.
- **Output**: Returns an integer value 0 to indicate successful execution.
- **Functions Called**:
    - [`test_crds_new_basic`](<#test_crds_new_basic>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)