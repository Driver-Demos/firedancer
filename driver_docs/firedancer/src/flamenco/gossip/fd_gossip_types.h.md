<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures and constants for gossip update messages in a distributed network.

# Purpose
The code defines data structures and constants for managing gossip protocol messages in a distributed system. It is a C header file that specifies the format and protocol for update messages produced by a gossip tile, which are published to a link for consumption by other tiles. The file includes definitions for various types of gossip messages, such as contact information, votes, duplicate shreds, and snapshot hashes. These messages are used to communicate updates about peer nodes in a network, including their contact information, votes, and other relevant data.

The header file defines several constants that categorize the types of gossip messages, such as `FD_GOSSIP_UPDATE_TAG_CONTACT_INFO` and `FD_GOSSIP_UPDATE_TAG_VOTE`. It also specifies the maximum number of contact information entries that can be maintained, using `FD_CONTACT_INFO_TABLE_SIZE`. The data structures, such as `fd_contact_info_t`, `fd_gossip_vote_t`, and `fd_gossip_update_message_t`, encapsulate the details of each message type, including fields for public keys, timestamps, and other relevant metadata. These structures facilitate the incremental and organized consumption of gossip messages by maintaining indices and ensuring deduplication of contact information.
# Imports and Dependencies

---
- `../types/fd_types_custom.h`
- `../../util/net/fd_net_headers.h`


# Data Structures

---
### fd\_contact\_info
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: The identity public key of the peer node.
    - ``shred_version``: The shred version of the peer node, should be non-zero but not required.
    - ``instance_creation_wallclock_nanos``: The creation timestamp of the instance in nanoseconds.
    - ``wallclock_nanos``: The timestamp on the producer side of when the contact info was signed.
    - ``sockets``: An array of IP address and port pairs for standard Solana protocols supported by the peer node.
    - ``version.client``: The self-reported client version, typically one of `FD_CONTACT_INFO_VERSION_CLIENT_*`.
    - ``version.major``: The self-reported major version of the client.
    - ``version.minor``: The self-reported minor version of the client.
    - ``version.patch``: The self-reported patch version of the client.
    - ``version.commit``: The self-reported commit hash of the client, in little-endian order, or 0 if no commit hash was provided.
    - ``version.feature_set``: The self-reported feature set of the client, in little-endian order.
- **Description**: Represents a peer node in the Solana network, providing information such as identity, supported protocols, and client version details. The structure includes fields for the node's public key, shred version, timestamps, and an array of IP and port pairs for different protocols. It also contains a nested structure for version information, including client version, major, minor, and patch numbers, as well as commit hash and feature set.


---
### fd\_contact\_info\_t
- **Type**: ``struct``
- **Members**:
    - ``pubkey``: The identity public key of the peer node.
    - ``shred_version``: The shred version of the peer node, should be non-zero but not required.
    - ``instance_creation_wallclock_nanos``: The timestamp of when the instance was created, in nanoseconds.
    - ``wallclock_nanos``: The timestamp on the producer side of when the contact info was signed, in nanoseconds.
    - ``sockets``: An array of IP address and port pairs for standard Solana protocols supported by the node.
    - ``version.client``: The self-reported client version, typically one of the predefined constants.
    - ``version.major``: The self-reported major version of the client.
    - ``version.minor``: The self-reported minor version of the client.
    - ``version.patch``: The self-reported patch version of the client.
    - ``version.commit``: The self-reported commit hash of the client, in little-endian order, or 0 if not provided.
    - ``version.feature_set``: The self-reported feature set of the client, in little-endian order.
- **Description**: Represents a peer node in the cluster that publishes information about itself to the gossip network. It includes the node's public key, shred version, timestamps, supported protocol sockets, and version information. The structure is used to manage contact information updates and removals in the gossip network, ensuring that each node's contact info is unique and up-to-date.


---
### fd\_gossip\_vote
- **Type**: ``struct``
- **Members**:
    - `vote_tower_index`: Stores the index of the vote tower.
    - `txn_sz`: Holds the size of the transaction data.
    - `txn`: Contains the transaction data with a fixed size of 1232 bytes.
- **Description**: Represents a vote transaction received from a peer node, typically sent over the TPU or via gossip for redundancy. The transaction data is not validated or parsed, and signatures are not verified, meaning the data could be empty, corrupt, or malicious.


---
### fd\_gossip\_vote\_t
- **Type**: ``struct``
- **Members**:
    - `vote_tower_index`: An unsigned character representing the index of the vote tower.
    - `txn_sz`: An unsigned long indicating the size of the transaction data.
    - `txn`: An array of unsigned characters with a fixed size of 1232, containing the transaction data.
- **Description**: Represents a vote transaction received from a peer node in the gossip network, identified by the tag `FD_GOSSIP_UPDATE_TAG_VOTE`. The structure contains the index of the vote tower, the size of the transaction data, and the transaction data itself, which is not validated or parsed and may be arbitrary or corrupt.


---
### fd\_gossip\_duplicate\_shred
- **Type**: ``struct``
- **Members**:
    - `index`: A `ushort` representing the index of the duplicate shred.
    - `slot`: A `ulong` representing the slot number associated with the shred.
    - `num_chunks`: A `uchar` indicating the number of chunks in the shred.
    - `chunk_index`: A `uchar` representing the index of the current chunk.
    - `wallclock`: A `long` representing the wallclock time in nanoseconds.
    - `chunk_len`: A `ulong` indicating the length of the chunk.
    - `chunk`: An array of `uchar` with a maximum size defined by `FD_GOSSIP_DUPLICATE_SHRED_MAX_CHUNKS`, holding the chunk data.
- **Description**: Represents a duplicate shred in the gossip network, which is used to handle cases of equivocation where a node publishes conflicting shred data for its leader slot. The structure contains information about the shred's index, slot, number of chunks, current chunk index, wallclock time, chunk length, and the actual chunk data.


---
### fd\_gossip\_duplicate\_shred\_t
- **Type**: ``struct``
- **Members**:
    - `index`: The index of the duplicate shred.
    - `slot`: The slot number associated with the duplicate shred.
    - `num_chunks`: The total number of chunks in the duplicate shred.
    - `chunk_index`: The index of the current chunk within the duplicate shred.
    - `wallclock`: The wallclock time in nanoseconds when the duplicate shred was recorded.
    - `chunk_len`: The length of the current chunk in the duplicate shred.
    - `chunk`: The data of the current chunk, with a maximum size defined by `FD_GOSSIP_DUPLICATE_SHRED_MAX_CHUNKS`.
- **Description**: Represents a duplicate shred in the gossip network, which occurs when a node publishes conflicting shred data for its leader slot. This structure includes metadata such as the index, slot, and wallclock time, as well as the chunk data and its length.


---
### fd\_gossip\_snapshot\_hash\_pair
- **Type**: ``struct``
- **Members**:
    - `slot`: An unsigned long integer representing the slot number.
    - `hash`: An array of 32 unsigned characters representing the hash value.
- **Description**: Represents a pair consisting of a slot number and its corresponding hash value, used in the context of gossip snapshot updates to track the latest snapshot data available from peer nodes.


---
### fd\_gossip\_snapshot\_hash\_pair\_t
- **Type**: ``struct``
- **Members**:
    - `slot`: Represents the slot number associated with the snapshot.
    - `hash`: Stores a 32-byte hash value corresponding to the snapshot.
- **Description**: The `fd_gossip_snapshot_hash_pair_t` structure is used to represent a pair consisting of a slot number and its corresponding hash value. This structure is part of the gossip protocol, where it is used to communicate snapshot hash updates between peer nodes. The `slot` member indicates the specific slot for which the hash is relevant, while the `hash` member contains the cryptographic hash of the snapshot data for that slot.


---
### fd\_gossip\_snapshot\_hashes
- **Type**: ``struct``
- **Members**:
    - ``full``: An array containing a single `fd_gossip_snapshot_hash_pair_t` representing the full snapshot hash.
    - ``incremental_len``: An unsigned long integer indicating the number of incremental snapshot hashes present.
    - ``incremental``: An array of `fd_gossip_snapshot_hash_pair_t` with a maximum size defined by `FD_GOSSIP_SNAPSHOT_HASHES_MAX_INCREMENTAL`, representing incremental snapshot hashes.
- **Description**: Represents a data structure used to store snapshot hash information in a gossip network. It contains a full snapshot hash and a list of incremental snapshot hashes that build on the full snapshot. The `full` field holds the complete snapshot hash, while the `incremental` array stores recent incremental snapshot hashes, with `incremental_len` indicating the number of incremental hashes present.


---
### fd\_gossip\_snapshot\_hashes\_t
- **Type**: ``struct``
- **Members**:
    - `full`: An array containing a single `fd_gossip_snapshot_hash_pair_t` representing the full snapshot slot and hash.
    - `incremental_len`: A `ulong` indicating the number of incremental snapshot hashes available.
    - `incremental`: An array of `fd_gossip_snapshot_hash_pair_t` with a maximum size of `FD_GOSSIP_SNAPSHOT_HASHES_MAX_INCREMENTAL`, representing recent incremental snapshots.
- **Description**: Contains information about snapshot hashes published by peer nodes in the gossip network, including a full snapshot hash and a list of incremental snapshot hashes that build on the full snapshot.


---
### fd\_gossip\_update\_message
- **Type**: ``struct``
- **Members**:
    - ``tag``: Identifies the type of gossip message being sent.
    - ``origin_pubkey``: Stores the public key of the origin node.
    - ``origin_stake``: Represents the stake of the origin node.
    - ``wallclock_nanos``: Records the timestamp in nanoseconds when the message was created.
    - ``contact_info``: Contains an index and contact information for a node.
    - ``contact_info_remove``: Contains an index for removing contact information from an array.
    - ``lowest_slot``: Indicates the lowest slot number in the message.
    - ``vote``: Holds a vote transaction sent by a peer node.
    - ``duplicate_shred``: Contains information about duplicate shred data.
    - ``snapshot_hashes``: Includes snapshot hash updates from a peer node.
- **Description**: Defines a message structure used in a gossip protocol to communicate updates between nodes. The structure includes a tag to identify the message type, the origin node's public key and stake, and a timestamp. It uses a union to store different types of message content, such as contact information, votes, duplicate shreds, and snapshot hashes, allowing for flexible message handling based on the tag.


---
### fd\_gossip\_update\_message\_t
- **Type**: ``struct``
- **Members**:
    - ``tag``: Identifies the type of gossip message being sent.
    - ``origin_pubkey``: Stores the public key of the origin node.
    - ``origin_stake``: Represents the stake of the origin node.
    - ``wallclock_nanos``: Records the timestamp of the message in nanoseconds.
    - ``contact_info``: Contains contact information for a peer node, including an index and an array of `fd_contact_info_t`.
    - ``contact_info_remove``: Specifies the index of contact info to remove from the array.
    - ``lowest_slot``: Indicates the lowest slot number in the gossip message.
    - ``vote``: Holds a `fd_gossip_vote_t` structure representing a vote transaction.
    - ``duplicate_shred``: Contains a `fd_gossip_duplicate_shred_t` structure for handling duplicate shred data.
    - ``snapshot_hashes``: Includes a `fd_gossip_snapshot_hashes_t` structure for snapshot hash updates.
- **Description**: Encapsulates a gossip update message in a gossip network, containing various types of messages such as contact information, votes, duplicate shreds, and snapshot hashes. The structure uses a union to store different message types, identified by the `tag` field, and includes metadata such as the origin's public key, stake, and a timestamp.



---
Made with ❤️ by [Driver](https://www.driver.ai/)