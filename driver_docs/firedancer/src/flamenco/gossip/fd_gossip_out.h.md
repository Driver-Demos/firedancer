<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines structures and functions for managing and publishing data chunks in a gossip protocol.

# Purpose
The code is a C header file that defines the structure and function prototypes for managing output chunks in a gossip protocol. It includes the necessary headers for utility and stem functionalities. The `fd_gossip_out_ctx` structure holds context information for managing memory and chunk indices. The function [`fd_gossip_out_get_chunk`](<#fd_gossip_out_get_chunk>) provides a pointer to the next available chunk in the data cache line, ensuring that writes do not exceed the link's Maximum Transmission Unit (MTU). The function [`fd_gossip_tx_publish_chunk`](<#fd_gossip_tx_publish_chunk>) is used to publish a chunk that was previously acquired, ensuring proper data transmission within the gossip protocol.
# Imports and Dependencies

---
- `../../util/fd_util.h`
- `../../disco/stem/fd_stem.h`


# Data Structures

---
### fd\_gossip\_out\_ctx
- **Type**: ``struct``
- **Members**:
    - ``mem``: A pointer to a `fd_wksp_t` workspace.
    - ``chunk0``: An unsigned long representing the initial chunk.
    - ``wmark``: An unsigned long representing a watermark.
    - ``chunk``: An unsigned long representing the current chunk.
    - ``idx``: An unsigned long representing an index.
- **Description**: Manages the context for gossip output operations, including memory workspace and chunk management.


---
### fd\_gossip\_out\_ctx\_t
- **Type**: ``struct``
- **Members**:
    - ``mem``: A pointer to an `fd_wksp_t` structure, representing a memory workspace.
    - ``chunk0``: An unsigned long integer representing the initial chunk index.
    - ``wmark``: An unsigned long integer representing a watermark for chunk management.
    - ``chunk``: An unsigned long integer representing the current chunk index.
    - ``idx``: An unsigned long integer representing an index for tracking purposes.
- **Description**: Manages the context for outgoing gossip data, including memory workspace and chunk indices for efficient data handling.


# Function Declarations (Public API)

---
### fd\_gossip\_out\_get\_chunk<!-- {{#callable_declaration:fd_gossip_out_get_chunk}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_out.h#L17>)

Returns a pointer to the next available chunk in the dcache line.
- **Description**: Use this function to obtain a pointer to the next available chunk in the dcache line for writing. Ensure that any writes to this line do not exceed the link's Maximum Transmission Unit (MTU). After calling this function, you must call `fd_gossip_tx_publish_chunk` before calling this function again with the same context. This sequence ensures proper management of the chunks and prevents data corruption.
- **Inputs**:
    - `ctx`: A pointer to an `fd_gossip_out_ctx_t` structure. This structure must be properly initialized before use. The function uses this context to determine the memory location of the next available chunk. The pointer must not be null.
- **Output**: A pointer to the next available chunk in the dcache line.
- **See Also**: [`fd_gossip_out_get_chunk`](<fd_gossip_out.c.md#fd_gossip_out_get_chunk>)  (Implementation)


---
### fd\_gossip\_tx\_publish\_chunk<!-- {{#callable_declaration:fd_gossip_tx_publish_chunk}} -->
[View Source →](<../../../../../src/flamenco/gossip/fd_gossip_out.h#L27>)

Publishes a data chunk acquired from a gossip context.
- **Description**: Use this function to publish a data chunk that was previously acquired using `fd_gossip_out_get_chunk`. Ensure that the chunk is within the valid range specified by the context and does not exceed the network's maximum transmission unit (MTU). This function must be called before acquiring another chunk with `fd_gossip_out_get_chunk` for the same context. It updates the context to point to the next available chunk.
- **Inputs**:
    - `ctx`: A pointer to an `fd_gossip_out_ctx_t` structure. This must not be null and should be a valid context previously used to acquire a chunk. The function checks if the current chunk is within the valid range and logs an error if it is not.
    - `stem`: A pointer to an `fd_stem_context_t` structure. This must not be null and should be a valid stem context for publishing.
    - `sig`: An unsigned long integer representing the signature of the chunk. This is used for identification purposes.
    - `sz`: An unsigned long integer representing the size of the chunk. It must not exceed the network's MTU.
    - `now`: A long integer representing the current time or timestamp. This is used for time-stamping the publication.
- **Output**: None
- **See Also**: [`fd_gossip_tx_publish_chunk`](<fd_gossip_out.c.md#fd_gossip_tx_publish_chunk>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)