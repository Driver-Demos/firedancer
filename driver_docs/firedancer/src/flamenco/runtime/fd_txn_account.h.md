<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines `fd_txn_account_t`, a non-thread-safe wrapper for database records with transaction execution and reference counting.

# Purpose
The code defines a C header file for managing transaction accounts within a specific runtime environment. It introduces the `fd_txn_account_t` structure, which acts as a wrapper around a database record to provide an interface for account management during transaction execution. This structure includes metadata and data pointers, a public key, and a flag indicating if the account is mutable. The code emphasizes that `fd_txn_account_t` is not thread-safe and supports only a single join at a time, which means it is designed for single-threaded operations.

The header file also declares several functions for creating, joining, leaving, and deleting `fd_txn_account_t` objects. These functions manage the lifecycle of the transaction account objects, ensuring proper memory allocation and deallocation. Additionally, the file provides factory constructors for initializing accounts from a "funk" record, which is a specific type of database record. Accessor and mutator functions are included to interact with the account's metadata, data, and other properties. The code also includes several TODO comments indicating potential future changes, such as making the `fd_txn_account` structure private and modifying the memory layout handling.
# Imports and Dependencies

---
- `../accdb/fd_accdb_sync.h`
- `../types/fd_types.h`
- `../../funk/fd_funk_rec.h`


# Data Structures

---
### fd\_acc\_mgr\_t
- **Type**: ``struct``
- **Members**:
    - ``fd_acc_mgr``: A forward declaration of the `fd_acc_mgr` structure.
- **Description**: The `fd_acc_mgr_t` is a typedef for the `fd_acc_mgr` structure, which is forward-declared in the provided code. The actual definition of the `fd_acc_mgr` structure is not included in the code snippet, so its members and functionality are not specified here. This typedef is used to create an alias for the `fd_acc_mgr` structure, allowing for easier reference in the code.


---
### fd\_txn\_account
- **Type**: ``struct``
- **Members**:
    - `magic`: A unique identifier for the `fd_txn_account` structure.
    - `pubkey`: An array containing the public key associated with the account.
    - `meta`: A pointer to the account's metadata.
    - `data`: A pointer to the account's data.
    - `is_mutable`: Indicates if the account is mutable.
    - `meta_soff`: An offset related to the account's metadata.
    - `starting_dlen`: The initial length of the account's data.
    - `starting_lamports`: The initial amount of lamports (currency) in the account.
    - `refcnt_excl`: A reference count for borrowing semantics, used in single-threaded logic.
- **Description**: Provides an interface for managing account data during transaction execution, including reference counting semantics. It is not thread-safe and supports only single-threaded operations. The structure includes fields for account metadata, data, mutability status, and reference counting, and it is aligned to 8 bytes for memory efficiency.


---
### fd\_txn\_account\_t
- **Type**: ``struct fd_txn_account``
- **Members**:
    - ``magic``: A unique identifier for the `fd_txn_account` structure.
    - ``pubkey``: An array containing the public key associated with the account.
    - ``meta``: A pointer to the account's metadata.
    - ``data``: A pointer to the account's data.
    - ``is_mutable``: An integer indicating if the account is mutable.
    - ``meta_soff``: A long integer representing the offset of the metadata.
    - ``starting_dlen``: An unsigned long representing the initial data length.
    - ``starting_lamports``: An unsigned long representing the initial amount of lamports.
    - ``refcnt_excl``: A ushort providing reference counting semantics for single-threaded logic.
- **Description**: Provides an interface for managing account data during transaction execution, including reference counting semantics. It is initialized with pointers to the account's metadata and data, the workspace it belongs to, its public key, and a flag indicating if the account is mutable. The structure is not thread-safe and supports only a single join at a time.


# Function Declarations (Public API)

---
### fd\_txn\_account\_new<!-- {{#callable_declaration:fd_txn_account_new}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L51>)

Allocates and initializes a transaction account object in memory.
- **Description**: Use this function to create a new transaction account object in a specified memory region. Ensure that the memory is properly aligned and non-null before calling. The function requires a public key and metadata, both of which must not be null. The function initializes the transaction account with the provided metadata and public key, and sets its mutability status. After successful execution, the transaction account owns the metadata and data, and the caller can use the initialized object.
- **Inputs**:
    - `mem`: A pointer to the memory region where the transaction account will be initialized. Must not be null and must be aligned to `fd_txn_account_t` alignment requirements. If invalid, the function returns null.
    - `pubkey`: A pointer to the public key associated with the transaction account. Must not be null. If null, the function returns null.
    - `meta`: A pointer to the account metadata. Must not be null. If null, the function returns null.
    - `is_mutable`: An integer indicating whether the transaction account is mutable. Non-zero for mutable, zero for immutable.
- **Output**: Returns a pointer to the initialized memory region if successful, or null if any input validation fails.
- **See Also**: [`fd_txn_account_new`](<fd_txn_account.c.md#fd_txn_account_new>)  (Implementation)


---
### fd\_txn\_account\_join<!-- {{#callable_declaration:fd_txn_account_join}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L75>)

Joins a thread to a transaction account memory region.
- **Description**: Use this function to join a thread with an independent address space to a memory region allocated for a transaction account. This function ensures that the memory region is correctly aligned and initialized before joining. It is important to note that only one valid join can exist per transaction account object at any time. This function is not thread-safe and should be used in single-threaded contexts. Ensure that the memory region and workspace are valid and properly initialized before calling this function.
- **Inputs**:
    - `mem`: A pointer to the memory region allocated for the transaction account. Must not be null and must be aligned to the alignment requirements of `fd_txn_account_t`. If null or misaligned, the function returns null.
    - `data_wksp`: A pointer to the workspace that the data belongs to. Must not be null. If null, the function returns null.
- **Output**: Returns a pointer to the `fd_txn_account_t` object if successful, or null if any input validation fails.
- **See Also**: [`fd_txn_account_join`](<fd_txn_account.c.md#fd_txn_account_join>)  (Implementation)


---
### fd\_txn\_account\_leave<!-- {{#callable_declaration:fd_txn_account_leave}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L82>)

Leaves the current local join of a transaction account.
- **Description**: Use this function to leave a current local join of a `fd_txn_account_t` object and obtain a pointer to the underlying shared memory region. This function should be called when you no longer need to access the transaction account locally. Ensure that the `acct` parameter is not null and that it has the correct magic number before calling this function. If these conditions are not met, the function will return null and log a warning.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` object. Must not be null and must have a valid magic number (`FD_TXN_ACCOUNT_MAGIC`). The caller retains ownership of this pointer.
- **Output**: Returns a pointer to the underlying shared memory region if successful, or null if the input is invalid.
- **See Also**: [`fd_txn_account_leave`](<fd_txn_account.c.md#fd_txn_account_leave>)  (Implementation)


---
### fd\_txn\_account\_delete<!-- {{#callable_declaration:fd_txn_account_delete}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L91>)

Removes the memory layout for a transaction account object.
- **Description**: Use this function to delete a transaction account object and return a pointer to the underlying shared memory. This function should be called when the transaction account is no longer needed, and it ensures that the account's metadata and data are transferred to the caller. The function must be called with a valid pointer to a memory region previously allocated for a transaction account. It checks for null pointers, misaligned memory, and incorrect magic numbers, logging warnings and returning null in these cases. After calling this function, any attempts to join the transaction account will fail.
- **Inputs**:
    - `mem`: A pointer to the memory region of the transaction account object. Must not be null, must be aligned to the alignment of `fd_txn_account_t`, and must have a valid magic number. If these conditions are not met, the function logs a warning and returns null.
- **Output**: Returns a pointer to the underlying shared memory if successful, or null if the input is invalid.
- **See Also**: [`fd_txn_account_delete`](<fd_txn_account.c.md#fd_txn_account_delete>)  (Implementation)


---
### fd\_txn\_account\_init\_from\_funk\_readonly<!-- {{#callable_declaration:fd_txn_account_init_from_funk_readonly}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L109>)

Initializes a transaction account with a readonly handle from a funk record.
- **Description**: Use this function to initialize a `fd_txn_account_t` object with a readonly handle to its corresponding funk record. This function is intended for use within a Solana transaction where a read lock is assumed to be held on the account, ensuring that the account metadata and data remain unchanged during the transaction. It is important to ensure that the `fd_txn_account_t` object is properly allocated and that the function is called in a context where the account's metadata and data will not be modified by other operations.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` object that will be initialized. Must not be null.
    - `pubkey`: A pointer to a `fd_pubkey_t` representing the public key of the account. Must not be null.
    - `funk`: A pointer to a `fd_funk_t` representing the funk record. Must not be null.
    - `xid`: A pointer to a `fd_funk_txn_xid_t` representing the transaction ID. Must not be null.
- **Output**: Returns an integer status code. Returns `FD_ACC_MGR_SUCCESS` on success or an error code if initialization fails.
- **See Also**: [`fd_txn_account_init_from_funk_readonly`](<fd_txn_account.c.md#fd_txn_account_init_from_funk_readonly>)  (Implementation)


---
### fd\_txn\_account\_init\_from\_funk\_mutable<!-- {{#callable_declaration:fd_txn_account_init_from_funk_mutable}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L120>)

Initializes a mutable transaction account with a handle into its funk record.
- **Description**: Use this function to initialize a `fd_txn_account_t` object with a mutable handle into its associated funk record. This function is not safe to call in the executor tile. It prepares the account for transaction execution by setting up necessary metadata and data pointers. The function also prepares a record for modification if it does not already exist in the current transaction. Ensure that the `prepare_out` parameter is a valid pointer to a `fd_funk_rec_prepare_t` structure, as it will be modified by this function.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` object to initialize. The caller retains ownership and must ensure it is valid.
    - `pubkey`: A pointer to a `fd_pubkey_t` structure representing the public key of the account. Must not be null.
    - `accdb`: A pointer to a `fd_accdb_user_t` structure representing the account database. Must be valid and initialized.
    - `xid`: A pointer to a `fd_funk_txn_xid_t` structure representing the transaction ID. Must not be null.
    - `do_create`: An integer flag indicating whether to create the record if it does not exist. Non-zero to create, zero otherwise.
    - `min_data_sz`: An unsigned long specifying the minimum data size required for the account. Must be a valid size.
    - `prepare_out`: A pointer to a `fd_funk_rec_prepare_t` structure where preparation details will be stored. Must not be null.
- **Output**: Returns a pointer to the account's metadata if successful, or NULL if the operation fails.
- **See Also**: [`fd_txn_account_init_from_funk_mutable`](<fd_txn_account.c.md#fd_txn_account_init_from_funk_mutable>)  (Implementation)


---
### fd\_txn\_account\_mutable\_fini<!-- {{#callable_declaration:fd_txn_account_mutable_fini}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L135>)

Publishes a mutable transaction account record to the database.
- **Description**: Use this function to finalize and publish the contents of a mutable transaction account record into the database. This function should be called after preparing the record with `fd_txn_account_init_from_funk_mutable`. It checks the validity of the prepared record and ensures that the record has not been modified by another thread. If the record is valid, it publishes the record to the database. This function is not thread-safe and assumes that the caller has exclusive access to the transaction account.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. Must not be null.
    - `accdb`: A pointer to a `fd_accdb_user_t` structure representing the account database. Must not be null.
    - `prepare`: A pointer to a `fd_funk_rec_prepare_t` structure containing the prepared record. Must not be null and must contain a valid record.
- **Output**: None
- **See Also**: [`fd_txn_account_mutable_fini`](<fd_txn_account.c.md#fd_txn_account_mutable_fini>)  (Implementation)


---
### fd\_txn\_account\_get\_owner<!-- {{#callable_declaration:fd_txn_account_get_owner}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L142>)

Retrieves the owner of a transaction account.
- **Description**: Use this function to obtain the public key of the owner associated with a given transaction account. This function is useful when you need to verify or utilize the ownership information of an account during transaction processing. Ensure that the account is properly set up before calling this function, as it will log a critical error if the account's metadata is not initialized.
- **Inputs**:
    - `acct`: A pointer to a constant `fd_txn_account_t` structure representing the transaction account. The account must be properly initialized and must not be null. If the account's metadata is not set up, the function logs a critical error.
- **Output**: Returns a pointer to a constant `fd_pubkey_t` representing the owner's public key of the transaction account.
- **See Also**: [`fd_txn_account_get_owner`](<fd_txn_account.c.md#fd_txn_account_get_owner>)  (Implementation)


---
### fd\_txn\_account\_get\_meta<!-- {{#callable_declaration:fd_txn_account_get_meta}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L145>)

Retrieves the metadata of a transaction account.
- **Description**: Use this function to obtain a constant pointer to the metadata associated with a given transaction account. This function is useful when you need to access the metadata without modifying it. Ensure that the `fd_txn_account_t` object is properly initialized before calling this function. The function is not thread-safe, so it should be used in a single-threaded context or with appropriate synchronization.
- **Inputs**:
    - `acct`: A pointer to a constant `fd_txn_account_t` object. This parameter must not be null and should point to a valid transaction account structure. If the pointer is invalid, the behavior is undefined.
- **Output**: Returns a constant pointer to the `fd_account_meta_t` structure associated with the given transaction account.
- **See Also**: [`fd_txn_account_get_meta`](<fd_txn_account.c.md#fd_txn_account_get_meta>)  (Implementation)


---
### fd\_txn\_account\_get\_data<!-- {{#callable_declaration:fd_txn_account_get_data}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L148>)

Retrieves the data associated with a transaction account.
- **Description**: Use this function to obtain a pointer to the data associated with a given transaction account. This function is useful when you need to access the account's data in a read-only manner. Ensure that the account object is properly initialized and joined before calling this function. The function does not modify the account or its data.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. This must not be null and should point to a valid, initialized transaction account object. The caller retains ownership of the account object.
- **Output**: A pointer to the account's data, which is read-only. The returned pointer is valid as long as the account object is valid and not modified.
- **See Also**: [`fd_txn_account_get_data`](<fd_txn_account.c.md#fd_txn_account_get_data>)  (Implementation)


---
### fd\_txn\_account\_get\_data\_mut<!-- {{#callable_declaration:fd_txn_account_get_data_mut}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L151>)

Returns a mutable pointer to the account data.
- **Description**: Use this function to obtain a mutable pointer to the data associated with a transaction account. This function is useful when you need to modify the account data directly. Ensure that the account is initialized and that you have the necessary permissions to modify the data. The function does not perform any checks on the mutability of the account, so it is the caller's responsibility to ensure that the account is mutable before calling this function.
- **Inputs**:
    - `acct`: A pointer to a constant `fd_txn_account_t` structure. The pointer must not be null, and the account must be properly initialized before calling this function. The caller retains ownership of the pointer.
- **Output**: A pointer to the account's data, which can be modified by the caller.
- **See Also**: [`fd_txn_account_get_data_mut`](<fd_txn_account.c.md#fd_txn_account_get_data_mut>)  (Implementation)


---
### fd\_txn\_account\_get\_data\_len<!-- {{#callable_declaration:fd_txn_account_get_data_len}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L154>)

Returns the length of the account data.
- **Description**: Use this function to get the length of the data associated with a transaction account. This function assumes that the account has been properly set up and initialized. If the account's metadata is not set, the function will log a critical error. Ensure that the account is initialized before calling this function to avoid unexpected behavior.
- **Inputs**:
    - `acct`: A pointer to a constant `fd_txn_account_t` structure. The account must be initialized and its metadata must not be null. The caller retains ownership of the pointer.
- **Output**: Returns an unsigned long integer representing the length of the account data.
- **See Also**: [`fd_txn_account_get_data_len`](<fd_txn_account.c.md#fd_txn_account_get_data_len>)  (Implementation)


---
### fd\_txn\_account\_is\_executable<!-- {{#callable_declaration:fd_txn_account_is_executable}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L157>)

Checks if the account is executable.
- **Description**: Use this function to determine if a given transaction account is marked as executable. This function requires that the account's metadata is set up before calling. If the metadata is not set, the function will log a critical error. This function is useful when you need to verify the executability status of an account during transaction processing.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. The `meta` field of this structure must not be null. The caller retains ownership of the pointer.
- **Output**: Returns a non-zero value if the account is executable, otherwise returns zero.
- **See Also**: [`fd_txn_account_is_executable`](<fd_txn_account.c.md#fd_txn_account_is_executable>)  (Implementation)


---
### fd\_txn\_account\_get\_lamports<!-- {{#callable_declaration:fd_txn_account_get_lamports}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L160>)

Retrieves the lamports from an account's metadata.
- **Description**: Use this function to obtain the number of lamports associated with an account's metadata. This function is useful when you need to check the balance or perform operations that depend on the account's lamport value. Ensure that the account is properly set up before calling this function, as it will log a critical error if the account's metadata is not initialized.
- **Inputs**:
    - `acct`: A pointer to a constant `fd_txn_account_t` structure. This parameter must not be null and must point to a valid account structure with initialized metadata. The caller retains ownership of the account structure.
- **Output**: Returns the number of lamports as an unsigned long integer from the account's metadata.
- **See Also**: [`fd_txn_account_get_lamports`](<fd_txn_account.c.md#fd_txn_account_get_lamports>)  (Implementation)


---
### fd\_txn\_account\_get\_rent\_epoch<!-- {{#callable_declaration:fd_txn_account_get_rent_epoch}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L163>)

Returns the maximum possible rent epoch value for an account.
- **Description**: Use this function to obtain the maximum possible rent epoch value for a transaction account. This function is useful when you need a placeholder or default value that represents the highest possible rent epoch. It does not depend on the state of the account and always returns a constant value. This function can be called at any time and does not modify the account or any other state.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. The function does not use this parameter, so it can be any valid or invalid pointer, including null.
- **Output**: The function returns `ULONG_MAX`, representing the maximum possible rent epoch value.
- **See Also**: [`fd_txn_account_get_rent_epoch`](<fd_txn_account.c.md#fd_txn_account_get_rent_epoch>)  (Implementation)


---
### fd\_txn\_account\_set\_meta<!-- {{#callable_declaration:fd_txn_account_set_meta}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L166>)

Sets the metadata for a transaction account.
- **Description**: Use this function to assign new metadata to a transaction account. The account must be mutable, and the metadata pointer must not be null. If the account is not mutable or the metadata pointer is null, the function logs a critical error. This function is typically used when updating the metadata of an account during transaction processing.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. The account must be mutable, indicated by its `is_mutable` field being non-zero. The caller retains ownership of the pointer.
    - `meta`: A pointer to a `fd_account_meta_t` structure representing the new metadata for the account. This pointer must not be null. The caller retains ownership of the pointer.
- **Output**: None
- **See Also**: [`fd_txn_account_set_meta`](<fd_txn_account.c.md#fd_txn_account_set_meta>)  (Implementation)


---
### fd\_txn\_account\_set\_executable<!-- {{#callable_declaration:fd_txn_account_set_executable}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L169>)

Sets the executable status of a transaction account.
- **Description**: Use this function to change the executable status of a transaction account. The account must be mutable and properly set up before calling this function. If the account is not mutable or not set up, the function will log a critical error and terminate the process. This function is typically used when you need to update the executable status of an account during transaction processing.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. The account must be mutable and properly initialized. The caller retains ownership of the account.
    - `is_executable`: An integer value indicating the desired executable status. A non-zero value sets the account as executable, while zero sets it as non-executable.
- **Output**: None
- **See Also**: [`fd_txn_account_set_executable`](<fd_txn_account.c.md#fd_txn_account_set_executable>)  (Implementation)


---
### fd\_txn\_account\_set\_owner<!-- {{#callable_declaration:fd_txn_account_set_owner}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L172>)

Sets the owner of a transaction account.
- **Description**: Use this function to assign a new owner to a transaction account. The account must be mutable and properly set up before calling this function. If the account is not mutable or not set up, the function will log a critical error and terminate. This function is typically used when updating the ownership of an account during transaction processing.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. The account must be mutable and properly initialized. The pointer must not be null.
    - `owner`: A pointer to a `fd_pubkey_t` structure representing the new owner's public key. The pointer must not be null.
- **Output**: None
- **See Also**: [`fd_txn_account_set_owner`](<fd_txn_account.c.md#fd_txn_account_set_owner>)  (Implementation)


---
### fd\_txn\_account\_set\_lamports<!-- {{#callable_declaration:fd_txn_account_set_lamports}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L175>)

Sets the lamports value for a transaction account.
- **Description**: Use this function to set the number of lamports for a transaction account. The account must be mutable and properly initialized with metadata before calling this function. If the account is not mutable or not set up, the function will log a critical error and terminate the process. Ensure that the account's metadata is correctly configured to avoid unexpected behavior.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. The account must be mutable and have its metadata initialized. The pointer must not be null.
    - `lamports`: An unsigned long integer representing the number of lamports to set for the account. There are no specific constraints on the value, but it should be within the valid range for lamports in the application context.
- **Output**: None
- **See Also**: [`fd_txn_account_set_lamports`](<fd_txn_account.c.md#fd_txn_account_set_lamports>)  (Implementation)


---
### fd\_txn\_account\_checked\_add\_lamports<!-- {{#callable_declaration:fd_txn_account_checked_add_lamports}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L178>)

Adds lamports to an account with overflow checking.
- **Description**: Use this function to safely add a specified number of lamports to an account's balance. It checks for arithmetic overflow during the addition. If an overflow occurs, the function returns an error code. This function is useful when you need to ensure that the account balance does not exceed the maximum value representable by an unsigned long integer. Call this function only when the account is properly initialized and joined.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the account. Must not be null and must point to a valid, initialized account object.
    - `lamports`: The number of lamports to add to the account's balance. Must be a non-negative value. If the addition results in an overflow, the function returns an error code.
- **Output**: Returns an integer status code: `FD_EXECUTOR_INSTR_SUCCESS` on success, or `FD_EXECUTOR_INSTR_ERR_ARITHMETIC_OVERFLOW` if an overflow occurs.
- **See Also**: [`fd_txn_account_checked_add_lamports`](<fd_txn_account.c.md#fd_txn_account_checked_add_lamports>)  (Implementation)


---
### fd\_txn\_account\_checked\_sub\_lamports<!-- {{#callable_declaration:fd_txn_account_checked_sub_lamports}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L181>)

Subtracts a specified amount of lamports from an account's balance with overflow checking.
- **Description**: Use this function to safely subtract a specified number of lamports from the balance of a transaction account. It checks for arithmetic overflow to ensure that the subtraction does not result in a negative balance. If an overflow occurs, the function returns an error code. This function should be called only when the account is initialized and joined, and it is not thread-safe.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the account from which lamports will be subtracted. Must not be null and must point to a valid, initialized account object.
    - `lamports`: The number of lamports to subtract from the account's balance. Must be a non-negative value. If the subtraction would result in a negative balance, the function returns an error code.
- **Output**: Returns an integer status code: `FD_EXECUTOR_INSTR_SUCCESS` on success, or `FD_EXECUTOR_INSTR_ERR_ARITHMETIC_OVERFLOW` if the subtraction would cause an overflow.
- **See Also**: [`fd_txn_account_checked_sub_lamports`](<fd_txn_account.c.md#fd_txn_account_checked_sub_lamports>)  (Implementation)


---
### fd\_txn\_account\_set\_data<!-- {{#callable_declaration:fd_txn_account_set_data}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L184>)

Sets the data for a transaction account.
- **Description**: Use this function to set the data of a transaction account. The account must be mutable and properly initialized with metadata before calling this function. If the account is not mutable or not set up, the function will log a critical error and terminate. This function is not thread-safe and should be used in a single-threaded context.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. The account must be mutable and initialized with metadata. The caller retains ownership and must ensure the pointer is not null.
    - `data`: A pointer to the data to be set in the account. The caller retains ownership and must ensure the pointer is not null.
    - `data_sz`: The size of the data in bytes. It must be a valid size that fits within the account's data capacity.
- **Output**: None
- **See Also**: [`fd_txn_account_set_data`](<fd_txn_account.c.md#fd_txn_account_set_data>)  (Implementation)


---
### fd\_txn\_account\_set\_data\_len<!-- {{#callable_declaration:fd_txn_account_set_data_len}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L189>)

Sets the data length for a transaction account.
- **Description**: Use this function to set the data length of a transaction account's metadata. The account must be mutable and properly initialized before calling this function. If the account is not mutable or not set up, the function will log a critical error and terminate the process. This function is not thread-safe and should be used in a single-threaded context.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. The account must be mutable and initialized. The caller retains ownership and must ensure the pointer is not null.
    - `data_len`: An unsigned long integer representing the new data length to set. The value is cast to an unsigned integer before being assigned.
- **Output**: None
- **See Also**: [`fd_txn_account_set_data_len`](<fd_txn_account.c.md#fd_txn_account_set_data_len>)  (Implementation)


---
### fd\_txn\_account\_set\_slot<!-- {{#callable_declaration:fd_txn_account_set_slot}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L192>)

Sets the slot value for a transaction account.
- **Description**: Use this function to set the slot value in the metadata of a transaction account. The account must be mutable and properly initialized before calling this function. If the account is not mutable or not set up, the function will log a critical error and terminate the program. This function is not thread-safe and should be used in a single-threaded context.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. The account must be mutable and initialized. The caller retains ownership and must ensure the pointer is not null.
    - `slot`: An unsigned long integer representing the slot value to set. There are no specific constraints on the value of `slot`.
- **Output**: None
- **See Also**: [`fd_txn_account_set_slot`](<fd_txn_account.c.md#fd_txn_account_set_slot>)  (Implementation)


---
### fd\_txn\_account\_clear\_owner<!-- {{#callable_declaration:fd_txn_account_clear_owner}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L196>)

Clears the owner field of an account's metadata.
- **Description**: Use this function to reset the owner field of an account's metadata to zero. This function must be called only on accounts that are mutable and properly set up. If the account is not mutable or not set up, the function will log a critical error and terminate the process. Ensure that the account's metadata is initialized before calling this function.
- **Inputs**:
    - `acct`: A pointer to an `fd_txn_account_t` structure. The account must be mutable and have its metadata properly initialized. The caller retains ownership of the pointer. If the account is not mutable or not set up, the function logs a critical error.
- **Output**: None
- **See Also**: [`fd_txn_account_clear_owner`](<fd_txn_account.c.md#fd_txn_account_clear_owner>)  (Implementation)


---
### fd\_txn\_account\_resize<!-- {{#callable_declaration:fd_txn_account_resize}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L199>)

Resizes the data length of a transaction account.
- **Description**: Use this function to change the data length of a transaction account. The account must be mutable and properly initialized before calling this function. If the account is not mutable or not set up, the function will log a critical error. The function updates the account's data length and zeroes out any new bytes if the account's data length increases.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure representing the transaction account. The account must be mutable and initialized. The caller retains ownership.
    - `dlen`: The new desired data length for the account. It must be a non-negative value.
- **Output**: None
- **See Also**: [`fd_txn_account_resize`](<fd_txn_account.c.md#fd_txn_account_resize>)  (Implementation)


---
### fd\_txn\_account\_is\_borrowed<!-- {{#callable_declaration:fd_txn_account_is_borrowed}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L202>)

Checks if the transaction account is borrowed.
- **Description**: Use this function to determine if a transaction account is currently borrowed. This is useful in scenarios where you need to ensure exclusive access to the account's data. The function checks the reference count to determine if the account is borrowed. It is important to ensure that the `acct` parameter is not null before calling this function.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. Must not be null. The function checks the `refcnt_excl` field to determine if the account is borrowed.
- **Output**: Returns a non-zero value if the account is borrowed, otherwise returns zero.
- **See Also**: [`fd_txn_account_is_borrowed`](<fd_txn_account.c.md#fd_txn_account_is_borrowed>)  (Implementation)


---
### fd\_txn\_account\_is\_mutable<!-- {{#callable_declaration:fd_txn_account_is_mutable}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L205>)

Checks if a transaction account is mutable.
- **Description**: Use this function to determine if a transaction account can be modified. It is important to know the mutability of an account when performing operations that may alter its state. This function is thread-unsafe and should be used in contexts where only a single thread accesses the account.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. This must not be null, and the caller retains ownership. The function will return an undefined result if the pointer is invalid.
- **Output**: Returns a non-zero value if the account is mutable, otherwise returns zero.
- **See Also**: [`fd_txn_account_is_mutable`](<fd_txn_account.c.md#fd_txn_account_is_mutable>)  (Implementation)


---
### fd\_txn\_account\_is\_readonly<!-- {{#callable_declaration:fd_txn_account_is_readonly}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L208>)

Checks if a transaction account is read-only.
- **Description**: Use this function to determine if a transaction account is read-only. This is useful when you need to ensure that the account's data cannot be modified. The function checks the `is_mutable` field of the `fd_txn_account_t` structure to make this determination. It is important to ensure that the account object is properly initialized before calling this function to avoid undefined behavior.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` structure. This parameter must not be null and should point to a valid transaction account object. The function will check the `is_mutable` field of this structure to determine if the account is read-only.
- **Output**: Returns 1 if the account is read-only, otherwise returns 0.
- **See Also**: [`fd_txn_account_is_readonly`](<fd_txn_account.c.md#fd_txn_account_is_readonly>)  (Implementation)


---
### fd\_txn\_account\_try\_borrow\_mut<!-- {{#callable_declaration:fd_txn_account_try_borrow_mut}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L211>)

Attempts to acquire a mutable borrow on a transaction account.
- **Description**: Use this function to try to obtain a mutable borrow on a `fd_txn_account_t` object. This is useful when you need to modify the account during transaction execution. The function must be called on a valid `fd_txn_account_t` object that has been properly initialized. It is not thread-safe and should only be used in single-threaded contexts. Ensure that the account is not already borrowed before calling this function to avoid unexpected behavior.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` object. The pointer must not be null and must point to a valid, initialized transaction account. The caller retains ownership of the account.
- **Output**: Returns an integer indicating the success or failure of acquiring a mutable borrow. A non-zero return value typically indicates failure.
- **See Also**: [`fd_txn_account_try_borrow_mut`](<fd_txn_account.c.md#fd_txn_account_try_borrow_mut>)  (Implementation)


---
### fd\_txn\_account\_drop<!-- {{#callable_declaration:fd_txn_account_drop}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L214>)

Releases a write lock on a transaction account.
- **Description**: Use this function to release a write lock on a `fd_txn_account_t` object when it is no longer needed. This function is part of the reference counting mechanism for transaction accounts and should be called to ensure proper resource management. It is important to call this function only when the account is no longer in use to avoid data corruption or undefined behavior. This function does not handle null pointers, so ensure the input is valid before calling.
- **Inputs**:
    - `acct`: A pointer to a `fd_txn_account_t` object. Must not be null. The caller retains ownership and is responsible for ensuring the account is no longer in use before calling this function.
- **Output**: None
- **See Also**: [`fd_txn_account_drop`](<fd_txn_account.c.md#fd_txn_account_drop>)  (Implementation)


---
### fd\_txn\_account\_set\_readonly<!-- {{#callable_declaration:fd_txn_account_set_readonly}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L217>)

Sets the transaction account to readonly mode.
- **Description**: Use this function to mark a transaction account as readonly, preventing any further modifications to its data. This function is useful when you want to ensure that the account's state remains unchanged during the remainder of a transaction. It must be called on a valid `fd_txn_account_t` object that has been properly initialized and joined. The function does not perform any checks on the account's current state, so ensure that the account is in a mutable state if needed before calling this function.
- **Inputs**:
    - `acct`: A pointer to an `fd_txn_account_t` object. The pointer must not be null, and the account must be properly initialized and joined. The caller retains ownership of the account object.
- **Output**: None
- **See Also**: [`fd_txn_account_set_readonly`](<fd_txn_account.c.md#fd_txn_account_set_readonly>)  (Implementation)


---
### fd\_txn\_account\_set\_mutable<!-- {{#callable_declaration:fd_txn_account_set_mutable}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L220>)

Sets the account to be mutable.
- **Description**: Use this function to mark an `fd_txn_account_t` object as mutable. This function is useful when you need to modify the account's data or metadata during transaction execution. Ensure that the account is not being accessed concurrently by multiple threads, as `fd_txn_account_t` is not thread-safe.
- **Inputs**:
    - `acct`: A pointer to an `fd_txn_account_t` object. Must not be null. The caller retains ownership of the object.
- **Output**: None
- **See Also**: [`fd_txn_account_set_mutable`](<fd_txn_account.c.md#fd_txn_account_set_mutable>)  (Implementation)


---
### fd\_txn\_account\_get\_solana\_meta<!-- {{#callable_declaration:fd_txn_account_get_solana_meta}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txn_account.h#L223>)

Retrieves Solana account metadata from a transaction account.
- **Description**: Use this function to obtain a `fd_solana_account_meta_t` structure containing metadata from a given transaction account. This function extracts specific metadata fields such as lamports, executable status, and owner from the provided account. It is important to ensure that the input account is valid and properly initialized before calling this function. The function does not modify the input account or any other state.
- **Inputs**:
    - `acct`: A pointer to a constant `fd_txn_account_t` structure. This parameter must not be null and should point to a valid transaction account with initialized metadata. The caller retains ownership of the account.
- **Output**: Returns a `fd_solana_account_meta_t` structure containing the lamports, executable status, and owner information from the input account.
- **See Also**: [`fd_txn_account_get_solana_meta`](<fd_txn_account.c.md#fd_txn_account_get_solana_meta>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)