<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for verifying system and program IDs using base58 decoding and public key comparison.

# Purpose
The code is a C program that tests the functionality of public key validation and classification within a Solana-based system. It includes functions to check if a given public key is active, pending, or associated with a specific cryptographic program, such as `secp256r1`. The program uses a series of `memcmp` operations to compare the provided public keys against known identifiers, which are likely defined in the included header file `fd_system_ids.h`. These identifiers represent various Solana system programs and sysvars.

The [`main`](<#main>) function initializes the environment, performs assertions to verify the correctness of public key mappings, and tests the classification functions using a predefined list of public keys. The [`assert_eq`](<#assert_eq>) function is used to ensure that the base58-encoded strings match their corresponding public key identifiers. The program concludes by logging a success message if all tests pass, and then halts execution. This code is intended to be executed as a standalone program, as indicated by the presence of the [`main`](<#main>) function, and it does not define any public APIs or external interfaces.
# Imports and Dependencies

---
- `fd_system_ids.h`


# Functions

---
### assert\_eq<!-- {{#callable:assert_eq}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_system_ids.c#L3>)

Verifies that a Base58-encoded string decodes to a specific public key.
- **Inputs**:
    - `base58`: A pointer to a constant character string representing the Base58-encoded data.
    - `key`: A `fd_pubkey_t` structure containing the expected public key to compare against.
- **Logic and Control Flow**:
    - Initialize a 32-byte array `decoded` to zero.
    - Call `fd_base58_decode_32` to decode the `base58` string into the `decoded` array.
    - Use `FD_TEST` to assert that the decoded data matches the public key in `key`.
- **Output**: No output is returned; the function performs an assertion to verify the equality of the decoded data and the public key.


---
### old\_fd\_pubkey\_is\_active\_reserved<!-- {{#callable:old_fd_pubkey_is_active_reserved}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_system_ids.c#L11>)

Checks if a given public key matches any of the predefined active reserved program IDs.
- **Inputs**:
    - `acct`: A pointer to a `fd_pubkey_t` structure that contains the public key to check.
- **Logic and Control Flow**:
    - Compare the `key` field of the `acct` structure with each predefined program ID using `memcmp`.
    - If any comparison returns 0 (indicating a match), return 1 immediately.
    - If no matches are found after all comparisons, return 0.
- **Output**: Returns 1 if the public key is active and reserved, otherwise returns 0.


---
### old\_fd\_pubkey\_is\_pending\_reserved<!-- {{#callable:old_fd_pubkey_is_pending_reserved}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_system_ids.c#L36>)

Checks if a given public key matches any of the predefined pending reserved program or system IDs.
- **Inputs**:
    - `acct`: A pointer to a `fd_pubkey_t` structure representing the public key to check.
- **Logic and Control Flow**:
    - Compare the `key` field of the `acct` structure with the `key` field of each predefined program or system ID using `memcmp`.
    - If any comparison returns 0 (indicating a match), return 1.
    - If no matches are found after all comparisons, return 0.
- **Output**: Returns 1 if the public key matches any of the predefined pending reserved IDs, otherwise returns 0.


---
### old\_fd\_pubkey\_is\_secp256r1<!-- {{#callable:old_fd_pubkey_is_secp256r1}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_system_ids.c#L51>)

Checks if a given public key matches the `fd_solana_secp256r1_program_id` key.
- **Inputs**:
    - `acct`: A pointer to a `fd_pubkey_t` structure representing the public key to check.
- **Logic and Control Flow**:
    - Compares the `key` field of the `acct` structure with the `key` field of the `fd_solana_secp256r1_program_id` structure using `memcmp`.
    - If the keys are equal, returns 1.
    - If the keys are not equal, returns 0.
- **Output**: Returns 1 if the public key matches the `fd_solana_secp256r1_program_id` key, otherwise returns 0.


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_system_ids.c#L57>)

Initializes the system, verifies predefined public keys against expected values, and tests the decoding and classification of public keys.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line arguments.
- **Logic and Control Flow**:
    - Call `fd_boot` to initialize the system with command-line arguments.
    - Verify predefined public keys using [`assert_eq`](<#assert_eq>) to ensure they match expected values.
    - Define an array `test_pubkeys` containing 37 predefined public keys.
    - Iterate over each public key in `test_pubkeys`.
    - For each public key, decode it using `fd_base58_decode_32` and store the result in `decoded`.
    - Test if the decoded public key is active, pending, or a secp256r1 key using `FD_TEST` and compare with old functions [`old_fd_pubkey_is_active_reserved`](<#old_fd_pubkey_is_active_reserved>), [`old_fd_pubkey_is_pending_reserved`](<#old_fd_pubkey_is_pending_reserved>), and [`old_fd_pubkey_is_secp256r1`](<#old_fd_pubkey_is_secp256r1>).
    - Log a notice message indicating success with `FD_LOG_NOTICE`.
    - Call `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`assert_eq`](<#assert_eq>)
    - [`fd_pubkey_is_active_reserved_key`](<fd_system_ids.c.md#fd_pubkey_is_active_reserved_key>)
    - [`old_fd_pubkey_is_active_reserved`](<#old_fd_pubkey_is_active_reserved>)
    - [`fd_pubkey_is_pending_reserved_key`](<fd_system_ids.c.md#fd_pubkey_is_pending_reserved_key>)
    - [`old_fd_pubkey_is_pending_reserved`](<#old_fd_pubkey_is_pending_reserved>)
    - [`fd_pubkey_is_secp256r1_key`](<fd_system_ids.c.md#fd_pubkey_is_secp256r1_key>)
    - [`old_fd_pubkey_is_secp256r1`](<#old_fd_pubkey_is_secp256r1>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)