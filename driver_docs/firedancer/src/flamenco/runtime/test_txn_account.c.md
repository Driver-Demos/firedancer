<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for transaction account creation, joining, and manipulation in the Firedancer runtime.

# Purpose
The code is an executable C program that tests the functionality of transaction account management within a shared memory workspace. It includes the initialization of a shared memory workspace using the `fd_wksp_new_anonymous` function and allocates memory for transaction accounts and account metadata. The program tests the creation, joining, and deletion of transaction accounts using functions such as `fd_txn_account_new`, `fd_txn_account_join`, and `fd_txn_account_delete`. It verifies the properties of transaction accounts, such as mutability, data length, lamports, and rent epoch, using various getter functions like `fd_txn_account_get_data_len` and `fd_txn_account_get_lamports`.

The program also includes tests for both read-only and mutable transaction accounts. It uses assertions (`FD_TEST`) to ensure that the functions behave as expected, such as checking that a transaction account is correctly created or joined. The code demonstrates the use of public APIs for transaction account management, focusing on memory allocation, account property verification, and account lifecycle operations within a shared memory environment. The program concludes by logging a notice of successful execution and halting the process with `fd_halt`.
# Imports and Dependencies

---
- `fd_txn_account.h`
- `fd_acc_mgr.h`


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_txn_account.c#L4>)

Initializes and tests transaction account operations in a shared memory workspace.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Sets the page size to 'gigantic' and retrieves the NUMA index.
    - Creates a new anonymous workspace with the specified page size and NUMA index.
    - Allocates memory for a transaction account in the workspace and verifies allocation success.
    - Initializes a public key and allocates memory for account metadata and data.
    - Initializes account metadata and sets the data length.
    - Performs tests to ensure transaction account creation fails with invalid inputs.
    - Creates a new transaction account and verifies its creation.
    - Performs tests to ensure transaction account joining fails with invalid inputs.
    - Joins the transaction account to the workspace and verifies success.
    - Performs tests to verify account properties such as immutability, data length, lamports, rent epoch, owner, and metadata.
    - Leaves the transaction account and verifies the operation.
    - Deletes the transaction account and verifies the operation.
    - Repeats similar tests with a mutable account, including setting and verifying lamports and data length.
    - Logs a notice message indicating successful tests.
    - Calls `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_account_meta_init`](<fd_acc_mgr.h.md#fd_account_meta_init>)
    - [`fd_account_meta_get_data`](<fd_acc_mgr.h.md#fd_account_meta_get_data>)
    - [`fd_txn_account_new`](<fd_txn_account.c.md#fd_txn_account_new>)
    - [`fd_txn_account_join`](<fd_txn_account.c.md#fd_txn_account_join>)
    - [`fd_txn_account_is_mutable`](<fd_txn_account.c.md#fd_txn_account_is_mutable>)
    - [`fd_txn_account_is_readonly`](<fd_txn_account.c.md#fd_txn_account_is_readonly>)
    - [`fd_txn_account_get_data_len`](<fd_txn_account.c.md#fd_txn_account_get_data_len>)
    - [`fd_txn_account_get_lamports`](<fd_txn_account.c.md#fd_txn_account_get_lamports>)
    - [`fd_txn_account_get_rent_epoch`](<fd_txn_account.c.md#fd_txn_account_get_rent_epoch>)
    - [`fd_txn_account_get_owner`](<fd_txn_account.c.md#fd_txn_account_get_owner>)
    - [`fd_txn_account_get_meta`](<fd_txn_account.c.md#fd_txn_account_get_meta>)
    - [`fd_txn_account_get_data`](<fd_txn_account.c.md#fd_txn_account_get_data>)
    - [`fd_txn_account_leave`](<fd_txn_account.c.md#fd_txn_account_leave>)
    - [`fd_txn_account_delete`](<fd_txn_account.c.md#fd_txn_account_delete>)
    - [`fd_txn_account_set_lamports`](<fd_txn_account.c.md#fd_txn_account_set_lamports>)
    - [`fd_txn_account_set_data_len`](<fd_txn_account.c.md#fd_txn_account_set_data_len>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)