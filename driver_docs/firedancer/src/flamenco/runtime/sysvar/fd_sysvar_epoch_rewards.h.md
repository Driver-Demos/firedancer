<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for reading, distributing, setting inactive, and initializing the EpochRewards sysvar.

# Purpose
This C header file defines the interface for managing the `EpochRewards` system variable in a financial or blockchain-related application. It includes function prototypes for reading, distributing, setting inactive, and initializing the `EpochRewards` sysvar. The `fd_sysvar_epoch_rewards_read` function reads the current value of the rent sysvar from a data structure called `funk`, returning `NULL` if the account is non-existent or has zero lamports. The [`fd_sysvar_epoch_rewards_distribute`](<#fd_sysvar_epoch_rewards_distribute>) function updates the `EpochRewards` sysvar with distributed rewards, while [`fd_sysvar_epoch_rewards_set_inactive`](<#fd_sysvar_epoch_rewards_set_inactive>) sets the sysvar to inactive. The [`fd_sysvar_epoch_rewards_init`](<#fd_sysvar_epoch_rewards_init>) function initializes the `EpochRewards` sysvar account with parameters such as distributed rewards, starting block height, and total rewards. The file includes necessary dependencies and uses a macro guard to prevent multiple inclusions.
# Imports and Dependencies

---
- `fd_sysvar_base.h`
- `../../types/fd_types.h`
- `../../accdb/fd_accdb_user.h`


# Function Declarations (Public API)

---
### fd\_sysvar\_epoch\_rewards\_distribute<!-- {{#callable_declaration:fd_sysvar_epoch_rewards_distribute}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_epoch_rewards.h#L22>)

Update the EpochRewards sysvar with distributed rewards.
- **Description**: Use this function to update the EpochRewards sysvar by adding a specified amount of distributed rewards. Before calling, ensure that the sysvar is active and that the addition of distributed rewards does not exceed the total rewards. This function must be called with valid pointers to the bank, account database, transaction ID, and capture context. It logs an error if the sysvar is inactive or if the distributed rewards exceed the total rewards.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure. Must not be null. The caller retains ownership.
    - `accdb`: A pointer to an `fd_accdb_user_t` structure. Must not be null. The caller retains ownership.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure. Must not be null. The caller retains ownership.
    - `capture_ctx`: A pointer to an `fd_capture_ctx_t` structure. Must not be null. The caller retains ownership.
    - `distributed`: An unsigned long integer representing the amount of rewards to distribute. Must not cause the total distributed rewards to exceed the total rewards.
- **Output**: None
- **See Also**: [`fd_sysvar_epoch_rewards_distribute`](<fd_sysvar_epoch_rewards.c.md#fd_sysvar_epoch_rewards_distribute>)  (Implementation)


---
### fd\_sysvar\_epoch\_rewards\_set\_inactive<!-- {{#callable_declaration:fd_sysvar_epoch_rewards_set_inactive}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_epoch_rewards.h#L32>)

Sets the EpochRewards sysvar to inactive.
- **Description**: Use this function to mark the EpochRewards sysvar as inactive. This function should be called when the rewards distribution for an epoch is complete or needs to be halted. It reads the current epoch rewards from the account database and checks for any inconsistencies, such as distributed rewards exceeding total rewards, which will result in an error. Ensure that the account database and transaction ID are valid before calling this function.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure. This parameter must not be null and the caller retains ownership.
    - `accdb`: A pointer to an `fd_accdb_user_t` structure. This parameter must not be null and the caller retains ownership.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure representing the transaction ID. This parameter must not be null and the caller retains ownership.
    - `capture_ctx`: A pointer to an `fd_capture_ctx_t` structure. This parameter must not be null and the caller retains ownership.
- **Output**: None
- **See Also**: [`fd_sysvar_epoch_rewards_set_inactive`](<fd_sysvar_epoch_rewards.c.md#fd_sysvar_epoch_rewards_set_inactive>)  (Implementation)


---
### fd\_sysvar\_epoch\_rewards\_init<!-- {{#callable_declaration:fd_sysvar_epoch_rewards_init}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_epoch_rewards.h#L41>)

Initialize the EpochRewards sysvar account.
- **Description**: Use this function to initialize the EpochRewards sysvar account with specified parameters. This function sets up the account with details such as distributed rewards, starting block height, number of partitions, total rewards, total points, and the last block hash. It must be called with valid parameters, ensuring that the total rewards are not less than the distributed rewards to avoid overflow errors. This function is typically used at the beginning of an epoch to set up the rewards distribution system.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure. Must not be null. Caller retains ownership.
    - `accdb`: A pointer to an `fd_accdb_user_t` structure. Must not be null. Caller retains ownership.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure. Must not be null. Caller retains ownership.
    - `capture_ctx`: A pointer to an `fd_capture_ctx_t` structure. Must not be null. Caller retains ownership.
    - `distributed_rewards`: An unsigned long integer representing the rewards already distributed. Must be less than or equal to `total_rewards`.
    - `distribution_starting_block_height`: An unsigned long integer representing the block height at which distribution starts.
    - `num_partitions`: An unsigned long integer representing the number of partitions for the distribution.
    - `total_rewards`: An unsigned long integer representing the total rewards available for distribution. Must be greater than or equal to `distributed_rewards`.
    - `total_points`: A `uint128` value representing the total points for distribution calculations.
    - `last_blockhash`: A pointer to a constant `fd_hash_t` structure representing the hash of the last block. Must not be null. Caller retains ownership.
- **Output**: None
- **See Also**: [`fd_sysvar_epoch_rewards_init`](<fd_sysvar_epoch_rewards.c.md#fd_sysvar_epoch_rewards_init>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)