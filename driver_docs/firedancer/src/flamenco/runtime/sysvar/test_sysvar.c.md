<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests various system variables in the Firedancer runtime environment.

# Purpose
This code is an executable test suite for validating various system variables, often referred to as "sysvars." It includes multiple test modules, each focusing on a specific sysvar, such as `test_sysvar_cache`, `test_sysvar_clock`, and others related to epoch rewards, schedule, and history. The main function initializes shared memory and workspace resources, which are used by some of the test functions, such as `test_sysvar_recent_hashes` and `test_sysvar_stake_history`. The code uses functions from the `fd_util` library to manage shared memory and workspace operations, ensuring that resources are properly allocated and deallocated.

The test suite is structured to execute each sysvar test function sequentially, verifying the correct behavior of the sysvars in a controlled environment. The use of `FD_TEST` macros indicates that the code checks for successful execution of critical operations, such as joining and leaving shared memory. The alignment attribute for `wksp_mem` ensures that the memory is aligned according to the page size defined by `FD_SHMEM_NORMAL_PAGE_SZ`. The program logs a notice indicating a successful pass of all tests and concludes by halting the execution.
# Imports and Dependencies

---
- `test_sysvar_cache.c`
- `test_sysvar_clock.c`
- `test_sysvar_epoch_rewards.c`
- `test_sysvar_epoch_schedule.c`
- `test_sysvar_last_restart_slot.c`
- `test_sysvar_recent_hashes.c`
- `test_sysvar_rent.c`
- `test_sysvar_slot_hashes.c`
- `test_sysvar_slot_history.c`
- `test_sysvar_stake_history.c`
- `../../../util/fd_util.h`


# Global Variables

---
### wksp\_mem
- **Type**: ``uchar[]``
- **Description**: An array of unsigned characters with a size of 32 MiB, aligned to the size defined by `FD_SHMEM_NORMAL_PAGE_SZ`. This alignment is specified using the `__attribute__((aligned(...)))` directive.
- **Use**: Used as a memory workspace for shared memory operations and workspace management in the program.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/test_sysvar.c#L16>)

Initializes shared memory and workspace, runs a series of system variable tests, and then cleans up resources.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of strings representing the command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Defines `wksp_part_max` as 16 and calculates `wksp_data_max` using `fd_wksp_data_max_est`.
    - Creates and joins a new workspace using `fd_wksp_new` and `fd_wksp_join`, and checks its validity with `FD_TEST`.
    - Joins an anonymous shared memory segment with `fd_shmem_join_anonymous`.
    - Executes a series of test functions for different system variables, some of which use the workspace.
    - Leaves the shared memory segment and deletes the workspace, checking for successful operations with `FD_TEST`.
    - Logs a notice indicating the tests passed and halts the program with `fd_halt`.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`test_sysvar_cache`](<test_sysvar_cache.c.md#test_sysvar_cache>)
    - [`test_sysvar_clock`](<test_sysvar_clock.c.md#test_sysvar_clock>)
    - [`test_sysvar_epoch_rewards`](<test_sysvar_epoch_rewards.c.md#test_sysvar_epoch_rewards>)
    - [`test_sysvar_epoch_schedule`](<test_sysvar_epoch_schedule.c.md#test_sysvar_epoch_schedule>)
    - [`test_sysvar_last_restart_slot`](<test_sysvar_last_restart_slot.c.md#test_sysvar_last_restart_slot>)
    - [`test_sysvar_recent_hashes`](<test_sysvar_recent_hashes.c.md#test_sysvar_recent_hashes>)
    - [`test_sysvar_rent`](<test_sysvar_rent.c.md#test_sysvar_rent>)
    - [`test_sysvar_slot_hashes`](<test_sysvar_slot_hashes.c.md#test_sysvar_slot_hashes>)
    - [`test_sysvar_slot_history`](<test_sysvar_slot_history.c.md#test_sysvar_slot_history>)
    - [`test_sysvar_stake_history`](<test_sysvar_stake_history.c.md#test_sysvar_stake_history>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)