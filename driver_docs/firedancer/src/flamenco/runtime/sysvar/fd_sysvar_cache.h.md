<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Read-only cache for sysvar accounts, with functions for creation, access, and restoration.

# Purpose
The `fd_sysvar_cache.h` file defines a read-only cache system for sysvar accounts, which are used in a blockchain context to store system variables. This cache is utilized during the execution of transactions to improve performance by providing quick access to sysvar data. The sysvar cache is updated before and after transaction execution, while remaining constant during execution. The cache is designed to be position-independent, allowing it to be relocated or accessed from multiple processes with different address spaces. It stores sysvars in both serialized/raw and typed forms, and provides APIs for creating, joining, leaving, and deleting the cache, as well as for restoring it from an account database.

The file defines several structures and functions to manage the sysvar cache. The `fd_sysvar_cache_t` structure holds the cache data, including descriptors for each sysvar and memory regions for both raw and typed forms of sysvars. The file provides functions to create and manage the cache, such as [`fd_sysvar_cache_new`](<#fd_sysvar_cache_new>), [`fd_sysvar_cache_join`](<#fd_sysvar_cache_join>), and [`fd_sysvar_cache_restore`](<#fd_sysvar_cache_restore>). It also includes accessor functions to query and validate sysvar data, ensuring that the sysvars are valid and can be accessed efficiently. The cache supports various sysvars, such as `clock`, `epoch_rewards`, and `slot_hashes`, with specific functions to read and validate each one. The file also defines macros and inline functions to facilitate the use of these accessors.
# Imports and Dependencies

---
- `fd_sysvar_base.h`
- `../../types/fd_types.h`


# Data Structures

---
### fd\_sysvar\_desc
- **Type**: ``struct``
- **Members**:
    - `flags`: Stores flags that describe the state or properties of the sysvar.
    - `data_sz`: Indicates the size of the data associated with the sysvar.
- **Description**: Defines a descriptor for a system variable (sysvar) with fields for flags and data size, used to manage and describe sysvar accounts in a cache system.


---
### fd\_sysvar\_desc\_t
- **Type**: ``struct``
- **Members**:
    - ``flags``: Stores flags related to the system variable descriptor.
    - ``data_sz``: Indicates the size of the data associated with the system variable.
- **Description**: Defines a descriptor for system variables in the sysvar cache, containing metadata such as flags and data size to manage and access system variable data efficiently.


---
### fd\_sysvar\_cache
- **Type**: ``struct``
- **Members**:
    - `magic`: Stores a magic number to identify the structure.
    - `desc`: Holds an array of `fd_sysvar_desc_t` structures for each sysvar entry.
    - `bin_clock`: Contains binary encoded data for the clock sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_clock`: Contains object footprint data for the clock sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_epoch_rewards`: Contains binary encoded data for the epoch rewards sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_epoch_rewards`: Contains object footprint data for the epoch rewards sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_epoch_schedule`: Contains binary encoded data for the epoch schedule sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_epoch_schedule`: Contains object footprint data for the epoch schedule sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_last_restart_slot`: Contains binary encoded data for the last restart slot sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_last_restart_slot`: Contains object footprint data for the last restart slot sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_recent_hashes`: Contains binary encoded data for the recent hashes sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_recent_hashes`: Contains object footprint data for the recent hashes sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_rent`: Contains binary encoded data for the rent sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_rent`: Contains object footprint data for the rent sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_slot_hashes`: Contains binary encoded data for the slot hashes sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_slot_hashes`: Contains object footprint data for the slot hashes sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_slot_history`: Contains binary encoded data for the slot history sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_slot_history`: Contains object footprint data for the slot history sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `bin_stake_history`: Contains binary encoded data for the stake history sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
    - `obj_stake_history`: Contains object footprint data for the stake history sysvar, aligned to `FD_SYSVAR_ALIGN_MAX`.
- **Description**: Provides a read-only cache for sysvar accounts, storing both raw and typed forms of sysvar data for performance during transaction execution. The structure includes fields for various sysvars, each with binary and object representations, and is designed to be position-independent and relocatable. It excludes certain sysvars like 'fees' and 'instructions' due to deprecation and virtual account status, respectively.


---
### fd\_sysvar\_cache\_t
- **Type**: ``struct``
- **Members**:
    - ``magic``: Stores a magic number to identify the `fd_sysvar_cache` structure.
    - ``desc``: An array of `fd_sysvar_desc_t` structures describing each sysvar entry.
    - ``bin_clock``: Stores the serialized form of the clock sysvar.
    - ``obj_clock``: Stores the typed form of the clock sysvar.
    - ``bin_epoch_rewards``: Stores the serialized form of the epoch rewards sysvar.
    - ``obj_epoch_rewards``: Stores the typed form of the epoch rewards sysvar.
    - ``bin_epoch_schedule``: Stores the serialized form of the epoch schedule sysvar.
    - ``obj_epoch_schedule``: Stores the typed form of the epoch schedule sysvar.
    - ``bin_last_restart_slot``: Stores the serialized form of the last restart slot sysvar.
    - ``obj_last_restart_slot``: Stores the typed form of the last restart slot sysvar.
    - ``bin_recent_hashes``: Stores the serialized form of the recent hashes sysvar.
    - ``obj_recent_hashes``: Stores the typed form of the recent hashes sysvar.
    - ``bin_rent``: Stores the serialized form of the rent sysvar.
    - ``obj_rent``: Stores the typed form of the rent sysvar.
    - ``bin_slot_hashes``: Stores the serialized form of the slot hashes sysvar.
    - ``obj_slot_hashes``: Stores the typed form of the slot hashes sysvar.
    - ``bin_slot_history``: Stores the serialized form of the slot history sysvar.
    - ``obj_slot_history``: Stores the typed form of the slot history sysvar.
    - ``bin_stake_history``: Stores the serialized form of the stake history sysvar.
    - ``obj_stake_history``: Stores the typed form of the stake history sysvar.
- **Description**: A `fd_sysvar_cache_t` structure is a position-independent, read-only cache for sysvar accounts, backed by a single memory region. It stores sysvars in both serialized and typed forms for performance during transaction execution. The structure includes a magic number for identification, an array of descriptors for each sysvar, and aligned storage for both raw and typed forms of various sysvars such as clock, epoch rewards, epoch schedule, and others. The cache is designed to be safely relocated, mapped across different processes, or cloned via shallow copy.


# Functions

---
### fd\_sysvar\_cache\_clock\_is\_valid<!-- {{#callable:fd_sysvar_cache_clock_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L185>)

Checks if the 'clock' sysvar in the sysvar cache is valid.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Uses the macro `FD_SYSVAR_IS_VALID` to check the validity of the 'clock' sysvar in the provided `sysvar_cache`.
    - The macro checks the `flags` field of the `desc` array at the index corresponding to 'clock' to see if the `FD_SYSVAR_FLAG_VALID` flag is set.
- **Output**: Returns 1 if the 'clock' sysvar is valid, otherwise returns 0.


---
### fd\_sysvar\_cache\_epoch\_rewards\_is\_valid<!-- {{#callable:fd_sysvar_cache_epoch_rewards_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L209>)

Checks if the 'epoch_rewards' sysvar in the sysvar cache is valid.
- **Inputs**:
    - ``sysvar_cache``: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Calls the macro `FD_SYSVAR_IS_VALID` with `sysvar_cache` and `epoch_rewards` as arguments.
    - The macro checks if the `flags` field of the `epoch_rewards` descriptor in the `sysvar_cache` has the `FD_SYSVAR_FLAG_VALID` bit set.
- **Output**: Returns 1 if the 'epoch_rewards' sysvar is valid, otherwise returns 0.


---
### fd\_sysvar\_cache\_epoch\_schedule\_is\_valid<!-- {{#callable:fd_sysvar_cache_epoch_schedule_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L220>)

Checks if the 'epoch_schedule' sysvar in the sysvar cache is valid.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant 'fd_sysvar_cache_t' structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Calls the macro 'FD_SYSVAR_IS_VALID' with 'sysvar_cache' and 'epoch_schedule' as arguments.
    - The macro checks the 'flags' field of the 'epoch_schedule' descriptor in the 'sysvar_cache'.
    - Returns 1 if the 'epoch_schedule' sysvar is valid, otherwise returns 0.
- **Output**: An integer indicating the validity of the 'epoch_schedule' sysvar (1 if valid, 0 if not).


---
### fd\_sysvar\_cache\_last\_restart\_slot\_is\_valid<!-- {{#callable:fd_sysvar_cache_last_restart_slot_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L234>)

Checks if the 'last_restart_slot' sysvar in the sysvar cache is valid.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Uses the macro `FD_SYSVAR_IS_VALID` to determine if the 'last_restart_slot' sysvar is valid by checking the flags in the sysvar cache descriptor at the index `FD_SYSVAR_last_restart_slot_IDX`.
- **Output**: Returns 1 if the 'last_restart_slot' sysvar is valid, otherwise returns 0.


---
### fd\_sysvar\_cache\_rent\_is\_valid<!-- {{#callable:fd_sysvar_cache_rent_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L245>)

Checks if the 'rent' sysvar in the sysvar cache is valid.
- **Inputs**:
    - ``sysvar_cache``: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Uses the macro `FD_SYSVAR_IS_VALID` to check the validity of the 'rent' sysvar in the provided `sysvar_cache`.
    - The macro checks the `flags` field of the `desc` array at the index corresponding to 'rent' to determine if the `FD_SYSVAR_FLAG_VALID` flag is set.
- **Output**: Returns an integer value: 1 if the 'rent' sysvar is valid, or 0 if it is not.


---
### fd\_sysvar\_cache\_recent\_hashes\_is\_valid<!-- {{#callable:fd_sysvar_cache_recent_hashes_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L261>)

Checks if the 'recent_hashes' sysvar in the sysvar cache is valid.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant 'fd_sysvar_cache_t' structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Uses the macro 'FD_SYSVAR_IS_VALID' to check the validity of the 'recent_hashes' sysvar in the provided 'sysvar_cache'.
    - The macro checks if the 'flags' field of the 'recent_hashes' descriptor in the 'sysvar_cache' has the 'FD_SYSVAR_FLAG_VALID' bit set.
- **Output**: Returns 1 if the 'recent_hashes' sysvar is valid, otherwise returns 0.


---
### fd\_sysvar\_cache\_slot\_hashes\_is\_valid<!-- {{#callable:fd_sysvar_cache_slot_hashes_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L285>)

Checks if the 'slot_hashes' sysvar in the sysvar cache is valid.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant 'fd_sysvar_cache_t' structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Uses the macro 'FD_SYSVAR_IS_VALID' to check the validity of the 'slot_hashes' sysvar in the provided 'sysvar_cache'.
- **Output**: Returns an integer value: 1 if the 'slot_hashes' sysvar is valid, or 0 if it is not.


---
### fd\_sysvar\_cache\_slot\_history\_is\_valid<!-- {{#callable:fd_sysvar_cache_slot_history_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L305>)

Checks if the 'slot history' sysvar in the sysvar cache is valid.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Calls the macro `FD_SYSVAR_IS_VALID` with `sysvar_cache` and `slot_history` as arguments.
    - The macro checks the `flags` field of the `desc` array at the index `FD_SYSVAR_slot_history_IDX` to see if the `FD_SYSVAR_FLAG_VALID` bit is set.
    - Returns 1 if the `slot history` sysvar is valid, otherwise returns 0.
- **Output**: Returns an integer: 1 if the 'slot history' sysvar is valid, 0 otherwise.


---
### fd\_sysvar\_cache\_stake\_history\_is\_valid<!-- {{#callable:fd_sysvar_cache_stake_history_is_valid}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L325>)

Checks if the 'stake history' sysvar in the sysvar cache is valid.
- **Inputs**:
    - ``sysvar_cache``: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache to check.
- **Logic and Control Flow**:
    - Calls the macro `FD_SYSVAR_IS_VALID` with `sysvar_cache` and `stake_history` as arguments.
    - The macro checks the `flags` field of the `desc` array at the index `FD_SYSVAR_stake_history_IDX` to see if the `FD_SYSVAR_FLAG_VALID` bit is set.
    - Returns 1 if the `stake history` sysvar is valid, otherwise returns 0.
- **Output**: Returns an integer: 1 if the 'stake history' sysvar is valid, 0 otherwise.


# Function Declarations (Public API)

---
### fd\_sysvar\_cache\_new<!-- {{#callable_declaration:fd_sysvar_cache_new}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L90>)

Formats a memory region for use as a sysvar cache object.
- **Description**: Use this function to initialize a memory region as a sysvar cache object. The memory region must be allocated and aligned according to the requirements of `fd_sysvar_cache_t`. This function sets up the sysvar cache for use, ensuring that it is properly formatted and ready for operations. It must be called before any other operations on the sysvar cache. If the provided memory is null or misaligned, the function logs a warning and returns null.
- **Inputs**:
    - `mem`: A pointer to the memory region to format as a sysvar cache. Must not be null and must be aligned to `alignof(fd_sysvar_cache_t)`. If null or misaligned, the function logs a warning and returns null.
- **Output**: Returns a pointer to the initialized sysvar cache object, or null if the input memory is null or misaligned.
- **See Also**: [`fd_sysvar_cache_new`](<fd_sysvar_cache.c.md#fd_sysvar_cache_new>)  (Implementation)


---
### fd\_sysvar\_cache\_join<!-- {{#callable_declaration:fd_sysvar_cache_join}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L103>)

Joins a writable sysvar cache object.
- **Description**: Use this function to join a sysvar cache object in writable mode. This function is typically used when you need to modify the sysvar cache. Ensure that the memory region pointed to by the input parameter is correctly formatted as a sysvar cache object before calling this function. This function is part of a larger API that manages sysvar caches, which are used to store sysvar accounts in a read-only manner during transaction execution.
- **Inputs**:
    - `mem`: A pointer to a memory region that represents a sysvar cache object. The memory must be formatted correctly as a sysvar cache object. The caller retains ownership of the memory and must ensure it is valid.
- **Output**: Returns a pointer to a `fd_sysvar_cache_t` object, allowing writable access to the sysvar cache.
- **See Also**: [`fd_sysvar_cache_join`](<fd_sysvar_cache.c.md#fd_sysvar_cache_join>)  (Implementation)


---
### fd\_sysvar\_cache\_join\_const<!-- {{#callable_declaration:fd_sysvar_cache_join_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L106>)

Provides a read-only view of a sysvar cache object.
- **Description**: Use this function to access a sysvar cache object in a read-only mode. It checks if the provided memory pointer is valid, aligned, and points to a properly initialized sysvar cache object. If any of these conditions are not met, it logs a warning and returns NULL. This function is useful when you need to ensure that the sysvar cache is correctly set up before accessing its contents.
- **Inputs**:
    - `mem`: A pointer to the memory region that represents a sysvar cache object. It must not be null, must be aligned to the alignment requirements of `fd_sysvar_cache_t`, and must point to a memory region with a valid sysvar cache object. If these conditions are not met, the function logs a warning and returns NULL.
- **Output**: A pointer to a constant `fd_sysvar_cache_t` object if successful, or NULL if the input is invalid.
- **See Also**: [`fd_sysvar_cache_join_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_join_const>)  (Implementation)


---
### fd\_sysvar\_cache\_leave<!-- {{#callable_declaration:fd_sysvar_cache_leave}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L111>)

Releases a join to a sysvar cache object.
- **Description**: Use this function to release a previously established join to a sysvar cache object. This is necessary to properly manage resources and ensure that the sysvar cache is no longer accessed by the caller. It is important to call this function when the sysvar cache is no longer needed to prevent resource leaks. Ensure that the `sysvar_cache` parameter is a valid pointer to a sysvar cache object that was previously joined.
- **Inputs**:
    - `sysvar_cache`: A pointer to a `fd_sysvar_cache_t` object. This must be a valid sysvar cache object that the caller has previously joined. The function does not perform any validation on this pointer, so passing an invalid pointer may result in undefined behavior.
- **Output**: Returns the same pointer that was passed in as `sysvar_cache`, allowing for potential chaining of operations.
- **See Also**: [`fd_sysvar_cache_leave`](<fd_sysvar_cache.c.md#fd_sysvar_cache_leave>)  (Implementation)


---
### fd\_sysvar\_cache\_leave\_const<!-- {{#callable_declaration:fd_sysvar_cache_leave_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L114>)

Returns a constant pointer to the sysvar cache.
- **Description**: Use this function to obtain a constant pointer to a `fd_sysvar_cache_t` object when you no longer need to modify it. This function is typically called after completing operations that require write access to the sysvar cache, allowing you to safely access the cache in a read-only manner. Ensure that the `sysvar_cache` is valid and properly initialized before calling this function.
- **Inputs**:
    - `sysvar_cache`: A pointer to a `fd_sysvar_cache_t` object. Must not be null and should point to a valid sysvar cache. The function does not modify the cache, and the caller retains ownership.
- **Output**: A constant pointer to the `fd_sysvar_cache_t` object provided as input.
- **See Also**: [`fd_sysvar_cache_leave_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_leave_const>)  (Implementation)


---
### fd\_sysvar\_cache\_delete<!-- {{#callable_declaration:fd_sysvar_cache_delete}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L120>)

Releases the sysvar cache's memory back to the caller.
- **Description**: Use this function to release the memory region used by a sysvar cache object back to the caller. This function should be called when the sysvar cache is no longer needed. It checks if the provided memory is valid and if the sysvar cache has the correct magic number. If these conditions are not met, it logs a warning and returns NULL. Otherwise, it clears the memory and returns the pointer to the caller.
- **Inputs**:
    - `mem`: A pointer to the memory region of the sysvar cache. Must not be null and must point to a valid sysvar cache object with the correct magic number. If invalid, the function logs a warning and returns NULL.
- **Output**: Returns the pointer to the memory region if successful, or NULL if the input is invalid.
- **See Also**: [`fd_sysvar_cache_delete`](<fd_sysvar_cache.c.md#fd_sysvar_cache_delete>)  (Implementation)


---
### fd\_sysvar\_cache\_restore<!-- {{#callable_declaration:fd_sysvar_cache_restore}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L128>)

Rebuilds the sysvar cache from the account database.
- **Description**: Use this function to restore the sysvar cache by querying the account database. It is important to call this function when you need to refresh the sysvar cache with the latest account data. The function performs blocking database queries and returns a status indicating success or failure. It logs warnings in case of failure, which can occur due to unexpected database errors or deserialization issues with sysvars. Ensure that the bank and funk parameters are properly initialized before calling this function.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure representing the bank context. Must not be null and should be properly initialized before use. The caller retains ownership.
    - `funk`: A pointer to an `fd_funk_t` structure representing the funk context. Must not be null and should be properly initialized before use. The caller retains ownership.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure representing the transaction ID. Must not be null. The caller retains ownership.
- **Output**: Returns 1 on success, indicating the cache was restored successfully, or 0 on failure, indicating an error occurred during the process.
- **See Also**: [`fd_sysvar_cache_restore`](<fd_sysvar_cache_db.c.md#fd_sysvar_cache_restore>)  (Implementation)


---
### fd\_sysvar\_cache\_restore\_fuzz<!-- {{#callable_declaration:fd_sysvar_cache_restore_fuzz}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L138>)

Restores the sysvar cache using solfuzz/protosol conformance tooling.
- **Description**: Use this function to rebuild the sysvar cache from the account database in environments where solfuzz/protosol conformance tooling is used. It is designed to handle invalid sysvars created by these tools and suppresses noisy log warnings. This function is useful when testing or validating sysvar behavior under conditions that may produce invalid data. Ensure that the `bank`, `funk`, and `xid` parameters are correctly initialized before calling this function.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure. Must not be null. The caller retains ownership.
    - `funk`: A pointer to an `fd_funk_t` structure. Must not be null. The caller retains ownership.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure. Must not be null. The caller retains ownership.
- **Output**: None
- **See Also**: [`fd_sysvar_cache_restore_fuzz`](<fd_sysvar_cache_db.c.md#fd_sysvar_cache_restore_fuzz>)  (Implementation)


---
### fd\_sysvar\_cache\_data\_query<!-- {{#callable_declaration:fd_sysvar_cache_data_query}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L157>)

Returns a pointer to serialized sysvar account data.
- **Description**: Use this function to get a pointer to the raw serialized data of a sysvar account from the sysvar cache. The function requires a valid sysvar cache and a 32-byte address pointing to the sysvar account. It sets the size of the serialized data in the provided size pointer. If the sysvar is not found or contains invalid data, the function returns NULL and sets the size to 0. The returned pointer is valid until the next API call that modifies the sysvar cache.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` structure representing the sysvar cache. Must not be null.
    - `address`: A pointer to a 32-byte memory location representing the address of the sysvar account. Must not be null.
    - `psz`: A pointer to an `ulong` where the function will store the size of the serialized data. Must not be null. The function sets this to 0 if the sysvar is not found or invalid.
- **Output**: Returns a pointer to the serialized sysvar data if successful, or NULL if the sysvar is not found or invalid. The size of the data is stored in the `psz` parameter.
- **See Also**: [`fd_sysvar_cache_data_query`](<fd_sysvar_cache.c.md#fd_sysvar_cache_data_query>)  (Implementation)


---
### fd\_sysvar\_cache\_recent\_hashes\_join\_const<!-- {{#callable_declaration:fd_sysvar_cache_recent_hashes_join_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L266>)

Accesses the recent block hashes deque in a read-only manner.
- **Description**: Use this function to access the recent block hashes stored in the sysvar cache in a read-only mode. It is important to ensure that the sysvar cache is valid before calling this function, as it will return `NULL` if the cache is invalid. This function is useful during transaction execution when sysvars are constant. It is not suitable for use outside of transaction execution, such as during slot boundaries.
- **Inputs**:
    - `cache`: A pointer to a `fd_sysvar_cache_t` structure. This must not be null and must point to a valid sysvar cache. If the cache is invalid, the function returns `NULL`.
- **Output**: Returns a constant pointer to a `fd_block_block_hash_entry_t` deque if successful, or `NULL` if the cache is invalid.
- **See Also**: [`fd_sysvar_cache_recent_hashes_join_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_recent_hashes_join_const>)  (Implementation)


---
### fd\_sysvar\_cache\_recent\_hashes\_leave\_const<!-- {{#callable_declaration:fd_sysvar_cache_recent_hashes_leave_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L271>)

Detaches from the recent hashes deque in the sysvar cache.
- **Description**: Use this function to detach from the recent hashes deque in a read-only sysvar cache. This function should be called after you have finished accessing the recent hashes to ensure proper resource management. It is important to call this function only after a successful call to `fd_sysvar_cache_recent_hashes_join_const`. The function does not perform any operations on the input parameters, and it is safe to pass null pointers.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` structure. This must not be null and should point to a valid sysvar cache object that was previously joined.
    - `hashes_deque`: A pointer to a constant `fd_block_block_hash_entry_t` structure. This should be the pointer returned by a previous call to `fd_sysvar_cache_recent_hashes_join_const`. It is safe to pass null.
- **Output**: None
- **See Also**: [`fd_sysvar_cache_recent_hashes_leave_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_recent_hashes_leave_const>)  (Implementation)


---
### fd\_sysvar\_cache\_slot\_hashes\_join\_const<!-- {{#callable_declaration:fd_sysvar_cache_slot_hashes_join_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L290>)

Attaches to the slot hashes deque in the sysvar cache.
- **Description**: Use this function to access the slot hashes deque in a read-only manner from a sysvar cache. It must be called only when the sysvar cache is in a valid state, as determined by `fd_sysvar_cache_slot_hashes_is_valid`. If the cache is invalid, the function returns `NULL`. This function is typically used during transaction execution when sysvars are constant. Ensure that the sysvar cache is properly initialized and valid before calling this function to avoid unexpected behavior.
- **Inputs**:
    - `cache`: A pointer to a constant `fd_sysvar_cache_t` structure. It must not be null and must point to a valid sysvar cache. The caller retains ownership of the memory.
- **Output**: Returns a constant pointer to `fd_slot_hash_t` if successful, or `NULL` if the sysvar cache is invalid.
- **See Also**: [`fd_sysvar_cache_slot_hashes_join_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_slot_hashes_join_const>)  (Implementation)


---
### fd\_sysvar\_cache\_slot\_hashes\_leave\_const<!-- {{#callable_declaration:fd_sysvar_cache_slot_hashes_leave_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L295>)

Detaches the caller from the slot hashes deque in the sysvar cache.
- **Description**: Use this function to detach from the slot hashes deque after a previous attachment using the corresponding join function. This function should be called when the slot hashes are no longer needed, ensuring that resources are properly released. It is important to call this function only after a successful join operation to maintain proper resource management.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` object. Must not be null. The caller retains ownership.
    - `slot_hashes`: A pointer to a constant `fd_slot_hash_t` object. Must not be null. Represents the slot hashes deque to detach from.
- **Output**: None
- **See Also**: [`fd_sysvar_cache_slot_hashes_leave_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_slot_hashes_leave_const>)  (Implementation)


---
### fd\_sysvar\_cache\_slot\_history\_join\_const<!-- {{#callable_declaration:fd_sysvar_cache_slot_history_join_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L310>)

Accesses the "slot history" sysvar in a read-only manner.
- **Description**: Use this function to obtain a read-only pointer to the "slot history" sysvar from a sysvar cache. This function should be called only when the sysvar cache is valid and the "slot history" sysvar is available. If the sysvar cache is not valid, the function returns `NULL`. This function is useful during transaction execution when sysvars are constant and can be accessed for read-only operations.
- **Inputs**:
    - `cache`: A pointer to a `fd_sysvar_cache_t` structure. This must not be null and should point to a valid sysvar cache object. The function returns `NULL` if the cache is invalid.
- **Output**: Returns a pointer to a `fd_slot_history_global_t` structure if the "slot history" sysvar is valid; otherwise, returns `NULL`.
- **See Also**: [`fd_sysvar_cache_slot_history_join_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_slot_history_join_const>)  (Implementation)


---
### fd\_sysvar\_cache\_slot\_history\_leave\_const<!-- {{#callable_declaration:fd_sysvar_cache_slot_history_leave_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L315>)

Detaches the caller from the "slot history" sysvar.
- **Description**: Use this function to detach from the "slot history" sysvar after attaching with `fd_sysvar_cache_slot_history_join_const`. This function must be called to properly release resources associated with the "slot history" sysvar. Ensure that the `sysvar_cache` and `slot_history` parameters are valid and have been previously used in a successful join operation.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` object. Must not be null and should represent a valid sysvar cache that has been joined previously.
    - `slot_history`: A pointer to a constant `fd_slot_history_global_t` object. Must not be null and should represent a valid "slot history" sysvar that has been joined previously.
- **Output**: None
- **See Also**: [`fd_sysvar_cache_slot_history_leave_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_slot_history_leave_const>)  (Implementation)


---
### fd\_sysvar\_cache\_stake\_history\_join\_const<!-- {{#callable_declaration:fd_sysvar_cache_stake_history_join_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L330>)

Accesses the "stake history" sysvar in a read-only manner.
- **Description**: Use this function to obtain a read-only pointer to the "stake history" sysvar from a sysvar cache. This function is useful during transaction execution when sysvars are constant. Ensure that the sysvar cache is valid before calling this function, as it will return `NULL` if the cache is invalid or if the "stake history" sysvar is not valid.
- **Inputs**:
    - `cache`: A pointer to a `fd_sysvar_cache_t` object. This must not be null and should point to a valid sysvar cache. The function will return `NULL` if the cache is invalid or if the "stake history" sysvar is not valid.
- **Output**: Returns a pointer to a `fd_stake_history_t` object if the "stake history" sysvar is valid; otherwise, returns `NULL`.
- **See Also**: [`fd_sysvar_cache_stake_history_join_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_stake_history_join_const>)  (Implementation)


---
### fd\_sysvar\_cache\_stake\_history\_leave\_const<!-- {{#callable_declaration:fd_sysvar_cache_stake_history_leave_const}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_cache.h#L335>)

Detaches the caller from the "stake history" sysvar.
- **Description**: Use this function to detach from the "stake history" sysvar after attaching with `fd_sysvar_cache_stake_history_join_const`. This function should be called when the caller no longer needs to access the "stake history" sysvar to ensure proper resource management. It is important to call this function to maintain the integrity of the sysvar cache and avoid potential resource leaks.
- **Inputs**:
    - `sysvar_cache`: A pointer to a constant `fd_sysvar_cache_t` object. Must not be null. The caller retains ownership.
    - `stake_history`: A pointer to a constant `fd_stake_history_t` object. Must not be null. The caller retains ownership.
- **Output**: None
- **See Also**: [`fd_sysvar_cache_stake_history_leave_const`](<fd_sysvar_cache.c.md#fd_sysvar_cache_stake_history_leave_const>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)