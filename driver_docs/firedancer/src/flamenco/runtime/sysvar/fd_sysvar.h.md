<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines constants and functions for updating and checking sysvar accounts in the Firedancer runtime.

# Purpose
This C header file defines constants and declares functions related to system variables (sysvars) in a runtime environment. It includes two other header files, `fd_bank.h` and `fd_flamenco_base.h`, which are likely necessary for the types and functions used within this file. The file defines two constants: `FD_SYSVAR_RENT_UNADJUSTED_INITIAL_BALANCE` and `FD_SYSVAR_INITIAL_RENT_EPOCH`, which are used to set initial values for system variables related to account rent. The function [`fd_sysvar_account_update`](<#fd_sysvar_account_update>) is declared to update sysvar data in an account database without affecting the sysvar cache. Another function, [`fd_sysvar_instr_acct_check`](<#fd_sysvar_instr_acct_check>), is declared to verify account instructions against expected public keys. The file also contains a note indicating a future task to refactor common sysvar functions into this header.
# Imports and Dependencies

---
- `../fd_bank.h`
- `../../fd_flamenco_base.h`


# Function Declarations (Public API)

---
### fd\_sysvar\_account\_update<!-- {{#callable_declaration:fd_sysvar_account_update}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar.h#L15>)

Persist a sysvar data update to the account database.
- **Description**: Use this function to update the sysvar data in the account database. It does not update the sysvar cache. Ensure that the `bank`, `accdb`, `xid`, `capture_ctx`, `address`, and `data` parameters are correctly initialized and valid before calling this function. The function adjusts the account's lamports to meet the minimum balance requirement and updates the account's owner and slot information. It also handles potential lamport overflow and updates the bank's capitalization if necessary.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure representing the bank. Must not be null. The function uses this to query rent and update capitalization.
    - `accdb`: A pointer to an `fd_accdb_user_t` structure representing the account database. Must not be null. The function uses this to access and update account information.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure representing the transaction ID. Must not be null. The function uses this to identify the transaction context.
    - `capture_ctx`: A pointer to an `fd_capture_ctx_t` structure used for capturing context. Must not be null. The function uses this to update the hash.
    - `address`: A pointer to a constant `fd_pubkey_t` structure representing the account's public key. Must not be null. The function uses this to identify the account to update.
    - `data`: A pointer to a constant void representing the data to update in the account. Must not be null. The function uses this to set the new account data.
    - `sz`: An unsigned long representing the size of the data. Must be a valid size for the data being updated.
- **Output**: None
- **See Also**: [`fd_sysvar_account_update`](<fd_sysvar.c.md#fd_sysvar_account_update>)  (Implementation)


---
### fd\_sysvar\_instr\_acct\_check<!-- {{#callable_declaration:fd_sysvar_instr_acct_check}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar.h#L24>)

Checks if a specified account in the instruction context matches a given public key.
- **Description**: Use this function to verify that the account at a specified index in the instruction context matches a given public key. This function is useful when you need to ensure that the account being referenced in a transaction is the expected one. It must be called with a valid instruction context and a valid index within the range of available accounts. If the index is out of range or the public key does not match, the function returns an error code.
- **Inputs**:
    - `ctx`: A pointer to a constant `fd_exec_instr_ctx_t` structure representing the execution instruction context. Must not be null.
    - `idx`: An unsigned long integer representing the index of the account to check within the instruction context. Must be less than the number of accounts in the instruction context.
    - `addr_want`: A pointer to a constant `fd_pubkey_t` representing the expected public key. Must not be null.
- **Output**: Returns an integer status code: `FD_EXECUTOR_INSTR_SUCCESS` if the account matches the expected public key, `FD_EXECUTOR_INSTR_ERR_NOT_ENOUGH_ACC_KEYS` if the index is out of range, or `FD_EXECUTOR_INSTR_ERR_INVALID_ARG` if the public key does not match.
- **See Also**: [`fd_sysvar_instr_acct_check`](<fd_sysvar.c.md#fd_sysvar_instr_acct_check>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)