<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Manages the "recent block hashes" sysvar account with functions to initialize, update, and read it.

# Purpose
The `fd_sysvar_recent_hashes.h` file is a C header file that manages the "recent block hashes" system variable (sysvar) account. It defines the maximum number of block hash entries that the sysvar can include, specified by the macro `FD_SYSVAR_RECENT_HASHES_CAP`, which is set to 150. The file declares three main functions: [`fd_sysvar_recent_hashes_init`](<#fd_sysvar_recent_hashes_init>), which initializes the recent hashes sysvar account; [`fd_sysvar_recent_hashes_update`](<#fd_sysvar_recent_hashes_update>), which updates the sysvar account at the start of every slot; and [`fd_sysvar_recent_hashes_read`](<#fd_sysvar_recent_hashes_read>), which reads the recent hashes sysvar from a data structure called `funk`. If the account does not exist or has zero lamports, [`fd_sysvar_recent_hashes_read`](<#fd_sysvar_recent_hashes_read>) returns `NULL`. The header file includes dependencies on other components such as `fd_types.h`, `fd_flamenco_base.h`, and `fd_accdb_user.h`.
# Imports and Dependencies

---
- `../../types/fd_types.h`
- `../../fd_flamenco_base.h`
- `../../accdb/fd_accdb_user.h`


# Function Declarations (Public API)

---
### fd\_sysvar\_recent\_hashes\_init<!-- {{#callable_declaration:fd_sysvar_recent_hashes_init}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_recent_hashes.h#L19>)

Initialize the recent block hashes sysvar account.
- **Description**: Use this function to set up the recent block hashes sysvar account. This function must be called before any operations that depend on the recent block hashes sysvar account. It prepares the account by encoding the block hash queue and updating the sysvar account with the encoded data. Ensure that all input parameters are valid and initialized before calling this function.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure. Must not be null. Represents the bank where the sysvar account is managed.
    - `accdb`: A pointer to an `fd_accdb_user_t` structure. Must not be null. Represents the account database user context.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure. Must not be null. Represents the transaction identifier for the operation.
    - `capture_ctx`: A pointer to an `fd_capture_ctx_t` structure. Must not be null. Represents the capture context for the operation.
- **Output**: None
- **See Also**: [`fd_sysvar_recent_hashes_init`](<fd_sysvar_recent_hashes.c.md#fd_sysvar_recent_hashes_init>)  (Implementation)


---
### fd\_sysvar\_recent\_hashes\_update<!-- {{#callable_declaration:fd_sysvar_recent_hashes_update}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_recent_hashes.h#L31>)

Update the recent hashes sysvar account.
- **Description**: Use this function to update the recent hashes sysvar account at the start of every slot, before any execution begins. This ensures that the sysvar account reflects the most recent block hashes, which is crucial for maintaining the integrity and accuracy of the system's state. It is important to call this function in the correct sequence to avoid inconsistencies.
- **Inputs**:
    - `bank`: A pointer to an `fd_bank_t` structure. This must not be null and should be properly initialized before calling the function. The function uses this to access and update the block hash information.
    - `accdb`: A pointer to an `fd_accdb_user_t` structure. This must not be null and should be properly initialized. It is used to manage account database operations related to the sysvar update.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure. This must not be null and should represent a valid transaction identifier. It is used to track the transaction context for the update.
    - `capture_ctx`: A pointer to an `fd_capture_ctx_t` structure. This must not be null and should be properly initialized. It is used to capture the context of the sysvar update operation.
- **Output**: None
- **See Also**: [`fd_sysvar_recent_hashes_update`](<fd_sysvar_recent_hashes.c.md#fd_sysvar_recent_hashes_update>)  (Implementation)


---
### fd\_sysvar\_recent\_hashes\_read<!-- {{#callable_declaration:fd_sysvar_recent_hashes_read}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_recent_hashes.h#L42>)

Reads the recent block hashes sysvar from a funk transaction.
- **Description**: Use this function to read the recent block hashes sysvar from a specified funk transaction. It is important to ensure that the sysvar account exists and has non-zero lamports; otherwise, the function will return NULL. This function is useful when you need to access the recent block hashes within a transaction context. Ensure that the `spad` has enough space to allocate the required memory for the decoded data.
- **Inputs**:
    - `funk`: A pointer to an `fd_funk_t` structure representing the funk transaction context. Must not be null.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure representing the transaction ID. Must not be null.
    - `spad`: A pointer to an `fd_spad_t` structure used for memory allocation. Must not be null and must have sufficient space for allocation.
- **Output**: Returns a pointer to an `fd_recent_block_hashes_t` structure containing the recent block hashes if successful, or NULL if the account does not exist or has zero lamports.
- **See Also**: [`fd_sysvar_recent_hashes_read`](<fd_sysvar_recent_hashes.c.md#fd_sysvar_recent_hashes_read>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)