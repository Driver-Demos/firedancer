<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for initializing, writing, and reading rent system variables in a bank transaction context.

# Purpose
The code provides functionality for managing and interacting with a system variable related to rent within a financial system. It includes functions to write, initialize, and read rent-related data. The [`fd_sysvar_rent_write`](<#fd_sysvar_rent_write>) function encodes rent data and updates the system variable account with this encoded data. It uses a binary encoding context to ensure the data is correctly formatted before updating the account. The [`fd_sysvar_rent_init`](<#fd_sysvar_rent_init>) function initializes the rent system variable by querying the current rent data from the bank and writing it using the [`fd_sysvar_rent_write`](<#fd_sysvar_rent_write>) function.

The [`fd_sysvar_rent_read`](<#fd_sysvar_rent_read>) function reads the rent data from a transaction account in a read-only manner. It checks if the account exists and has lamports, which are units of currency in the system, to determine if the account is valid. If the account is valid, it decodes the rent data using a scratchpad for temporary storage. The code relies on several external components, such as `fd_bank_t`, `fd_accdb_user_t`, and `fd_funk_txn_xid_t`, indicating that it is part of a larger system for managing financial transactions and accounts.
# Imports and Dependencies

---
- `fd_sysvar_rent.h`
- `fd_sysvar.h`
- `../fd_acc_mgr.h`
- `../fd_system_ids.h`
- `assert.h`


# Functions

---
### fd\_sysvar\_rent\_write<!-- {{#callable:fd_sysvar_rent_write}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_rent.c#L8>)

Encodes rent data and updates the system variable account with the encoded data.
- **Inputs**:
    - ``bank``: Pointer to the `fd_bank_t` structure representing the bank.
    - ``accdb``: Pointer to the `fd_accdb_user_t` structure representing the account database.
    - ``xid``: Pointer to the `fd_funk_txn_xid_t` structure representing the transaction ID.
    - ``capture_ctx``: Pointer to the `fd_capture_ctx_t` structure representing the capture context.
    - ``rent``: Pointer to the `fd_rent_t` structure representing the rent data to encode and write.
- **Logic and Control Flow**:
    - Declare an array `enc` of 32 unsigned characters to hold encoded data.
    - Calculate the size of the rent data using `fd_rent_size` and store it in `sz`.
    - Check if `sz` is less than or equal to the size of `enc` using `FD_TEST`.
    - Initialize the `enc` array to zero up to `sz` bytes using `memset`.
    - Initialize a `fd_bincode_encode_ctx_t` structure `ctx` with `data` pointing to `enc` and `dataend` pointing to `enc + sz`.
    - Encode the rent data into `enc` using `fd_rent_encode` and `ctx`; log an error if encoding fails.
    - Call [`fd_sysvar_account_update`](<fd_sysvar.c.md#fd_sysvar_account_update>) to update the system variable account with the encoded rent data.
- **Output**: No return value; the function updates the system variable account with encoded rent data.
- **Functions Called**:
    - [`fd_sysvar_account_update`](<fd_sysvar.c.md#fd_sysvar_account_update>)


---
### fd\_sysvar\_rent\_init<!-- {{#callable:fd_sysvar_rent_init}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_rent.c#L30>)

Initializes the system variable for rent by querying the rent information from the bank and writing it to the system variable.
- **Inputs**:
    - `bank`: A pointer to `fd_bank_t`, representing the bank from which rent information is queried.
    - `accdb`: A pointer to `fd_accdb_user_t`, representing the account database user context.
    - `xid`: A pointer to `fd_funk_txn_xid_t`, representing the transaction ID.
    - `capture_ctx`: A pointer to `fd_capture_ctx_t`, representing the capture context.
- **Logic and Control Flow**:
    - Call `fd_bank_rent_query` with `bank` to get the rent information.
    - Call [`fd_sysvar_rent_write`](<#fd_sysvar_rent_write>) with `bank`, `accdb`, `xid`, `capture_ctx`, and the queried rent information to write the rent to the system variable.
- **Output**: No return value; the function performs initialization by writing to the system variable.
- **Functions Called**:
    - [`fd_sysvar_rent_write`](<#fd_sysvar_rent_write>)


---
### fd\_sysvar\_rent\_read<!-- {{#callable:fd_sysvar_rent_read}} -->
[View Source →](<../../../../../../src/flamenco/runtime/sysvar/fd_sysvar_rent.c#L39>)

Reads and decodes the rent system variable from a transaction account.
- **Inputs**:
    - `funk`: A pointer to an `fd_funk_t` structure representing the transaction context.
    - `xid`: A pointer to a constant `fd_funk_txn_xid_t` structure representing the transaction ID.
    - `spad`: A pointer to an `fd_spad_t` structure used for decoding.
- **Logic and Control Flow**:
    - Initialize a transaction account `acc` using `fd_txn_account_init_from_funk_readonly` with the provided `funk` and `xid`.
    - Check if the initialization was successful; if not, return `NULL`.
    - Check if the account has zero lamports; if so, return `NULL` as the account is considered non-existent in this context.
    - Decode the rent data from the account using `fd_bincode_decode_spad` and return the decoded rent.
- **Output**: A pointer to a constant `fd_rent_t` structure containing the decoded rent data, or `NULL` if an error occurs.



---
Made with ❤️ by [Driver](https://www.driver.ai/)