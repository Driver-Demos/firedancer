<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

APIs for running instruction processor tests, including context creation and destruction functions.

# Purpose
The `fd_instr_harness.h` file is a C header file that provides APIs for testing instruction processors. It includes the necessary headers `fd_solfuzz.h` and `invoke.pb.h` to support its functionality. The file declares two main functions: [`fd_runtime_fuzz_instr_ctx_create`](<#fd_runtime_fuzz_instr_ctx_create>) and [`fd_runtime_fuzz_instr_ctx_destroy`](<#fd_runtime_fuzz_instr_ctx_destroy>). The [`fd_runtime_fuzz_instr_ctx_create`](<#fd_runtime_fuzz_instr_ctx_create>) function initializes an execution instruction context (`fd_exec_instr_ctx_t`) using a test runner and an instruction context protobuf, with an option to specify if the context is for a syscall. The [`fd_runtime_fuzz_instr_ctx_destroy`](<#fd_runtime_fuzz_instr_ctx_destroy>) function is used to free the resources associated with the instruction context created by the former function. These functions are enclosed within `FD_PROTOTYPES_BEGIN` and `FD_PROTOTYPES_END` to manage function prototypes.
# Imports and Dependencies

---
- `fd_solfuzz.h`
- `generated/invoke.pb.h`


# Function Declarations (Public API)

---
### fd\_runtime\_fuzz\_instr\_ctx\_create<!-- {{#callable_declaration:fd_runtime_fuzz_instr_ctx_create}} -->
[View Source →](<../../../../../../src/flamenco/runtime/tests/fd_instr_harness.h#L10>)

Creates an execution instruction context for runtime fuzz testing.
- **Description**: Use this function to initialize an execution instruction context (`fd_exec_instr_ctx_t`) for runtime fuzz testing with a given test runner and instruction context. This function prepares the context for execution by setting up necessary transaction and account states. It is important to call this function before using the context in any runtime operations. If `is_syscall` is true, the function skips certain operations and checks that are only relevant for program instructions. After the context is no longer needed, ensure to call `fd_runtime_fuzz_instr_ctx_destroy` to free resources.
- **Inputs**:
    - `runner`: A pointer to an `fd_solfuzz_runner_t` structure. This must not be null and should be properly initialized before calling this function. The caller retains ownership.
    - `ctx`: A pointer to an `fd_exec_instr_ctx_t` structure where the function will store the created context. This must not be null and should point to a valid memory location.
    - `test_ctx`: A pointer to a constant `fd_exec_test_instr_context_t` structure containing the test context. This must not be null and should be properly initialized. The caller retains ownership.
    - `is_syscall`: A boolean value indicating whether the context is for a syscall. If true, the function skips certain operations and checks.
- **Output**: Returns 1 on success, indicating the context was created successfully. Returns 0 if an error occurs, such as invalid input or failure to set up necessary states.
- **See Also**: [`fd_runtime_fuzz_instr_ctx_create`](<fd_instr_harness.c.md#fd_runtime_fuzz_instr_ctx_create>)  (Implementation)


---
### fd\_runtime\_fuzz\_instr\_ctx\_destroy<!-- {{#callable_declaration:fd_runtime_fuzz_instr_ctx_destroy}} -->
[View Source →](<../../../../../../src/flamenco/runtime/tests/fd_instr_harness.h#L27>)

Frees resources associated with an instruction context.
- **Description**: Use this function to release resources allocated for an instruction context that was previously created with `fd_runtime_fuzz_instr_ctx_create`. This function must be called when the instruction context is no longer needed to prevent resource leaks. Ensure that the `ctx` parameter is not null before calling this function, as it will perform no action if `ctx` is null.
- **Inputs**:
    - `runner`: A pointer to an `fd_solfuzz_runner_t` structure. The caller must ensure this pointer is valid and initialized before calling the function. The function uses this parameter to access and clear resources associated with the runner.
    - `ctx`: A pointer to an `fd_exec_instr_ctx_t` structure that represents the instruction context to be freed. This pointer must not be null, as the function will return immediately if it is null. The caller retains ownership of the memory for this structure.
- **Output**: None
- **See Also**: [`fd_runtime_fuzz_instr_ctx_destroy`](<fd_instr_harness.c.md#fd_runtime_fuzz_instr_ctx_destroy>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)