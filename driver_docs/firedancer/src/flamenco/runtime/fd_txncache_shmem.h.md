<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines shared memory structures and functions for transaction caching in the Firedancer runtime.

# Purpose
This C header file defines the interface for managing shared memory related to a transaction cache in the Flamenco runtime environment. It includes necessary utility headers and defines constants such as `FD_TXNCACHE_SHMEM_ALIGN` for memory alignment and `FD_TXNCACHE_SHMEM_MAGIC` for identifying the shared memory segment. The file declares a structure `fd_txncache_fork_id_t` and a forward declaration for `fd_txncache_shmem_t`, which is a private structure for internal use. The file provides function prototypes for operations on the transaction cache shared memory, including alignment retrieval ([`fd_txncache_shmem_align`](<#fd_txncache_shmem_align>)), footprint calculation ([`fd_txncache_shmem_footprint`](<#fd_txncache_shmem_footprint>)), creation of a new shared memory segment ([`fd_txncache_shmem_new`](<#fd_txncache_shmem_new>)), and joining an existing shared memory segment ([`fd_txncache_shmem_join`](<#fd_txncache_shmem_join>)).
# Imports and Dependencies

---
- `../../util/fd_util_base.h`


# Data Structures

---
### fd\_txncache\_fork\_id\_t
- **Type**: ``struct``
- **Members**:
    - ``val``: A `ushort` value that likely represents an identifier or a specific value related to a fork in a transaction cache.
- **Description**: Defines a structure with a single member `val` of type `ushort`, which is used to represent a fork identifier in the context of a transaction cache system.


---
### fd\_txncache\_shmem\_t
- **Type**: ``fd_txncache_shmem_t``
- **Members**:
    - ``fd_txncache_shmem_private``: A forward declaration of a private structure used internally.
- **Description**: `fd_txncache_shmem_t` is a typedef for a structure that is defined privately and used for shared memory transaction caching in the context of the Flamenco runtime. The actual structure definition is not provided in the code, indicating encapsulation and abstraction of its implementation details.


# Function Declarations (Public API)

---
### fd\_txncache\_shmem\_align<!-- {{#callable_declaration:fd_txncache_shmem_align}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txncache_shmem.h#L15>)

Returns the required alignment for shared memory.
- **Description**: Use this function to obtain the alignment requirement for shared memory used by the transaction cache. This alignment value is necessary when allocating shared memory to ensure proper access and performance. It is a constant value and does not depend on any input parameters.
- **Inputs**: None
- **Output**: Returns an unsigned long integer representing the alignment requirement for shared memory.
- **See Also**: [`fd_txncache_shmem_align`](<fd_txncache_shmem.c.md#fd_txncache_shmem_align>)  (Implementation)


---
### fd\_txncache\_shmem\_footprint<!-- {{#callable_declaration:fd_txncache_shmem_footprint}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txncache_shmem.h#L20>)

Calculates the memory footprint for a transaction cache.
- **Description**: Use this function to determine the memory size needed for a transaction cache with specified parameters. It is important to ensure that both `max_live_slots` and `max_txn_per_slot` are greater than zero, as the function returns zero if either is less than one. This function is useful for allocating shared memory for transaction caching, ensuring that the memory size is sufficient for the given configuration.
- **Inputs**:
    - `max_live_slots`: The maximum number of live slots to support. Must be greater than zero. If less than one, the function returns zero.
    - `max_txn_per_slot`: The maximum number of transactions per slot. Must be greater than zero. If less than one, the function returns zero.
- **Output**: Returns the calculated memory footprint in bytes. Returns zero if input parameters are invalid.
- **See Also**: [`fd_txncache_shmem_footprint`](<fd_txncache_shmem.c.md#fd_txncache_shmem_footprint>)  (Implementation)


---
### fd\_txncache\_shmem\_new<!-- {{#callable_declaration:fd_txncache_shmem_new}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txncache_shmem.h#L24>)

Creates a new shared memory transaction cache.
- **Description**: Use this function to initialize a shared memory region for a transaction cache with specified parameters. The shared memory pointer must be aligned according to the alignment requirements of the transaction cache. The function requires non-zero values for both the maximum number of live slots and the maximum number of transactions per slot. If any of these conditions are not met, the function returns a null pointer. This function is typically called during the setup phase of a transaction processing system to allocate and configure the necessary shared memory resources.
- **Inputs**:
    - `shmem`: Pointer to the shared memory region to use for the transaction cache. Must not be null and must be aligned according to `fd_txncache_shmem_align()`. If null or misaligned, the function returns null.
    - `max_live_slots`: Maximum number of live slots in the transaction cache. Must be greater than zero. If zero, the function returns null.
    - `max_txn_per_slot`: Maximum number of transactions per slot. Must be greater than zero. If zero, the function returns null.
- **Output**: Returns a pointer to the initialized transaction cache on success, or null on failure due to invalid input parameters.
- **See Also**: [`fd_txncache_shmem_new`](<fd_txncache_shmem.c.md#fd_txncache_shmem_new>)  (Implementation)


---
### fd\_txncache\_shmem\_join<!-- {{#callable_declaration:fd_txncache_shmem_join}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_txncache_shmem.h#L29>)

Joins a shared memory transaction cache.
- **Description**: Use this function to join an existing shared memory transaction cache. The input must be a valid pointer to a shared memory region that is aligned according to `fd_txncache_shmem_align` and initialized with the correct magic number. This function returns a pointer to the transaction cache structure if successful, or NULL if the input is invalid, misaligned, or not properly initialized.
- **Inputs**:
    - `shtc`: A pointer to the shared memory region representing the transaction cache. It must not be null, must be aligned to `fd_txncache_shmem_align`, and must have been initialized with the magic number `FD_TXNCACHE_SHMEM_MAGIC`. If these conditions are not met, the function returns NULL.
- **Output**: A pointer to `fd_txncache_shmem_t` if the join is successful, or NULL if the input is invalid.
- **See Also**: [`fd_txncache_shmem_join`](<fd_txncache_shmem.c.md#fd_txncache_shmem_join>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)