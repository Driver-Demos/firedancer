<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests the functionality of the cost tracker in the Firedancer runtime environment.

# Purpose
The code is an executable C program that initializes and tests a cost tracking system within a workspace environment. It begins by setting up the environment using command-line arguments to configure parameters such as workspace name, page size, page count, CPU affinity, and workspace tag. The program uses these parameters to either attach to an existing workspace or create a new anonymous local workspace. The workspace is managed using functions from the `fd_wksp` library, which handles memory allocation and workspace management.

The main functionality of the program is to allocate memory for a cost tracker, verify its alignment and footprint, and perform basic tests to ensure the cost tracker can be created and joined correctly. The program uses several `FD_TEST` assertions to validate the operations, ensuring that memory allocation and cost tracker initialization are successful. The code includes logging statements to provide feedback on the operations being performed, such as attaching to a workspace or creating a new one. The program concludes with a placeholder for more sophisticated tests, indicating that further development is needed to fully test the cost tracking functionality.
# Imports and Dependencies

---
- `fd_cost_tracker.h`


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/flamenco/runtime/test_cost_tracker.c#L3>)

Initializes the environment, processes command-line arguments, manages workspace allocation, and tests cost tracker functionality.
- **Inputs**:
    - `argc`: The count of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Extracts command-line options for workspace name, page size, page count, near CPU, and workspace tag using `fd_env_strip_cmdline_cstr` and `fd_env_strip_cmdline_ulong`.
    - Checks if a workspace name is provided; if so, attaches to the specified workspace using `fd_wksp_attach`.
    - If no workspace name is provided, creates an anonymous local workspace with specified page size, page count, and near CPU using `fd_wksp_new_anonymous`.
    - Allocates memory for the cost tracker in the workspace using `fd_wksp_alloc_laddr`.
    - Performs several tests on cost tracker alignment and footprint using `FD_TEST`.
    - Logs a warning with the cost tracker footprint using `FD_LOG_WARNING`.
    - Attempts to create a new cost tracker with [`fd_cost_tracker_new`](<fd_cost_tracker.c.md#fd_cost_tracker_new>) and tests the result.
    - Attempts to join a cost tracker with [`fd_cost_tracker_join`](<fd_cost_tracker.c.md#fd_cost_tracker_join>) and tests the result.
    - Logs a notice indicating successful execution and calls `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_cost_tracker_align`](<fd_cost_tracker.c.md#fd_cost_tracker_align>)
    - [`fd_cost_tracker_footprint`](<fd_cost_tracker.c.md#fd_cost_tracker_footprint>)
    - [`fd_cost_tracker_new`](<fd_cost_tracker.c.md#fd_cost_tracker_new>)
    - [`fd_cost_tracker_join`](<fd_cost_tracker.c.md#fd_cost_tracker_join>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)