<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Serialization and deserialization functions for BPF loader input parameters in the Firedancer runtime.

# Purpose
This C header file defines the interface for serialization and deserialization functions related to BPF (Berkeley Packet Filter) loader input parameters. It includes necessary dependencies from `fd_flamenco_base.h` and `fd_vm.h` and defines a constant `FD_NON_DUP_MARKER` used within the serialization process. The file declares two functions: [`fd_bpf_loader_input_serialize_parameters`](<#fd_bpf_loader_input_serialize_parameters>) and [`fd_bpf_loader_input_deserialize_parameters`](<#fd_bpf_loader_input_deserialize_parameters>). These functions handle the conversion of BPF loader input parameters to and from a serialized format, facilitating data exchange and storage. The functions take various parameters, including execution context, memory regions, and flags for ABI and runtime constraints, to manage the serialization process effectively.
# Imports and Dependencies

---
- `../../fd_flamenco_base.h`
- `../../vm/fd_vm.h`


# Function Declarations (Public API)

---
### fd\_bpf\_loader\_input\_serialize\_parameters<!-- {{#callable_declaration:fd_bpf_loader_input_serialize_parameters}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_bpf_loader_serialization.h#L9>)

Serializes input parameters for BPF loader execution.
- **Description**: Use this function to serialize input parameters for a BPF loader execution context. It prepares the data for execution by either aligning or not aligning the serialized output based on the `is_deprecated` flag. Ensure that the number of instruction accounts in `instr_ctx` does not exceed the maximum allowed. The function writes the serialized data to the location pointed to by `out`. Callers must provide valid pointers for all parameters, and the function returns a success or error code based on the operation's outcome.
- **Inputs**:
    - `instr_ctx`: A pointer to the execution instruction context. Must not be null and must contain valid instruction data.
    - `sz`: A pointer to a variable where the function will store the size of the serialized data. Must not be null.
    - `pre_lens`: A pointer to an array of pre-calculated lengths for each input region. Must not be null.
    - `input_mem_regions`: A pointer to an array of input memory regions. Must not be null and must contain valid memory region data.
    - `input_mem_regions_cnt`: A pointer to a variable containing the count of input memory regions. Must not be null and must point to a valid count.
    - `acc_region_metas`: A pointer to an array of access region metadata. Must not be null and must contain valid metadata.
    - `stricter_abi_and_runtime_constraints`: An integer flag indicating whether stricter ABI and runtime constraints should be applied.
    - `direct_mapping`: An integer flag indicating whether direct mapping should be used.
    - `is_deprecated`: A flag indicating whether to use the deprecated serialization method. Non-zero values indicate deprecated.
    - `out`: A pointer to a pointer where the function will store the address of the serialized output. Must not be null.
- **Output**: Returns an integer status code indicating success or an error condition.
- **See Also**: [`fd_bpf_loader_input_serialize_parameters`](<fd_bpf_loader_serialization.c.md#fd_bpf_loader_input_serialize_parameters>)  (Implementation)


---
### fd\_bpf\_loader\_input\_deserialize\_parameters<!-- {{#callable_declaration:fd_bpf_loader_input_deserialize_parameters}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_bpf_loader_serialization.h#L23>)

Deserializes input parameters for BPF loader.
- **Description**: Use this function to deserialize input parameters for a BPF loader context. It selects the appropriate deserialization method based on whether the input is marked as deprecated. This function requires a valid execution instruction context and input data. Ensure that the input size is correct and that the pre-lens array is properly initialized. The function can apply stricter ABI and runtime constraints and supports direct mapping if specified.
- **Inputs**:
    - `ctx`: A pointer to a `fd_exec_instr_ctx_t` structure. Must not be null. Represents the execution instruction context for deserialization.
    - `pre_lens`: A pointer to an array of unsigned long integers. Must not be null. Represents pre-calculated lengths for deserialization.
    - `input`: A pointer to an array of unsigned characters. Must not be null. Contains the input data to deserialize.
    - `input_sz`: An unsigned long integer representing the size of the input data. Must accurately reflect the size of the `input` array.
    - `stricter_abi_and_runtime_constraints`: An integer flag. If non-zero, applies stricter ABI and runtime constraints during deserialization.
    - `direct_mapping`: An integer flag. If non-zero, enables direct mapping during deserialization.
    - `is_deprecated`: An unsigned character flag. If non-zero, indicates that the input is deprecated and selects the unaligned deserialization method.
- **Output**: Returns an integer status code indicating success or failure of the deserialization process.
- **See Also**: [`fd_bpf_loader_input_deserialize_parameters`](<fd_bpf_loader_serialization.c.md#fd_bpf_loader_input_deserialize_parameters>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)