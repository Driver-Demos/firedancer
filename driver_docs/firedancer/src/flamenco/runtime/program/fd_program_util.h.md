<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Utility functions for checked addition and subtraction of unsigned long integers with error handling.

# Purpose
This C header file provides utility functions for performing checked arithmetic operations on unsigned long integers. It includes functions for addition and subtraction that detect overflow conditions using built-in functions like `__builtin_uaddl_overflow` and `__builtin_usubl_overflow`. If an overflow occurs, these functions return an error code, specifically `FD_EXECUTOR_INSTR_ERR_INSUFFICIENT_FUNDS`, otherwise they return `FD_EXECUTOR_INSTR_SUCCESS`. The file also includes functions that perform these operations with an expectation check, logging an error message if the operation does not meet the expected condition. The header file is part of a larger project, as indicated by the inclusion of other headers such as `fd_flamenco_base.h` and `fd_executor_err.h`.
# Imports and Dependencies

---
- `../../fd_flamenco_base.h`
- `../fd_executor_err.h`


# Functions

---
### fd\_ulong\_checked\_add<!-- {{#callable:fd_ulong_checked_add}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_program_util.h#L7>)

Performs addition of two unsigned long integers with overflow checking and returns a status code.
- **Inputs**:
    - `a`: The first unsigned long integer to add.
    - `b`: The second unsigned long integer to add.
    - `out`: A pointer to store the result of the addition if no overflow occurs.
- **Logic and Control Flow**:
    - Uses `__builtin_uaddl_overflow` to add `a` and `b`, storing the result in `*out` and checking for overflow.
    - Stores the overflow status in the variable `cf`.
    - Returns `FD_EXECUTOR_INSTR_ERR_INSUFFICIENT_FUNDS` if overflow occurs, otherwise returns `FD_EXECUTOR_INSTR_SUCCESS`.
- **Output**: An integer status code indicating success or overflow error.


---
### fd\_ulong\_checked\_sub<!-- {{#callable:FD_FN_UNUSED::fd_ulong_checked_sub}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_program_util.h#L21>)

Performs subtraction of two unsigned long integers with overflow checking.
- **Inputs**:
    - `a`: The minuend, an unsigned long integer.
    - `b`: The subtrahend, an unsigned long integer.
    - `out`: A pointer to an unsigned long integer where the result of the subtraction will be stored if no overflow occurs.
- **Logic and Control Flow**:
    - Uses `__builtin_usubl_overflow` to subtract `b` from `a` and checks for overflow.
    - Stores the result of the subtraction in the location pointed to by `out` if no overflow occurs.
    - Returns `FD_EXECUTOR_INSTR_ERR_INSUFFICIENT_FUNDS` if overflow occurs, otherwise returns `FD_EXECUTOR_INSTR_SUCCESS`.
- **Output**: An integer indicating success (`FD_EXECUTOR_INSTR_SUCCESS`) or an error due to overflow (`FD_EXECUTOR_INSTR_ERR_INSUFFICIENT_FUNDS`).


---
### fd\_ulong\_checked\_add\_expect<!-- {{#callable:fd_ulong_checked_add_expect}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_program_util.h#L27>)

Performs an addition of two unsigned long integers with overflow checking and logs an error message if overflow occurs.
- **Inputs**:
    - `a`: The first unsigned long integer to add.
    - `b`: The second unsigned long integer to add.
    - `expect`: A string containing the error message to log if overflow occurs.
- **Logic and Control Flow**:
    - Initialize `out` to `ULONG_MAX` to store the result of the addition.
    - Call [`fd_ulong_checked_add`](<#fd_ulong_checked_add>) to add `a` and `b`, storing the result in `out` and checking for overflow.
    - If overflow is detected (indicated by a non-zero return value from [`fd_ulong_checked_add`](<#fd_ulong_checked_add>)), log the error message specified by `expect`.
    - Return the value of `out`.
- **Output**: Returns the result of the addition if no overflow occurs; otherwise, returns `ULONG_MAX`.
- **Functions Called**:
    - [`fd_ulong_checked_add`](<#fd_ulong_checked_add>)


---
### fd\_ulong\_checked\_sub\_expect<!-- {{#callable:fd_ulong_checked_sub_expect}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_program_util.h#L34>)

Performs a checked subtraction of two unsigned long integers and logs an error message if an overflow occurs.
- **Inputs**:
    - `a`: The minuend, an unsigned long integer.
    - `b`: The subtrahend, an unsigned long integer.
    - `expect`: A constant character string used for logging an error message if the subtraction overflows.
- **Logic and Control Flow**:
    - Initialize `out` to `ULONG_MAX` to store the result of the subtraction.
    - Call [`fd_ulong_checked_sub`](<#fd_fn_unusedfd_ulong_checked_sub>) with `a`, `b`, and `out` to perform the subtraction and check for overflow.
    - If [`fd_ulong_checked_sub`](<#fd_fn_unusedfd_ulong_checked_sub>) indicates an overflow (using `FD_UNLIKELY`), log an error message using `FD_LOG_ERR` with the `expect` string.
    - Return the value of `out`, which is either the result of the subtraction or `ULONG_MAX` if an overflow occurred.
- **Output**: Returns the result of the subtraction if no overflow occurs; otherwise, returns `ULONG_MAX`.
- **Functions Called**:
    - [`FD_FN_UNUSED::fd_ulong_checked_sub`](<#fd_fn_unusedfd_ulong_checked_sub>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)