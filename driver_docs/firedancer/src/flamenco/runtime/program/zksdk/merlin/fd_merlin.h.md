<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines structures and functions for managing and manipulating Merlin transcripts in the Firedancer codebase.

# Purpose
This C header file defines structures and function prototypes for managing a cryptographic transcript using the Merlin protocol. It includes the `fd_merlin_strobe128` structure, which holds the state of the cryptographic operation, and the `fd_merlin_transcript` structure, which encapsulates the strobe context. The file provides function prototypes for initializing a transcript ([`fd_merlin_transcript_init`](<#fd_merlin_transcript_init>)), appending messages and 64-bit unsigned integers to the transcript ([`fd_merlin_transcript_append_message`](<#fd_merlin_transcript_append_message>) and [`fd_merlin_transcript_append_u64`](<#fd_merlin_transcript_append_u64>)), and generating challenge bytes ([`fd_merlin_transcript_challenge_bytes`](<#fd_merlin_transcript_challenge_bytes>)). The `FD_MERLIN_LITERAL` macro is defined to facilitate the handling of string literals and their lengths. The header file includes a base header file, `fd_flamenco_base.h`, which is likely necessary for foundational definitions or dependencies.
# Imports and Dependencies

---
- `../../../../fd_flamenco_base.h`


# Data Structures

---
### fd\_merlin\_strobe128
- **Type**: ``struct``
- **Members**:
    - `state`: An array of 25 `ulong` elements used to store the state.
    - `state_bytes`: An array of 200 `uchar` elements providing byte-level access to the state.
    - `pos`: A `uchar` indicating the current position in the state.
    - `pos_begin`: A `uchar` indicating the starting position in the state.
    - `cur_flags`: A `uchar` representing the current flags in use.
- **Description**: The `fd_merlin_strobe128` structure is a compound data type that encapsulates a state for cryptographic operations, providing both word-level and byte-level access to the state through a union. It includes position indicators and flags to manage the state transitions and operations.


---
### fd\_merlin\_strobe128\_t
- **Type**: ``struct``
- **Members**:
    - `state`: A union member that is an array of 25 unsigned long integers.
    - `state_bytes`: A union member that is an array of 200 unsigned characters.
    - `pos`: An unsigned character that indicates the current position.
    - `pos_begin`: An unsigned character that indicates the beginning position.
    - `cur_flags`: An unsigned character that stores the current flags.
- **Description**: Defines a structure that contains a union of two arrays, `state` and `state_bytes`, which are used to store the internal state of the strobe protocol. The structure also includes three unsigned character fields: `pos`, `pos_begin`, and `cur_flags`, which manage the position and flags within the strobe protocol operations.


---
### fd\_merlin\_transcript
- **Type**: ``struct``
- **Members**:
    - `sctx`: A member of type `fd_merlin_strobe128_t` that holds the state for the transcript.
- **Description**: Encapsulates a `fd_merlin_strobe128_t` structure to manage the state of a cryptographic transcript, which is used in the context of the Flamenco runtime program for zero-knowledge SDKs.


---
### fd\_merlin\_transcript\_t
- **Type**: ``struct``
- **Members**:
    - `sctx`: A member of type `fd_merlin_strobe128_t` that holds the state context for the transcript.
- **Description**: Encapsulates a cryptographic transcript using a `fd_merlin_strobe128_t` structure to manage the state context. This structure is used in cryptographic protocols to maintain and manipulate the state of a transcript, allowing for operations such as initialization, message appending, and challenge generation.


# Function Declarations (Public API)

---
### fd\_merlin\_transcript\_init<!-- {{#callable_declaration:fd_merlin_transcript_init}} -->
[View Source →](<../../../../../../../../src/flamenco/runtime/program/zksdk/merlin/fd_merlin.h#L24>)

Initializes a Merlin transcript context.
- **Description**: Use this function to initialize a `fd_merlin_transcript_t` context before using it for cryptographic operations. This function sets up the context with a domain separation label, which is necessary for ensuring the uniqueness of the transcript in different contexts. Call this function before any other operations on the transcript. The function does not return a value, and it assumes that the provided context pointer is valid and points to a writable memory location.
- **Inputs**:
    - `mctx`: A pointer to a `fd_merlin_transcript_t` structure. Must not be null and must point to a valid memory location where the transcript context will be initialized.
    - `label`: A pointer to a constant character string that represents the domain separation label. Must not be null.
    - `label_len`: The length of the domain separation label. Must accurately represent the length of the string pointed to by `label`.
- **Output**: None
- **See Also**: [`fd_merlin_transcript_init`](<fd_merlin.c.md#fd_merlin_transcript_init>)  (Implementation)


---
### fd\_merlin\_transcript\_append\_message<!-- {{#callable_declaration:fd_merlin_transcript_append_message}} -->
[View Source →](<../../../../../../../../src/flamenco/runtime/program/zksdk/merlin/fd_merlin.h#L31>)

Appends a labeled message to the transcript.
- **Description**: Use this function to add a message to an existing transcript with a specific label. This function is typically called after initializing the transcript and before finalizing it. It is important to ensure that the `mctx` parameter points to a valid and initialized `fd_merlin_transcript_t` structure. The function does not return a value, and it modifies the state of the transcript by incorporating the provided message and its label.
- **Inputs**:
    - `mctx`: A pointer to an `fd_merlin_transcript_t` structure. Must not be null and must point to a valid, initialized transcript.
    - `label`: A constant character pointer to the label for the message. Must not be null. The label is used to identify the message within the transcript.
    - `label_len`: The length of the label. Must accurately reflect the length of the string pointed to by `label`.
    - `message`: A constant pointer to the message data to append. Must not be null.
    - `message_len`: The length of the message data. Must accurately reflect the length of the data pointed to by `message`.
- **Output**: None
- **See Also**: [`fd_merlin_transcript_append_message`](<fd_merlin.c.md#fd_merlin_transcript_append_message>)  (Implementation)


---
### fd\_merlin\_transcript\_append\_u64<!-- {{#callable_declaration:fd_merlin_transcript_append_u64}} -->
[View Source →](<../../../../../../../../src/flamenco/runtime/program/zksdk/merlin/fd_merlin.h#L38>)

Appends a 64-bit unsigned integer to the transcript with a label.
- **Description**: Use this function to add a 64-bit unsigned integer to an existing transcript, associating it with a specific label. This is useful for maintaining a sequence of labeled data within a transcript. Ensure that the transcript has been initialized before calling this function. The function does not validate the label or the transcript context, so the caller must ensure these are correct and valid.
- **Inputs**:
    - `mctx`: A pointer to an `fd_merlin_transcript_t` structure. This must not be null and must point to a valid, initialized transcript.
    - `label`: A constant character pointer to the label associated with the message. This must not be null and should point to a valid string.
    - `label_len`: An unsigned integer representing the length of the label. It should accurately reflect the length of the string pointed to by `label`.
    - `message_u64`: A 64-bit unsigned integer to append to the transcript. There are no restrictions on its value.
- **Output**: None
- **See Also**: [`fd_merlin_transcript_append_u64`](<fd_merlin.c.md#fd_merlin_transcript_append_u64>)  (Implementation)


---
### fd\_merlin\_transcript\_challenge\_bytes<!-- {{#callable_declaration:fd_merlin_transcript_challenge_bytes}} -->
[View Source →](<../../../../../../../../src/flamenco/runtime/program/zksdk/merlin/fd_merlin.h#L44>)

Generates a challenge byte sequence in the transcript.
- **Description**: Use this function to generate a sequence of challenge bytes in the given transcript context. This function must be called with a valid `fd_merlin_transcript_t` context that has been initialized. The function processes the provided label and its length, and writes the generated challenge bytes into the specified buffer. Ensure that the buffer is large enough to hold the number of bytes specified by `buffer_len`. The function does not return a value, and it modifies the buffer directly.
- **Inputs**:
    - `mctx`: A pointer to an `fd_merlin_transcript_t` structure. This must be a valid and initialized transcript context. The function modifies the internal state of this context.
    - `label`: A pointer to a constant character string that represents the label. The label is used in the challenge generation process. It must not be null.
    - `label_len`: The length of the label string. It must accurately represent the number of characters in `label`.
    - `buffer`: A pointer to a buffer where the generated challenge bytes will be stored. The buffer must be allocated by the caller and must be large enough to hold `buffer_len` bytes. The function writes directly to this buffer.
    - `buffer_len`: The number of bytes to generate and store in the buffer. It must be a positive integer that does not exceed the buffer's allocated size.
- **Output**: None
- **See Also**: [`fd_merlin_transcript_challenge_bytes`](<fd_merlin.c.md#fd_merlin_transcript_challenge_bytes>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)