<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for closing a context account and verifying proofs in the zksdk runtime.

# Purpose
This C header file defines function prototypes for operations related to the `zksdk` component within a larger system. It includes two primary functions: [`fd_zksdk_process_close_context_state`](<#fd_zksdk_process_close_context_state>), which handles the logic for closing a context account, and [`fd_zksdk_process_verify_proof`](<#fd_zksdk_process_verify_proof>), which manages the parsing of data, verification of proofs, and creation of context accounts. The file includes necessary dependencies from `fd_flamenco_base.h` and `fd_exec_instr_ctx.h`, indicating that it relies on base functionalities and execution context structures defined elsewhere. The use of include guards prevents multiple inclusions of this header file, ensuring that the compiler processes it only once.
# Imports and Dependencies

---
- `../../../fd_flamenco_base.h`
- `../../context/fd_exec_instr_ctx.h`


# Function Declarations (Public API)

---
### fd\_zksdk\_process\_close\_context\_state<!-- {{#callable_declaration:fd_zksdk_process_close_context_state}} -->
[View Source →](<../../../../../../../src/flamenco/runtime/program/zksdk/fd_zksdk.h#L7>)

Executes the logic to close a context account.
- **Description**: Use this function to close a context account by transferring lamports and resetting account data. It must be called with a valid execution instruction context. The function checks for required signatures and ensures that the proof and destination accounts are distinct. It also verifies the ownership of the account and adjusts lamports and data length accordingly. Call this function when you need to finalize and close a context account safely.
- **Inputs**:
    - `ctx`: A pointer to an `fd_exec_instr_ctx_t` structure representing the execution instruction context. This parameter must not be null and must be properly initialized before calling the function. The function will return an error if the context is invalid or if required conditions are not met.
- **Output**: Returns an integer status code indicating success or the type of error encountered. Possible errors include missing required signatures, invalid instruction data, invalid account data, or invalid account owner. On success, it returns `FD_EXECUTOR_INSTR_SUCCESS`.
- **See Also**: [`fd_zksdk_process_close_context_state`](<fd_zksdk.c.md#fd_zksdk_process_close_context_state>)  (Implementation)


---
### fd\_zksdk\_process\_verify\_proof<!-- {{#callable_declaration:fd_zksdk_process_verify_proof}} -->
[View Source →](<../../../../../../../src/flamenco/runtime/program/zksdk/fd_zksdk.h#L17>)

Executes common logic for ZKSDK instructions to verify proofs and manage context accounts.
- **Description**: Use this function to process and verify zero-knowledge proofs (ZKPs) as part of ZKSDK instructions. It parses the instruction data to determine the type of proof to verify, executes the verification, and manages context accounts if necessary. This function must be called with a valid execution context that contains the instruction data. It handles different proof types based on the instruction identifier and ensures that the proof data is correctly accessed from either instruction or account data. The function returns an error code if the instruction data is invalid, the proof verification fails, or if there are issues with account data or ownership.
- **Inputs**:
    - `ctx`: A pointer to an `fd_exec_instr_ctx_t` structure that contains the execution context for the instruction. This must not be null and must be properly initialized with valid instruction data. The function expects the context to include the instruction data size and account count.
- **Output**: Returns an integer status code indicating success or the type of error encountered. Possible errors include invalid instruction data, invalid account data, invalid account owner, or account already initialized.
- **See Also**: [`fd_zksdk_process_verify_proof`](<fd_zksdk.c.md#fd_zksdk_process_verify_proof>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)