<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements functions for managing address lookup tables, including creation, freezing, extension, deactivation, and closure.

# Purpose
The code is a C implementation of an address lookup table program, which is part of a larger system, likely related to blockchain or distributed ledger technology. The primary purpose of this code is to manage address lookup tables, which are used to store and retrieve public keys efficiently. The code provides several functions to create, extend, freeze, deactivate, and close these lookup tables. It also includes functions to serialize and deserialize the state of the lookup tables, ensuring that the data is correctly encoded and decoded for storage and retrieval.

The code defines a structure `fd_addrlut_t` to represent the state of an address lookup table, including its public keys and the number of addresses it contains. It includes several static functions for internal operations, such as [`fd_addrlut_new`](<#fd_addrlut_new>), [`fd_addrlut_deserialize`](<#fd_addrlut_deserialize>), and [`fd_addrlut_serialize_meta`](<#fd_addrlut_serialize_meta>), which handle memory allocation and data encoding/decoding. The main function, [`fd_address_lookup_table_program_execute`](<#fd_address_lookup_table_program_execute>), interprets instructions to perform operations on the lookup tables, such as creating a new table or modifying an existing one. The code also interacts with other components, such as the system's transaction context and system variables, to ensure that operations are performed correctly and efficiently.
# Imports and Dependencies

---
- `fd_address_lookup_table_program.h`
- `../fd_executor.h`
- `../fd_pubkey_utils.h`
- `../fd_borrowed_account.h`
- `../sysvar/fd_sysvar_slot_hashes.h`
- `../../vm/syscall/fd_vm_syscall.h`
- `fd_native_cpi.h`
- `../fd_runtime_err.h`
- `../fd_system_ids.h`
- `string.h`


# Data Structures

---
### fd\_addrlut
- **Type**: ``struct``
- **Members**:
    - ``state``: Holds the state of the address lookup table.
    - ``addr``: Pointer to an array of public keys within account data.
    - ``addr_cnt``: Stores the count of addresses in the lookup table.
- **Description**: Manages the state and addresses of an address lookup table, which is used to efficiently handle address lookups in a system. The `state` member keeps track of the current state of the lookup table, while `addr` points to the public keys that are part of the table. `addr_cnt` indicates how many addresses are currently stored in the table.


---
### fd\_addrlut\_t
- **Type**: ``struct``
- **Members**:
    - ``state``: Holds the state of the address lookup table.
    - ``addr``: Points to the account data containing addresses.
    - ``addr_cnt``: Stores the count of addresses in the lookup table.
- **Description**: Defines a structure for managing an address lookup table, which includes the state of the table, a pointer to the address data, and the count of addresses. This structure is used to handle operations related to address lookup tables, such as creation, serialization, and deserialization, within a program.


# Functions

---
### fd\_addrlut\_new<!-- {{#callable:fd_addrlut_new}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L27>)

Creates a new `fd_addrlut_t` object from a given memory pointer if it is non-null and properly aligned.
- **Inputs**:
    - `mem`: A pointer to memory that will be used to create a new `fd_addrlut_t` object.
- **Logic and Control Flow**:
    - Check if `mem` is NULL; if so, log a warning and return NULL.
    - Check if `mem` is aligned to the alignment requirements of `fd_addrlut_t`; if not, log a warning and return NULL.
    - Return the result of `fd_type_pun(mem)` if the above checks pass.
- **Output**: A pointer to a `fd_addrlut_t` object if successful, or NULL if the input is invalid.


---
### fd\_addrlut\_deserialize<!-- {{#callable:fd_addrlut_deserialize}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L43>)

Deserializes an address lookup table from binary data into a `fd_addrlut_t` structure.
- **Inputs**:
    - `lut`: A pointer to an `fd_addrlut_t` structure where the deserialized data will be stored.
    - `data`: A pointer to the binary data that contains the serialized address lookup table.
    - `data_sz`: The size of the binary data in bytes.
- **Logic and Control Flow**:
    - Initialize `lut` using [`fd_addrlut_new`](<#fd_addrlut_new>) and check for success with `FD_TEST`.
    - Set up a `fd_bincode_decode_ctx_t` structure to manage the decoding process with `data` and `data_sz`.
    - Calculate the total size of the address lookup table state using `fd_address_lookup_table_state_decode_footprint` and check for success.
    - Verify that the calculated total size matches the expected size of `fd_address_lookup_table_state_t`.
    - Decode the address lookup table state into `lut->state` using `fd_address_lookup_table_state_decode`.
    - Check if the state discriminant is uninitialized and return an error if so; otherwise, ensure it is a lookup table.
    - Verify that `data_sz` is at least `FD_ADDRLUT_META_SZ` and return an error if not.
    - Calculate the size of the raw address data and ensure it is aligned to 32 bytes, returning an error if not.
    - Assign the raw address data to `lut->addr` and calculate the address count for `lut->addr_cnt`.
    - Return `FD_EXECUTOR_INSTR_SUCCESS` to indicate successful deserialization.
- **Output**: Returns an integer status code indicating success (`FD_EXECUTOR_INSTR_SUCCESS`) or an error code if deserialization fails.
- **Functions Called**:
    - [`fd_addrlut_new`](<#fd_addrlut_new>)


---
### fd\_addrlut\_serialize\_meta<!-- {{#callable:fd_addrlut_serialize_meta}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L89>)

Serializes the metadata of an address lookup table state into a binary format.
- **Inputs**:
    - `state`: A pointer to a `fd_address_lookup_table_state_t` structure that contains the state to serialize.
    - `data`: A pointer to a `uchar` array where the serialized data will be stored.
    - `data_sz`: The size of the `data` array in bytes.
- **Logic and Control Flow**:
    - Checks if `data_sz` is less than `FD_ADDRLUT_META_SZ`; if true, returns `FD_EXECUTOR_INSTR_ERR_INVALID_ACC_DATA`.
    - Initializes an `fd_bincode_encode_ctx_t` structure with `data` and `dataend` set to `data + FD_ADDRLUT_META_SZ`.
    - Clears the memory in the `data` array from the start to `dataend` using `fd_memset`.
    - Calls `fd_address_lookup_table_state_encode` to encode the `state` into the `encode` context.
    - Asserts that `fd_address_lookup_table_state_encode` does not return an error using `FD_TEST`.
    - Returns `FD_EXECUTOR_INSTR_SUCCESS` if serialization is successful.
- **Output**: Returns an integer status code: `FD_EXECUTOR_INSTR_SUCCESS` on success or `FD_EXECUTOR_INSTR_ERR_INVALID_ACC_DATA` if `data_sz` is insufficient.


---
### slot\_hashes\_position<!-- {{#callable:slot_hashes_position}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L110>)

Finds the position of a given slot in a deque of slot hashes using a binary search algorithm.
- **Inputs**:
    - `hashes`: A pointer to a deque of `fd_slot_hash_t` structures, representing the slot hashes.
    - `slot`: An unsigned long integer representing the slot to find in the deque.
- **Logic and Control Flow**:
    - Get the count of elements in `hashes` using `deq_fd_slot_hash_t_cnt` and store it in `size`.
    - If `size` is zero, return `ULONG_MAX` to indicate the slot is not found.
    - Initialize `base` to zero.
    - While `size` is greater than one, calculate `half` as `size / 2` and `mid` as `base + half`.
    - Get the slot at the `mid` index using `deq_fd_slot_hash_t_peek_index_const` and compare it with the input `slot`.
    - If `slot` is greater than `mid_slot`, keep `base` unchanged; otherwise, set `base` to `mid`.
    - Reduce `size` by `half`.
    - After the loop, check if the slot at `base` index is equal to the input `slot`.
    - Return `base` if the slot matches; otherwise, return `ULONG_MAX`.
- **Output**: Returns the position of the input slot in the deque if found; otherwise, returns `ULONG_MAX`.


---
### fd\_addrlut\_status<!-- {{#callable:fd_addrlut_status}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L132>)

Determines the status of an address lookup table based on its deactivation slot and the current slot.
- **Inputs**:
    - `state`: A pointer to a `fd_lookup_table_meta_t` structure that contains metadata about the address lookup table.
    - `current_slot`: An unsigned long integer representing the current slot number.
    - `slot_hashes`: A pointer to a `fd_slot_hash_t` structure, which is a deque containing slot hashes.
    - `remaining_blocks`: A pointer to an unsigned long integer where the function will store the number of remaining blocks if the table is deactivating.
- **Logic and Control Flow**:
    - Check if the `deactivation_slot` in `state` is equal to `ULONG_MAX`; if true, return `FD_ADDRLUT_STATUS_ACTIVATED`.
    - Check if the `deactivation_slot` in `state` is equal to `current_slot`; if true, set `remaining_blocks` to `MAX_ENTRIES + 1UL` and return `FD_ADDRLUT_STATUS_DEACTIVATING`.
    - Call [`slot_hashes_position`](<#slot_hashes_position>) to find the position of `deactivation_slot` in `slot_hashes`; if the position is not `ULONG_MAX`, set `remaining_blocks` to `MAX_ENTRIES - slot_hash_position` and return `FD_ADDRLUT_STATUS_DEACTIVATING`.
    - If none of the above conditions are met, return `FD_ADDRLUT_STATUS_DEACTIVATED`.
- **Output**: Returns a `uchar` indicating the status of the address lookup table: `FD_ADDRLUT_STATUS_ACTIVATED`, `FD_ADDRLUT_STATUS_DEACTIVATING`, or `FD_ADDRLUT_STATUS_DEACTIVATED`.
- **Functions Called**:
    - [`slot_hashes_position`](<#slot_hashes_position>)


---
### create\_lookup\_table<!-- {{#callable:create_lookup_table}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L180>)

Creates a lookup table by preparing accounts, verifying conditions, and executing necessary instructions.
- **Inputs**:
    - ``ctx``: A pointer to `fd_exec_instr_ctx_t`, which provides the execution context for the instruction.
    - ``create``: A pointer to `fd_addrlut_create_t`, which contains parameters for creating the lookup table.
- **Logic and Control Flow**:
    - Define constants for account indices: `ACC_IDX_LUT`, `ACC_IDX_AUTHORITY`, and `ACC_IDX_PAYER`.
    - Initialize variables for lamports, keys, and accounts.
    - Prepare the lookup table (LUT) account by borrowing it and checking its lamports, key, and owner.
    - Verify that the LUT account is not already initialized unless a specific feature is active.
    - Drop the borrowed LUT account.
    - Prepare the authority account by borrowing it and checking its key and signer status.
    - Drop the borrowed authority account.
    - Prepare the payer account by borrowing it and checking its key and signer status.
    - Drop the borrowed payer account.
    - Determine the derivation slot by checking if the recent slot is valid.
    - Derive the table key using the authority key and derivation slot, and verify it matches the LUT key.
    - Check if the LUT owner is correct and return success if a specific feature is active.
    - Calculate the required lamports for rent exemption and transfer them if necessary using a system program instruction.
    - Allocate and assign the LUT account using system program instructions.
    - Borrow the LUT account again and initialize its state with the authority key and other metadata.
    - Serialize the LUT state into the account data.
    - Return success.
- **Output**: Returns an integer status code indicating success or a specific error.
- **Functions Called**:
    - [`slot_hashes_position`](<#slot_hashes_position>)
    - [`fd_native_cpi_create_account_meta`](<fd_native_cpi.c.md#fd_native_cpi_create_account_meta>)
    - [`fd_native_cpi_native_invoke`](<fd_native_cpi.c.md#fd_native_cpi_native_invoke>)
    - [`fd_addrlut_serialize_meta`](<#fd_addrlut_serialize_meta>)


---
### freeze\_lookup\_table<!-- {{#callable:freeze_lookup_table}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L464>)

Freezes an address lookup table by removing its authority, making it immutable.
- **Inputs**:
    - ``ctx``: A pointer to the `fd_exec_instr_ctx_t` structure, which provides the execution context for the instruction.
- **Logic and Control Flow**:
    - Define constants `ACC_IDX_LUT` and `ACC_IDX_AUTHORITY` for account indices.
    - Declare an integer `err` for error handling.
    - Borrow the lookup table account using `FD_TRY_BORROW_INSTR_ACCOUNT_DEFAULT_ERR_CHECK` and check if the account owner is valid.
    - Drop the borrowed lookup table account.
    - Borrow the authority account and check if it is a signer.
    - Drop the borrowed authority account.
    - Borrow the lookup table account again and retrieve its data and size.
    - Deserialize the lookup table data into a `fd_addrlut_t` structure.
    - Check if the lookup table is already frozen, if the authority is correct, if the table is deactivated, and if it is empty, returning errors if any checks fail.
    - Get mutable data for the lookup table account and set `has_authority` to 0 to freeze the table.
    - Serialize the updated metadata back to the account data.
    - Return `FD_EXECUTOR_INSTR_SUCCESS` on success.
- **Output**: Returns an integer status code, `FD_EXECUTOR_INSTR_SUCCESS` on success, or an error code if any checks fail.
- **Functions Called**:
    - [`fd_addrlut_deserialize`](<#fd_addrlut_deserialize>)
    - [`fd_addrlut_serialize_meta`](<#fd_addrlut_serialize_meta>)


---
### extend\_lookup\_table<!-- {{#callable:extend_lookup_table}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L565>)

Extends an address lookup table by adding new addresses, ensuring the table is not full, deactivated, or lacks authority, and handles necessary lamport transfers if required.
- **Inputs**:
    - ``ctx``: A pointer to the `fd_exec_instr_ctx_t` structure, which provides the execution context for the instruction.
    - ``extend``: A pointer to the `fd_addrlut_extend_t` structure, which contains the new addresses to add to the lookup table.
- **Logic and Control Flow**:
    - Define constants for account indices: `ACC_IDX_LUT`, `ACC_IDX_AUTHORITY`, and `ACC_IDX_PAYER`.
    - Initialize a variable `err` to store error codes.
    - Borrow the lookup table account using `FD_TRY_BORROW_INSTR_ACCOUNT_DEFAULT_ERR_CHECK` and check if the account owner is valid.
    - Drop the borrowed lookup table account.
    - Borrow the authority account and check if it is a signer; if not, log an error and return an error code.
    - Drop the borrowed authority account.
    - Re-borrow the lookup table account and retrieve its data, size, and lamports.
    - Deserialize the lookup table data into a `fd_addrlut_t` structure and check for errors.
    - Verify that the lookup table has authority, the authority key matches, and the table is not deactivated or full.
    - Check if the extension contains at least one new address; if not, log an error and return an error code.
    - Calculate the new address count and check if it exceeds the maximum allowed; if so, log an error and return an error code.
    - Read the current slot from the system clock and update the lookup table's metadata if the slot has changed.
    - Calculate the new table data size and resize the account data accordingly.
    - Serialize the updated lookup table metadata back into the account data.
    - Copy the new addresses into the lookup table's data and update the address count.
    - Drop the borrowed lookup table account.
    - Calculate the required lamports for rent exemption and check if additional lamports are needed.
    - If additional lamports are needed, borrow the payer account, check if it is a signer, and drop the account.
    - Create account metas and signers list for a system program instruction to transfer lamports.
    - Encode and invoke the system program instruction to transfer the required lamports.
    - Return `FD_EXECUTOR_INSTR_SUCCESS` on successful completion.
- **Output**: Returns an integer status code, `FD_EXECUTOR_INSTR_SUCCESS` on success, or an error code if any checks or operations fail.
- **Functions Called**:
    - [`fd_addrlut_deserialize`](<#fd_addrlut_deserialize>)
    - [`fd_addrlut_serialize_meta`](<#fd_addrlut_serialize_meta>)
    - [`fd_native_cpi_create_account_meta`](<fd_native_cpi.c.md#fd_native_cpi_create_account_meta>)
    - [`fd_native_cpi_native_invoke`](<fd_native_cpi.c.md#fd_native_cpi_native_invoke>)


---
### deactivate\_lookup\_table<!-- {{#callable:deactivate_lookup_table}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L794>)

Deactivates a lookup table by setting its deactivation slot to the current slot if the authority account is valid and the table is not already deactivated.
- **Inputs**:
    - ``ctx``: A pointer to `fd_exec_instr_ctx_t`, which provides the execution context for the instruction.
- **Logic and Control Flow**:
    - Define constants `ACC_IDX_LUT` and `ACC_IDX_AUTHORITY` for account indices.
    - Declare an integer `err` for error handling.
    - Borrow the lookup table account using `FD_TRY_BORROW_INSTR_ACCOUNT_DEFAULT_ERR_CHECK` and check if the account owner is valid.
    - Drop the borrowed lookup table account.
    - Borrow the authority account and check if it is a signer.
    - Drop the borrowed authority account.
    - Re-borrow the lookup table account and retrieve its data and size.
    - Deserialize the lookup table data into `fd_addrlut_t` structure.
    - Check if the lookup table is frozen or already deactivated, returning errors if so.
    - Read the current slot from the system clock using `fd_sysvar_cache_clock_read`.
    - Get mutable access to the lookup table account data and set the deactivation slot to the current slot.
    - Serialize the updated lookup table metadata back into the account data.
    - Return `FD_EXECUTOR_INSTR_SUCCESS` on successful deactivation.
- **Output**: Returns an integer status code, `FD_EXECUTOR_INSTR_SUCCESS` on success, or an error code if any checks fail.
- **Functions Called**:
    - [`fd_addrlut_deserialize`](<#fd_addrlut_deserialize>)
    - [`fd_addrlut_serialize_meta`](<#fd_addrlut_serialize_meta>)


---
### close\_lookup\_table<!-- {{#callable:close_lookup_table}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L901>)

Closes a lookup table by verifying accounts, transferring lamports, and clearing account data.
- **Inputs**:
    - `ctx`: A pointer to `fd_exec_instr_ctx_t`, which provides the execution context for the instruction.
- **Logic and Control Flow**:
    - Defines constants for account indices: `ACC_IDX_LUT`, `ACC_IDX_AUTHORITY`, and `ACC_IDX_RECIPIENT`.
    - Attempts to borrow the lookup table account using `FD_TRY_BORROW_INSTR_ACCOUNT_DEFAULT_ERR_CHECK`.
    - Checks if the owner of the lookup table account matches the expected program ID; returns an error if not.
    - Drops the borrowed lookup table account.
    - Attempts to borrow the authority account and checks if it is a signer; returns an error if not.
    - Drops the borrowed authority account.
    - Verifies that there are exactly three instruction accounts; returns an error if not.
    - Checks if the lookup table account is the same as the recipient account; returns an error if so.
    - Borrows the lookup table account again and retrieves lamports and data.
    - Deserializes the lookup table data into a `fd_addrlut_t` structure.
    - Checks if the lookup table is frozen or if the authority is incorrect; returns an error if so.
    - Reads the system clock and slot hash sysvars; returns an error if they are unsupported.
    - Determines the status of the lookup table (activated, deactivating, or deactivated) and returns an error if it is not deactivated.
    - Drops the borrowed lookup table account.
    - Borrows the recipient account and adds the withdrawn lamports to it; returns an error if the operation fails.
    - Drops the borrowed recipient account.
    - Borrows the lookup table account again and sets its data length and lamports to zero; returns an error if the operation fails.
- **Output**: Returns `FD_EXECUTOR_INSTR_SUCCESS` on success or an error code on failure.
- **Functions Called**:
    - [`fd_addrlut_deserialize`](<#fd_addrlut_deserialize>)
    - [`fd_addrlut_status`](<#fd_addrlut_status>)


---
### fd\_address\_lookup\_table\_program\_execute<!-- {{#callable:fd_address_lookup_table_program_execute}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L1063>)

Executes an address lookup table program instruction based on the provided context and instruction data.
- **Inputs**:
    - ``ctx``: A pointer to `fd_exec_instr_ctx_t`, which contains the execution context for the instruction.
- **Logic and Control Flow**:
    - Checks if the program is a migrated native program and returns an error if true.
    - Updates the compute units in the context using `FD_EXEC_CU_UPDATE`.
    - Retrieves the instruction data and size from the context and checks if the data is NULL, returning an error if so.
    - Begins a scratchpad frame using `FD_SPAD_FRAME_BEGIN`.
    - Decodes the instruction data using `fd_bincode_decode1_spad` and checks for decoding errors or size issues, returning an error if any are found.
    - Switches on the instruction's discriminant to determine which specific operation to execute (create, freeze, extend, deactivate, or close a lookup table).
    - Executes the corresponding function for the operation and returns its result.
    - Ends the scratchpad frame using `FD_SPAD_FRAME_END`.
    - Returns `FD_EXECUTOR_INSTR_SUCCESS` if no errors occur.
- **Output**: Returns an integer status code indicating success or the type of error encountered during execution.
- **Functions Called**:
    - [`create_lookup_table`](<#create_lookup_table>)
    - [`freeze_lookup_table`](<#freeze_lookup_table>)
    - [`extend_lookup_table`](<#extend_lookup_table>)
    - [`deactivate_lookup_table`](<#deactivate_lookup_table>)
    - [`close_lookup_table`](<#close_lookup_table>)


---
### is\_active<!-- {{#callable:is_active}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L1114>)

Determines if an address lookup table is active based on its status and the current slot.
- **Inputs**:
    - `self`: A pointer to a constant `fd_address_lookup_table_t` structure representing the address lookup table.
    - `current_slot`: An unsigned long integer representing the current slot number.
    - `slot_hashes`: A pointer to a constant `fd_slot_hash_t` structure representing the slot hashes, used as a deque.
- **Logic and Control Flow**:
    - Declare a dummy array `_dummy` of type `ulong` with one element.
    - Call the function [`fd_addrlut_status`](<#fd_addrlut_status>) with the parameters `&self->meta`, `current_slot`, `slot_hashes`, and `_dummy`.
    - Use a switch statement to check the return value of [`fd_addrlut_status`](<#fd_addrlut_status>).
    - If the status is `FD_ADDRLUT_STATUS_ACTIVATED` or `FD_ADDRLUT_STATUS_DEACTIVATING`, return 1.
    - If the status is `FD_ADDRLUT_STATUS_DEACTIVATED`, return 0.
    - If the status is none of the above, call `__builtin_unreachable()` indicating an unexpected status.
- **Output**: Returns an unsigned char (uchar) value: 1 if the table is active or deactivating, 0 if it is deactivated.
- **Functions Called**:
    - [`fd_addrlut_status`](<#fd_addrlut_status>)


---
### fd\_get\_active\_addresses\_len<!-- {{#callable:fd_get_active_addresses_len}} -->
[View Source →](<../../../../../../src/flamenco/runtime/program/fd_address_lookup_table_program.c#L1133>)

Calculates the length of active addresses in an address lookup table based on the current slot and slot hashes.
- **Inputs**:
    - `self`: A pointer to the `fd_address_lookup_table_t` structure representing the address lookup table.
    - `current_slot`: The current slot number as an unsigned long integer.
    - `slot_hashes`: A pointer to a deque of `fd_slot_hash_t` structures representing the slot hashes.
    - `addresses_len`: The total length of addresses as an unsigned long integer.
    - `active_addresses_len`: A pointer to an unsigned long integer where the function will store the length of active addresses.
- **Logic and Control Flow**:
    - Check if the address lookup table is active using the [`is_active`](<#is_active>) function with `self`, `current_slot`, and `slot_hashes` as arguments.
    - If the table is not active, return `FD_RUNTIME_TXN_ERR_ADDRESS_LOOKUP_TABLE_NOT_FOUND`.
    - If the table is active, calculate the active addresses length:
    - If `current_slot` is greater than `self->meta.last_extended_slot`, set `*active_addresses_len` to `addresses_len`.
    - Otherwise, set `*active_addresses_len` to `self->meta.last_extended_slot_start_index`.
    - Return `FD_RUNTIME_EXECUTE_SUCCESS`.
- **Output**: Returns an integer status code: `FD_RUNTIME_EXECUTE_SUCCESS` on success or `FD_RUNTIME_TXN_ERR_ADDRESS_LOOKUP_TABLE_NOT_FOUND` if the table is not active.
- **Functions Called**:
    - [`is_active`](<#is_active>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)