<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements a cost tracking system for transactions, including functions for cost calculation and validation.

# Purpose
The code is a C implementation of a cost tracking system for transactions, likely in a blockchain or distributed ledger context. It defines structures and functions to manage and calculate the costs associated with executing transactions. The primary components include `account_cost_t` and `cost_tracker_outer_t` structures, which store information about account costs and overall cost tracking, respectively. The code uses a map to associate accounts with their respective costs, allowing for efficient querying and updating of account costs.

The code provides functions to initialize and manage a cost tracker, calculate transaction costs, and determine if a transaction can be executed without exceeding predefined limits. It includes logic to handle different types of transactions, such as simple votes and non-vote transactions, and calculates costs based on various factors like signature verification, write locks, and allocated account data size. The code also includes functions to add transaction costs to the tracker and check if a transaction would fit within the current cost limits. The implementation uses several utility functions and macros to manage memory alignment and layout, ensuring efficient use of shared memory resources.
# Imports and Dependencies

---
- `fd_cost_tracker.h`
- `fd_system_ids.h`
- `fd_bank.h`
- `../features/fd_features.h`
- `../../util/tmpl/fd_map_chain.c`


# Data Structures

---
### account\_cost
- **Type**: ``struct``
- **Members**:
    - ``account``: Holds the public key of the account.
    - ``cost``: Stores the cost associated with the account.
    - ``map.next``: Contains the index of the next element in the map chain.
- **Description**: Defines a structure to track the cost associated with a specific account, identified by its public key. The `account_cost` structure includes a public key (`account`), a cost value (`cost`), and a nested structure `map` with a `next` field to facilitate chaining in a map data structure. This structure is used in conjunction with a map to manage and query account costs efficiently.


---
### account\_cost\_t
- **Type**: ``struct``
- **Members**:
    - ``account``: Holds the public key of the account.
    - ``cost``: Stores the cost associated with the account.
    - ``map.next``: Contains the index of the next element in the map chain.
- **Description**: Defines an `account_cost_t` structure that associates a public key (`account`) with a cost value (`cost`). It also includes a nested structure `map` with a `next` field to facilitate chaining in a map data structure. This structure is used to track costs associated with accounts in a cost tracking system.


---
### cost\_tracker\_outer
- **Type**: ``struct``
- **Members**:
    - ``cost_tracker``: An array of one `fd_cost_tracker_t` element.
    - ``pool_offset``: An unsigned long integer representing the offset to the account pool.
    - ``accounts_used``: An unsigned long integer indicating the number of accounts used.
    - ``magic``: An unsigned long integer used for validation or identification purposes.
- **Description**: Encapsulates a cost tracking mechanism, including a single cost tracker, an offset to an account pool, a count of used accounts, and a magic number for validation.


---
### cost\_tracker\_outer\_t
- **Type**: ``struct``
- **Members**:
    - ``cost_tracker``: An array of one `fd_cost_tracker_t` structure.
    - ``pool_offset``: An unsigned long integer representing the offset to the account pool.
    - ``accounts_used``: An unsigned long integer indicating the number of accounts used.
    - ``magic``: An unsigned long integer used for validation, typically a magic number.
- **Description**: The `cost_tracker_outer_t` structure is used to manage and track costs associated with accounts in a system. It contains a single `fd_cost_tracker_t` structure for tracking cost limits and usage, an offset to the account pool, a count of accounts used, and a magic number for validation purposes. This structure is part of a larger system for managing transaction costs and ensuring they do not exceed predefined limits.


# Functions

---
### fd\_cost\_tracker\_align<!-- {{#callable:fd_cost_tracker_align}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L35>)

Returns the alignment requirement for a cost tracker.
- **Inputs**: None
- **Logic and Control Flow**:
    - Returns the value of the macro `FD_COST_TRACKER_ALIGN`.
- **Output**: The function returns an `ulong` representing the alignment requirement for a cost tracker.


---
### fd\_cost\_tracker\_footprint<!-- {{#callable:fd_cost_tracker_footprint}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L40>)

Calculates the memory footprint required for a cost tracker structure and its associated components.
- **Inputs**: None
- **Logic and Control Flow**:
    - Estimate the number of map chains using `account_cost_map_chain_cnt_est` with `FD_RUNTIME_MAX_WRITABLE_ACCOUNTS_PER_SLOT`.
    - Initialize a layout variable `l` with `FD_LAYOUT_INIT`.
    - Append the alignment and size of `cost_tracker_outer_t` to `l` using `FD_LAYOUT_APPEND`.
    - Append the alignment and footprint of the account cost map to `l` using `FD_LAYOUT_APPEND`.
    - Append the alignment and size of the account cost array to `l` using `FD_LAYOUT_APPEND`.
    - Finalize the layout with `FD_LAYOUT_FINI` and return the result.
- **Output**: Returns an `ulong` representing the total memory footprint required.
- **Functions Called**:
    - [`fd_cost_tracker_align`](<#fd_cost_tracker_align>)


---
### fd\_cost\_tracker\_new<!-- {{#callable:fd_cost_tracker_new}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L51>)

Initializes a new cost tracker in shared memory with specified alignment and seed.
- **Inputs**:
    - ``shmem``: Pointer to shared memory where the cost tracker will be initialized.
    - ``seed``: Unsigned long integer used for hashing in the cost map.
- **Logic and Control Flow**:
    - Check if `shmem` is NULL; if so, log a warning and return NULL.
    - Check if `shmem` is aligned according to [`fd_cost_tracker_align`](<#fd_cost_tracker_align>); if not, log a warning and return NULL.
    - Estimate the number of map chains needed using `account_cost_map_chain_cnt_est`.
    - Initialize scratch memory allocation with `FD_SCRATCH_ALLOC_INIT`.
    - Allocate memory for `cost_tracker_outer_t`, account cost map, and accounts using `FD_SCRATCH_ALLOC_APPEND`.
    - Create and join a new account cost map with `account_cost_map_new` and `account_cost_map_join`.
    - Set the `pool_offset` in `cost_tracker` to the offset of accounts from the start of `cost_tracker`.
    - Set the `magic` field of `cost_tracker` to `FD_COST_TRACKER_MAGIC` using memory fences for synchronization.
    - Return the `shmem` pointer.
- **Output**: Returns a pointer to the initialized shared memory if successful, or NULL if there is an error.
- **Functions Called**:
    - [`fd_cost_tracker_align`](<#fd_cost_tracker_align>)


---
### fd\_cost\_tracker\_join<!-- {{#callable:fd_cost_tracker_join}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L85>)

Validates and returns a pointer to a `fd_cost_tracker_t` structure from a shared memory object if it meets alignment and magic number criteria.
- **Inputs**:
    - `shct`: A pointer to a shared memory object that is expected to contain a `cost_tracker_outer_t` structure.
- **Logic and Control Flow**:
    - Check if `shct` is NULL; if so, log a warning and return NULL.
    - Verify if `shct` is aligned according to [`fd_cost_tracker_align`](<#fd_cost_tracker_align>); if not, log a warning and return NULL.
    - Cast `shct` to a `cost_tracker_outer_t` pointer named `cost_tracker`.
    - Check if `cost_tracker->magic` equals `FD_COST_TRACKER_MAGIC`; if not, log a warning and return NULL.
    - Return the `cost_tracker`'s `cost_tracker` field, which is a pointer to a `fd_cost_tracker_t` structure.
- **Output**: A pointer to a `fd_cost_tracker_t` structure if all checks pass, otherwise NULL.
- **Functions Called**:
    - [`fd_cost_tracker_align`](<#fd_cost_tracker_align>)


---
### fd\_cost\_tracker\_block\_cost\_limit<!-- {{#callable:fd_cost_tracker_block_cost_limit}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L107>)

Determines the block cost limit based on active features for a given bank.
- **Inputs**:
    - ``bank``: A pointer to a `fd_bank_t` structure representing the bank for which the block cost limit is determined.
- **Logic and Control Flow**:
    - Query the features of the given `bank` using `fd_bank_features_query` and store the result in `features`.
    - Get the current slot of the `bank` using `fd_bank_slot_get` and store it in `slot`.
    - Check if the feature `raise_block_limits_to_100m` is active for the current `slot` and `features`. If active, return `FD_MAX_BLOCK_UNITS_SIMD_0286`.
    - If the previous feature is not active, check if the feature `raise_block_limits_to_60m` is active. If active, return `FD_MAX_BLOCK_UNITS_SIMD_0256`.
    - If neither feature is active, return `FD_MAX_BLOCK_UNITS_SIMD_0207`.
- **Output**: Returns an `ulong` representing the block cost limit based on the active features for the given bank.


---
### fd\_cost\_tracker\_init<!-- {{#callable:fd_cost_tracker_init}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L117>)

Initializes a `fd_cost_tracker_t` structure with cost limits and resets its state based on the provided features and slot.
- **Inputs**:
    - `cost_tracker`: A pointer to a `fd_cost_tracker_t` structure to initialize.
    - `features`: A pointer to a `fd_features_t` structure containing feature flags.
    - `slot`: An unsigned long integer representing the current slot.
- **Logic and Control Flow**:
    - Check if the feature `raise_block_limits_to_100m` is active for the given slot; if true, set `block_cost_limit`, `vote_cost_limit`, and `account_cost_limit` to specific maximum values.
    - If the feature `raise_block_limits_to_60m` is active, set the cost limits to different maximum values.
    - If neither feature is active, set the cost limits to default maximum values.
    - Check if the feature `raise_account_cu_limit` is active; if true, adjust `account_cost_limit` based on `block_cost_limit`.
    - Initialize `block_cost`, `vote_cost`, and `allocated_accounts_data_size` to zero.
    - Cast `cost_tracker` to `cost_tracker_outer_t` and set `accounts_used` to zero.
    - Reset the account cost map using `account_cost_map_reset`.
- **Output**: The function does not return a value; it initializes the `fd_cost_tracker_t` structure in place.


---
### get\_instructions\_data\_cost<!-- {{#callable:get_instructions_data_cost}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L150>)

Calculates the total data cost of instructions in a transaction context.
- **Inputs**:
    - `txn_ctx`: A pointer to a `fd_exec_txn_ctx_t` structure that contains the transaction context, including transaction details and instructions.
- **Logic and Control Flow**:
    - Initialize `total_instr_data_sz` to 0.
    - Iterate over each instruction in the transaction using a loop that runs from 0 to the instruction count (`instr_cnt`).
    - For each instruction, add its data size (`data_sz`) to `total_instr_data_sz`.
    - After the loop, divide `total_instr_data_sz` by `FD_PACK_INV_COST_PER_INSTR_DATA_BYTE` to calculate the cost.
    - Return the calculated cost.
- **Output**: Returns the total data cost of instructions as an `ulong` value.


---
### get\_signature\_cost<!-- {{#callable:get_signature_cost}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L160>)

Calculates the total cost of transaction signatures, including specific cryptographic signature verifications, based on the transaction context.
- **Inputs**:
    - `txn_ctx`: A pointer to a `fd_exec_txn_ctx_t` structure that contains the transaction context, including transaction details and bank features.
- **Logic and Control Flow**:
    - Retrieve the transaction and payload from `txn_ctx`.
    - Get the account addresses associated with the transaction using `fd_txn_get_acct_addrs`.
    - Initialize variables to count different types of cryptographic instruction signatures.
    - Iterate over each instruction in the transaction to determine the type and number of cryptographic signatures required.
    - For each instruction, check the program ID to identify the type of signature verification needed (Ed25519, Secp256k1, or Secp256r1) and update the respective counters.
    - Calculate the cost for each type of signature verification using `fd_ulong_sat_mul` with predefined cost constants.
    - Check if specific bank features are active to determine the cost calculation method for Ed25519 and Secp256r1 signatures.
    - Sum the base signature cost with the calculated costs for each type of cryptographic signature verification using `fd_ulong_sat_add`.
- **Output**: Returns the total signature cost as an unsigned long integer (`ulong`).


---
### get\_write\_lock\_cost<!-- {{#callable:get_write_lock_cost}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L215>)

Calculates the cost of write locks by multiplying the number of write locks by a predefined unit cost.
- **Inputs**:
    - `num_write_locks`: The number of write locks for which the cost needs to be calculated.
- **Logic and Control Flow**:
    - Calls the function `fd_ulong_sat_mul` with `num_write_locks` and `FD_WRITE_LOCK_UNITS` as arguments.
    - Returns the result of the multiplication, which represents the total cost of the write locks.
- **Output**: The function returns an `ulong` representing the total cost of the specified number of write locks.


---
### calculate\_allocated\_accounts\_data\_size<!-- {{#callable:calculate_allocated_accounts_data_size}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L224>)

Calculates the total allocated data size for accounts in a transaction context, considering specific system program instructions.
- **Inputs**:
    - `txn_ctx`: A pointer to a `fd_exec_txn_ctx_t` structure that contains the transaction context, including transaction details and payload.
- **Logic and Control Flow**:
    - Initialize `allocated_accounts_data_size` to 0.
    - Iterate over each instruction in the transaction using a loop.
    - For each instruction, retrieve the account addresses and program ID from the transaction context.
    - Check if the instruction has a non-zero data size and if the program ID matches the Solana system program ID; if not, continue to the next instruction.
    - Initialize a `fd_bincode_decode_ctx_t` structure to decode the instruction data.
    - Decode the footprint of the system program instruction to get the total size; if an error occurs, continue to the next instruction.
    - Decode the system program instruction into a buffer; if decoding fails, continue to the next instruction.
    - Determine the space required by the instruction based on its discriminant (e.g., create account, allocate).
    - If the space exceeds `FD_RUNTIME_ACC_SZ_MAX`, return 0.
    - Add the space to `allocated_accounts_data_size` using saturated addition.
    - Return the minimum of `2 * FD_RUNTIME_ACC_SZ_MAX` and `allocated_accounts_data_size`.
- **Output**: Returns the total allocated accounts data size as an `ulong`, or 0 if any space exceeds the maximum allowed size.


---
### calculate\_non\_vote\_transaction\_cost<!-- {{#callable:calculate_non_vote_transaction_cost}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L284>)

Calculates the cost of a non-vote transaction based on various factors such as signature, write lock, and data size costs.
- **Inputs**:
    - `txn_ctx`: A pointer to a `fd_exec_txn_ctx_t` structure that contains the transaction context.
    - `loaded_accounts_data_size_cost`: An unsigned long representing the cost associated with the size of loaded account data.
    - `data_bytes_cost`: An unsigned long representing the cost associated with the data bytes of the transaction.
- **Logic and Control Flow**:
    - Calls [`get_signature_cost`](<#get_signature_cost>) to calculate the cost of signatures in the transaction context.
    - Calls [`get_write_lock_cost`](<#get_write_lock_cost>) with the count of writable accounts to calculate the write lock cost.
    - Calls [`calculate_allocated_accounts_data_size`](<#calculate_allocated_accounts_data_size>) to determine the size of allocated account data.
    - Calculates the programs execution cost by subtracting the compute meter from the compute unit limit in the transaction context.
    - Returns a `fd_transaction_cost_t` structure initialized with the calculated costs and other provided costs.
- **Output**: Returns a `fd_transaction_cost_t` structure containing the calculated costs for the transaction.
- **Functions Called**:
    - [`get_signature_cost`](<#get_signature_cost>)
    - [`get_write_lock_cost`](<#get_write_lock_cost>)
    - [`calculate_allocated_accounts_data_size`](<#calculate_allocated_accounts_data_size>)


---
### transaction\_cost\_sum<!-- {{#callable:transaction_cost_sum}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L314>)

Calculates the total transaction cost based on the type of transaction.
- **Inputs**:
    - ``txn_cost``: A pointer to a `fd_transaction_cost_t` structure that contains the transaction cost details.
- **Logic and Control Flow**:
    - Check the `discriminant` field of `txn_cost` to determine the type of transaction.
    - If the transaction is a simple vote (`fd_transaction_cost_enum_simple_vote`), return the constant `FD_PACK_SIMPLE_VOTE_COST`.
    - If the transaction is a regular transaction (`fd_transaction_cost_enum_transaction`), retrieve the `usage_cost` details from `txn_cost->inner.transaction`.
    - Initialize a `cost` variable to 0 and add the individual cost components (`signature_cost`, `write_lock_cost`, `data_bytes_cost`, `programs_execution_cost`, `loaded_accounts_data_size_cost`) to `cost` using `fd_ulong_sat_add`.
    - Return the calculated `cost`.
    - If the `discriminant` does not match any known type, the function assumes it is unreachable (`__builtin_unreachable()`).
- **Output**: Returns the total transaction cost as an `ulong` value.


---
### get\_allocated\_accounts\_data\_size<!-- {{#callable:get_allocated_accounts_data_size}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L340>)

Determines the allocated accounts data size based on the transaction cost discriminant.
- **Inputs**:
    - `txn_cost`: A pointer to a `fd_transaction_cost_t` structure that contains transaction cost details.
- **Logic and Control Flow**:
    - Check the `discriminant` field of the `txn_cost` structure.
    - If the `discriminant` is `fd_transaction_cost_enum_simple_vote`, return 0.
    - If the `discriminant` is `fd_transaction_cost_enum_transaction`, return the `allocated_accounts_data_size` from the `inner.transaction` field of `txn_cost`.
    - If the `discriminant` is neither, the code is marked as unreachable.
- **Output**: Returns an `ulong` representing the allocated accounts data size, or 0 if the transaction is a simple vote.


---
### would\_fit<!-- {{#callable:would_fit}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L353>)

Checks if a transaction's cost fits within predefined limits of a cost tracker.
- **Inputs**:
    - `cost_tracker`: A pointer to a `fd_cost_tracker_t` structure that holds the current cost limits and usage.
    - `txn_ctx`: A pointer to a `fd_exec_txn_ctx_t` structure that contains the transaction context, including account information.
    - `tx_cost`: A pointer to a `fd_transaction_cost_t` structure that represents the cost details of the transaction.
- **Logic and Control Flow**:
    - Calculate the total transaction cost using [`transaction_cost_sum`](<#transaction_cost_sum>) function.
    - Check if the transaction is a simple vote using `fd_transaction_cost_is_simple_vote`. If true, verify if adding the transaction cost to `vote_cost` exceeds `vote_cost_limit`. Return an error code if it does.
    - Check if adding the transaction cost to `block_cost` exceeds `block_cost_limit`. Return an error code if it does.
    - Check if the transaction cost exceeds `account_cost_limit`. Return an error code if it does.
    - Calculate the new `allocated_accounts_data_size` by adding the transaction's allocated account data size to the current size.
    - Check if the new `allocated_accounts_data_size` exceeds `FD_MAX_BLOCK_ACCOUNTS_DATA_SIZE_DELTA`. Return an error code if it does.
    - Iterate over each account in `txn_ctx`. For writable accounts, check if adding the transaction cost to the account's existing cost exceeds `account_cost_limit`. Return an error code if it does.
    - Return `FD_COST_TRACKER_SUCCESS` if all checks pass.
- **Output**: Returns an integer indicating success or a specific error code if any cost limit is exceeded.
- **Functions Called**:
    - [`transaction_cost_sum`](<#transaction_cost_sum>)
    - [`get_allocated_accounts_data_size`](<#get_allocated_accounts_data_size>)
    - [`fd_exec_txn_ctx_account_is_writable_idx`](<context/fd_exec_txn_ctx.c.md#fd_exec_txn_ctx_account_is_writable_idx>)


---
### add\_transaction\_execution\_cost<!-- {{#callable:add_transaction_execution_cost}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L407>)

Updates the execution cost of a transaction in the cost tracker, adjusting for writable accounts and vote costs.
- **Inputs**:
    - `_cost_tracker`: A pointer to the `fd_cost_tracker_t` structure that tracks transaction costs.
    - `txn_ctx`: A constant pointer to the `fd_exec_txn_ctx_t` structure containing transaction context information.
    - `tx_cost`: A constant pointer to the `fd_transaction_cost_t` structure representing the transaction cost details.
    - `adjustment`: An unsigned long integer representing the cost adjustment to apply.
- **Logic and Control Flow**:
    - Type pun the `_cost_tracker` to `cost_tracker_outer_t` and initialize `map` and `pool` pointers.
    - Iterate over each account in `txn_ctx` to check if it is writable.
    - If an account is writable, query the `account_cost_map` for the account's cost entry.
    - If the account cost entry does not exist, create a new entry, initialize it with the `adjustment`, and insert it into the map.
    - If the account cost entry exists, add the `adjustment` to the existing cost using `fd_ulong_sat_add`.
    - Update the `block_cost` in the cost tracker by adding the `adjustment`.
    - If the transaction is a simple vote, also update the `vote_cost` in the cost tracker by adding the `adjustment`.
- **Output**: No return value; the function updates the cost tracker in place.
- **Functions Called**:
    - [`fd_exec_txn_ctx_account_is_writable_idx`](<context/fd_exec_txn_ctx.c.md#fd_exec_txn_ctx_account_is_writable_idx>)


---
### add\_transaction\_cost<!-- {{#callable:add_transaction_cost}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L444>)

Updates the transaction cost tracker with the allocated accounts data size and execution cost of a transaction.
- **Inputs**:
    - ``cost_tracker``: A pointer to an `fd_cost_tracker_t` structure that tracks transaction costs.
    - ``txn_ctx``: A constant pointer to an `fd_exec_txn_ctx_t` structure that contains the transaction context.
    - ``tx_cost``: A constant pointer to an `fd_transaction_cost_t` structure that contains the transaction cost details.
- **Logic and Control Flow**:
    - Add the allocated accounts data size from `tx_cost` to `cost_tracker->allocated_accounts_data_size` using [`get_allocated_accounts_data_size`](<#get_allocated_accounts_data_size>) function.
    - Calculate the total transaction cost using [`transaction_cost_sum`](<#transaction_cost_sum>) function.
    - Call [`add_transaction_execution_cost`](<#add_transaction_execution_cost>) to update the execution cost in the cost tracker with the calculated transaction cost.
- **Output**: No return value; the function updates the `cost_tracker` in place.
- **Functions Called**:
    - [`get_allocated_accounts_data_size`](<#get_allocated_accounts_data_size>)
    - [`add_transaction_execution_cost`](<#add_transaction_execution_cost>)
    - [`transaction_cost_sum`](<#transaction_cost_sum>)


---
### fd\_cost\_tracker\_calculate\_cost\_and\_add<!-- {{#callable:fd_cost_tracker_calculate_cost_and_add}} -->
[View Source →](<../../../../../src/flamenco/runtime/fd_cost_tracker.c#L453>)

Calculates the transaction cost and adds it to the cost tracker if it fits within the limits.
- **Inputs**:
    - ``cost_tracker``: A pointer to an `fd_cost_tracker_t` structure that tracks the costs of transactions.
    - ``txn_ctx``: A constant pointer to an `fd_exec_txn_ctx_t` structure that contains the transaction context.
- **Logic and Control Flow**:
    - Check if `txn_ctx` is NULL; if so, return `FD_COST_TRACKER_SUCCESS` immediately.
    - Determine if the transaction is a simple vote transaction using `fd_txn_is_simple_vote_transaction`; if true, set `txn_cost` to a simple vote cost.
    - If not a simple vote transaction, calculate `loaded_accounts_data_size_cost` using [`fd_cost_tracker_calculate_loaded_accounts_data_size_cost`](<fd_cost_tracker.h.md#fd_cost_tracker_calculate_loaded_accounts_data_size_cost>).
    - Calculate `instructions_data_cost` using [`get_instructions_data_cost`](<#get_instructions_data_cost>).
    - Compute the non-vote transaction cost using [`calculate_non_vote_transaction_cost`](<#calculate_non_vote_transaction_cost>) with the calculated costs.
    - Check if the transaction cost would fit within the limits using [`would_fit`](<#would_fit>); if not, return the error code.
    - Add the transaction cost to the cost tracker using [`add_transaction_cost`](<#add_transaction_cost>).
    - Return `FD_COST_TRACKER_SUCCESS`.
- **Output**: Returns an integer status code, `FD_COST_TRACKER_SUCCESS` if successful, or an error code if the transaction cost exceeds limits.
- **Functions Called**:
    - [`fd_cost_tracker_calculate_loaded_accounts_data_size_cost`](<fd_cost_tracker.h.md#fd_cost_tracker_calculate_loaded_accounts_data_size_cost>)
    - [`get_instructions_data_cost`](<#get_instructions_data_cost>)
    - [`calculate_non_vote_transaction_cost`](<#calculate_non_vote_transaction_cost>)
    - [`would_fit`](<#would_fit>)
    - [`add_transaction_cost`](<#add_transaction_cost>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)