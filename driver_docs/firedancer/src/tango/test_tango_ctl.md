<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

A Bash script for testing various `fd_tango_ctl` commands in the `firedancer` codebase.

# Purpose
The Bash script is a test suite for validating the functionality of the `fd_tango_ctl` command-line tool, which is part of a larger software system. It performs a series of tests on various operations such as creating, querying, and deleting different types of caches and sequences, including `mcache`, `dcache`, `fseq`, `cnc`, and `tcache`. The script sets up a test workspace, executes the `fd_tango_ctl` commands with different parameters, and checks for expected outcomes. If a command does not behave as expected, the script calls the `fail` function to report the failure and exit. The script also includes cleanup operations to remove any test artifacts created during execution.
# Global Variables

---
### UNIT\_TEST
- **Type**: ``string``
- **Description**: `UNIT_TEST` is a global variable that stores the directory path of the script's source file. It uses the `dirname` command to extract the directory name from the `$BASH_SOURCE` variable, which contains the path of the script being executed.
- **Use**: Stores the directory path of the script's source file for use in determining the location of binaries.


---
### BUILD
- **Type**: `string`
- **Description**: Represents the directory path where the binaries are located. It is determined by taking the directory name of the `UNIT_TEST` variable, which itself is derived from the directory of the script's source.
- **Use**: Used to construct the path to the `bin` directory where executable files are stored.


---
### BIN
- **Type**: `string`
- **Description**: The `BIN` variable is a string that stores the path to the 'bin' directory within the build directory. It is constructed by appending '/bin' to the `BUILD` variable, which represents the directory path of the unit test.
- **Use**: Used to specify the directory path where binary executables are located for subsequent command executions.


---
### WKSP
- **Type**: ``string``
- **Description**: The `WKSP` variable is a string that specifies the name of the workspace file used in the script. It is set to `test_fd_tango_ctl.wksp`.
- **Use**: Used to identify the workspace file for various operations such as creation, deletion, and querying within the script.


---
### PAGE\_CNT
- **Type**: `integer`
- **Description**: Specifies the number of pages to use when creating a new workspace with the `fd_wksp_ctl` command. It is set to 1, indicating that the workspace will consist of a single page.
- **Use**: Used as an argument in the `fd_wksp_ctl new` command to define the number of pages for the workspace.


---
### PAGE\_SZ
- **Type**: ``string``
- **Description**: `PAGE_SZ` is a global variable that is set to the string value 'gigantic'. It is used to specify the size of a page in the context of workspace operations.
- **Use**: Used as an argument in workspace creation commands to define the page size.


---
### CPU\_IDX
- **Type**: `integer`
- **Description**: The variable `CPU_IDX` is an integer set to 0. It represents the index of the CPU to be used in the script.
- **Use**: Used as a parameter when creating a new workspace with the `fd_wksp_ctl` command.


---
### MODE
- **Type**: ``int``
- **Description**: The `MODE` variable is an integer that represents file permissions in octal format. It is set to `0600`, which means that the file owner has read and write permissions, while no permissions are granted to the group or others.
- **Use**: Used as a parameter for file creation commands to set the permissions of new files.


---
### FD\_LOG\_PATH
- **Type**: `string`
- **Description**: The `FD_LOG_PATH` variable is a global environment variable that is set to an empty string. It is used to disable the permanent logging feature in the script.
- **Use**: Used to control the logging behavior by setting it to an empty string, effectively disabling logging.


---
### MCACHE
- **Type**: ``string``
- **Description**: Contains the result of the `fd_tango_ctl new-mcache` command, which creates a new memory cache. The command is executed with specific parameters: workspace (`WKSP`), size (512), block size (4096), and an additional parameter (1234).
- **Use**: Stores the identifier or output of the newly created memory cache for further operations.


---
### DCACHE0
- **Type**: ``string``
- **Description**: Represents the identifier for a newly created dcache instance. The variable is assigned the output of the `fd_tango_ctl new-dcache` command, which creates a new dcache with specified parameters.
- **Use**: Stores the identifier of the dcache instance for subsequent operations such as querying or deleting the dcache.


---
### DCACHE1
- **Type**: ``string``
- **Description**: `DCACHE1` is a global variable that stores the result of executing the `fd_tango_ctl new-dcache` command with specific parameters. It represents a newly created data cache with a compact setting of 1.
- **Use**: Stores the identifier of a newly created data cache for further operations.


---
### DCACHE2
- **Type**: ``string``
- **Description**: `DCACHE2` is a global variable that stores the result of executing the `fd_tango_ctl new-dcache-raw` command. This command creates a new raw data cache with specified parameters.
- **Use**: Stores the identifier of a newly created raw data cache for further operations.


---
### FSEQ
- **Type**: ``string``
- **Description**: `FSEQ` is a global variable that stores the result of executing the `fd_tango_ctl new-fseq` command. This command creates a new sequence in the specified workspace with a given sequence number.
- **Use**: Stores the identifier of a newly created sequence for further operations like querying or deleting.


---
### CNC
- **Type**: ``string``
- **Description**: The `CNC` variable stores the result of the `fd_tango_ctl new-cnc` command, which creates a new CNC (Computer Numerical Control) instance with specified parameters. It is initialized with the output of the command that includes the workspace, type, now, and other parameters.
- **Use**: Used to store the identifier of a newly created CNC instance for further operations like querying, signaling, and deleting.


---
### TCACHE
- **Type**: ``string``
- **Description**: `TCACHE` is a global variable that stores the result of the `new-tcache` command execution. It holds the identifier or reference to a newly created transaction cache (`tcache`) in the workspace specified by `WKSP`. The `new-tcache` command is executed with parameters for workspace, size, and other configurations, and `TCACHE` captures the output of this command.
- **Use**: Stores the identifier of a newly created transaction cache for further operations like querying, resetting, or deleting the cache.


# Functions

---
### fail
Outputs a failure message and exits the script with a status code of 1.
- **Inputs**:
    - `$1`: A string representing the context or name of the operation that failed.
    - `$2`: An integer representing the unexpected exit code of the operation.
- **Logic and Control Flow**:
    - Prints a failure message to the standard output, including the context and unexpected exit code.
    - Prints 'Log N/A' to indicate that no log is available.
    - Exits the script with a status code of 1.
- **Output**: The function does not return a value; it exits the script with a status code of 1.



---
Made with ❤️ by [Driver](https://www.driver.ai/)