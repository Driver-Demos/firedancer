<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

APIs for managing sequence numbers as persistent shared memory objects for inter-process communication.

# Purpose
The code is a C header file that defines an API for managing sequence numbers as persistent shared memory objects. This functionality is primarily intended for use in flow control communications between receiver and transmitter processes, but it can also be used to make sequence numbers visible to other processes at runtime. The header file includes definitions for alignment and footprint requirements for the sequence number objects (`fseq`), ensuring that memory regions are properly aligned to mitigate false sharing.

Key functions in the API include [`fd_fseq_new`](<#fd_fseq_new>), which initializes a memory region for use as a sequence number object, and [`fd_fseq_join`](<#fd_fseq_join>) and [`fd_fseq_leave`](<#fd_fseq_leave>), which manage the joining and leaving of processes to the sequence number object. The API also provides functions for querying and updating the sequence number ([`fd_fseq_query`](<#fd_fseq_query>) and [`fd_fseq_update`](<#fd_fseq_update>)), as well as accessing the application region of the sequence number object ([`fd_fseq_app_laddr`](<#fd_fseq_app_laddr>)). The header file ensures that these operations are performed with appropriate memory fences to maintain consistency and visibility across processes.
# Imports and Dependencies

---
- `../fd_tango_base.h`


# Functions

---
### fd\_fseq\_app\_laddr<!-- {{#callable:fd_fseq_app_laddr}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L87>)

Returns the local address of the application region of a sequence number object.
- **Inputs**:
    - `fseq`: A pointer to a sequence number object, which must be a current local join.
- **Logic and Control Flow**:
    - Calculates the address by adding 2 to the `fseq` pointer.
    - Casts the result to a `void *` for `fd_fseq_app_laddr` or `void const *` for `fd_fseq_app_laddr_const`.
- **Output**: A pointer to the application region of the sequence number object.


---
### fd\_fseq\_app\_laddr\_const<!-- {{#callable:fd_fseq_app_laddr_const}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L88>)

Returns a constant pointer to the application region of a sequence number object.
- **Inputs**:
    - `fseq`: A constant pointer to an unsigned long integer, representing the sequence number object.
- **Logic and Control Flow**:
    - Calculates the address of the application region by adding 2 to the `fseq` pointer.
    - Casts the calculated address to a constant void pointer.
    - Returns the constant void pointer.
- **Output**: A constant void pointer to the application region of the sequence number object.


---
### fd\_fseq\_seq0<!-- {{#callable:fd_fseq_seq0}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L93>)

Returns the sequence number used when the `fseq` was created.
- **Inputs**:
    - `fseq`: A pointer to a `ulong` that represents a current local join of a sequence number object.
- **Logic and Control Flow**:
    - Accesses the memory location immediately before the `fseq` pointer.
    - Returns the value at this memory location, which is the initial sequence number.
- **Output**: The initial sequence number as an `ulong`.


---
### fd\_fseq\_query<!-- {{#callable:fd_fseq_query}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L100>)

Reads the current sequence number from a sequence object in shared memory.
- **Inputs**:
    - `fseq`: A pointer to a constant unsigned long integer representing the sequence object in shared memory.
- **Logic and Control Flow**:
    - Executes a memory fence to ensure memory operations are completed before proceeding.
    - Reads the sequence number from the first element of the `fseq` array using a volatile read to prevent compiler optimizations that could reorder operations.
    - Executes another memory fence to ensure the read operation is completed before any subsequent operations.
    - Returns the sequence number read from the `fseq`.
- **Output**: Returns the current sequence number as an unsigned long integer.


---
### fd\_fseq\_update<!-- {{#callable:fd_fseq_update}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L113>)

Updates the sequence number stored in the `fseq` to the specified `seq` value.
- **Inputs**:
    - `fseq`: A pointer to an `ulong` representing the sequence number storage location.
    - `seq`: An `ulong` value representing the new sequence number to store.
- **Logic and Control Flow**:
    - Executes a memory fence to ensure memory operations are completed before updating the sequence number.
    - Updates the sequence number at the first position of the `fseq` array to the value of `seq`.
    - Executes another memory fence to ensure the update is visible to other processes.
- **Output**: No return value; the function updates the sequence number in place.


# Function Declarations (Public API)

---
### fd\_fseq\_align<!-- {{#callable_declaration:fd_fseq_align}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L27>)

Returns the required alignment for a sequence number memory region.
- **Description**: Use this function to obtain the alignment requirement for a memory region intended to be used as a sequence number in shared memory. This is important for ensuring that the memory region is correctly aligned to avoid performance issues related to false sharing. The alignment value is a positive integer power of 2, recommended to be at least double the cache line size.
- **Inputs**: None
- **Output**: Returns an unsigned long integer representing the alignment requirement.
- **See Also**: [`fd_fseq_align`](<fd_fseq.c.md#fd_fseq_align>)  (Implementation)


---
### fd\_fseq\_footprint<!-- {{#callable_declaration:fd_fseq_footprint}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L36>)

Returns the memory footprint required for a sequence number object.
- **Description**: Use this function to obtain the size of memory needed to store a sequence number object in shared memory. This is useful for ensuring that memory allocations are correctly sized before initializing or manipulating sequence number objects. The function does not require any parameters and can be called at any time to retrieve the constant footprint size.
- **Inputs**: None
- **Output**: The function returns an unsigned long integer representing the memory footprint size in bytes.
- **See Also**: [`fd_fseq_footprint`](<fd_fseq.c.md#fd_fseq_footprint>)  (Implementation)


---
### fd\_fseq\_new<!-- {{#callable_declaration:fd_fseq_new}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L47>)

Formats a memory region for use as a sequence number object.
- **Description**: Use this function to initialize a memory region as a sequence number object, which is primarily for use in flow control communications. The memory region must be non-null, properly aligned, and have the required footprint. The function initializes the sequence number to the specified value and clears the application region. It returns the memory region pointer on success or NULL if the memory region is invalid, logging details of the failure.
- **Inputs**:
    - `shmem`: A pointer to the memory region to format. Must not be null and must be aligned according to `fd_fseq_align()`. The caller retains ownership.
    - `seq0`: The initial sequence number to set. There are no specific constraints on its value.
- **Output**: Returns the pointer to the formatted memory region on success, or NULL on failure.
- **See Also**: [`fd_fseq_new`](<fd_fseq.c.md#fd_fseq_new>)  (Implementation)


---
### fd\_fseq\_join<!-- {{#callable_declaration:fd_fseq_join}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L61>)

Joins the caller to a sequence number in shared memory.
- **Description**: Use this function to access a sequence number stored in a shared memory region. The input must be a pointer to the first byte of the memory region that backs the sequence number in the caller's address space. The function returns a pointer to the sequence number on success. Ensure that the memory region is correctly aligned and initialized before calling. If the input is null, misaligned, or does not point to a valid sequence number, the function returns null and logs a warning. Each successful call should be paired with a corresponding leave call to properly manage the join's lifecycle.
- **Inputs**:
    - `shfseq`: A pointer to the first byte of the memory region backing the sequence number in the caller's address space. Must not be null and must be aligned according to `fd_fseq_align()`. The memory region must be initialized and contain a valid sequence number. If these conditions are not met, the function returns null and logs a warning.
- **Output**: Returns a pointer to the sequence number in the local address space on success, or null on failure.
- **See Also**: [`fd_fseq_join`](<fd_fseq.c.md#fd_fseq_join>)  (Implementation)


---
### fd\_fseq\_leave<!-- {{#callable_declaration:fd_fseq_leave}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L69>)

Leaves a current local join to a sequence number.
- **Description**: Use this function to leave a current local join to a sequence number that was previously joined. It returns a pointer to the underlying shared memory region on success. Ensure that the input is a valid pointer to a sequence number that is currently joined. If the input is null, the function logs a warning and returns null. This function is typically used in conjunction with `fd_fseq_join` to manage the lifecycle of a sequence number join.
- **Inputs**:
    - `fseq`: A pointer to a sequence number that is currently joined. Must not be null. If null, the function logs a warning and returns null.
- **Output**: Returns a pointer to the underlying shared memory region on success, or null if the input is invalid.
- **See Also**: [`fd_fseq_leave`](<fd_fseq.c.md#fd_fseq_leave>)  (Implementation)


---
### fd\_fseq\_delete<!-- {{#callable_declaration:fd_fseq_delete}} -->
[View Source →](<../../../../../src/tango/fseq/fd_fseq.h#L78>)

Unformats a memory region used as a fseq.
- **Description**: Use this function to unformat a memory region that was previously formatted as a fseq. It is important to ensure that no process is currently joined to the fseq before calling this function. The function returns a pointer to the underlying shared memory region, transferring ownership to the caller. If the input is invalid, such as when the pointer does not point to a valid fseq, the function returns NULL and logs a warning.
- **Inputs**:
    - `shfseq`: A pointer to the memory region to unformat. It must be non-NULL, aligned according to `fd_fseq_align()`, and point to a valid fseq. If these conditions are not met, the function returns NULL and logs a warning.
- **Output**: Returns a pointer to the underlying shared memory region on success, or NULL if the input is invalid.
- **See Also**: [`fd_fseq_delete`](<fd_fseq.c.md#fd_fseq_delete>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)