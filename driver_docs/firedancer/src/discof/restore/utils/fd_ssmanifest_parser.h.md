<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for a parser that manages and processes snapshot manifests in shared memory.

# Purpose
This C header file defines the interface for a parser related to snapshot manifests, likely used in a data restoration context. It includes necessary headers `fd_ssmsg.h` and `fd_ssparse.h` and declares a private structure `fd_ssmanifest_parser_private` with a typedef `fd_ssmanifest_parser_t` for ease of use. The file provides function prototypes for memory alignment and footprint calculations ([`fd_ssmanifest_parser_align`](<#fd_ssmanifest_parser_align>), [`fd_ssmanifest_parser_footprint`](<#fd_ssmanifest_parser_footprint>)), as well as functions to create and manage parser instances ([`fd_ssmanifest_parser_new`](<#fd_ssmanifest_parser_new>), [`fd_ssmanifest_parser_join`](<#fd_ssmanifest_parser_join>), [`fd_ssmanifest_parser_init`](<#fd_ssmanifest_parser_init>)). It also defines constants for the parser's state transitions (`FD_SSMANIFEST_PARSER_ADVANCE_ERROR`, `FD_SSMANIFEST_PARSER_ADVANCE_AGAIN`, `FD_SSMANIFEST_PARSER_ADVANCE_DONE`) and a function [`fd_ssmanifest_parser_consume`](<#fd_ssmanifest_parser_consume>) to process input data. The use of `FD_PROTOTYPES_BEGIN` and `FD_PROTOTYPES_END` suggests a macro-based approach to manage function prototypes.
# Imports and Dependencies

---
- `fd_ssmsg.h`
- `fd_ssparse.h`


# Data Structures

---
### fd\_ssmanifest\_parser\_t
- **Type**: ``struct``
- **Members**:
    - ``fd_ssmanifest_parser_private``: A forward declaration for a private structure used internally by the `fd_ssmanifest_parser_t` type.
- **Description**: The `fd_ssmanifest_parser_t` is a typedef for a private structure `fd_ssmanifest_parser_private`, which is used in the context of parsing snapshot manifests. The structure is not defined in the provided code, indicating that its implementation details are hidden, likely to encapsulate the parsing logic and maintain abstraction. This design allows functions like `fd_ssmanifest_parser_init` and `fd_ssmanifest_parser_consume` to operate on the parser without exposing its internal state.


# Function Declarations (Public API)

---
### fd\_ssmanifest\_parser\_align<!-- {{#callable_declaration:fd_ssmanifest_parser_align}} -->
[View Source →](<../../../../../../src/discof/restore/utils/fd_ssmanifest_parser.h#L10>)

Return the alignment requirement of the parser type.
- **Description**: Use this function to get the alignment requirement for the `fd_ssmanifest_parser_t` type. This is useful when allocating memory for instances of this type to ensure proper alignment. The function does not require any parameters and can be called at any time.
- **Inputs**: None
- **Output**: Returns the alignment requirement as an `ulong` value.
- **See Also**: [`fd_ssmanifest_parser_align`](<fd_ssmanifest_parser.c.md#fd_ssmanifest_parser_align>)  (Implementation)


---
### fd\_ssmanifest\_parser\_footprint<!-- {{#callable_declaration:fd_ssmanifest_parser_footprint}} -->
[View Source →](<../../../../../../src/discof/restore/utils/fd_ssmanifest_parser.h#L15>)

Calculates the memory footprint required for a parser instance.
- **Description**: Use this function to determine the amount of memory needed to store an instance of `fd_ssmanifest_parser_t`. This is useful when allocating memory for the parser, ensuring that the correct amount of space is reserved. The function does not require any parameters and can be called at any time to retrieve the footprint size.
- **Inputs**: None
- **Output**: Returns the size in bytes of the memory footprint required for an `fd_ssmanifest_parser_t` instance.
- **See Also**: [`fd_ssmanifest_parser_footprint`](<fd_ssmanifest_parser.c.md#fd_ssmanifest_parser_footprint>)  (Implementation)


---
### fd\_ssmanifest\_parser\_new<!-- {{#callable_declaration:fd_ssmanifest_parser_new}} -->
[View Source →](<../../../../../../src/discof/restore/utils/fd_ssmanifest_parser.h#L18>)

Creates a new parser instance in shared memory.
- **Description**: Use this function to create a new parser instance in a specified shared memory region. The shared memory pointer must be non-null and aligned to the alignment requirements of `fd_ssmanifest_parser_t`. If these conditions are not met, the function returns null and logs a warning. This function is typically used to initialize a parser before joining or using it for parsing operations.
- **Inputs**:
    - `shmem`: A pointer to a shared memory region where the parser will be created. Must not be null and must be aligned to the alignment requirements of `fd_ssmanifest_parser_t`. If the pointer is null or misaligned, the function returns null and logs a warning.
- **Output**: Returns a pointer to the newly created parser instance if successful, or null if the input is invalid.
- **See Also**: [`fd_ssmanifest_parser_new`](<fd_ssmanifest_parser.c.md#fd_ssmanifest_parser_new>)  (Implementation)


---
### fd\_ssmanifest\_parser\_join<!-- {{#callable_declaration:fd_ssmanifest_parser_join}} -->
[View Source →](<../../../../../../src/discof/restore/utils/fd_ssmanifest_parser.h#L21>)

Returns a pointer to a shared memory region as a parser object.
- **Description**: Use this function to obtain a parser object from a shared memory region. This function is typically called after allocating or initializing shared memory intended for parser operations. Ensure that the `shmem` parameter points to a valid shared memory region that has been properly allocated and initialized. The function does not perform any validation on the input pointer, so passing an invalid pointer can lead to undefined behavior.
- **Inputs**:
    - `shmem`: A pointer to a shared memory region. Must be a valid, non-null pointer to a memory region that has been allocated and initialized for parser use. The caller retains ownership of the memory.
- **Output**: Returns a pointer to `fd_ssmanifest_parser_t`, representing the parser object located at the shared memory region.
- **See Also**: [`fd_ssmanifest_parser_join`](<fd_ssmanifest_parser.c.md#fd_ssmanifest_parser_join>)  (Implementation)


---
### fd\_ssmanifest\_parser\_init<!-- {{#callable_declaration:fd_ssmanifest_parser_init}} -->
[View Source →](<../../../../../../src/discof/restore/utils/fd_ssmanifest_parser.h#L24>)

Initializes a snapshot manifest parser.
- **Description**: Use this function to prepare a `fd_ssmanifest_parser_t` instance for parsing a snapshot manifest. This function must be called before using the parser to consume data. It sets the initial state of the parser and associates it with a given snapshot manifest. Ensure that the `parser` and `manifest` pointers are valid and properly allocated before calling this function.
- **Inputs**:
    - `parser`: A pointer to a `fd_ssmanifest_parser_t` structure. Must not be null. The function initializes this structure for parsing.
    - `manifest`: A pointer to a `fd_snapshot_manifest_t` structure. Must not be null. The function associates this manifest with the parser.
- **Output**: None
- **See Also**: [`fd_ssmanifest_parser_init`](<fd_ssmanifest_parser.c.md#fd_ssmanifest_parser_init>)  (Implementation)


---
### fd\_ssmanifest\_parser\_consume<!-- {{#callable_declaration:fd_ssmanifest_parser_consume}} -->
[View Source →](<../../../../../../src/discof/restore/utils/fd_ssmanifest_parser.h#L31>)

Consumes data from a buffer for parsing.
- **Description**: Use this function to process data from a buffer with a parser. It reads data from the buffer and updates the parser's state. Call this function when you have data to parse and a parser initialized with `fd_ssmanifest_parser_init`. The function returns a status code indicating whether parsing is complete, needs more data, or encountered an error. Ensure the buffer contains valid data and the parser is properly initialized before calling.
- **Inputs**:
    - `parser`: A pointer to an `fd_ssmanifest_parser_t` structure. Must not be null and must be initialized with `fd_ssmanifest_parser_init`.
    - `buf`: A pointer to a buffer containing data to parse. Must not be null.
    - `bufsz`: The size of the buffer in bytes. Must be greater than zero.
    - `acc_vec_map`: A pointer to an `acc_vec_map_t` structure. Must not be null.
    - `acc_vec_pool`: A pointer to an `acc_vec_t` structure. Must not be null.
- **Output**: Returns an integer status code: `FD_SSMANIFEST_PARSER_ADVANCE_DONE` (1) if parsing is complete, `FD_SSMANIFEST_PARSER_ADVANCE_AGAIN` (0) if more data is needed, or `FD_SSMANIFEST_PARSER_ADVANCE_ERROR` (-1) if an error occurs.
- **See Also**: [`fd_ssmanifest_parser_consume`](<fd_ssmanifest_parser.c.md#fd_ssmanifest_parser_consume>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)