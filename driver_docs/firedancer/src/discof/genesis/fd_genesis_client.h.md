<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines the interface for a Genesis client in the Firedancer codebase, including initialization and polling functions.

# Purpose
The code is a C header file that defines the interface for a `fd_genesis_client` module. It includes necessary network headers and defines constants such as `FD_GENESIS_CLIENT_ALIGN` and `FD_GENESIS_CLIENT_MAGIC` for alignment and identification purposes. The file declares a private structure `fd_genesis_client_private` and a corresponding typedef `fd_genesis_client_t` for client instances. It provides function prototypes for operations such as memory alignment ([`fd_genesis_client_align`](<#fd_genesis_client_align>)), memory footprint calculation ([`fd_genesis_client_footprint`](<#fd_genesis_client_footprint>)), client creation ([`fd_genesis_client_new`](<#fd_genesis_client_new>)), joining a shared memory segment ([`fd_genesis_client_join`](<#fd_genesis_client_join>)), initialization ([`fd_genesis_client_init`](<#fd_genesis_client_init>)), polling for network events ([`fd_genesis_client_poll`](<#fd_genesis_client_poll>)), and retrieving poll file descriptors ([`fd_genesis_client_get_pollfds`](<#fd_genesis_client_get_pollfds>)). These functions facilitate the management and operation of a network client within the context of the FIREDANCER framework.
# Imports and Dependencies

---
- `../../util/net/fd_net_headers.h`


# Data Structures

---
### fd\_genesis\_client\_t
- **Type**: ``struct``
- **Members**:
    - ``fd_genesis_client_private``: A forward declaration for a private structure used internally by the `fd_genesis_client_t` type.
- **Description**: The `fd_genesis_client_t` is a typedef for a forward-declared private structure `fd_genesis_client_private`, which is used in the Firedancer Genesis client implementation. This structure is part of a network client system that interacts with servers using IP4 ports. The client provides functions for alignment, memory footprint calculation, initialization, joining shared memory, polling for data, and retrieving poll file descriptors.


# Function Declarations (Public API)

---
### fd\_genesis\_client\_align<!-- {{#callable_declaration:fd_genesis_client_align}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L13>)

Returns the alignment requirement for `fd_genesis_client_t`.
- **Description**: Use this function to obtain the alignment requirement for the `fd_genesis_client_t` type. This is useful when allocating memory for instances of this type to ensure proper alignment. The function does not require any parameters and can be called at any time.
- **Inputs**: None
- **Output**: Returns the alignment requirement as an `ulong` value.
- **See Also**: [`fd_genesis_client_align`](<fd_genesis_client.c.md#fd_genesis_client_align>)  (Implementation)


---
### fd\_genesis\_client\_footprint<!-- {{#callable_declaration:fd_genesis_client_footprint}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L16>)

Returns the memory footprint of a genesis client.
- **Description**: Use this function to determine the size of memory required to store a `fd_genesis_client_t` structure. This is useful when allocating memory for a genesis client. The function does not require any parameters and can be called at any time.
- **Inputs**: None
- **Output**: Returns the size in bytes of the `fd_genesis_client_t` structure as an unsigned long integer.
- **See Also**: [`fd_genesis_client_footprint`](<fd_genesis_client.c.md#fd_genesis_client_footprint>)  (Implementation)


---
### fd\_genesis\_client\_new<!-- {{#callable_declaration:fd_genesis_client_new}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L19>)

Creates a new genesis client in shared memory.
- **Description**: Use this function to initialize a new genesis client in a provided shared memory region. The shared memory must be correctly aligned and non-null. This function sets up the client by writing a magic number to the shared memory, which is used to identify the client structure. Call this function before any other operations on the genesis client. If the shared memory is null or misaligned, the function logs a warning and returns null.
- **Inputs**:
    - `shmem`: A pointer to a shared memory region where the genesis client will be created. Must not be null and must be aligned to the boundary specified by `fd_genesis_client_align()`. If these conditions are not met, the function returns null.
- **Output**: A pointer to the initialized genesis client structure in shared memory, or null if the input is invalid.
- **See Also**: [`fd_genesis_client_new`](<fd_genesis_client.c.md#fd_genesis_client_new>)  (Implementation)


---
### fd\_genesis\_client\_join<!-- {{#callable_declaration:fd_genesis_client_join}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L22>)

Joins a shared memory region as a genesis client.
- **Description**: Use this function to join a shared memory region that represents a genesis client. The shared memory region must be correctly aligned and initialized with the expected magic number. This function returns a pointer to the genesis client structure if successful, or NULL if the input is invalid or the memory is not properly aligned or initialized.
- **Inputs**:
    - `shgen`: A pointer to the shared memory region to join. Must not be null and must be aligned to `fd_genesis_client_align()`. The memory must contain a valid genesis client structure with the correct magic number. If these conditions are not met, the function returns NULL.
- **Output**: A pointer to `fd_genesis_client_t` if successful, or NULL if the input is invalid or the memory is not properly aligned or initialized.
- **See Also**: [`fd_genesis_client_join`](<fd_genesis_client.c.md#fd_genesis_client_join>)  (Implementation)


---
### fd\_genesis\_client\_init<!-- {{#callable_declaration:fd_genesis_client_init}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L25>)

Initialize a genesis client with server connection details.
- **Description**: Use this function to set up a genesis client with a list of server addresses and ports. It prepares the client to connect to the specified servers, initializing internal structures to manage these connections. Ensure that the number of servers does not exceed `FD_TOPO_GOSSIP_ENTRYPOINTS_MAX`. This function must be called before using the client for any network operations.
- **Inputs**:
    - `client`: A pointer to an `fd_genesis_client_t` structure. The caller must allocate this structure before calling the function. The function initializes this structure with connection details.
    - `servers`: A pointer to an array of `fd_ip4_port_t` structures, each containing an IP address and port number. The array must have at least `servers_len` elements. The function uses these to establish connections.
    - `servers_len`: The number of server entries in the `servers` array. Must be less than or equal to `FD_TOPO_GOSSIP_ENTRYPOINTS_MAX`. If this condition is not met, the function will not proceed with initialization.
- **Output**: None
- **See Also**: [`fd_genesis_client_init`](<fd_genesis_client.c.md#fd_genesis_client_init>)  (Implementation)


---
### fd\_genesis\_client\_poll<!-- {{#callable_declaration:fd_genesis_client_poll}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L30>)

Polls the client for incoming data and handles connections.
- **Description**: Use this function to poll a client for incoming data and manage connections. It must be called with a valid client that has been initialized and joined. The function checks for incoming and outgoing data on the client's connections and updates the provided buffer and peer information if data is received. It also sets a flag to indicate if the client is busy. If the client has no remaining peers or if a timeout occurs, the function returns an error. This function is useful for applications that need to handle network communication asynchronously.
- **Inputs**:
    - `client`: A pointer to an initialized and joined `fd_genesis_client_t` structure. Must not be null. The function will return an error if the client has no remaining peers.
    - `peer`: A pointer to an `fd_ip4_port_t` structure where the function will store the address of the peer from which data was received. Must not be null.
    - `buffer`: A pointer to a pointer to an `uchar` buffer where the function will store the received data. Must not be null.
    - `buffer_sz`: A pointer to an `ulong` where the function will store the size of the received data. Must not be null.
    - `charge_busy`: A pointer to an `int` that the function will set to 1 if the client is busy. Must not be null.
- **Output**: Returns 0 if data is successfully received, 1 if no data is available or an interrupt occurred, and -1 if an error occurs or the client has no remaining peers.
- **See Also**: [`fd_genesis_client_poll`](<fd_genesis_client.c.md#fd_genesis_client_poll>)  (Implementation)


---
### fd\_genesis\_client\_get\_pollfds<!-- {{#callable_declaration:fd_genesis_client_get_pollfds}} -->
[View Source →](<../../../../../src/discof/genesis/fd_genesis_client.h#L37>)

Returns the array of poll file descriptors for the client.
- **Description**: Use this function to obtain the array of poll file descriptors associated with a given client. This is useful for monitoring multiple file descriptors to see if I/O is possible on any of them. Ensure that the client is properly initialized before calling this function. The function does not modify the client or the returned array.
- **Inputs**:
    - `client`: A pointer to an `fd_genesis_client_t` structure. Must not be null. The client must be initialized before calling this function. The caller retains ownership of the client.
- **Output**: A pointer to a constant array of `struct pollfd`. The array is associated with the provided client.
- **See Also**: [`fd_genesis_client_get_pollfds`](<fd_genesis_client.c.md#fd_genesis_client_get_pollfds>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)