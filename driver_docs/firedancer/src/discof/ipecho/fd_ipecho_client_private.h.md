<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines structures and functions for managing ipecho client peers and parsing responses.

# Purpose
This C header file defines private data structures and constants for an IP echo client. It includes the `fd_util_base.h` utility header and the `<sys/poll.h>` library for polling file descriptors. The `fd_ipecho_client_peer` structure holds information about a peer, including its writing status, the number of request bytes sent, and the response data received. The `fd_ipecho_client_private` structure manages the client's state, including the start time in nanoseconds, the count of peers, and an array of `pollfd` structures for monitoring multiple file descriptors. The file also defines constants `FD_IPECHO_PARSE_OK` and `FD_IPECHO_PARSE_ERR` for response parsing status and declares the function [`fd_ipecho_client_parse_response`](<#fd_ipecho_client_parse_response>), which parses a response and extracts the shred version.
# Imports and Dependencies

---
- `../../util/fd_util_base.h`
- `sys/poll.h`


# Data Structures

---
### fd\_ipecho\_client\_peer
- **Type**: ``struct``
- **Members**:
    - `writing`: Indicates if the client is currently writing data.
    - `request_bytes_sent`: Tracks the number of bytes sent in the request.
    - `response_bytes_read`: Tracks the number of bytes read in the response.
    - `response`: Stores the response data with a fixed size of 28 bytes.
- **Description**: Manages the state of a client peer in an IP echo service, including tracking the writing status, the number of bytes sent and received, and storing the response data.


---
### fd\_ipecho\_client\_peer\_t
- **Type**: ``struct``
- **Members**:
    - ``writing``: Indicates if the client is currently writing data.
    - ``request_bytes_sent``: Tracks the number of bytes sent in the request.
    - ``response_bytes_read``: Tracks the number of bytes read in the response.
    - ``response``: Stores the response data with a fixed size of 28 bytes.
- **Description**: Manages the state of a client peer in an IP echo service, including tracking data transmission and reception.


---
### fd\_ipecho\_client\_private
- **Type**: ``struct``
- **Members**:
    - `start_time_nanos`: Stores the start time in nanoseconds.
    - `peer_cnt`: Holds the count of peers.
    - `remaining_peer_cnt`: Tracks the number of remaining peers.
    - `pollfds`: Array of `pollfd` structures for polling file descriptors.
    - `peers`: Array of `fd_ipecho_client_peer_t` structures representing peers.
    - `magic`: Contains a magic number for validation or identification.
- **Description**: Manages client-specific data for an IP echo service, including timing, peer management, and polling information.


# Function Declarations (Public API)

---
### fd\_ipecho\_client\_parse\_response<!-- {{#callable_declaration:fd_ipecho_client_parse_response}} -->
[View Source →](<../../../../../src/discof/ipecho/fd_ipecho_client_private.h#L32>)

Parses a response to extract the shred version.
- **Description**: Use this function to parse a response buffer and extract the shred version. The response must be at least 8 bytes long and start with four null bytes. The function checks the IP variant and adjusts the parsing offset accordingly. It then verifies the presence of a specific byte and extracts the shred version. If any validation fails, the function returns an error code. Ensure the response buffer and its length are valid before calling this function.
- **Inputs**:
    - `response`: A pointer to the response buffer to parse. Must not be null and must contain at least 8 bytes. The first four bytes must be null.
    - `response_len`: The length of the response buffer. Must be at least 8 to proceed with parsing.
    - `shred_version`: A pointer to a ushort where the parsed shred version will be stored. Must not be null.
- **Output**: Returns `FD_IPECHO_PARSE_OK` on success and `FD_IPECHO_PARSE_ERR` on failure. On success, writes the shred version to the location pointed to by `shred_version`.
- **See Also**: [`fd_ipecho_client_parse_response`](<fd_ipecho_client.c.md#fd_ipecho_client_parse_response>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)