<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures and constants for replay tile operations, including slot completion and voting.

# Purpose
This C header file defines data structures and constants for managing replay operations in a distributed system. It includes several header files for dependencies and defines signal constants such as `REPLAY_SIG_SLOT_COMPLETED` and `REPLAY_SIG_BECAME_LEADER` to represent different replay events. The file declares structures like `fd_replay_slot_completed` and `fd_replay_root_advanced` to store information about completed slots and root advancements, respectively. It also defines a `fd_replay_tower` structure to hold minimal information about vote accounts at the end of a slot, with constraints on data size. The `fd_replay_message` union encapsulates different message types that can be sent during replay operations, facilitating communication between components in the system.
# Imports and Dependencies

---
- `../poh/fd_poh_tile.h`
- `../../disco/tiles.h`
- `../../flamenco/types/fd_types_custom.h`


# Data Structures

---
### fd\_replay\_slot\_completed
- **Type**: ``struct``
- **Members**:
    - `slot`: The slot number of the completed replay.
    - `root_slot`: The root slot number associated with the completed replay.
    - `epoch`: The epoch number in which the slot was completed.
    - `slot_in_epoch`: The slot number within the epoch.
    - `block_height`: The block height of the completed slot.
    - `parent_slot`: The parent slot number of the completed slot.
    - `block_id`: The block ID (last FEC set's Merkle root) of the slot received from replay.
    - `parent_block_id`: The parent block ID of the slot received from replay.
    - `bank_hash`: The bank hash of the slot received from replay.
    - `block_hash`: The last microblock header hash of the slot received from replay.
    - `transaction_count`: The number of transactions in the completed slot.
    - `bank_idx`: The index of the bank for the completed slot.
    - `parent_bank_idx`: The index of the parent bank, or `ULONG_MAX` if unavailable.
    - `first_fec_set_received_nanos`: The timestamp when the first FEC of the slot was received from turbine or repair.
    - `preparation_begin_nanos`: The timestamp when preparation to execute the slot began.
    - `first_transaction_scheduled_nanos`: The timestamp when the first transaction was scheduled for execution.
    - `last_transaction_finished_nanos`: The timestamp when the last transaction execution was completed.
    - `completion_time_nanos`: The timestamp when the slot was finalized and the tower was notified.
- **Description**: Represents the state and metadata of a completed replay slot, including slot identifiers, block and bank hashes, transaction counts, and various timestamps related to the replay process.


---
### fd\_replay\_slot\_completed\_t
- **Type**: ``struct``
- **Members**:
    - `slot`: The slot number that was completed.
    - `root_slot`: The root slot number associated with the completed slot.
    - `epoch`: The epoch number in which the slot was completed.
    - `slot_in_epoch`: The slot number within the current epoch.
    - `block_height`: The block height of the completed slot.
    - `parent_slot`: The parent slot number of the completed slot.
    - `block_id`: The block ID (last FEC set's Merkle root) of the slot received from replay.
    - `parent_block_id`: The parent block ID of the slot received from replay.
    - `bank_hash`: The bank hash of the slot received from replay.
    - `block_hash`: The last microblock header hash of the slot received from replay.
    - `transaction_count`: The number of transactions in the completed slot.
    - `bank_idx`: The index of the bank for the completed slot.
    - `parent_bank_idx`: The index of the parent bank, or `ULONG_MAX` if unavailable.
    - `first_fec_set_received_nanos`: The timestamp when the first FEC of the slot was received from turbine or repair.
    - `preparation_begin_nanos`: The timestamp when preparation to execute the slot began.
    - `first_transaction_scheduled_nanos`: The timestamp when the first transaction was scheduled for execution.
    - `last_transaction_finished_nanos`: The timestamp when the last transaction execution was completed.
    - `completion_time_nanos`: The timestamp when the slot was finalized and the tower was notified.
- **Description**: Represents the data structure for a completed replay slot, containing information about the slot's position, associated hashes, transaction count, bank indices, and various timestamps related to the slot's processing and completion.


---
### fd\_replay\_root\_advanced
- **Type**: ``struct``
- **Members**:
    - `bank_idx`: An unsigned long integer that identifies the bank index.
- **Description**: Represents a structure that contains a single member, `bank_idx`, which is used to track the index of a bank in the context of replaying root advancements.


---
### fd\_replay\_root\_advanced\_t
- **Type**: ``struct``
- **Members**:
    - `bank_idx`: Index of the bank associated with the advanced root.
- **Description**: Represents a structure that contains minimal information about the bank index when a root is advanced in the replay process. This structure is part of a larger system that manages replay and consensus in a distributed environment.


---
### fd\_replay\_tower
- **Type**: ``struct``
- **Members**:
    - `key`: A public key of type `fd_pubkey_t`.
    - `stake`: An unsigned long integer representing the stake.
    - `acc`: An array of unsigned characters with a maximum size defined by `FD_REPLAY_TOWER_ACC_DATA_MAX`.
    - `acc_sz`: An unsigned long integer representing the size of the `acc` array.
- **Description**: Stores minimal information about a vote account at the end of a slot, including a public key, stake, and account data with its size.


---
### fd\_replay\_tower\_t
- **Type**: ``struct``
- **Members**:
    - `key`: Public key associated with the vote account.
    - `stake`: Amount of stake associated with the vote account.
    - `acc`: Array holding account data with a maximum size defined by `FD_REPLAY_TOWER_ACC_DATA_MAX`.
    - `acc_sz`: Size of the account data stored in `acc`.
- **Description**: Stores minimal information about a vote account at the end of a slot, including the public key, stake, and account data, to facilitate voting or advancing consensus in the Tower tile.


---
### fd\_replay\_message
- **Type**: ``union``
- **Members**:
    - ``slot_completed``: Holds data related to the completion of a replay slot.
    - ``root_advanced``: Contains information about the advancement of the replay root.
    - ``reset``: Represents a reset event in the replay process.
    - ``became_leader``: Indicates a transition to a leader state in the replay process.
    - ``tower``: Stores minimal information about a vote account at the end of a slot.
- **Description**: The `fd_replay_message` union encapsulates different types of messages that can occur during the replay process, including slot completion, root advancement, reset events, leader transitions, and vote account information. Each member of the union represents a distinct type of message, allowing the replay system to handle various events and states efficiently.


---
### fd\_replay\_message\_t
- **Type**: ``union``
- **Members**:
    - ``slot_completed``: Contains data related to a completed replay slot.
    - ``root_advanced``: Contains data related to an advanced replay root.
    - ``reset``: Contains data related to a reset event.
    - ``became_leader``: Contains data related to a leader election event.
    - ``tower``: Contains data related to the Tower's vote account information.
- **Description**: `fd_replay_message_t` is a union that encapsulates different types of replay messages, each represented by a distinct structure. It includes messages for slot completion, root advancement, reset events, leader election, and Tower vote account information. This union allows for flexible handling of various replay-related events within a single data structure.



---
Made with ❤️ by [Driver](https://www.driver.ai/)