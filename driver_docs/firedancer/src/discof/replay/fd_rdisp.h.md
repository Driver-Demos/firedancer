<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines methods for building and executing a DAG of transactions with maximum parallelism.

# Purpose
The code defines a C header file for a dispatcher system (`fd_rdisp`) that manages the execution of transactions in a directed acyclic graph (DAG) structure. The primary purpose of this system is to ensure that transactions are executed in the correct order while maximizing parallelism. Transactions are organized into blocks, and the dispatcher handles dependencies between transactions to determine execution order. The system uses transaction indices to manage the state of each transaction, which can be in states such as `FREE`, `PENDING`, `READY`, `DISPATCHED`, or `ZOMBIE`.

The dispatcher is block-aware and can handle multiple blocks in a staging lane, allowing for efficient management of transaction execution across different blocks. The code provides functions to add, remove, promote, and demote blocks, as well as to add transactions to blocks and manage their execution states. The dispatcher also includes mechanisms to handle duplicate blocks and forks, which are common in distributed systems. The header file defines several constants, types, and function prototypes necessary for the operation of the dispatcher, including memory alignment and footprint requirements, block and transaction management, and internal consistency checks.
# Imports and Dependencies

---
- `../../disco/fd_disco_base.h`


# Data Structures

---
### fd\_rdisp\_t
- **Type**: ``struct``
- **Description**: `fd_rdisp_t` is a type alias for a `struct fd_rdisp`, which is a data structure used to manage the execution of transactions in a directed acyclic graph (DAG) with maximum parallelism. It ensures transactions appear to execute in the order they occur in a block, while allowing independent transactions to be scheduled in parallel. The structure operates on transaction indices and manages states such as FREE, PENDING, READY, ZOMBIE, and DISPATCHED. It is block-aware and supports staging lanes for performance optimization, handling various scenarios like normal operation, startup, and denial-of-service (DoS) cases.


---
### fd\_rdisp\_staging\_lane\_info\_t
- **Type**: ``struct``
- **Members**:
    - ``schedule_ready_block``: Holds the tag of the block that is ready to be scheduled.
    - ``insert_ready_block``: Holds the tag of the block that is ready for insertion.
- **Description**: The `fd_rdisp_staging_lane_info_t` structure is used to store information about the readiness of blocks in a staging lane for scheduling and insertion. It contains two members, `schedule_ready_block` and `insert_ready_block`, which are of type `FD_RDISP_BLOCK_TAG_T`. These members hold the tags of blocks that are ready to be scheduled and inserted, respectively, within the context of a directed acyclic graph (DAG) of transactions.


# Function Declarations (Public API)

---
### fd\_rdisp\_verify<!-- {{#callable_declaration:fd_rdisp_verify}} -->
[View Source →](<../../../../../src/discof/replay/fd_rdisp.h#L412>)

Performs verification and consistency checks on internal data structures.
- **Description**: Use this function to perform verification and consistency checks on internal data structures of a dispatcher. It aborts with an error message if any verification fails. This function requires a valid local join to the dispatcher and a scratch memory region. The scratch memory will be overwritten, so its initial contents are irrelevant. This function is useful for ensuring the integrity of the dispatcher's internal state.
- **Inputs**:
    - `disp`: A pointer to a valid local join of the dispatcher. Must not be null.
    - `scratch`: A pointer to a region of scratch memory with at least depth+1 elements. The function will overwrite this memory, so its initial contents are ignored. Must not be null.
- **Output**: None
- **See Also**: [`fd_rdisp_verify`](<fd_rdisp.c.md#fd_rdisp_verify>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)