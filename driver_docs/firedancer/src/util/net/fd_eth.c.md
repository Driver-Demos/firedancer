<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements Ethernet frame checksum calculation and MAC address conversion from string to byte array.

# Purpose
The code provides functionality for Ethernet frame checksum calculation and MAC address conversion. It includes a function [`fd_eth_fcs_append`](<#fd_eth_fcs_append>) that calculates the Frame Check Sequence (FCS) for Ethernet frames using a precomputed table of CRC-32 values. This function takes a seed value, a buffer, and its size as inputs, and returns the computed CRC value. The table used for CRC calculation is defined as a static array within the function, which is a common approach to optimize the performance of CRC calculations.

Additionally, the code includes a utility function [`fd_cstr_to_mac_addr`](<#fd_cstr_to_mac_addr>) that converts a string representation of a MAC address into its binary form. This function uses an inline helper function [`ascii_to_xdigit`](<#ascii_to_xdigit>) to convert ASCII characters to hexadecimal digits. The [`fd_cstr_to_mac_addr`](<#fd_cstr_to_mac_addr>) function checks for valid input and ensures the MAC address string is correctly formatted with colon separators. If the input is valid, it populates the provided `mac` array with the binary representation of the MAC address. The code is structured to be part of a larger system, likely related to network programming, where these utilities are used for processing Ethernet frames and MAC addresses.
# Imports and Dependencies

---
- `fd_eth.h`


# Functions

---
### fd\_eth\_fcs\_append<!-- {{#callable:fd_eth_fcs_append}} -->
[View Source →](<../../../../../src/util/net/fd_eth.c#L5>)

Calculates the Frame Check Sequence (FCS) for a given buffer using a CRC-32 algorithm.
- **Inputs**:
    - `seed`: An initial CRC value used to start the calculation.
    - `buf`: A pointer to the buffer containing the data for which the FCS is calculated.
    - `sz`: The size of the buffer in bytes.
- **Logic and Control Flow**:
    - Initialize `crc` by inverting the `seed` value.
    - Cast the `buf` pointer to a `uchar` pointer `p`.
    - Iterate over each byte in the buffer while `sz` is greater than zero.
    - For each byte, update `crc` by shifting it right by 8 bits, XORing it with the table value indexed by the XOR of the current byte and the least significant byte of `crc`.
    - Decrement `sz` and increment the buffer pointer `p`.
    - Return the bitwise NOT of the final `crc` value.
- **Output**: Returns the calculated FCS as an unsigned integer.


---
### ascii\_to\_xdigit<!-- {{#callable:ascii_to_xdigit}} -->
[View Source →](<../../../../../src/util/net/fd_eth.c#L53>)

Converts an ASCII character representing a hexadecimal digit to its numeric value, returning 16 for non-hexadecimal characters.
- **Inputs**:
    - `c`: An ASCII character to convert to a hexadecimal digit.
- **Logic and Control Flow**:
    - Convert the input character `c` to an unsigned long integer `ul`.
    - Subtract the ASCII value of '0' from `ul` and use unsigned arithmetic to ensure values below '0' and above 'f' map to values >= 55.
    - Use a bit field and range test to determine if `c` is a hexadecimal digit by checking a 64-bit table encoded as an unsigned long integer.
    - If `c` is a hexadecimal digit, calculate its numeric value using `(ul & 15UL) + 9UL*(ulong)(ul>(ulong)(uchar)'9')`.
    - Return 16 if `c` is not a hexadecimal digit.
- **Output**: Returns the numeric value of the hexadecimal digit represented by `c`, or 16 if `c` is not a valid hexadecimal digit.


---
### fd\_cstr\_to\_mac\_addr<!-- {{#callable:fd_cstr_to_mac_addr}} -->
[View Source →](<../../../../../src/util/net/fd_eth.c#L81>)

Converts a colon-separated MAC address string to a 6-byte MAC address array.
- **Inputs**:
    - `s`: A pointer to a null-terminated string representing a MAC address in colon-separated format (e.g., "01:23:45:67:89:AB").
    - `mac`: A pointer to an array of unsigned characters where the function will store the converted MAC address.
- **Logic and Control Flow**:
    - Check if either `s` or `mac` is NULL; if so, return NULL.
    - Iterate over each of the 6 MAC address bytes.
    - For each byte, convert the first character to a hexadecimal digit using [`ascii_to_xdigit`](<#ascii_to_xdigit>); if conversion fails, return NULL.
    - Convert the second character to a hexadecimal digit using [`ascii_to_xdigit`](<#ascii_to_xdigit>); if conversion fails, return NULL.
    - If not the last byte, check if the next character is a colon; if not, return NULL.
    - Combine the two hexadecimal digits into a single byte and store it in the `mac` array.
    - Advance the string pointer by 3 to skip the processed byte and the colon separator.
- **Output**: Returns a pointer to the `mac` array containing the converted MAC address, or NULL if an error occurs during conversion.
- **Functions Called**:
    - [`ascii_to_xdigit`](<#ascii_to_xdigit>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)