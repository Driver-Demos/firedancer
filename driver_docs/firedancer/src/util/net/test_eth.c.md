<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for Ethernet header types, MAC address conversion, and frame checksum validation.

# Purpose
The code is a C test suite for validating Ethernet-related functionalities. It includes static assertions to verify constants and data structure sizes related to Ethernet headers and VLAN tags. The code tests various functions from the `fd_eth` library, such as `fd_cstr_to_mac_addr`, which converts a string representation of a MAC address to its binary form, and `fd_eth_fcs`, which calculates the Frame Check Sequence (FCS) for Ethernet frames. The test suite also checks the correctness of MAC address manipulation functions, including multicast, broadcast, and IPv4 multicast address checks, as well as MAC address copying.

The [`main`](<#main>) function initializes the test environment and performs a series of tests to ensure the correctness of Ethernet header and VLAN tag offsets, MAC address properties, and FCS calculations. It uses predefined Ethernet frames and MAC addresses to validate the expected behavior of the functions. The test suite logs the results and halts the execution after completing all tests. This code is intended to be executed as a standalone program to verify the integrity and correctness of the Ethernet-related functionalities provided by the `fd_eth` library.
# Imports and Dependencies

---
- `../fd_util.h`
- `fd_eth.h`


# Global Variables

---
### frame
- **Type**: ``uchar const[]``
- **Description**: An array of unsigned characters that represents a static Ethernet frame. The frame includes destination and source MAC addresses, an ARP protocol type, and other network-related data.
- **Use**: Used to store a predefined Ethernet frame for testing or network communication purposes.


# Functions

---
### test\_cstr\_to\_mac\_addr<!-- {{#callable:test_cstr_to_mac_addr}} -->
[View Source →](<../../../../../src/util/net/test_eth.c#L31>)

Tests the conversion of C-style strings to MAC addresses and validates the results.
- **Inputs**: None
- **Logic and Control Flow**:
    - Defines a MAC address array `mac` with 6 elements initialized to zero.
    - Uses the macro `MAC_OK` to test valid MAC address strings by converting them and comparing the result to an expected value.
    - Uses the macro `MAC_FAIL` to test invalid MAC address strings, ensuring the conversion fails.
    - Iterates over possible invalid characters and truncated strings to test the conversion failure for each case.
    - Tests invalid separator placements in the MAC address string to ensure conversion fails.
    - Tests unexpected separator placements in the MAC address string to ensure conversion fails.
- **Output**: No output is returned as this function is a test function that uses assertions to validate behavior.


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/net/test_eth.c#L94>)

Initializes the environment, performs various Ethernet-related tests, and logs the results before halting.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Performs static assertions on Ethernet header and VLAN tag structures to verify their offsets.
    - Initializes a MAC address `src` and performs tests to check if it is multicast, local, broadcast, or IPv4 multicast.
    - Logs the formatted MAC address using `FD_LOG_NOTICE`.
    - Modifies `src` to represent an IPv4 multicast address and verifies its properties.
    - Calculates and verifies the Frame Check Sequence (FCS) for a predefined Ethernet frame using [`fd_eth_fcs`](<fd_eth.h.md#fd_eth_fcs>) and [`fd_eth_fcs_append`](<fd_eth.c.md#fd_eth_fcs_append>).
    - Initializes a MAC address `dst` as a broadcast address and verifies its properties.
    - Copies `src` to `dst` and verifies the copy operation.
    - Creates a VLAN tag and verifies its properties using `fd_vlan_tag`.
    - Calls [`test_cstr_to_mac_addr`](<#test_cstr_to_mac_addr>) to test MAC address string conversion.
    - Logs a success message and calls `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_eth_mac_is_mcast`](<fd_eth.h.md#fd_eth_mac_is_mcast>)
    - [`fd_eth_mac_is_local`](<fd_eth.h.md#fd_eth_mac_is_local>)
    - [`fd_eth_mac_is_bcast`](<fd_eth.h.md#fd_eth_mac_is_bcast>)
    - [`fd_eth_mac_is_ip4_mcast`](<fd_eth.h.md#fd_eth_mac_is_ip4_mcast>)
    - [`fd_eth_mac_ip4_mcast`](<fd_eth.h.md#fd_eth_mac_ip4_mcast>)
    - [`fd_eth_fcs`](<fd_eth.h.md#fd_eth_fcs>)
    - [`fd_eth_fcs_append`](<fd_eth.c.md#fd_eth_fcs_append>)
    - [`fd_eth_mac_bcast`](<fd_eth.h.md#fd_eth_mac_bcast>)
    - [`fd_eth_mac_cpy`](<fd_eth.h.md#fd_eth_mac_cpy>)
    - [`test_cstr_to_mac_addr`](<#test_cstr_to_mac_addr>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)