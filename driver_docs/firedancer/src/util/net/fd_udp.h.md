<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines structures and functions for handling UDP headers, including checksum computation and validation.

# Purpose
The code is a C header file that defines structures and functions related to the User Datagram Protocol (UDP) in the context of IPv4 networking. It includes a union `fd_udp_hdr` that represents the UDP header, containing fields for source port, destination port, datagram length, and checksum. These fields are stored in network byte order, which is typical for network protocols. The union also provides an alternative view of the header as an array of unsigned characters, allowing for flexible manipulation of the header data.

The file provides two main functions. The [`fd_ip4_udp_check`](<#fd_ip4_udp_check>) function calculates and validates the UDP checksum, which is an optional feature in IPv4. This function takes the source and destination IP addresses, a pointer to the UDP header, and a pointer to the datagram. It returns a checksum value or validates an existing checksum. The [`fd_udp_hdr_bswap`](<#fd_udp_hdr_bswap>) function reverses the endianness of all fields in the UDP header, which is useful for converting between host and network byte order. The file is intended to be included in other C source files that require UDP header manipulation and checksum validation.
# Imports and Dependencies

---
- `fd_ip4.h`


# Data Structures

---
### fd\_udp\_hdr
- **Type**: ``union``
- **Members**:
    - ``net_sport``: Source port in network byte order.
    - ``net_dport``: Destination port in network byte order.
    - ``net_len``: Length of the datagram from the first byte of this header to the last byte of the UDP payload.
    - ``check``: UDP checksum in invariant order, with 0 indicating no checksum in IPv4.
    - ``uc``: Array of 8 unsigned characters representing the UDP header as raw bytes.
- **Description**: Defines a UDP header structure that can be accessed as individual fields or as a raw byte array, facilitating operations on UDP datagrams, including checksum calculations and byte order manipulations.


---
### fd\_udp\_hdr\_t
- **Type**: ``union``
- **Members**:
    - ``net_sport``: Source port in network byte order.
    - ``net_dport``: Destination port in network byte order.
    - ``net_len``: Length of the datagram from the first byte of this header to the last byte of the UDP payload.
    - ``check``: UDP checksum in invariant order, with 0 indicating no checksum in IP4.
    - ``uc``: Array of 8 unsigned characters representing the raw bytes of the header.
- **Description**: Defines a UDP header structure that includes source and destination ports, datagram length, and checksum, with an option to access the raw bytes directly.


# Functions

---
### fd\_ip4\_udp\_check<!-- {{#callable:fd_ip4_udp_check}} -->
[View Source →](<../../../../../src/util/net/fd_udp.h#L23>)

Computes or validates the UDP checksum for an IPv4 datagram.
- **Inputs**:
    - `ip4_saddr`: The IPv4 source address used in the UDP pseudo header.
    - `ip4_daddr`: The IPv4 destination address used in the UDP pseudo header.
    - `udp`: A non-NULL pointer to the UDP header, which includes source port, destination port, length, and checksum fields.
    - `dgram`: A non-NULL pointer to the datagram data, which is the UDP payload.
- **Logic and Control Flow**:
    - Retrieve the network order length from the UDP header and calculate the remaining bytes of the datagram by subtracting the size of the UDP header.
    - Sum the pseudo header fields, which include the UDP protocol identifier, the network order length, the source and destination IP addresses, and the UDP header fields.
    - Iterate over the datagram data in 4-byte chunks, summing each chunk into a 64-bit accumulator, and handle any remaining bytes at the end of the datagram.
    - Reduce the accumulated sum to a 16-bit one's complement sum by folding the upper bits into the lower bits.
    - Complement the final sum to produce the checksum value.
- **Output**: Returns the computed checksum value if the datagram has no checksum (check==0), or returns 0 if the datagram has a valid checksum, or a non-zero value if the checksum is invalid.


---
### fd\_udp\_hdr\_bswap<!-- {{#callable:fd_udp_hdr_bswap}} -->
[View Source →](<../../../../../src/util/net/fd_udp.h#L88>)

Reverses the endianness of all fields in a UDP header.
- **Inputs**:
    - `hdr`: A pointer to a `fd_udp_hdr_t` structure representing the UDP header whose fields need endianness reversal.
- **Logic and Control Flow**:
    - Call `fd_ushort_bswap` on `hdr->net_sport` and assign the result back to `hdr->net_sport`.
    - Call `fd_ushort_bswap` on `hdr->net_dport` and assign the result back to `hdr->net_dport`.
    - Call `fd_ushort_bswap` on `hdr->net_len` and assign the result back to `hdr->net_len`.
    - Call `fd_ushort_bswap` on `hdr->check` and assign the result back to `hdr->check`.
- **Output**: The function does not return a value; it modifies the input `fd_udp_hdr_t` structure in place.



---
Made with ❤️ by [Driver](https://www.driver.ai/)