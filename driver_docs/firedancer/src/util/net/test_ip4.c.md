<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Unit tests for IPv4 address conversion, public/private address checks, and header field assertions.

# Purpose
The code is a C test suite designed to validate various functionalities related to IPv4 addresses and headers. It includes static assertions to verify the correctness of predefined constants related to IPv4 header fields, such as type of service, fragment offset flags, and protocol identifiers. These assertions ensure that the constants match expected values, which are critical for correct network packet processing.

The test suite contains functions that test the conversion of string representations of IP addresses to their numeric form and verify whether an IP address is public or private. The [`main`](<#main>) function initializes the test environment, performs alignment and offset checks on the `fd_ip4_hdr_t` structure, and tests the classification of IP addresses as unicast, multicast, or broadcast. The code uses the `FD_TEST` macro to assert expected outcomes, and it logs the results of the tests. The suite is intended to be executed as a standalone program, as indicated by the presence of the [`main`](<#main>) function, and it relies on external utilities and definitions from included headers.
# Imports and Dependencies

---
- `../fd_util.h`
- `fd_ip4.h`


# Functions

---
### test\_cstr\_to\_ip4\_addr<!-- {{#callable:test_cstr_to_ip4_addr}} -->
[View Source →](<../../../../../src/util/net/test_ip4.c#L24>)

Tests the conversion of C-style string representations of IPv4 addresses to their numeric form and verifies the correctness of the conversion.
- **Inputs**: None
- **Logic and Control Flow**:
    - Declare a variable `ip` of type `uint` to store the converted IP address.
    - Call [`fd_cstr_to_ip4_addr`](<fd_ip4.c.md#fd_cstr_to_ip4_addr>) with various string inputs representing IPv4 addresses and check if the conversion is successful using `FD_TEST`.
    - Verify that valid IP address strings like "0.0.0.0", "127.0.0.1", and "255.255.255.255" are correctly converted to their numeric forms and return 1.
    - Check that invalid IP address strings like "256.255.255.255" and "36893488147419103232.0.0.0" do not convert successfully and return 0.
    - Use `FD_TEST` to assert that the numeric value of `ip` matches the expected value for valid conversions.
- **Output**: No output is returned as this function is a test function that uses assertions to validate behavior.
- **Functions Called**:
    - [`fd_cstr_to_ip4_addr`](<fd_ip4.c.md#fd_cstr_to_ip4_addr>)


---
### test\_ip4\_addr\_is\_public<!-- {{#callable:test_ip4_addr_is_public}} -->
[View Source →](<../../../../../src/util/net/test_ip4.c#L42>)

Tests the [`fd_ip4_addr_is_public`](<fd_ip4.h.md#fd_ip4_addr_is_public>) function to verify if given IP addresses are public or private.
- **Inputs**: None
- **Logic and Control Flow**:
    - Calls [`fd_ip4_addr_is_public`](<fd_ip4.h.md#fd_ip4_addr_is_public>) with various IP addresses to check if they are public.
    - Uses `FD_TEST` to assert that public IP addresses return 1 from [`fd_ip4_addr_is_public`](<fd_ip4.h.md#fd_ip4_addr_is_public>).
    - Uses `FD_TEST` to assert that private and loopback IP addresses return 0 from [`fd_ip4_addr_is_public`](<fd_ip4.h.md#fd_ip4_addr_is_public>).
    - Tests include well-known public IPs, private IP ranges, and the loopback address.
- **Output**: No direct output; the function uses assertions to validate the behavior of [`fd_ip4_addr_is_public`](<fd_ip4.h.md#fd_ip4_addr_is_public>).
- **Functions Called**:
    - [`fd_ip4_addr_is_public`](<fd_ip4.h.md#fd_ip4_addr_is_public>)


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/net/test_ip4.c#L67>)

Initializes the environment, performs various tests on IP4 header fields and addresses, and logs the results before halting.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Performs a series of tests using `FD_TEST` to verify the offsets of various fields in the `fd_ip4_hdr_t` structure.
    - Defines and tests three IP4 addresses (unicast, multicast, and broadcast) using `FD_IP4_ADDR` and `FD_TEST`.
    - Logs the formatted unicast IP4 address using `FD_LOG_NOTICE`.
    - Tests whether the defined IP4 addresses are multicast or broadcast using [`fd_ip4_addr_is_mcast`](<fd_ip4.h.md#fd_ip4_addr_is_mcast>) and [`fd_ip4_addr_is_bcast`](<fd_ip4.h.md#fd_ip4_addr_is_bcast>).
    - Calls [`test_cstr_to_ip4_addr`](<#test_cstr_to_ip4_addr>) to test string to IP4 address conversion.
    - Calls [`test_ip4_addr_is_public`](<#test_ip4_addr_is_public>) to test if IP4 addresses are public.
    - Logs a 'pass' message using `FD_LOG_NOTICE`.
    - Calls `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_ip4_addr_is_mcast`](<fd_ip4.h.md#fd_ip4_addr_is_mcast>)
    - [`fd_ip4_addr_is_bcast`](<fd_ip4.h.md#fd_ip4_addr_is_bcast>)
    - [`test_cstr_to_ip4_addr`](<#test_cstr_to_ip4_addr>)
    - [`test_ip4_addr_is_public`](<#test_ip4_addr_is_public>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)