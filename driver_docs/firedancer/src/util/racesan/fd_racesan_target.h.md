<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Macros to instrument shared memory concurrent algorithms with racesan, with zero cost if disabled.

# Purpose
The `fd_racesan_target.h` file is a C header file that provides macros for instrumenting shared memory concurrent algorithms with a tool called `racesan`. The macros are designed to be zero-cost when `racesan` is disabled, which is the default setting in production environments. The file includes `fd_racesan_base.h` and defines a macro `fd_racesan_hook` that developers can use to mark critical sections in their code for race condition analysis. When `FD_HAS_RACESAN` is defined, the macro calls a private function [`fd_racesan_hook_private`](<#fd_racesan_hook_private>) with a hash of the section name, the file name, and the line number to facilitate debugging. The file also declares an external thread-local variable `fd_racesan_g` for setting up `racesan` instrumentation per thread.
# Imports and Dependencies

---
- `fd_racesan_base.h`


# Global Variables

---
### fd\_racesan\_g
- **Type**: ``fd_racesan_t *``
- **Description**: A pointer to a thread-local instance of `fd_racesan_t`, which is used for race condition instrumentation in concurrent algorithms.
- **Use**: Used to set up race condition instrumentation for each thread when `FD_HAS_RACESAN` is enabled.


# Function Declarations (Public API)

---
### fd\_racesan\_hook\_private<!-- {{#callable_declaration:fd_racesan_hook_private}} -->
[View Source →](<../../../../../src/util/racesan/fd_racesan_target.h#L22>)

Invokes a hook function for race condition analysis.
- **Description**: Use this function to call a hook function during race condition analysis in a shared memory concurrent algorithm. It is typically used in conjunction with the `fd_racesan_hook` macro, which provides the necessary parameters. This function should be called at critical sections of the algorithm to help detect race conditions. It requires that the global `fd_racesan_g` is set up correctly for the current thread. If `fd_racesan_g` is not set, the function returns immediately without performing any action.
- **Inputs**:
    - `name_hash`: A hash of the name of the critical section. It must be a valid `ulong` value.
    - `file`: A string representing the file name where the hook is called. The caller retains ownership, and it must not be null.
    - `line`: An integer representing the line number in the file where the hook is called. It must be a valid line number.
- **Output**: None
- **See Also**: [`fd_racesan_hook_private`](<fd_racesan.c.md#fd_racesan_hook_private>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)