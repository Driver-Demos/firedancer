<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Portable integer square root functions for various data types, using fixed-point iteration.

# Purpose
The code provides a set of functions to compute the integer square root of various data types in C, including `uint`, `ulong`, `uchar`, `ushort`, `schar`, `short`, `int`, and `long`. The primary function, [`fd_uint_sqrt`](<#fd_uint_sqrt>), calculates the floor of the square root of an unsigned integer using a fixed-point iteration method. This method is designed to avoid overflow issues by combining two divisions into one, resulting in a single round-off error iteration. The code also includes functions for signed integers, which handle negative values by returning the floor of the real part of the square root or the square root of the absolute value.

The header file defines inline functions for each data type, ensuring that the square root calculation is efficient and portable across different platforms. For small values of `x`, a lookup table is used to quickly determine the square root. The code also includes conditional compilation to handle 128-bit wide types if the platform supports them. The functions are enclosed within `FD_PROTOTYPES_BEGIN` and `FD_PROTOTYPES_END` to ensure proper linkage and encapsulation. The file is intended to be included in other C programs or libraries that require precise and efficient integer square root calculations.
# Imports and Dependencies

---
- `../bits/fd_bits.h`


# Functions

---
### fd\_uint\_sqrt<!-- {{#callable:fd_uint_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L8>)

Calculates the floor of the square root of an unsigned integer using a fixed-point iteration method.
- **Inputs**:
    - `x`: An unsigned integer for which the floor of the square root is to be calculated.
- **Logic and Control Flow**:
    - If `x` is less than 21, use a lookup table to return the result directly.
    - Find the most significant bit (MSB) of `x` to determine an initial guess for `y`.
    - Use a fixed-point iteration to refine `y` until it converges to the floor of the square root of `x`.
    - In each iteration, calculate `_z` as `(_y*_y + _y + _x) / ((_y<<1)+1UL)` and check if `_z` equals `_y`.
    - If `_z` equals `_y`, break the loop; otherwise, update `_y` with `_z`.
- **Output**: Returns the floor of the square root of the input unsigned integer `x` as an unsigned integer.


---
### fd\_ulong\_sqrt<!-- {{#callable:fd_ulong_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L162>)

Calculates the integer square root of an unsigned long integer using a fixed-point iteration method.
- **Inputs**:
    - `x`: An unsigned long integer for which the square root is to be calculated.
- **Logic and Control Flow**:
    - If `x` is less than 21, return a precomputed value from a lookup table encoded in a 64-bit constant.
    - Find the most significant bit (MSB) of `x` using `fd_ulong_find_msb`.
    - Initialize `y` based on whether the MSB index is odd or even, using a fixed-point approximation.
    - Enter a loop to iteratively refine `y` using integer arithmetic until convergence.
    - In each iteration, calculate `d` as `2*y + 1`, and compute partial quotients and remainders for `x` and `y`.
    - Adjust the quotient `q` if the combined remainder `r` is greater than or equal to `d`.
    - Break the loop when `y` converges to `q`.
- **Output**: Returns the floor of the square root of `x` as an unsigned long integer.


---
### fd\_uchar\_sqrt<!-- {{#callable:fd_uchar_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L184>)

Calculates the integer square root of an unsigned char by converting it to an unsigned int and using the [`fd_uint_sqrt`](<#fd_uint_sqrt>) function.
- **Inputs**:
    - `x`: An unsigned char representing the number for which the square root is to be calculated.
- **Logic and Control Flow**:
    - Convert the input `x` from `uchar` to `uint`.
    - Call the [`fd_uint_sqrt`](<#fd_uint_sqrt>) function with the converted `uint` value.
    - Cast the result of [`fd_uint_sqrt`](<#fd_uint_sqrt>) back to `uchar`.
    - Return the casted result.
- **Output**: Returns the floor of the square root of the input `x` as an unsigned char.
- **Functions Called**:
    - [`fd_uint_sqrt`](<#fd_uint_sqrt>)


---
### fd\_ushort\_sqrt<!-- {{#callable:fd_ushort_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L185>)

Calculates the integer square root of an unsigned short integer by converting it to an unsigned integer and using the [`fd_uint_sqrt`](<#fd_uint_sqrt>) function.
- **Inputs**:
    - `x`: An unsigned short integer for which the integer square root is to be calculated.
- **Logic and Control Flow**:
    - Convert the input `x` from `ushort` to `uint`.
    - Call the [`fd_uint_sqrt`](<#fd_uint_sqrt>) function with the converted `uint` value.
    - Cast the result of [`fd_uint_sqrt`](<#fd_uint_sqrt>) back to `ushort`.
    - Return the casted result as the integer square root of the original `ushort` input.
- **Output**: Returns the integer square root of the input `ushort` value as a `ushort`.
- **Functions Called**:
    - [`fd_uint_sqrt`](<#fd_uint_sqrt>)


---
### fd\_schar\_sqrt<!-- {{#callable:fd_schar_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L189>)

Calculates the integer square root of a signed character by converting it to an unsigned character and using the [`fd_uchar_sqrt`](<#fd_uchar_sqrt>) function.
- **Inputs**:
    - `x`: A signed character (`schar`) for which the integer square root is to be calculated.
- **Logic and Control Flow**:
    - Convert the signed character `x` to an unsigned character `uchar`.
    - Call the [`fd_uchar_sqrt`](<#fd_uchar_sqrt>) function with the converted unsigned character.
    - Cast the result of [`fd_uchar_sqrt`](<#fd_uchar_sqrt>) back to a signed character.
- **Output**: Returns the integer square root of the input `x` as a signed character (`schar`).
- **Functions Called**:
    - [`fd_uchar_sqrt`](<#fd_uchar_sqrt>)


---
### fd\_short\_sqrt<!-- {{#callable:fd_short_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L190>)

Calculates the integer square root of a short integer by converting it to an unsigned short and using the [`fd_ushort_sqrt`](<#fd_ushort_sqrt>) function.
- **Inputs**:
    - `x`: A short integer for which the integer square root is to be calculated.
- **Logic and Control Flow**:
    - Convert the input `x` from a signed short to an unsigned short.
    - Call the [`fd_ushort_sqrt`](<#fd_ushort_sqrt>) function with the converted unsigned short value.
    - Cast the result of [`fd_ushort_sqrt`](<#fd_ushort_sqrt>) back to a signed short.
    - Return the result.
- **Output**: Returns the integer square root of the input `x` as a short integer.
- **Functions Called**:
    - [`fd_ushort_sqrt`](<#fd_ushort_sqrt>)


---
### fd\_int\_sqrt<!-- {{#callable:fd_int_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L191>)

Computes the integer square root of a given integer by converting it to an unsigned integer and using the [`fd_uint_sqrt`](<#fd_uint_sqrt>) function.
- **Inputs**:
    - `x`: An integer for which the integer square root is to be calculated.
- **Logic and Control Flow**:
    - Convert the input integer `x` to an unsigned integer type `uint`.
    - Call the [`fd_uint_sqrt`](<#fd_uint_sqrt>) function with the converted unsigned integer.
    - Return the result of [`fd_uint_sqrt`](<#fd_uint_sqrt>) cast back to an integer.
- **Output**: Returns the integer square root of the input `x`, which is the largest integer `y` such that `y*y <= x`.
- **Functions Called**:
    - [`fd_uint_sqrt`](<#fd_uint_sqrt>)


---
### fd\_long\_sqrt<!-- {{#callable:fd_long_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L192>)

Calculates the floor of the square root of a long integer.
- **Inputs**:
    - `x`: A long integer for which the square root is to be calculated.
- **Logic and Control Flow**:
    - Casts the input `x` from type `long` to `ulong`.
    - Calls the function [`fd_ulong_sqrt`](<#fd_ulong_sqrt>) with the casted value to compute the square root.
    - Casts the result from `ulong` back to `long`.
    - Returns the computed square root as a `long` integer.
- **Output**: Returns the floor of the square root of the input `x` as a `long` integer.
- **Functions Called**:
    - [`fd_ulong_sqrt`](<#fd_ulong_sqrt>)


---
### fd\_schar\_re\_sqrt<!-- {{#callable:fd_schar_re_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L196>)

Computes the floor of the real square root of a signed character, returning zero for non-positive inputs.
- **Inputs**:
    - `x`: A signed character (`schar`) input for which the real square root is to be computed.
- **Logic and Control Flow**:
    - Check if `x` is greater than zero.
    - If `x` is greater than zero, compute the square root using [`fd_uchar_sqrt`](<#fd_uchar_sqrt>) after casting `x` to an unsigned character (`uchar`).
    - Return the computed square root cast back to a signed character (`schar`).
    - If `x` is not greater than zero, return zero.
- **Output**: Returns the floor of the real square root of `x` as a signed character (`schar`), or zero if `x` is not positive.
- **Functions Called**:
    - [`fd_uchar_sqrt`](<#fd_uchar_sqrt>)


---
### fd\_short\_re\_sqrt<!-- {{#callable:fd_short_re_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L197>)

Calculates the floor of the real square root of a short integer, returning zero for non-positive inputs.
- **Inputs**:
    - `x`: A short integer input for which the function calculates the floor of the real square root.
- **Logic and Control Flow**:
    - Checks if `x` is greater than zero.
    - If `x` is greater than zero, calculates the floor of the square root of `x` using [`fd_ushort_sqrt`](<#fd_ushort_sqrt>) and returns it as a short integer.
    - If `x` is not greater than zero, returns zero.
- **Output**: Returns a short integer representing the floor of the real square root of `x`, or zero if `x` is non-positive.
- **Functions Called**:
    - [`fd_ushort_sqrt`](<#fd_ushort_sqrt>)


---
### fd\_int\_re\_sqrt<!-- {{#callable:fd_int_re_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L198>)

Calculates the floor of the real square root of a non-negative integer, returning zero for negative inputs.
- **Inputs**:
    - `x`: An integer input for which the function calculates the floor of the real square root if it is non-negative.
- **Logic and Control Flow**:
    - Checks if `x` is greater than zero.
    - If `x` is greater than zero, it calculates the floor of the square root of `x` using [`fd_uint_sqrt`](<#fd_uint_sqrt>) for `int` or `fd_ulong_sqrt` for `long`.
    - If `x` is not greater than zero, it returns zero.
- **Output**: Returns an integer representing the floor of the real square root of `x` if `x` is positive, otherwise returns zero.
- **Functions Called**:
    - [`fd_uint_sqrt`](<#fd_uint_sqrt>)


---
### fd\_long\_re\_sqrt<!-- {{#callable:fd_long_re_sqrt}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L199>)

Computes the floor of the real square root of a long integer, returning zero for non-positive inputs.
- **Inputs**:
    - `x`: A long integer input for which the function computes the floor of the real square root.
- **Logic and Control Flow**:
    - Checks if `x` is greater than 0.
    - If `x` is greater than 0, it computes the floor of the square root of `x` using [`fd_ulong_sqrt`](<#fd_ulong_sqrt>) and casts the result to a long integer.
    - If `x` is not greater than 0, it returns 0.
- **Output**: Returns a long integer representing the floor of the real square root of `x` if `x` is positive, otherwise returns 0.
- **Functions Called**:
    - [`fd_ulong_sqrt`](<#fd_ulong_sqrt>)


---
### fd\_schar\_sqrt\_abs<!-- {{#callable:fd_schar_sqrt_abs}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L203>)

Calculates the floor of the square root of the absolute value of a signed character.
- **Inputs**:
    - `x`: A signed character (`schar`) whose absolute value's square root is to be calculated.
- **Logic and Control Flow**:
    - Compute the absolute value of `x` using `fd_schar_abs(x)`.
    - Calculate the square root of the resulting unsigned character using [`fd_uchar_sqrt`](<#fd_uchar_sqrt>).
    - Cast the result back to a signed character (`schar`).
- **Output**: Returns the floor of the square root of the absolute value of the input `schar` as a `schar`.
- **Functions Called**:
    - [`fd_uchar_sqrt`](<#fd_uchar_sqrt>)


---
### fd\_short\_sqrt\_abs<!-- {{#callable:fd_short_sqrt_abs}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L204>)

Calculates the floor of the square root of the absolute value of a short integer.
- **Inputs**:
    - `x`: A short integer whose absolute value's square root is to be calculated.
- **Logic and Control Flow**:
    - Compute the absolute value of the input `x` using `fd_short_abs(x)`.
    - Calculate the square root of the result using `fd_ushort_sqrt()`.
    - Cast the result to a short integer.
- **Output**: Returns a short integer representing the floor of the square root of the absolute value of `x`.
- **Functions Called**:
    - [`fd_ushort_sqrt`](<#fd_ushort_sqrt>)


---
### fd\_int\_sqrt\_abs<!-- {{#callable:fd_int_sqrt_abs}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L205>)

Calculates the integer square root of the absolute value of an integer.
- **Inputs**:
    - `x`: An integer whose absolute value's square root is to be calculated.
- **Logic and Control Flow**:
    - Compute the absolute value of `x` using `fd_int_abs(x)`.
    - Calculate the integer square root of the result using `fd_uint_sqrt()`.
    - Return the result as an integer.
- **Output**: The integer square root of the absolute value of the input integer `x`.
- **Functions Called**:
    - [`fd_uint_sqrt`](<#fd_uint_sqrt>)


---
### fd\_long\_sqrt\_abs<!-- {{#callable:fd_long_sqrt_abs}} -->
[View Source →](<../../../../../src/util/math/fd_sqrt.h#L206>)

Calculates the floor of the square root of the absolute value of a long integer.
- **Inputs**:
    - `x`: A long integer whose absolute value's square root is to be calculated.
- **Logic and Control Flow**:
    - Compute the absolute value of the input `x` using `fd_long_abs(x)`.
    - Calculate the square root of the resulting unsigned long integer using `fd_ulong_sqrt()`.
    - Convert the result to a long integer and return it.
- **Output**: Returns a long integer representing the floor of the square root of the absolute value of `x`.
- **Functions Called**:
    - [`fd_ulong_sqrt`](<#fd_ulong_sqrt>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)