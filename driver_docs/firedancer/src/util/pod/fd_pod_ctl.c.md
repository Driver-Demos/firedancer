<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

A command-line tool for managing and querying POD (Plain Old Data) structures in shared memory.

# Purpose
The code is an executable C program that provides a command-line interface for managing and manipulating a data structure referred to as a "pod." The program includes various commands to create, delete, reset, list, insert, remove, update, set, compact, and query pods. It uses a workspace mechanism to allocate and manage memory for these pods, which are likely used to store and organize data in a structured format. The program supports different data types, such as strings, integers, and floating-point numbers, and provides functionality to insert and update these values within the pods.

The main technical components include functions for handling different pod operations, such as [`insert_val`](<#insert_val>), [`printf_path`](<#printf_path>), and [`printf_val`](<#printf_val>), which manage the insertion and display of values in the pods. The program also includes error handling and logging to ensure that operations are executed correctly and to provide feedback to the user. The code is structured to handle various data types and operations, with conditional compilation directives to support different platforms. The program defines a public API through its command-line interface, allowing users to interact with the pod data structure by executing commands with specific arguments.
# Imports and Dependencies

---
- `../fd_util.h`
- `../../util/pod/fd_pod.h`
- `stdio.h`
- `stdlib.h`
- `ctype.h`
- `sys/types.h`
- `sys/stat.h`
- `fcntl.h`
- `unistd.h`


# Functions

---
### supported\_val\_type<!-- {{#callable:supported_val_type}} -->
[View Source →](<../../../../../src/util/pod/fd_pod_ctl.c#L16>)

Checks if a given value type is supported by comparing it against a set of predefined constants.
- **Inputs**:
    - `val_type`: An integer representing the value type to check for support.
- **Logic and Control Flow**:
    - Compares `val_type` against a series of predefined constants using the equality operator.
    - Uses the bitwise OR operator to combine the results of these comparisons.
    - Returns the result of the combined comparisons, which is non-zero if `val_type` matches any of the predefined constants.
- **Output**: Returns a non-zero integer if `val_type` is supported, otherwise returns zero.


---
### insert\_val<!-- {{#callable:insert_val}} -->
[View Source →](<../../../../../src/util/pod/fd_pod_ctl.c#L30>)

Inserts a value into a POD (Plain Old Data) structure at a specified path based on the value type.
- **Inputs**:
    - `pod`: A pointer to the POD structure where the value will be inserted.
    - `path`: A constant character pointer representing the path in the POD where the value will be inserted.
    - `val_type`: An integer representing the type of the value to be inserted, which determines the conversion and insertion function to use.
    - `val`: A constant character pointer representing the value to be inserted, which will be converted based on the value type.
- **Logic and Control Flow**:
    - Declare a variable `off` of type `ulong` to store the offset of the inserted value.
    - Use a `switch` statement to determine the action based on `val_type`.
    - For each case in the `switch` statement, call the appropriate `fd_pod_insert_*` function with the converted value using `fd_cstr_to_*` functions.
    - If `val_type` is not recognized, log an error using `FD_LOG_ERR` with the message 'never get here'.
    - Return the offset `off` of the inserted value.
- **Output**: Returns the offset of the inserted value within the POD as an `ulong`.


---
### issingleprint<!-- {{#callable:issingleprint}} -->
[View Source →](<../../../../../src/util/pod/fd_pod_ctl.c#L56>)

Checks if a character is alphanumeric, punctuation, or a space.
- **Inputs**:
    - `c`: The character to check, represented as an integer.
- **Logic and Control Flow**:
    - Uses the bitwise OR operator to combine the results of `fd_isalnum(c)`, `fd_ispunct(c)`, and the condition `(c==' ')`.
    - Returns a non-zero value if any of these conditions are true, indicating that the character is either alphanumeric, punctuation, or a space.
- **Output**: An integer that is non-zero if the character is alphanumeric, punctuation, or a space, and zero otherwise.


---
### printf\_path<!-- {{#callable:printf_path}} -->
[View Source →](<../../../../../src/util/pod/fd_pod_ctl.c#L61>)

Constructs and prints a path string from a linked list of `fd_pod_info_t` nodes.
- **Inputs**:
    - `info`: A pointer to the `fd_pod_info_t` structure representing the starting node of the path.
- **Logic and Control Flow**:
    - Check if `info` is NULL; if so, return immediately.
    - Initialize `node` to `info` and `sz` to 0.
    - Iterate through the linked list of nodes, adding each node's `key_sz` to `sz` and moving to the parent node until reaching the end of the list.
    - Allocate a buffer `buf` of size `sz`; if allocation fails, return.
    - Set `p` to point to the end of the buffer and initialize `subpod` to 0.
    - Iterate through the nodes again, copying each node's `key` into the buffer in reverse order, adding a '.' separator if `subpod` is set, and updating `subpod` to 1.
    - Print the constructed path string stored in `buf`.
    - Free the allocated buffer.
- **Output**: No return value; outputs the constructed path string to standard output.


---
### printf\_val<!-- {{#callable:printf_val}} -->
[View Source →](<../../../../../src/util/pod/fd_pod_ctl.c#L93>)

Formats and prints the value stored in a `fd_pod_info_t` structure based on its type.
- **Inputs**:
    - `info`: A pointer to a `fd_pod_info_t` structure containing the value and its type to be printed.
- **Logic and Control Flow**:
    - Check the `val_type` of `info` to determine the type of value to print.
    - If `val_type` is `FD_POD_VAL_TYPE_SUBPOD`, cast `info->val` to `uchar*` and print the maximum, used bytes, and key count using `fd_pod_max`, `fd_pod_used`, and `fd_pod_cnt`.
    - If `val_type` is `FD_POD_VAL_TYPE_BUF`, cast `info->val` to `uchar const*`, get the size from `info->val_sz`, and print the size. Iterate over the buffer to print each byte in hexadecimal format, aligning output in columns and printing printable characters or '.' for non-printable ones.
    - If `val_type` is `FD_POD_VAL_TYPE_CSTR`, check if `info->val_sz` is zero to print "(null)" or print the string value.
    - If `val_type` is `FD_POD_VAL_TYPE_CHAR`, cast `info->val` to `char*`, check if the character is printable using [`issingleprint`](<#issingleprint>), and print it as a character or hexadecimal value.
    - For unsigned integer types (`FD_POD_VAL_TYPE_UCHAR`, `FD_POD_VAL_TYPE_USHORT`, `FD_POD_VAL_TYPE_UINT`, `FD_POD_VAL_TYPE_ULONG`), decode the value using `fd_ulong_svw_dec` and print it as an unsigned long integer.
    - For signed integer types (`FD_POD_VAL_TYPE_SCHAR`, `FD_POD_VAL_TYPE_SHORT`, `FD_POD_VAL_TYPE_INT`, `FD_POD_VAL_TYPE_LONG`), decode the value using `fd_ulong_svw_dec`, convert it using `fd_long_zz_dec`, and print it as a signed long integer.
    - For `FD_POD_VAL_TYPE_INT128` and `FD_POD_VAL_TYPE_UINT128`, decode the value into a `uint128` union, convert it using `fd_int128_zz_dec` for signed, and print it in hexadecimal format.
    - For floating-point types (`FD_POD_VAL_TYPE_FLOAT`, `FD_POD_VAL_TYPE_DOUBLE`), cast `info->val` to the respective type and print it in scientific notation with 21 decimal places.
- **Output**: No return value; the function outputs formatted data to the standard output.
- **Functions Called**:
    - [`issingleprint`](<#issingleprint>)


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/pod/fd_pod_ctl.c#L720>)

Initializes the environment, checks argument count, logs errors if conditions are not met, and halts the program.
- **Inputs**:
    - `argc`: The number of command-line arguments passed to the program.
    - `argv`: An array of strings representing the command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with `argc` and `argv`.
    - Checks if `argc` is less than 1 and logs an error if true.
    - Checks if `argc` is greater than 1 and logs an error if true, indicating the platform does not support `fd_pod_ctl`.
    - Logs a notice indicating that 0 commands were processed.
    - Calls `fd_halt` to halt the program.
- **Output**: Returns 0 to indicate successful execution.



---
Made with ❤️ by [Driver](https://www.driver.ai/)