<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

APIs for managing flexible hierarchies of typed key-value pairs in memory, supporting serialization, querying, and various data types.

# Purpose
The code is a C header file that defines a set of APIs for managing a data structure called a "pod." A pod is a flexible, hierarchical data structure that stores typed key-value pairs in memory. The design allows for efficient storage, retrieval, and manipulation of data, making it suitable for use in distributed environments, configuration management, and checkpointing. The pod structure supports multiple value types, including primitive data types and nested pods, enabling complex data hierarchies. The implementation assumes a little-endian architecture and efficient access to unaligned primitive types.

The header file provides various functionalities, including constructors for creating and managing pods, accessors for querying pod properties, and iterators for traversing key-value pairs. It also includes APIs for inserting and removing key-value pairs, querying specific data types, and handling errors. The pod can be serialized, deserialized, and easily integrated with different configuration file formats like JSON, YAML, and TOML. The file defines error codes, value types, and utility functions to facilitate operations on pods, ensuring efficient data management and interoperability with standard C string handling APIs.
# Imports and Dependencies

---
- `../cstr/fd_cstr.h`


# Global Variables

---
### fd\_pod\_alloc
- **Type**: `ulong`
- **Description**: Allocates space in a pod for a key at the end of a specified path with a given value type and size. It returns the offset in the pod where the value should be stored or 0 on failure.
- **Use**: Used to allocate space for custom user types in a pod data structure.


---
### fd\_pod\_insert
- **Type**: `ulong`
- **Description**: Inserts a key-value pair into a pod data structure at a specified path. The function allocates space for the value and copies the value into the allocated space.
- **Use**: Used to add a new key-value pair to a pod, ensuring the value is stored at the correct location within the pod.


---
### fd\_pod\_remove
- **Type**: `int`
- **Description**: Removes a key from a pod data structure based on a specified path. The function takes a pointer to the pod and a path string that identifies the key to remove.
- **Use**: Used to delete a key or subpod from a pod, potentially affecting nested structures.


---
### fd\_pod\_alloc\_subpod
- **Type**: ``ulong``
- **Description**: Allocates space for a subpod within a pod data structure. The function returns the offset within the pod where the subpod is allocated.
- **Use**: Used to create a subpod with a specified maximum size within a pod.


---
### fd\_pod\_alloc\_buf
- **Type**: `function`
- **Description**: Allocates space in a pod for a buffer at a specified path with a given size. It returns the offset in the pod where the buffer should be stored or 0 on failure.
- **Use**: Used to allocate a buffer in a pod data structure, specifying the path and size of the buffer.


---
### fd\_pod\_alloc\_cstr
- **Type**: `inline function`
- **Description**: Allocates space in a pod for a C-style string (cstr) at a specified path, with a specified maximum size including the terminating null character. It returns the offset in the pod where the cstr should be stored.
- **Use**: Used to allocate space for a cstr in a pod data structure, ensuring the cstr fits within the specified size constraints.


---
### fd\_pod\_insert\_subpod
- **Type**: `static inline ulong`
- **Description**: Inserts a subpod into a pod data structure at a specified path. The function uses `fd_pod_insert` to add the subpod, specifying the value type as `FD_POD_VAL_TYPE_SUBPOD` and determining the size of the subpod using `fd_pod_max`. The function returns the offset where the subpod is inserted or 0 on failure.
- **Use**: Used to insert a subpod into a pod at a given path, facilitating hierarchical data management.


---
### fd\_pod\_insert\_buf
- **Type**: `static inline ulong`
- **Description**: Inserts a buffer into a pod data structure at a specified path. The function takes a pointer to the pod, a path string, a pointer to the buffer value, and the size of the buffer as arguments.
- **Use**: Used to insert a buffer into a pod at a given path, returning the offset where the buffer is stored.


---
### fd\_pod\_insert\_cstr
- **Type**: `static inline ulong`
- **Description**: Inserts a C-style string (`cstr`) into a pod data structure at a specified path. The function calculates the size of the string, including the null terminator, and uses `fd_pod_insert` to store it in the pod.
- **Use**: Used to add a C-style string to a pod at a given path, facilitating storage and retrieval of string data within the pod.


---
### fd\_pod\_insert\_uint128
- **Type**: `static inline ulong`
- **Description**: Inserts a 128-bit unsigned integer (`uint128`) into a pod data structure at a specified path. The function calculates the size required to store the lower and upper 64 bits of the `uint128` value, allocates space in the pod, and encodes the value into the allocated space.
- **Use**: Used to store a `uint128` value in a pod at a given path, ensuring the value is encoded and stored correctly.


---
### fd\_pod\_insert\_int128
- **Type**: `static inline ulong`
- **Description**: Inserts a 128-bit signed integer (`int128`) into a pod data structure at a specified path. The function encodes the integer using a zigzag encoding (`fd_int128_zz_enc`) and then stores it in the pod.
- **Use**: Used to add a 128-bit signed integer value to a pod at a given path, ensuring the value is stored in a compact and encoded form.


# Data Structures

---
### fd\_pod\_info\_t
- **Type**: ``struct``
- **Members**:
    - ``key_sz``: Size of key in pod, including the terminating '\0'.
    - ``key``: Pointer to the first byte of the pod key C-string.
    - ``val_type``: Type of value, represented as an integer in the range [0,255].
    - ``val_sz``: Size of the value in bytes, in its pod-encoded form.
    - ``val``: Pointer to the first byte of the value in its pod-encoded form.
    - ``parent``: Pointer to the parent `fd_pod_info_t` for recursive listings, or NULL if not in a subpod.
- **Description**: Used to list the contents of a pod, `fd_pod_info_t` provides details about each key-value pair in a pod, including the key size, key string, value type, value size, and a pointer to the value. It also includes a pointer to the parent `fd_pod_info_t` for recursive listings, allowing for hierarchical representation of nested pods. The structure is not stored in the pod itself, and its pointers are valid for the pod's lifetime or until an invalidating operation occurs.


---
### fd\_pod\_info
- **Type**: ``struct``
- **Members**:
    - ``key_sz``: Size of the key in the pod, including the terminating '\0'.
    - ``key``: Pointer to the first byte of the pod key C-string.
    - ``val_type``: Type of the value, represented as an integer in the range [0,255].
    - ``val_sz``: Size of the value in bytes, in its pod-encoded form.
    - ``val``: Pointer to the first byte of the value in its pod-encoded form.
    - ``parent``: Pointer to the parent `fd_pod_info_t` for recursive listings, or NULL if not applicable.
- **Description**: Represents information about a key-value pair in a pod, including details about the key, value, and their types and sizes. It also includes a pointer to a parent structure for recursive listings, allowing for hierarchical organization of pods.


---
### fd\_pod\_iter\_private
- **Type**: ``struct``
- **Members**:
    - ``cursor``: Pointer to the current position in the iteration.
    - ``stop``: Pointer to the end position of the iteration.
- **Description**: Facilitates iteration over key-value pairs in a pod by maintaining pointers to the current and end positions of the iteration. This structure is used to track the state of an iteration, allowing functions to determine when the iteration is complete and to access the current key-value pair.


---
### fd\_pod\_iter\_t
- **Type**: ``struct``
- **Members**:
    - ``cursor``: Pointer to the current position in the pod during iteration.
    - ``stop``: Pointer to the end position in the pod, marking the limit for iteration.
- **Description**: `fd_pod_iter_t` is a structure used to iterate over key-value pairs in a pod. It contains two pointers, `cursor` and `stop`, which define the current position and the end position of the iteration, respectively. This structure allows for efficient traversal of the pod's contents without recursion into subpods.


# Functions

---
### fd\_pod\_align<!-- {{#callable:fd_pod_align}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L138>)

Returns the alignment requirement for a pod, which is always 1 byte.
- **Inputs**: None
- **Logic and Control Flow**:
    - Returns the constant value `1UL`, indicating no alignment requirement for a pod.
- **Output**: The function returns an `ulong` value of `1UL`, representing the alignment requirement for a pod.


---
### fd\_pod\_footprint<!-- {{#callable:fd_pod_footprint}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L158>)

Calculates the memory footprint of a pod based on a given maximum size, returning the maximum size if it meets the minimum requirement, or zero otherwise.
- **Inputs**:
    - `max`: The maximum size of the pod in bytes, which must be at least `FD_POD_FOOTPRINT_MIN` to be valid.
- **Logic and Control Flow**:
    - Checks if `max` is greater than or equal to `FD_POD_FOOTPRINT_MIN`.
    - If `max` is valid, returns `max`; otherwise, returns `0UL`.
- **Output**: Returns the maximum size of the pod if it is valid, otherwise returns zero.


---
### fd\_pod\_new<!-- {{#callable:fd_pod_new}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L160>)

Initializes a new pod structure in shared memory with specified maximum size.
- **Inputs**:
    - `shmem`: Pointer to the shared memory region where the pod will be initialized.
    - `max`: Maximum size in bytes for the pod, including the header.
- **Logic and Control Flow**:
    - Check if `shmem` is NULL; if so, return NULL.
    - Calculate the footprint of the pod using `fd_pod_footprint(max)`; if the footprint is zero, return NULL.
    - Cast `shmem` to a `uchar` pointer and store it in `pod`.
    - Calculate the size of the symmetric-variable-width (SVW) encoding for `max` and store it in `csz`.
    - Encode `max` at the start of `pod` using `fd_ulong_svw_enc_fixed`.
    - Encode the initial 'used' size (3 times `csz`) at `pod + csz` using `fd_ulong_svw_enc_fixed`.
    - Encode the initial 'cnt' (0) at `pod + 2 * csz` using `fd_ulong_svw_enc_fixed`.
    - Return the original `shmem` pointer.
- **Output**: Returns the original `shmem` pointer if successful, or NULL if initialization fails.
- **Functions Called**:
    - [`fd_pod_footprint`](<#fd_pod_footprint>)


---
### fd\_pod\_join<!-- {{#callable:fd_pod_join}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L174>)

Converts a pointer to a shared pod into a pointer to an unsigned character array.
- **Inputs**:
    - `shpod`: A pointer to a shared pod, which is a memory region representing a pod.
- **Logic and Control Flow**:
    - Casts the input pointer `shpod` to a pointer of type `uchar *`.
- **Output**: Returns a pointer of type `uchar *` that points to the same memory location as `shpod`.


---
### fd\_pod\_leave<!-- {{#callable:fd_pod_leave}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L175>)

Returns a pointer to the given `pod` cast to a `void *` type.
- **Inputs**:
    - `pod`: A pointer to a constant unsigned character array (`uchar const *`) representing the pod to leave.
- **Logic and Control Flow**:
    - Cast the input `pod` to a `void *` type.
    - Return the casted pointer.
- **Output**: A `void *` pointer to the input `pod`.


---
### fd\_pod\_delete<!-- {{#callable:fd_pod_delete}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L176>)

Returns the input pointer `shpod` without modification.
- **Inputs**:
    - `shpod`: A pointer to a shared memory region representing a pod.
- **Logic and Control Flow**:
    - The function takes a single input argument `shpod`.
    - It returns the same `shpod` pointer without any changes.
- **Output**: The same pointer `shpod` that was passed as input.


---
### fd\_pod\_max<!-- {{#callable:fd_pod_max}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L185>)

Retrieves the maximum size of a pod in bytes from its encoded header.
- **Inputs**:
    - `pod`: A pointer to the pod's encoded header, which is a sequence of bytes.
- **Logic and Control Flow**:
    - Call `fd_ulong_svw_dec_sz` with `pod` to determine the size of the encoded maximum size value.
    - Call `fd_ulong_svw_dec_fixed` with `pod` and the size obtained to decode and return the maximum size of the pod.
- **Output**: Returns the maximum size of the pod in bytes as an unsigned long integer.


---
### fd\_pod\_used<!-- {{#callable:fd_pod_used}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L191>)

Calculates the number of bytes currently used in a pod, including the header.
- **Inputs**:
    - `pod`: A pointer to the pod data structure, represented as a constant unsigned character array.
- **Logic and Control Flow**:
    - Determine the size of the encoded 'used' field by calling `fd_ulong_svw_dec_sz` with `pod` as the argument.
    - Calculate the number of bytes used in the pod by calling `fd_ulong_svw_dec_fixed` with `pod + csz` and `csz` as arguments, where `csz` is the size obtained in the previous step.
    - Return the calculated number of used bytes.
- **Output**: Returns an unsigned long integer representing the number of bytes currently used in the pod, including the header.


---
### fd\_pod\_cnt<!-- {{#callable:fd_pod_cnt}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L197>)

Calculates the number of key-value pairs in a pod data structure.
- **Inputs**:
    - `pod`: A pointer to the pod data structure, represented as a constant unsigned character array.
- **Logic and Control Flow**:
    - Determine the size of the symmetric-variable-width (svw) encoded unsigned long at the start of the pod using `fd_ulong_svw_dec_sz` function.
    - Calculate the number of key-value pairs by decoding the svw encoded value located at an offset of twice the size of the svw encoded size using `fd_ulong_svw_dec_fixed`.
- **Output**: Returns an unsigned long representing the number of key-value pairs in the pod.


---
### fd\_pod\_avail<!-- {{#callable:fd_pod_avail}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L203>)

Calculates the number of bytes available for storing key-value pairs in a pod.
- **Inputs**:
    - `pod`: A pointer to the pod data structure, which is a contiguous memory block containing encoded information about the pod's size and contents.
- **Logic and Control Flow**:
    - Determine the size of the encoded ulong at the start of the pod using `fd_ulong_svw_dec_sz`.
    - Decode the maximum size of the pod using `fd_ulong_svw_dec_fixed` with the size obtained.
    - Decode the used size of the pod using `fd_ulong_svw_dec_fixed` with the size obtained, starting from the next encoded ulong.
    - Subtract the used size from the maximum size to get the available size.
- **Output**: Returns an `ulong` representing the number of bytes available for storing key-value pairs in the pod.


---
### fd\_pod\_iter\_init<!-- {{#callable:fd_pod_iter_t::fd_pod_iter_init}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L339>)

Initializes an iterator for a pod data structure, setting the cursor and stop positions based on the pod's encoded size and used bytes.
- **Inputs**:
    - `pod`: A pointer to the first byte of a well-formed static pod or NULL.
- **Logic and Control Flow**:
    - Check if `pod` is NULL; if so, initialize `iter` with `cursor` and `stop` as NULL and return `iter`.
    - Calculate the size of the encoded header using `fd_ulong_svw_dec_sz(pod)`.
    - Set `iter.cursor` to point to the start of the key-val pairs, which is `pod + csz*3UL`.
    - Set `iter.stop` to the end of the used bytes in the pod, calculated as `pod + fd_ulong_svw_dec_fixed(pod + csz, csz)`.
    - Return the initialized `iter`.
- **Output**: Returns an `fd_pod_iter_t` structure with initialized `cursor` and `stop` pointers for iterating over the pod.
- **See also**: [`fd_pod_iter_t`](<#fd_pod_iter_t>)  (Data Structure)


---
### fd\_pod\_iter\_done<!-- {{#callable:fd_pod_iter_done}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L353>)

Checks if the iterator has reached the end of the iteration range.
- **Inputs**:
    - `iter`: An `fd_pod_iter_t` structure representing the current state of the iteration, including the current position (`cursor`) and the end position (`stop`).
- **Logic and Control Flow**:
    - Compare `iter.cursor` with `iter.stop` to determine if the iteration is complete.
    - Return a non-zero value if `iter.cursor` is greater than or equal to `iter.stop`, indicating the end of the iteration.
    - Return zero if `iter.cursor` is less than `iter.stop`, indicating that there are more elements to iterate over.
- **Output**: Returns a non-zero integer if the iteration is complete, otherwise returns zero.


---
### fd\_pod\_iter\_next<!-- {{#callable:fd_pod_iter_t::fd_pod_iter_next}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L361>)

Advances the iterator to the next key-value pair in a pod data structure.
- **Inputs**:
    - `iter`: An `fd_pod_iter_t` structure representing the current state of the iterator.
- **Logic and Control Flow**:
    - Retrieve the current cursor position from `iter`.
    - Decode the size of the current key using `fd_ulong_svw_dec_sz` and `fd_ulong_svw_dec_fixed`, then move the cursor past the key.
    - Move the cursor past the current type byte.
    - Decode the size of the current value using `fd_ulong_svw_dec_sz` and `fd_ulong_svw_dec_fixed`, then move the cursor past the value.
    - Update the `iter.cursor` to the new cursor position.
    - Return the updated `iter`.
- **Output**: Returns an updated `fd_pod_iter_t` with the cursor advanced to the next key-value pair.
- **See also**: [`fd_pod_iter_t`](<#fd_pod_iter_t>)  (Data Structure)


---
### fd\_pod\_iter\_info<!-- {{#callable:fd_pod_info_t::fd_pod_iter_info}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L388>)

Extracts key-value pair information from a pod iterator's current position.
- **Inputs**:
    - `iter`: An `fd_pod_iter_t` structure representing the current state of iteration over a pod.
- **Logic and Control Flow**:
    - Initialize a `cursor` pointer to the current position in the iterator.
    - Decode the size of the key using `fd_ulong_svw_dec_sz` and store it in `ksz`.
    - Extract the key size using `fd_ulong_svw_dec_fixed` and update the `cursor` position.
    - Assign the key pointer to `info.key` and move the `cursor` past the key.
    - Extract the value type from the current `cursor` position and increment the `cursor`.
    - Decode the size of the value using `fd_ulong_svw_dec_sz` and store it in `vsz`.
    - Extract the value size using `fd_ulong_svw_dec_fixed` and update the `cursor` position.
    - Assign the value pointer to `info.val` and move the `cursor` past the value.
    - Set `info.parent` to `NULL`.
    - Return the populated `fd_pod_info_t` structure.
- **Output**: An `fd_pod_info_t` structure containing the key size, key, value type, value size, and value from the current iterator position.
- **See also**: [`fd_pod_info_t`](<#fd_pod_info_t>)  (Data Structure)


---
### fd\_pod\_reset<!-- {{#callable:fd_pod_reset}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L427>)

Resets a pod by clearing all key-value pairs and subpods, setting the used and count fields to zero.
- **Inputs**:
    - `pod`: A pointer to the pod structure to reset.
- **Logic and Control Flow**:
    - Checks if the `pod` is NULL using `FD_UNLIKELY`; if true, returns NULL.
    - Calculates the size of the encoded header using `fd_ulong_svw_dec_sz`.
    - Encodes the 'used' field to `3UL*csz` and the 'cnt' field to `0UL` using `fd_ulong_svw_enc_fixed`.
    - Returns the `pod` pointer.
- **Output**: Returns the pointer to the reset pod, or NULL if the input pod is NULL.


---
### fd\_pod\_query\_subpod<!-- {{#callable:fd_pod_query_subpod}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L776>)

Queries a pod for a subpod at a specified path and returns a pointer to it if found.
- **Inputs**:
    - `pod`: A pointer to the pod to query, which must be a valid memory location.
    - `path`: A string representing the path to the subpod within the pod, using '.' as a delimiter for nested keys.
- **Logic and Control Flow**:
    - Declare a `fd_pod_info_t` structure named `info` to store query results.
    - Call [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) with `pod`, `path`, and `info` to search for the subpod.
    - Check if [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) returns a non-zero value or if `info->val_type` is not `FD_POD_VAL_TYPE_SUBPOD`.
    - If either condition is true, return `NULL` indicating failure to find a subpod.
    - If both conditions are false, return a pointer to `info->val`, which is the subpod.
- **Output**: Returns a pointer to the subpod if found, or `NULL` if the subpod is not found or the path is invalid.
- **Functions Called**:
    - [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>)


---
### fd\_pod\_query\_buf<!-- {{#callable:fd_pod_query_buf}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L792>)

Queries a buffer in a pod at a specified path and returns a pointer to it, optionally providing its size.
- **Inputs**:
    - `pod`: A pointer to the pod data structure to query.
    - `path`: A string representing the path to the buffer within the pod.
    - `opt_buf_sz`: An optional pointer to store the size of the buffer if found.
- **Logic and Control Flow**:
    - Declare a `fd_pod_info_t` structure named `info` to store query results.
    - Call [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) with `pod`, `path`, and `info` to find the buffer; return `NULL` if the query fails or the value type is not `FD_POD_VAL_TYPE_BUF`.
    - If `opt_buf_sz` is not `NULL`, set `*opt_buf_sz` to the size of the buffer (`info->val_sz`).
    - Return the pointer to the buffer (`info->val`).
- **Output**: A pointer to the buffer if found, or `NULL` if the query fails or the value type is incorrect.
- **Functions Called**:
    - [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>)


---
### fd\_pod\_query\_cstr<!-- {{#callable:fd_pod_query_cstr}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L808>)

Queries a pod for a C-string at a specified path and returns it or a default value if not found or if the type is incorrect.
- **Inputs**:
    - `pod`: A pointer to the pod data structure to query.
    - `path`: A C-string representing the path to the desired key within the pod.
    - `def`: A default C-string to return if the query fails or the type is not a C-string.
- **Logic and Control Flow**:
    - Declare a `fd_pod_info_t` structure named `info` to store query results.
    - Call [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) with `pod`, `path`, and `info` to attempt to retrieve information about the specified path.
    - Check if [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) returns a non-zero value or if `info->val_type` is not `FD_POD_VAL_TYPE_CSTR`; if either condition is true, return `def`.
    - If `info->val_sz` is non-zero, return the C-string pointed to by `info->val`; otherwise, return `NULL`.
- **Output**: Returns a pointer to the C-string found at the specified path, `def` if the query fails or the type is incorrect, or `NULL` if the C-string is empty.
- **Functions Called**:
    - [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>)


---
### fd\_pod\_query\_uint128<!-- {{#callable:fd_pod_query_uint128}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L893>)

Retrieves a `uint128` value from a pod using a specified path, returning a default value if the path is invalid or the value type is incorrect.
- **Inputs**:
    - `pod`: A pointer to the pod data structure to query.
    - `path`: A string representing the path to the desired key within the pod.
    - `def`: A default `uint128` value to return if the query fails or the value type is not `FD_POD_VAL_TYPE_UINT128`.
- **Logic and Control Flow**:
    - Declare a `fd_pod_info_t` structure to hold query information.
    - Call [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) with `pod`, `path`, and `info` to attempt to retrieve information about the specified path.
    - Check if [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) returns an error or if `info->val_type` is not `FD_POD_VAL_TYPE_UINT128`; if so, return the default value `def`.
    - Declare a union `tmp` to hold the decoded `uint128` value.
    - Decode the value from `info->val` using `fd_ulong_svw_dec` into `tmp.w` and `tmp.w+1`.
    - Return the `uint128` value stored in `tmp.u`.
- **Output**: A `uint128` value retrieved from the pod, or the default value if the query fails or the value type is incorrect.
- **Functions Called**:
    - [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>)


---
### fd\_pod\_query\_int128<!-- {{#callable:fd_pod_query_int128}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L905>)

Queries a pod for a 128-bit integer value at a specified path and returns a default value if the query fails or the value type is incorrect.
- **Inputs**:
    - ``pod``: A pointer to the pod data structure to query.
    - ``path``: A string representing the path to the key within the pod.
    - ``def``: The default `int128` value to return if the query fails or the value type is not `FD_POD_VAL_TYPE_INT128`.
- **Logic and Control Flow**:
    - Declare a `fd_pod_info_t` structure to hold query information.
    - Call [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) with `pod`, `path`, and `info` to attempt to retrieve information about the specified path.
    - Check if [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>) returns a non-zero value or if `info->val_type` is not `FD_POD_VAL_TYPE_INT128`; if either condition is true, return `def`.
    - Declare a union `tmp` to hold the decoded 128-bit integer value.
    - Decode the value from `info->val` using `fd_ulong_svw_dec` into `tmp.w` and `tmp.w+1`.
    - Return the decoded 128-bit integer using `fd_int128_zz_dec(tmp.u)`.
- **Output**: Returns the 128-bit integer value found at the specified path, or the default value `def` if the query fails or the value type is incorrect.
- **Functions Called**:
    - [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>)


# Function Declarations (Public API)

---
### fd\_pod\_list<!-- {{#callable_declaration:fd_pod_list}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L233>)

Lists key-value pairs in a pod.
- **Description**: Use this function to retrieve details about the key-value pairs stored in a pod. It populates the provided `info` array with information about each key-value pair, such as key size, key, value type, value size, and value. The function does not recurse into subpods, meaning it only lists the top-level key-value pairs. Call this function when you need to inspect or process the contents of a pod without modifying it. Ensure that the `pod` parameter is not null before calling this function.
- **Inputs**:
    - `pod`: A pointer to the pod data structure to list. Must not be null. If null, the function returns null.
    - `info`: A pointer to an array of `fd_pod_info_t` structures where the function will store information about each key-value pair. The caller must ensure that this array is large enough to hold all key-value pairs in the pod.
- **Output**: Returns the `info` pointer on success, or null if the `pod` is null.
- **See Also**: [`fd_pod_list`](<fd_pod.c.md#fd_pod_list>)  (Implementation)


---
### fd\_pod\_cnt\_subpod<!-- {{#callable_declaration:fd_pod_cnt_subpod}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L242>)

Counts the number of subpods in a pod.
- **Description**: Use this function to determine how many subpods are directly contained within a given pod. It does not recurse into subpods to count nested subpods. This function is useful when you need to know the number of immediate subpod entries in a pod. Ensure that the pod is not null before calling this function, as a null pod will result in a return value of zero.
- **Inputs**:
    - `pod`: A pointer to the pod data structure. It must not be null. If null, the function returns zero.
- **Output**: Returns the number of subpods directly contained in the pod as an unsigned long integer.
- **See Also**: [`fd_pod_cnt_subpod`](<fd_pod.c.md#fd_pod_cnt_subpod>)  (Implementation)


---
### fd\_pod\_cnt\_recursive<!-- {{#callable_declaration:fd_pod_cnt_recursive}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L258>)

Counts all key-value pairs in a pod, including nested subpods.
- **Description**: Use this function to determine the total number of key-value pairs in a pod, including those within any nested subpods. This function is useful when you need a comprehensive count of all elements in a pod hierarchy. It must be called with a valid pod pointer. If the input is null, the function returns zero, indicating no key-value pairs.
- **Inputs**:
    - `pod`: A pointer to the pod to be counted. Must not be null. If null, the function returns zero.
- **Output**: Returns the total count of key-value pairs in the pod, including those in nested subpods, as an unsigned long integer.
- **See Also**: [`fd_pod_cnt_recursive`](<fd_pod.c.md#fd_pod_cnt_recursive>)  (Implementation)


---
### fd\_pod\_list\_recursive<!-- {{#callable_declaration:fd_pod_list_recursive}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L261>)

Recursively lists all key-value pairs in a pod.
- **Description**: Use this function to obtain a complete list of all key-value pairs in a pod, including those within nested subpods. It performs a depth-first traversal of the pod structure, populating the provided `info` structure with details about each key-value pair. This function is useful when you need to inspect or process all data within a pod, regardless of its hierarchical depth. Ensure that the `pod` parameter is not null before calling this function.
- **Inputs**:
    - `pod`: A pointer to the pod to be listed. Must not be null. If null, the function returns the `info` parameter without modification.
    - `info`: A pointer to an `fd_pod_info_t` structure where the function will store information about the key-value pairs. The caller retains ownership and must ensure it is valid for the duration of the function call.
- **Output**: Returns the `info` pointer, populated with details of all key-value pairs in the pod, including those in subpods.
- **See Also**: [`fd_pod_list_recursive`](<fd_pod.c.md#fd_pod_list_recursive>)  (Implementation)


---
### fd\_pod\_query<!-- {{#callable_declaration:fd_pod_query}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L293>)

Queries a pod for information about a specified path.
- **Description**: Use this function to retrieve information about a key-value pair in a pod using a specified path. The path is a string of keys separated by dots, indicating a hierarchy of subpods to traverse. The function returns success if the path resolves to a valid key, and optionally fills a provided `fd_pod_info_t` structure with details about the key. If the path is invalid, or if a non-subpod is encountered where a subpod is expected, the function returns an error code. Ensure that the `pod` and `path` are not null before calling this function.
- **Inputs**:
    - `pod`: A pointer to the pod to query. Must not be null. The caller retains ownership.
    - `path`: A string representing the path to the key in the pod. Must not be null. The path uses '.' as a delimiter for nested keys.
    - `opt_info`: An optional pointer to an `fd_pod_info_t` structure to receive information about the key. Can be null if no information is needed.
- **Output**: Returns 0 on success, with `opt_info` filled if provided. Returns a negative error code on failure, indicating the type of error.
- **See Also**: [`fd_pod_query`](<fd_pod.c.md#fd_pod_query>)  (Implementation)


---
### fd\_pod\_strerror<!-- {{#callable_declaration:fd_pod_strerror}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L418>)

Converts an error code to a human-readable string.
- **Description**: Use this function to obtain a human-readable description of an error code returned by the pod APIs. This is useful for logging or displaying error messages to users. The function accepts an error code and returns a constant string that describes the error. The returned string is always non-null and has an infinite lifetime.
- **Inputs**:
    - `err`: An integer representing the error code. Valid values include `FD_POD_SUCCESS`, `FD_POD_ERR_INVAL`, `FD_POD_ERR_TYPE`, `FD_POD_ERR_RESOLVE`, and `FD_POD_ERR_FULL`. If the error code is not recognized, the function returns "unknown".
- **Output**: A constant character pointer to a string describing the error. The string is always non-null and describes the error corresponding to the input code.
- **See Also**: [`fd_pod_strerror`](<fd_pod.c.md#fd_pod_strerror>)  (Implementation)


---
### fd\_pod\_resize<!-- {{#callable_declaration:fd_pod_resize}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L460>)

Resizes a pod to fit within a specified maximum size.
- **Description**: Use this function to adjust the maximum size of a pod to a specified value, ensuring that the pod's current usage does not exceed this new maximum. This function is useful when you need to reallocate or optimize memory usage for a pod. It must be called with a valid pod pointer and a new maximum size that is at least as large as the current usage of the pod. If the pod's current usage exceeds the new maximum, the function will fail and return 0. This operation may adjust the pod's internal structure to fit within the new size, and it is an invalidating operation, meaning it may affect any ongoing operations or references to the pod.
- **Inputs**:
    - `pod`: A pointer to the pod to resize. Must not be null. The caller retains ownership, and the function will return 0 if this parameter is null.
    - `new_max`: The desired maximum size for the pod in bytes. Must be greater than or equal to the current usage of the pod. If the current usage exceeds this value, the function will return 0.
- **Output**: Returns the new maximum size of the pod on success, or 0 on failure.
- **See Also**: [`fd_pod_resize`](<fd_pod.c.md#fd_pod_resize>)  (Implementation)


---
### fd\_pod\_compact<!-- {{#callable_declaration:fd_pod_compact}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L481>)

Eliminates internal padding in a pod.
- **Description**: Use this function to remove any internal padding from a pod, making it more compact. This function assumes the pod is a current local join. If the `full` parameter is non-zero, the function will perform a full compaction, reducing the pod's maximum size to its used size and compacting the header accordingly. Regardless of the `full` parameter, all subpods will be fully compacted, and all strings will have their padding removed while remaining null-terminated if they were originally. This operation is invalidating, meaning it alters the pod's structure, and it is not guaranteed to restore original offsets if followed by a resize.
- **Inputs**:
    - `pod`: A pointer to the pod to compact. Must not be null. The function returns 0 if this parameter is null.
    - `full`: An integer indicating whether to perform a full compaction. If non-zero, the pod's maximum size is reduced to its used size.
- **Output**: Returns the compacted size of the pod on success, or 0 if the pod is null.
- **See Also**: [`fd_pod_compact`](<fd_pod.c.md#fd_pod_compact>)  (Implementation)


---
### fd\_cstr\_to\_pod\_val\_type<!-- {{#callable_declaration:fd_cstr_to_pod_val_type}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L490>)

Converts a string to a POD value type identifier.
- **Description**: Use this function to convert a string representation of a POD value type into its corresponding integer identifier. This is useful when you need to interpret or process POD value types based on string input. The function expects a non-null string input and returns a negative error code if the input is invalid or does not match any known value type. It supports both predefined and user-defined value types, with user-defined types expected to follow a specific naming convention.
- **Inputs**:
    - `cstr`: A pointer to a constant character string representing the POD value type. Must not be null. The string should match one of the predefined value types or follow the 'user' prefix convention for user-defined types. Invalid or unrecognized strings result in an error code.
- **Output**: Returns an integer representing the POD value type identifier if successful, or a negative error code if the input is invalid or unrecognized.
- **See Also**: [`fd_cstr_to_pod_val_type`](<fd_pod.c.md#fd_cstr_to_pod_val_type>)  (Implementation)


---
### fd\_pod\_val\_type\_to\_cstr<!-- {{#callable_declaration:fd_pod_val_type_to_cstr}} -->
[View Source →](<../../../../../src/util/pod/fd_pod.h#L498>)

Converts a value type to its string representation.
- **Description**: Use this function to convert a value type identifier into its corresponding string representation. The function requires a valid integer value type and a non-null character buffer to store the result. If the value type is recognized, the function writes the corresponding string to the buffer and returns it. If the value type is not recognized or the buffer is null, the function returns null. Ensure the buffer has enough space to hold the maximum string length defined by `FD_POD_VAL_TYPE_CSTR_MAX`.
- **Inputs**:
    - `val_type`: An integer representing the value type to convert. Must be within the range 0 to 255. If the value is not recognized, the function attempts to format it as a user-defined type.
    - `cstr`: A pointer to a character buffer where the result will be stored. Must not be null and should have space for at least `FD_POD_VAL_TYPE_CSTR_MAX` bytes. If null, the function returns null without modifying any data.
- **Output**: Returns the pointer to the buffer `cstr` containing the string representation of the value type, or null if the input is invalid.
- **See Also**: [`fd_pod_val_type_to_cstr`](<fd_pod.c.md#fd_pod_val_type_to_cstr>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)