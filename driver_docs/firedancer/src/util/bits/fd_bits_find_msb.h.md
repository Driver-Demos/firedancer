<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions to find the most significant bit in various integer types, with optional default values.

# Purpose
The code provides a set of inline functions to find the most significant bit (MSB) in various integer types, including `uchar`, `ushort`, `uint`, `ulong`, and `uint128`. These functions are designed to be included in other files, as indicated by the comment at the top of the file. The functions use built-in compiler functions like `__builtin_clz` and `__builtin_clzl` to efficiently compute the MSB for different integer sizes. The code also includes architecture-specific optimizations for x86 platforms, using inline assembly to handle cases where the input is zero and to optimize for specific instruction sets like `LZCNT` and `BSR`.

The code also provides versions of the MSB functions that accept a default value to return when the input is zero. These functions are similarly optimized for x86 architectures, using conditional move instructions to handle zero inputs without branching. For non-x86 architectures, the code falls back to a simpler implementation that checks for zero and returns the default value if necessary. The functions are marked with `FD_FN_CONST` to indicate that they are constant expressions, which can help the compiler optimize their usage. The code is intended to be part of a larger library, as it does not define a main function or any external interfaces.
# Functions

---
### fd\_uchar\_find\_msb<!-- {{#callable:fd_uchar_find_msb}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L4>)

Finds the most significant bit set in an unsigned char.
- **Inputs**:
    - `x`: An unsigned char value to find the most significant bit in.
- **Logic and Control Flow**:
    - Casts the input `x` to an unsigned int.
    - Uses the `__builtin_clz` function to count the leading zeros in the integer representation of `x`.
    - Subtracts the result of `__builtin_clz` from 31 to find the position of the most significant bit set.
- **Output**: Returns the position of the most significant bit set in the input `x`, as an integer.


---
### fd\_ushort\_find\_msb<!-- {{#callable:fd_ushort_find_msb}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L5>)

Finds the most significant bit set in a `ushort` integer.
- **Inputs**:
    - `x`: A `ushort` integer whose most significant bit is to be found.
- **Logic and Control Flow**:
    - Casts the `ushort` input `x` to a `uint` type.
    - Uses the `__builtin_clz` function to count the leading zeros in the `uint` representation of `x`.
    - Subtracts the result of `__builtin_clz` from 31 to determine the position of the most significant bit set.
- **Output**: Returns an `int` representing the position of the most significant bit set in the input `ushort`.


---
### fd\_uint\_find\_msb<!-- {{#callable:fd_uint_find_msb}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L6>)

Finds the most significant bit set in an unsigned integer.
- **Inputs**:
    - `x`: An unsigned integer of type `uint`.
- **Logic and Control Flow**:
    - Uses the built-in function `__builtin_clz` to count the leading zeros in `x`.
    - Subtracts the count of leading zeros from 31 to find the index of the most significant bit set.
- **Output**: Returns the index of the most significant bit set in the input `x`.


---
### fd\_ulong\_find\_msb<!-- {{#callable:fd_ulong_find_msb}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L7>)

Finds the most significant bit set in an unsigned long integer.
- **Inputs**:
    - `x`: An unsigned long integer (`ulong`) whose most significant bit is to be found.
- **Logic and Control Flow**:
    - Calls the built-in function `__builtin_clzl` to count the number of leading zeros in `x`.
    - Subtracts the result of `__builtin_clzl(x)` from 63 to determine the index of the most significant bit set.
- **Output**: Returns an integer representing the index of the most significant bit set in `x`, with 0 being the least significant bit.


---
### fd\_uint128\_find\_msb<!-- {{#callable:fd_uint128_find_msb}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L28>)

Finds the most significant bit set in a 128-bit unsigned integer.
- **Inputs**:
    - `x`: A 128-bit unsigned integer (`uint128`) to find the most significant bit in.
- **Logic and Control Flow**:
    - Convert `x` to two 64-bit unsigned integers `xl` and `xh`, where `xl` is the lower 64 bits and `xh` is the upper 64 bits of `x`.
    - Check if `xh` is zero and store the result in `c`.
    - If `xh` is zero, use `xl` to find the most significant bit; otherwise, use `xh`.
    - Calculate the position of the most significant bit using `__builtin_clzl` and adjust the result based on whether `xh` was zero.
- **Output**: Returns the position of the most significant bit set in `x` as an integer.


---
### fd\_uchar\_find\_msb\_w\_default<!-- {{#callable:fd_uchar_find_msb_w_default}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L138>)

Finds the most significant bit of an `uchar` value, returning a default value if the input is zero.
- **Inputs**:
    - `x`: An `uchar` value for which to find the most significant bit.
    - `d`: An integer default value to return if `x` is zero.
- **Logic and Control Flow**:
    - Check if `x` is zero.
    - If `x` is zero, return the default value `d`.
    - If `x` is not zero, call `fd_uchar_find_msb(x)` to find and return the most significant bit of `x`.
- **Output**: Returns the position of the most significant bit of `x`, or `d` if `x` is zero.
- **Functions Called**:
    - [`fd_uchar_find_msb`](<#fd_uchar_find_msb>)


---
### fd\_ushort\_find\_msb\_w\_default<!-- {{#callable:fd_ushort_find_msb_w_default}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L139>)

Finds the most significant bit of a `ushort` value, returning a default value if the input is zero.
- **Inputs**:
    - `x`: A `ushort` value for which to find the most significant bit.
    - `d`: An integer default value to return if `x` is zero.
- **Logic and Control Flow**:
    - Check if `x` is zero.
    - If `x` is zero, return the default value `d`.
    - If `x` is not zero, call `fd_ushort_find_msb(x)` to find and return the most significant bit of `x`.
- **Output**: Returns the most significant bit position of `x` if `x` is non-zero; otherwise, returns the default value `d`.
- **Functions Called**:
    - [`fd_ushort_find_msb`](<#fd_ushort_find_msb>)


---
### fd\_uint\_find\_msb\_w\_default<!-- {{#callable:fd_uint_find_msb_w_default}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L140>)

Finds the most significant bit of an unsigned integer, returning a default value if the integer is zero.
- **Inputs**:
    - `x`: An unsigned integer of type `uint` whose most significant bit is to be found.
    - `d`: An integer representing the default value to return if `x` is zero.
- **Logic and Control Flow**:
    - Check if `x` is zero.
    - If `x` is zero, return the default value `d`.
    - If `x` is not zero, call `fd_uint_find_msb(x)` to find and return the most significant bit of `x`.
- **Output**: Returns an integer representing the most significant bit of `x`, or the default value `d` if `x` is zero.
- **Functions Called**:
    - [`fd_uint_find_msb`](<#fd_uint_find_msb>)


---
### fd\_ulong\_find\_msb\_w\_default<!-- {{#callable:fd_ulong_find_msb_w_default}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L141>)

Finds the most significant bit of an unsigned long integer, returning a default value if the input is zero.
- **Inputs**:
    - `x`: An unsigned long integer whose most significant bit is to be found.
    - `d`: An integer representing the default value to return if `x` is zero.
- **Logic and Control Flow**:
    - Check if `x` is zero.
    - If `x` is zero, return the default value `d`.
    - If `x` is not zero, call `fd_ulong_find_msb(x)` to find and return the most significant bit of `x`.
- **Output**: Returns an integer representing the position of the most significant bit of `x`, or the default value `d` if `x` is zero.
- **Functions Called**:
    - [`fd_ulong_find_msb`](<#fd_ulong_find_msb>)


---
### fd\_uint128\_find\_msb\_w\_default<!-- {{#callable:fd_uint128_find_msb_w_default}} -->
[View Source →](<../../../../../src/util/bits/fd_bits_find_msb.h#L165>)

Finds the most significant bit of a `uint128` value, returning a default value if the input is zero.
- **Inputs**:
    - `x`: A `uint128` integer whose most significant bit is to be found.
    - `d`: An integer default value to return if `x` is zero.
- **Logic and Control Flow**:
    - Check if `x` is zero.
    - If `x` is zero, return the default value `d`.
    - If `x` is not zero, call `fd_uint128_find_msb(x)` to find and return the most significant bit.
- **Output**: Returns an integer representing the position of the most significant bit of `x`, or the default value `d` if `x` is zero.
- **Functions Called**:
    - [`fd_uint128_find_msb`](<#fd_uint128_find_msb>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)