<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Operations for unsigned 128-bit integers on platforms without native support, including addition, subtraction, multiplication, division, and bit shifts.

# Purpose
The code provides a set of operations for handling 128-bit unsigned integer arithmetic on platforms that do not support native 128-bit wide integers. It represents a 128-bit number as a pair of `ulong` values, where the high part and low part are combined to form the full number. The operations include addition (`fd_uwide_add`), subtraction (`fd_uwide_sub`), multiplication (`fd_uwide_mul`), and division (`fd_uwide_div` and `fd_uwide_divrem`). Each operation is designed to handle the arithmetic precisely, including carry and borrow handling for addition and subtraction, and overflow management for multiplication.

The code also includes utility functions for bit manipulation, such as finding the most significant bit ([`fd_uwide_find_msb`](<#fd_uwide_find_msb>)), and shifting operations (`fd_uwide_sl` and `fd_uwide_sr`). These functions are implemented as `static inline` to suggest that they are intended for use within the same translation unit, optimizing for performance by allowing the compiler to inline them. The file is structured as a C header file, indicated by the use of include guards and the inclusion of another header file `fd_bits.h`, suggesting that it is part of a larger library or framework. The functions are designed to be used internally, as indicated by the `FD_PROTOTYPES_BEGIN` and `FD_PROTOTYPES_END` macros, which likely manage the visibility of these functions within the library.
# Imports and Dependencies

---
- `fd_bits.h`


# Global Variables

---
### fd\_uwide\_add
- **Type**: ``static inline ulong``
- **Description**: Computes the sum of two 128-bit unsigned integers represented as pairs of `ulong` values, along with an optional carry-in value. The function returns the carry-out value after the addition.
- **Use**: Used to perform precise addition of two 128-bit unsigned integers with an optional carry-in, returning the carry-out.


---
### fd\_uwide\_inc
- **Type**: `function`
- **Description**: Computes the sum of a 128-bit unsigned integer represented by two `ulong` values (`xh` and `xl`) and a 64-bit unsigned integer `y`, storing the result in two `ulong` pointers (`_zh` and `_zl`).
- **Use**: Used to increment a 128-bit unsigned integer by a 64-bit unsigned integer, handling overflow between the lower and higher 64-bit segments.


---
### fd\_uwide\_sub
- **Type**: `function`
- **Description**: Computes the result of subtracting two 128-bit unsigned integers, represented as pairs of `ulong`, with an optional borrow input. The function returns the borrow out after the subtraction.
- **Use**: Used to perform precise subtraction of 128-bit unsigned integers on platforms without native 128-bit support.


---
### fd\_uwide\_dec
- **Type**: `function`
- **Description**: Computes the result of subtracting a 64-bit unsigned integer `y` from a 128-bit unsigned integer represented by the pair `<xh, xl>`. The result is stored in the pair `<zh, zl>`, which is also a 128-bit unsigned integer.
- **Use**: Used to perform subtraction of a 64-bit integer from a 128-bit integer, storing the result in the provided memory locations.


---
### fd\_uwide\_mul
- **Type**: `function`
- **Description**: Computes the product of two unsigned long integers `x` and `y`, storing the result as a 128-bit wide integer split into two unsigned long integers `zh` and `zl`. The function handles multiplication by breaking down the inputs into 32-bit components and performing multiple smaller multiplications and additions to achieve the final result.
- **Use**: Used to perform 128-bit multiplication on platforms without native 128-bit integer support.


---
### fd\_uwide\_sl
- **Type**: `function`
- **Description**: Computes the left shift of a 128-bit unsigned integer represented by two `ulong` values (`xh` and `xl`) by `s` bits. The result is stored in `_zh` and `_zl`, and the function returns an inexact flag indicating if any non-zero bits were lost during the shift.
- **Use**: Used to perform bitwise left shifts on 128-bit unsigned integers, handling cases where the shift amount is greater than or equal to 64 bits.


---
### fd\_uwide\_sr
- **Type**: `function`
- **Description**: Computes the right shift of a 128-bit unsigned integer represented by two `ulong` values, `xh` and `xl`, by `s` bits. The result is stored in the locations pointed to by `_zh` and `_zl`. The function returns an inexact flag indicating if any non-zero bits were lost during the shift.
- **Use**: Used to perform a right shift operation on a 128-bit unsigned integer and determine if the operation was inexact.


---
### fd\_uwide\_div
- **Type**: `function`
- **Description**: Computes the quotient of a 128-bit unsigned integer division, where the dividend is represented by two `ulong` values (`xh` and `xl`) and the divisor is a single `ulong` value (`y`). The result is stored in two `ulong` pointers (`_zh` and `_zl`).
- **Use**: Used to perform division of a 128-bit unsigned integer by a 64-bit unsigned integer, returning the quotient.


---
### fd\_uwide\_divrem
- **Type**: `function`
- **Description**: Computes the quotient and remainder of a division operation on a 128-bit unsigned integer represented by two `ulong` values (`xh` and `xl`) divided by a 64-bit unsigned integer `y`. The function returns the remainder of the division.
- **Use**: Used to perform division and obtain both the quotient and remainder of a 128-bit unsigned integer divided by a 64-bit unsigned integer.


# Functions

---
### fd\_uwide\_find\_msb<!-- {{#callable:fd_uwide_find_msb}} -->
[View Source →](<../../../../../src/util/bits/fd_uwide.h#L111>)

Calculates the most significant bit position of a 128-bit unsigned integer represented by two `ulong` values.
- **Inputs**:
    - `xh`: The high 64 bits of the 128-bit unsigned integer.
    - `xl`: The low 64 bits of the 128-bit unsigned integer.
- **Logic and Control Flow**:
    - Initialize `off` to 0.
    - Check if `xh` is non-zero.
    - If `xh` is non-zero, set `off` to 64 and assign `xh` to `xl`.
    - Call [`fd_ulong_find_msb`](<fd_bits_find_msb.h.md#fd_ulong_find_msb>) with `xl` and return the result added to `off`.
- **Output**: Returns the position of the most significant bit in the 128-bit unsigned integer.
- **Functions Called**:
    - [`fd_ulong_find_msb`](<fd_bits_find_msb.h.md#fd_ulong_find_msb>)


---
### fd\_uwide\_find\_msb\_def<!-- {{#callable:fd_uwide_find_msb_def}} -->
[View Source →](<../../../../../src/util/bits/fd_uwide.h#L122>)

Returns the most significant bit position of a 128-bit unsigned integer represented by two `ulong` values, or a default value if the integer is zero.
- **Inputs**:
    - `xh`: The high 64 bits of the 128-bit unsigned integer.
    - `xl`: The low 64 bits of the 128-bit unsigned integer.
    - `def`: The default value to return if the 128-bit integer is zero.
- **Logic and Control Flow**:
    - Checks if either `xh` or `xl` is non-zero.
    - If non-zero, calls [`fd_uwide_find_msb`](<#fd_uwide_find_msb>) with `xh` and `xl` to find the most significant bit position.
    - If both are zero, returns the `def` value.
- **Output**: An integer representing the most significant bit position, or `def` if the input integer is zero.
- **Functions Called**:
    - [`fd_uwide_find_msb`](<#fd_uwide_find_msb>)


---
### fd\_uwide\_private\_div\_approx\_init<!-- {{#callable:fd_uwide_private_div_approx_init}} -->
[View Source →](<../../../../../src/util/bits/fd_uwide.h#L221>)

Calculates an approximation of the divisor for a given `ulong` `d` in the range [2^63, 2^64).
- **Inputs**:
    - `d`: An unsigned long integer in the range [2^63, 2^64).
- **Logic and Control Flow**:
    - Calculate `m` as `d` right-shifted by 32 bits, then incremented by 1.
    - Return the result of dividing `-m` by `m` and subtracting `UINT_MAX` from it.
- **Output**: An unsigned long integer in the range [0, 2^32).


---
### fd\_uwide\_private\_div\_approx<!-- {{#callable:fd_uwide_private_div_approx}} -->
[View Source →](<../../../../../src/util/bits/fd_uwide.h#L227>)

Approximates the division of a 64-bit unsigned integer by another large integer using a precomputed multiplier.
- **Inputs**:
    - `n`: A 64-bit unsigned integer in the range [0, d).
    - `m`: A precomputed multiplier for the desired divisor `d`, obtained from `fd_uwide_private_div_approx_init`.
- **Logic and Control Flow**:
    - Shift `n` right by 32 bits to obtain `nh`, the high 32 bits of `n`.
    - Cast `n` to a 32-bit unsigned integer to obtain `nl`, the low 32 bits of `n`.
    - Calculate the result as `n + nh*m + ((nl*m)>>32)`.
- **Output**: A 64-bit unsigned integer that is an approximation of `floor(n * 2^64 / d)`.



---
Made with ❤️ by [Driver](https://www.driver.ai/)