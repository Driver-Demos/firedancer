<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Primitives for saturating math operations on various data types, mimicking Rust's behavior.

# Purpose
The code defines a set of functions for performing saturating arithmetic operations on various data types, including `__uint128_t`, `ulong`, `long`, `uint`, and `double`. Saturating arithmetic operations ensure that the result of an operation does not overflow or underflow beyond the limits of the data type. Instead, the result is clamped to the maximum or minimum value of the data type. This behavior is similar to Rust's saturating arithmetic operations. The code provides functions for addition, subtraction, and multiplication for each data type, except for `fd_long_sat_mul`, which is not implemented.

The header file is intended to be included in other C source files, providing a consistent interface for saturating arithmetic operations across a codebase. The functions use built-in overflow detection mechanisms, such as `__builtin_uaddl_overflow`, to determine if an overflow occurs and adjust the result accordingly. The code also includes placeholder implementations for `double` operations, indicating that further specification or optimization may be needed. The use of conditional compilation with `FD_HAS_INT128` allows for optional support of 128-bit integer operations, depending on the platform's capabilities.
# Imports and Dependencies

---
- `fd_bits.h`


# Functions

---
### fd\_uint128\_sat\_add<!-- {{#callable:__uint128_t::fd_uint128_sat_add}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L20>)

Performs a saturating addition of two 128-bit unsigned integers, returning the maximum value if overflow occurs.
- **Inputs**:
    - `x`: The first 128-bit unsigned integer to add.
    - `y`: The second 128-bit unsigned integer to add.
- **Logic and Control Flow**:
    - Calculate the sum of `x` and `y` and store it in `res`.
    - Check if the result `res` is less than `x`, indicating an overflow.
    - If overflow is detected, return `UINT128_MAX`; otherwise, return `res`.
- **Output**: Returns the result of the addition, or `UINT128_MAX` if the addition overflows.


---
### fd\_uint128\_sat\_mul<!-- {{#callable:__uint128_t::fd_uint128_sat_mul}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L26>)

Performs multiplication of two 128-bit unsigned integers with saturation to prevent overflow.
- **Inputs**:
    - `x`: The first 128-bit unsigned integer operand.
    - `y`: The second 128-bit unsigned integer operand.
- **Logic and Control Flow**:
    - Calculate the product of `x` and `y` and store it in `res`.
    - Check for overflow by verifying if `x` and `y` are non-zero and if `res` is less than either `x` or `y`, or if dividing `res` by `x` does not equal `y`.
    - If overflow is detected, return `UINT128_MAX`; otherwise, return `res`.
- **Output**: Returns the product of `x` and `y` if no overflow occurs; otherwise, returns `UINT128_MAX` to indicate saturation.


---
### fd\_uint128\_sat\_sub<!-- {{#callable:__uint128_t::fd_uint128_sat_sub}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L33>)

Performs a saturating subtraction of two 128-bit unsigned integers, returning zero if the result would be negative.
- **Inputs**:
    - `x`: The minuend, a 128-bit unsigned integer.
    - `y`: The subtrahend, a 128-bit unsigned integer.
- **Logic and Control Flow**:
    - Calculate the result of subtracting `y` from `x` and store it in `res`.
    - Check if `res` is greater than `x`, which indicates an underflow occurred.
    - If underflow is detected, return 0; otherwise, return `res`.
- **Output**: Returns the result of the subtraction if no underflow occurs; otherwise, returns 0.


---
### fd\_ulong\_sat\_add<!-- {{#callable:fd_ulong_sat_add}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L41>)

Performs saturating addition on two unsigned long integers, returning the maximum value if overflow occurs.
- **Inputs**:
    - `x`: The first unsigned long integer to add.
    - `y`: The second unsigned long integer to add.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the addition.
    - Use the built-in function `__builtin_uaddl_overflow` to add `x` and `y`, storing the result in `res` and checking for overflow, which is indicated by the variable `cf`.
    - If overflow occurs (`cf` is non-zero), return `ULONG_MAX`; otherwise, return the result `res`.
- **Output**: Returns the result of the addition if no overflow occurs; otherwise, returns `ULONG_MAX`.


---
### fd\_ulong\_sat\_mul<!-- {{#callable:fd_ulong_sat_mul}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L48>)

Performs multiplication of two unsigned long integers with saturation at the maximum value if overflow occurs.
- **Inputs**:
    - `x`: The first unsigned long integer to multiply.
    - `y`: The second unsigned long integer to multiply.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the multiplication.
    - Use the `__builtin_umull_overflow` function to multiply `x` and `y`, storing the result in `res` and checking for overflow, which sets `cf` to a non-zero value if overflow occurs.
    - Return the result of `fd_ulong_if`, which returns `ULONG_MAX` if `cf` is non-zero (indicating overflow), otherwise returns `res`.
- **Output**: Returns the product of `x` and `y`, or `ULONG_MAX` if the multiplication overflows.


---
### fd\_ulong\_sat\_sub<!-- {{#callable:fd_ulong_sat_sub}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L55>)

Performs a saturating subtraction of two unsigned long integers, returning zero if an underflow occurs.
- **Inputs**:
    - `x`: The minuend, an unsigned long integer.
    - `y`: The subtrahend, an unsigned long integer.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the subtraction.
    - Use the `__builtin_usubl_overflow` function to subtract `y` from `x`, storing the result in `res` and checking for underflow.
    - If underflow occurs (`cf` is non-zero), return 0UL; otherwise, return the result `res`.
- **Output**: An unsigned long integer representing the result of the subtraction, or zero if underflow occurs.


---
### fd\_long\_sat\_add<!-- {{#callable:fd_long_sat_add}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L62>)

Performs a saturating addition of two long integers, returning the maximum or minimum value if overflow occurs.
- **Inputs**:
    - `x`: The first operand of type `long`.
    - `y`: The second operand of type `long`.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the addition.
    - Use `__builtin_saddl_overflow` to perform the addition of `x` and `y`, storing the result in `res` and checking for overflow, which sets `cf` to a non-zero value if overflow occurs.
    - If overflow is detected (`cf` is non-zero), determine the result based on the sign of `x` by shifting `x` right by 63 bits and adding `LONG_MAX` to it.
    - Return the result of the addition if no overflow occurs, or the calculated saturated value if overflow occurs.
- **Output**: Returns the result of the saturating addition as a `long` integer.


---
### fd\_long\_sat\_sub<!-- {{#callable:fd_long_sat_sub}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L74>)

Performs a saturating subtraction of two long integers, returning the result or the maximum/minimum long value if overflow occurs.
- **Inputs**:
    - `x`: The minuend, a long integer.
    - `y`: The subtrahend, a long integer.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the subtraction.
    - Use `__builtin_ssubl_overflow` to subtract `y` from `x`, storing the result in `res` and checking for overflow, which sets `cf`.
    - If overflow occurs (`cf` is non-zero), determine the result based on the sign of `x` by shifting `x` right by 63 bits and adding `LONG_MAX`.
    - If no overflow occurs, return `res`.
- **Output**: Returns the result of the subtraction if no overflow occurs; otherwise, returns the maximum or minimum long value based on the sign of `x`.


---
### fd\_uint\_sat\_add<!-- {{#callable:fd_uint_sat_add}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L83>)

Performs saturating addition on two unsigned integers, returning the maximum value if overflow occurs.
- **Inputs**:
    - `x`: The first unsigned integer to add.
    - `y`: The second unsigned integer to add.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the addition.
    - Use the built-in function `__builtin_uadd_overflow` to add `x` and `y`, storing the result in `res` and checking for overflow.
    - If overflow occurs (`cf` is true), return `UINT_MAX`; otherwise, return `res`.
- **Output**: Returns the result of the addition, or `UINT_MAX` if overflow occurs.


---
### fd\_uint\_sat\_mul<!-- {{#callable:fd_uint_sat_mul}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L90>)

Performs multiplication of two unsigned integers with saturation at the maximum value if overflow occurs.
- **Inputs**:
    - `x`: The first unsigned integer operand for multiplication.
    - `y`: The second unsigned integer operand for multiplication.
- **Logic and Control Flow**:
    - Declare a variable `res` to store the result of the multiplication.
    - Use the `__builtin_umul_overflow` function to multiply `x` and `y`, storing the result in `res` and checking for overflow.
    - If overflow occurs, `cf` is set to a non-zero value; otherwise, it is zero.
    - Return `UINT_MAX` if overflow occurred, otherwise return the result `res`.
- **Output**: Returns the product of `x` and `y` if no overflow occurs; otherwise, returns `UINT_MAX`.


---
### fd\_uint\_sat\_sub<!-- {{#callable:fd_uint_sat_sub}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L97>)

Performs saturating subtraction on two unsigned integers, returning zero if an underflow occurs.
- **Inputs**:
    - `x`: The minuend, an unsigned integer.
    - `y`: The subtrahend, an unsigned integer.
- **Logic and Control Flow**:
    - Use `__builtin_usub_overflow` to subtract `y` from `x` and store the result in `res`, while checking for underflow.
    - If underflow occurs (`cf` is true), return 0.
    - If no underflow occurs, return the result `res`.
- **Output**: An unsigned integer representing the result of the subtraction, or zero if underflow occurs.


---
### fd\_double\_sat\_add<!-- {{#callable:fd_double_sat_add}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L104>)

Performs addition of two double precision floating-point numbers without handling overflow or underflow.
- **Inputs**:
    - `x`: The first double precision floating-point number to add.
    - `y`: The second double precision floating-point number to add.
- **Logic and Control Flow**:
    - Adds the two input double precision floating-point numbers `x` and `y`.
- **Output**: Returns the result of adding `x` and `y` as a double precision floating-point number.


---
### fd\_double\_sat\_mul<!-- {{#callable:fd_double_sat_mul}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L110>)

Multiplies two double precision floating-point numbers without implementing saturation logic.
- **Inputs**:
    - `x`: The first double precision floating-point number to multiply.
    - `y`: The second double precision floating-point number to multiply.
- **Logic and Control Flow**:
    - Calculates the product of `x` and `y` using the multiplication operator `*`.
- **Output**: Returns the product of `x` and `y` as a double precision floating-point number.


---
### fd\_double\_sat\_sub<!-- {{#callable:fd_double_sat_sub}} -->
[View Source →](<../../../../../src/util/bits/fd_sat.h#L116>)

Subtracts two double precision floating-point numbers without handling overflow or underflow.
- **Inputs**:
    - `x`: The minuend, a double precision floating-point number.
    - `y`: The subtrahend, a double precision floating-point number.
- **Logic and Control Flow**:
    - Subtracts `y` from `x`.
- **Output**: The result of the subtraction `x - y`, as a double precision floating-point number.



---
Made with ❤️ by [Driver](https://www.driver.ai/)