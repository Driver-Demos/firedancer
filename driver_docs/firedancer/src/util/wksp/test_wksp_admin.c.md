<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for workspace administration functions, including footprint, alignment, and error handling.

# Purpose
This code is a test suite for validating the functionality of a workspace management library. It is an executable C file that includes various tests to ensure the correct behavior of workspace operations such as estimating maximum partition and data sizes, checking alignment, calculating footprint, and managing workspace lifecycle operations like creation, joining, leaving, and deletion. The code uses a series of assertions and tests to verify that the functions return expected results under different conditions, including edge cases like invalid inputs and boundary values.

The code begins by setting up a testing environment, parsing command-line arguments to configure parameters such as `scratch_sz`, `name`, `seed`, `part_max`, and `data_max`. It then performs a series of tests on functions like `fd_wksp_part_max_est`, `fd_wksp_data_max_est`, `fd_wksp_align`, `fd_wksp_footprint`, `fd_wksp_new`, `fd_wksp_join`, `fd_wksp_leave`, and `fd_wksp_delete`. Each test checks for correct function behavior and error handling. The code also verifies the string representations of error codes using `fd_wksp_strerror`. The test suite ensures that the workspace management library functions as intended and handles various scenarios correctly.
# Imports and Dependencies

---
- `../fd_util.h`


# Global Variables

---
### scratch
- **Type**: ``uchar[]``
- **Description**: An array of unsigned characters with a maximum size defined by `SCRATCH_MAX`, which is 16384 bytes. The array is aligned according to `FD_WKSP_ALIGN`, which is 128 bytes.
- **Use**: Used as a workspace buffer for various operations, including memory alignment and workspace creation.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/wksp/test_wksp_admin.c#L13>)

Executes a series of tests on workspace functions using command-line arguments for configuration.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Extracts configuration values from command-line arguments using `fd_env_strip_cmdline_ulong` and `fd_env_strip_cmdline_cstr`.
    - Checks if `scratch_sz` exceeds `SCRATCH_MAX` and logs an error if true.
    - Logs the configuration values for testing purposes.
    - Performs a series of tests on `fd_wksp_part_max_est`, `fd_wksp_data_max_est`, `fd_wksp_align`, `fd_wksp_footprint`, `fd_wksp_new`, `fd_wksp_join`, `fd_wksp_leave`, `fd_wksp_delete`, and `fd_wksp_strerror` functions using `FD_TEST`.
    - Logs a success message if all tests pass.
    - Calls `fd_halt` to terminate the program.
- **Output**: Returns 0 upon successful execution.



---
Made with ❤️ by [Driver](https://www.driver.ai/)