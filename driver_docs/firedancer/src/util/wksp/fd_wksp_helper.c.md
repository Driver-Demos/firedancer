<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Helper functions for managing shared memory workspaces, including creation, deletion, and memory operations.

# Purpose
The code is a C source file that provides a set of functions for managing shared memory workspaces. It includes functions for creating, deleting, attaching, and detaching named and anonymous workspaces. The file defines several private helper functions, such as [`fd_wksp_private_join_func`](<#fd_wksp_private_join_func>) and [`fd_wksp_private_leave_func`](<#fd_wksp_private_leave_func>), which are used internally to manage the joining and leaving of shared memory regions. The code also includes functions for handling workspace-related operations, such as allocating and freeing memory within a workspace, and converting between global and local addresses.

The file defines public APIs for interacting with workspaces, including [`fd_wksp_new_named`](<#fd_wksp_new_named>), [`fd_wksp_delete_named`](<#fd_wksp_delete_named>), [`fd_wksp_attach`](<#fd_wksp_attach>), and [`fd_wksp_detach`](<#fd_wksp_detach>). These functions allow users to create and manage shared memory regions, providing a mechanism for inter-process communication. Additionally, the code includes functions for working with C-style strings (`cstr`) that represent workspace names and addresses, such as [`fd_wksp_cstr`](<#fd_wksp_cstr>) and `fd_wksp_cstr_parse`. The file also provides helper functions for working with pods, which are data structures stored in shared memory, allowing for the attachment, detachment, mapping, and unmapping of pods.
# Imports and Dependencies

---
- `fd_wksp_private.h`
- `../pod/fd_pod.h`


# Functions

---
### fd\_wksp\_private\_join\_func<!-- {{#callable:fd_wksp_private_join_func}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L7>)

Joins a shared memory region using the provided join information.
- **Inputs**:
    - `context`: A pointer to a context, which is not used in this function.
    - `info`: A pointer to a `fd_shmem_join_info_t` structure containing information about the shared memory to join.
- **Logic and Control Flow**:
    - Ignores the `context` parameter as it is not used.
    - Calls [`fd_wksp_join`](<fd_wksp_admin.c.md#fd_wksp_join>) with the `shmem` field from the `info` structure to join the shared memory region.
    - Returns the result of the [`fd_wksp_join`](<fd_wksp_admin.c.md#fd_wksp_join>) function call.
- **Output**: A pointer to the joined shared memory region, as returned by [`fd_wksp_join`](<fd_wksp_admin.c.md#fd_wksp_join>).
- **Functions Called**:
    - [`fd_wksp_join`](<fd_wksp_admin.c.md#fd_wksp_join>)


---
### fd\_wksp\_private\_leave\_func<!-- {{#callable:fd_wksp_private_leave_func}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L14>)

Calls [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>) with the `join` field from the `info` structure to leave a workspace.
- **Inputs**:
    - `context`: A pointer to a context, which is not used in this function.
    - `info`: A pointer to a `fd_shmem_join_info_t` structure containing information about the shared memory join, specifically the `join` field.
- **Logic and Control Flow**:
    - Ignores the `context` parameter by casting it to void.
    - Calls the [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>) function with `info->join` as the argument.
    - Returns the result of the [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>) function call.
- **Output**: Returns a pointer, which is the result of the [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>) function call.
- **Functions Called**:
    - [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>)


---
### fd\_wksp\_private\_cstr<!-- {{#callable:fd_wksp_private_cstr}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L25>)

Populates the `cstr` with a formatted string containing the `name` and `gaddr` separated by a colon.
- **Inputs**:
    - `name`: A constant character pointer representing the workspace shared memory name.
    - `gaddr`: An unsigned long integer representing the global address.
    - `cstr`: A character pointer where the formatted string will be stored.
- **Logic and Control Flow**:
    - Initialize the `cstr` using `fd_cstr_init`.
    - Append the `name` to `cstr` using `fd_cstr_append_cstr`.
    - Append a colon ':' to `cstr` using `fd_cstr_append_char`.
    - Append the `gaddr` as text to `cstr` using `fd_cstr_append_ulong_as_text`, with the number of digits determined by `fd_ulong_base10_dig_cnt`.
    - Finalize the `cstr` using `fd_cstr_fini`.
- **Output**: Returns the pointer to the `cstr` containing the formatted string.


---
### fd\_wksp\_private\_cstr\_parse<!-- {{#callable:fd_wksp_private_cstr_parse}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L39>)

Parses a string in the format '[name]:[gaddr]' to extract the name and gaddr components.
- **Inputs**:
    - `cstr`: A constant character pointer to the string to parse.
    - `name`: A character pointer with space for `FD_SHMEM_NAME_MAX` bytes, which will hold the extracted name on success.
    - `gaddr`: A pointer to an unsigned long, which will hold the extracted gaddr on success.
- **Logic and Control Flow**:
    - Check if `cstr` is NULL and log a warning if true, then return NULL.
    - Initialize `len` to 0 and `name_len` to `ULONG_MAX`.
    - Iterate over `cstr` to find the length of the string and the position of the ':' character, updating `name_len` accordingly.
    - Calculate `gaddr_len` as the difference between the total length and `name_len` minus one.
    - Check for various error conditions: missing name, missing ':', missing gaddr, and name length exceeding `FD_SHMEM_NAME_MAX`, logging warnings and returning NULL if any are true.
    - Copy the name part of `cstr` into `name` and null-terminate it.
    - Convert the gaddr part of `cstr` to an unsigned long and store it in `gaddr`.
    - Return `name` on success.
- **Output**: Returns the `name` on success, or NULL on failure, logging details of the failure.


---
### fd\_ulong\_sum\_sat<!-- {{#callable:fd_ulong_sum_sat}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L89>)

Computes the sum of an array of unsigned long integers, saturating at `ULONG_MAX` if overflow occurs.
- **Inputs**:
    - `cnt`: The number of elements in the array `x` to sum.
    - `x`: A pointer to an array of unsigned long integers to be summed.
- **Logic and Control Flow**:
    - Initialize `sum` to 0 and `ovfl` (overflow flag) to 0.
    - Iterate over each element in the array `x` up to `cnt`.
    - For each element, add it to `sum` and store the result in `tmp`.
    - Check if `tmp` is less than `sum` to detect overflow and set `ovfl` accordingly.
    - Update `sum` with the value of `tmp`.
    - After the loop, return `ULONG_MAX` if overflow occurred (`ovfl` is true), otherwise return `sum`.
- **Output**: Returns the sum of the array elements, or `ULONG_MAX` if the sum overflows.


---
### fd\_wksp\_new\_named<!-- {{#callable:fd_wksp_new_named}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L102>)

Creates a new named workspace in shared memory with specified parameters and configurations.
- **Inputs**:
    - `name`: A constant character pointer representing the name of the shared memory region.
    - `page_sz`: An unsigned long representing the size of each page in the shared memory.
    - `sub_cnt`: An unsigned long representing the number of subregions in the shared memory.
    - `sub_page_cnt`: A constant unsigned long pointer representing the number of pages in each subregion.
    - `sub_cpu_idx`: A constant unsigned long pointer representing the CPU indices for each subregion.
    - `mode`: An unsigned long representing the mode for creating the shared memory.
    - `seed`: An unsigned integer used as a seed for workspace initialization.
    - `part_max`: An unsigned long representing the maximum number of partitions; if zero, it will be estimated.
- **Logic and Control Flow**:
    - Check if the input arguments are valid, logging warnings and returning `FD_WKSP_ERR_INVAL` if any are invalid.
    - Calculate the total number of pages using [`fd_ulong_sum_sat`](<#fd_ulong_sum_sat>) and check for overflow, logging warnings and returning `FD_WKSP_ERR_INVAL` if invalid.
    - Calculate the footprint of the workspace and estimate `part_max` if it is zero, logging warnings and returning `FD_WKSP_ERR_INVAL` if estimation fails.
    - Estimate `data_max` and check if it is valid, logging warnings and returning `FD_WKSP_ERR_INVAL` if invalid.
    - Create the shared memory region using `fd_shmem_create_multi`, logging details and returning `FD_WKSP_ERR_FAIL` if creation fails.
    - Join the shared memory region using `fd_shmem_join`, logging details and unlinking the memory if joining fails, returning `FD_WKSP_ERR_FAIL`.
    - Format the joined memory region as a workspace using [`fd_wksp_new`](<fd_wksp_admin.c.md#fd_wksp_new>), logging details and unlinking and leaving the memory if formatting fails, returning `FD_WKSP_ERR_FAIL`.
    - Leave the shared memory region using `fd_shmem_leave`, logging details.
    - Return `FD_WKSP_SUCCESS` if all operations succeed.
- **Output**: Returns an integer status code: `FD_WKSP_SUCCESS` on success, `FD_WKSP_ERR_INVAL` for invalid input, or `FD_WKSP_ERR_FAIL` for failure in creating or joining the memory region.
- **Functions Called**:
    - [`fd_ulong_sum_sat`](<#fd_ulong_sum_sat>)
    - [`fd_wksp_part_max_est`](<fd_wksp_admin.c.md#fd_wksp_part_max_est>)
    - [`fd_wksp_data_max_est`](<fd_wksp_admin.c.md#fd_wksp_data_max_est>)
    - [`fd_wksp_new`](<fd_wksp_admin.c.md#fd_wksp_new>)


---
### fd\_wksp\_delete\_named<!-- {{#callable:fd_wksp_delete_named}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L169>)

Deletes a named shared memory workspace by joining, deleting, and unlinking it.
- **Inputs**:
    - `name`: A constant character pointer representing the name of the shared memory workspace to delete.
- **Logic and Control Flow**:
    - Join the shared memory region using `fd_shmem_join` with read-write mode and retrieve the page size from `info`.
    - Check if the join operation was successful; if not, return `FD_WKSP_ERR_FAIL`.
    - Attempt to delete the workspace using [`fd_wksp_delete`](<fd_wksp_admin.c.md#fd_wksp_delete>); if unsuccessful, leave the shared memory and return `FD_WKSP_ERR_FAIL`.
    - Attempt to unlink the shared memory using `fd_shmem_unlink`; if unsuccessful, leave the shared memory and return `FD_WKSP_ERR_FAIL`.
    - Leave the shared memory using `fd_shmem_leave` after successful unlinking.
    - Return `FD_WKSP_SUCCESS` to indicate successful deletion.
- **Output**: Returns an integer status code: `FD_WKSP_SUCCESS` on success or `FD_WKSP_ERR_FAIL` on failure.
- **Functions Called**:
    - [`fd_wksp_delete`](<fd_wksp_admin.c.md#fd_wksp_delete>)


---
### fd\_wksp\_new\_anon<!-- {{#callable:fd_wksp_new_anon}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L195>)

Creates and initializes an anonymous workspace with specified parameters and returns a pointer to it.
- **Inputs**:
    - `name`: A constant character pointer representing the name of the workspace.
    - `page_sz`: An unsigned long representing the size of each page.
    - `sub_cnt`: An unsigned long representing the number of sub-pages.
    - `sub_page_cnt`: A constant unsigned long pointer representing the count of sub-pages for each sub-page.
    - `sub_cpu_idx`: A constant unsigned long pointer representing the CPU index for each sub-page.
    - `seed`: An unsigned integer used for seeding the workspace.
    - `part_max`: An unsigned long representing the maximum number of partitions; if zero, it is estimated.
- **Logic and Control Flow**:
    - Checks the validity of input arguments such as `name`, `page_sz`, `sub_cnt`, `sub_page_cnt`, and `sub_cpu_idx` and logs warnings if any are invalid.
    - Calculates the total number of pages using [`fd_ulong_sum_sat`](<#fd_ulong_sum_sat>) and checks for overflow conditions.
    - Determines the footprint of the workspace and estimates `part_max` if it is not provided.
    - Estimates the maximum data size `data_max` and checks if it is valid.
    - Acquires shared memory pages using `fd_shmem_acquire_multi` and logs details.
    - Formats the acquired memory as a workspace using [`fd_wksp_new`](<fd_wksp_admin.c.md#fd_wksp_new>) and logs details.
    - Joins the newly created workspace using [`fd_wksp_join`](<fd_wksp_admin.c.md#fd_wksp_join>) and logs details.
    - Registers the join with `fd_shmem_join_anonymous` and logs details.
    - Returns the pointer to the workspace if all operations are successful.
- **Output**: Returns a pointer to the newly created `fd_wksp_t` workspace, or `NULL` if any step fails.
- **Functions Called**:
    - [`fd_ulong_sum_sat`](<#fd_ulong_sum_sat>)
    - [`fd_wksp_part_max_est`](<fd_wksp_admin.c.md#fd_wksp_part_max_est>)
    - [`fd_wksp_data_max_est`](<fd_wksp_admin.c.md#fd_wksp_data_max_est>)
    - [`fd_wksp_new`](<fd_wksp_admin.c.md#fd_wksp_new>)
    - [`fd_wksp_join`](<fd_wksp_admin.c.md#fd_wksp_join>)
    - [`fd_wksp_delete`](<fd_wksp_admin.c.md#fd_wksp_delete>)
    - [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>)


---
### fd\_wksp\_delete\_anon<!-- {{#callable:fd_wksp_delete_anon}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L266>)

Deletes an anonymous workspace and releases its associated shared memory resources.
- **Inputs**:
    - ``wksp``: A pointer to the `fd_wksp_t` structure representing the anonymous workspace to delete.
- **Logic and Control Flow**:
    - Declare a `fd_shmem_join_info_t` array named `info` with one element to store shared memory information.
    - Call `fd_shmem_leave_anonymous` with `wksp` and `info` to leave the anonymous shared memory; if it returns a non-zero value, exit the function.
    - Call [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>) with `wksp` to leave the workspace and pass its result to [`fd_wksp_delete`](<fd_wksp_admin.c.md#fd_wksp_delete>) to delete the workspace.
    - Call `fd_shmem_release` with the result of [`fd_wksp_delete`](<fd_wksp_admin.c.md#fd_wksp_delete>), `info->page_sz`, and `info->page_cnt` to release the shared memory resources.
- **Output**: No return value; the function performs its operations directly on the provided workspace and shared memory resources.
- **Functions Called**:
    - [`fd_wksp_delete`](<fd_wksp_admin.c.md#fd_wksp_delete>)
    - [`fd_wksp_leave`](<fd_wksp_admin.c.md#fd_wksp_leave>)


---
### fd\_wksp\_attach<!-- {{#callable:fd_wksp_attach}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L273>)

Attaches to a shared memory workspace with read-write access using a specified name.
- **Inputs**:
    - `name`: A constant character pointer representing the name of the shared memory workspace to attach to.
- **Logic and Control Flow**:
    - Calls `fd_shmem_join` with the provided `name`, `FD_SHMEM_JOIN_MODE_READ_WRITE` mode, and `fd_wksp_private_join_func` as the join function.
    - Returns the result of the `fd_shmem_join` cast to `fd_wksp_t *`.
- **Output**: A pointer to `fd_wksp_t`, representing the attached workspace, or `NULL` if the attachment fails.


---
### fd\_wksp\_detach<!-- {{#callable:fd_wksp_detach}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L279>)

Detaches a workspace by leaving the shared memory region associated with it.
- **Inputs**:
    - `wksp`: A pointer to the `fd_wksp_t` workspace to detach.
- **Logic and Control Flow**:
    - Checks if the `wksp` pointer is NULL; if so, logs a warning and returns 1.
    - Calls `fd_shmem_leave` with the `wksp`, `fd_wksp_private_leave_func`, and NULL as arguments to leave the shared memory region.
    - Returns the result of the `fd_shmem_leave` function call.
- **Output**: Returns an integer indicating success (0) or failure (1) of the detachment process.


---
### fd\_wksp\_containing<!-- {{#callable:fd_wksp_containing}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L288>)

Finds and returns the workspace containing a given local address.
- **Inputs**:
    - `laddr`: A constant pointer to a local address to query.
- **Logic and Control Flow**:
    - Check if `laddr` is NULL; if so, return NULL.
    - Call `fd_shmem_join_query_by_addr` with `laddr` to get join information; if it fails, return NULL.
    - Cast the `join` field of `info` to `fd_wksp_t *` and assign it to `wksp`; if `wksp` is NULL, return NULL.
    - Check if `wksp->magic` is equal to `FD_WKSP_MAGIC`; if not, return NULL.
    - Return `wksp`.
- **Output**: A pointer to the `fd_wksp_t` structure representing the workspace containing the given local address, or NULL if not found or invalid.


---
### fd\_wksp\_alloc\_laddr<!-- {{#callable:fd_wksp_alloc_laddr}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L303>)

Allocates memory in a workspace and returns its local address.
- **Inputs**:
    - ``wksp``: A pointer to the workspace (`fd_wksp_t`) where memory is allocated.
    - ``align``: The alignment requirement for the memory allocation.
    - ``sz``: The size of the memory to allocate.
    - ``tag``: A tag associated with the memory allocation.
- **Logic and Control Flow**:
    - Call [`fd_wksp_alloc`](<fd_wksp.h.md#fd_wksp_alloc>) with `wksp`, `align`, `sz`, and `tag` to allocate memory and get a global address (`gaddr`).
    - Check if `gaddr` is zero, indicating allocation failure, and return `NULL` if so.
    - Convert the global address `gaddr` to a local address using [`fd_wksp_laddr_fast`](<fd_wksp.h.md#fd_wksp_laddr_fast>) and return it.
- **Output**: Returns a pointer to the allocated memory's local address, or `NULL` if allocation fails.
- **Functions Called**:
    - [`fd_wksp_alloc`](<fd_wksp.h.md#fd_wksp_alloc>)
    - [`fd_wksp_laddr_fast`](<fd_wksp.h.md#fd_wksp_laddr_fast>)


---
### fd\_wksp\_free\_laddr<!-- {{#callable:fd_wksp_free_laddr}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L313>)

Frees a local address from a workspace if it is valid and belongs to a workspace.
- **Inputs**:
    - `laddr`: A pointer to the local address to be freed.
- **Logic and Control Flow**:
    - Check if `laddr` is NULL; if so, return immediately.
    - Determine the workspace containing `laddr` using [`fd_wksp_containing`](<#fd_wksp_containing>); if no workspace is found, log a warning and return.
    - Calculate the global address `gaddr` using [`fd_wksp_gaddr_fast`](<fd_wksp.h.md#fd_wksp_gaddr_fast>); if `gaddr` is not within the valid range of the workspace, log a warning and return.
    - Call [`fd_wksp_free`](<fd_wksp_user.c.md#fd_wksp_free>) to free the address in the workspace.
- **Output**: No output is returned.
- **Functions Called**:
    - [`fd_wksp_containing`](<#fd_wksp_containing>)
    - [`fd_wksp_gaddr_fast`](<fd_wksp.h.md#fd_wksp_gaddr_fast>)
    - [`fd_wksp_free`](<fd_wksp_user.c.md#fd_wksp_free>)


---
### fd\_wksp\_cstr<!-- {{#callable:fd_wksp_cstr}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L334>)

Converts a workspace and global address into a formatted string representation.
- **Inputs**:
    - ``wksp``: A pointer to a constant `fd_wksp_t` structure representing the workspace.
    - ``gaddr``: An unsigned long integer representing the global address within the workspace.
    - ``cstr``: A pointer to a character array where the resulting string will be stored.
- **Logic and Control Flow**:
    - Check if `cstr` is NULL; if so, log a warning and return NULL.
    - Check if `wksp` is NULL; if so, log a warning and return NULL.
    - Verify if `gaddr` is either zero or within the range defined by `wksp->gaddr_lo` and `wksp->gaddr_hi`; if not, log a warning and return NULL.
    - Call [`fd_wksp_private_cstr`](<#fd_wksp_private_cstr>) with `wksp->name`, `gaddr`, and `cstr` to populate `cstr` with the formatted string.
- **Output**: Returns a pointer to the `cstr` containing the formatted string, or NULL if an error occurs.
- **Functions Called**:
    - [`fd_wksp_private_cstr`](<#fd_wksp_private_cstr>)


---
### fd\_wksp\_cstr\_laddr<!-- {{#callable:fd_wksp_cstr_laddr}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L349>)

Converts a local address to a workspace string representation if valid.
- **Inputs**:
    - `laddr`: A pointer to the local address to convert.
    - `cstr`: A pointer to a character array where the resulting string will be stored.
- **Logic and Control Flow**:
    - Check if `cstr` is NULL; if so, log a warning and return NULL.
    - Determine the workspace containing `laddr` using [`fd_wksp_containing`](<#fd_wksp_containing>); if not found, log a warning and return NULL.
    - Calculate the global address `gaddr` using [`fd_wksp_gaddr_fast`](<fd_wksp.h.md#fd_wksp_gaddr_fast>); if `gaddr` is not within valid range, log a warning and return 0UL.
    - Call [`fd_wksp_private_cstr`](<#fd_wksp_private_cstr>) to populate `cstr` with the workspace name and `gaddr`, and return `cstr`.
- **Output**: Returns the `cstr` containing the workspace name and global address, or NULL/0UL on failure.
- **Functions Called**:
    - [`fd_wksp_containing`](<#fd_wksp_containing>)
    - [`fd_wksp_gaddr_fast`](<fd_wksp.h.md#fd_wksp_gaddr_fast>)
    - [`fd_wksp_private_cstr`](<#fd_wksp_private_cstr>)


---
### fd\_wksp\_cstr\_alloc<!-- {{#callable:fd_wksp_cstr_alloc}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L369>)

Allocates memory in a workspace and returns a C-string representation of the allocation.
- **Inputs**:
    - `name`: The name of the workspace to attach to.
    - `align`: The alignment requirement for the memory allocation.
    - `sz`: The size of the memory to allocate.
    - `tag`: A tag to associate with the allocation.
    - `cstr`: A pointer to a character array where the C-string representation will be stored.
- **Logic and Control Flow**:
    - Check if `cstr` is NULL and log a warning if true, then return NULL.
    - Attach to the workspace using [`fd_wksp_attach`](<#fd_wksp_attach>) with the given `name`.
    - If the workspace attachment fails, return NULL.
    - Allocate memory in the workspace with [`fd_wksp_alloc`](<fd_wksp.h.md#fd_wksp_alloc>) using `align`, `sz`, and `tag`.
    - If allocation fails and `sz` is non-zero, detach from the workspace and return NULL.
    - Detach from the workspace after allocation.
    - Return the C-string representation of the allocation using [`fd_wksp_private_cstr`](<#fd_wksp_private_cstr>).
- **Output**: Returns a pointer to the C-string representation of the allocation, or NULL if an error occurs.
- **Functions Called**:
    - [`fd_wksp_attach`](<#fd_wksp_attach>)
    - [`fd_wksp_alloc`](<fd_wksp.h.md#fd_wksp_alloc>)
    - [`fd_wksp_detach`](<#fd_wksp_detach>)
    - [`fd_wksp_private_cstr`](<#fd_wksp_private_cstr>)


---
### fd\_wksp\_cstr\_free<!-- {{#callable:fd_wksp_cstr_free}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L394>)

Frees a workspace resource identified by a C-string containing a name and global address.
- **Inputs**:
    - `cstr`: A constant character pointer representing a C-string in the format '[name]:[gaddr]'.
- **Logic and Control Flow**:
    - Parse the input `cstr` to extract the workspace name and global address using [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>).
    - If parsing fails, exit the function.
    - Attach to the workspace using the extracted name with [`fd_wksp_attach`](<#fd_wksp_attach>).
    - If attachment fails, exit the function.
    - Free the resource at the global address in the workspace using [`fd_wksp_free`](<fd_wksp_user.c.md#fd_wksp_free>).
    - Detach from the workspace using [`fd_wksp_detach`](<#fd_wksp_detach>).
- **Output**: No output is returned; the function performs operations to free resources and logs details internally.
- **Functions Called**:
    - [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>)
    - [`fd_wksp_attach`](<#fd_wksp_attach>)
    - [`fd_wksp_free`](<fd_wksp_user.c.md#fd_wksp_free>)
    - [`fd_wksp_detach`](<#fd_wksp_detach>)


---
### fd\_wksp\_cstr\_tag<!-- {{#callable:fd_wksp_cstr_tag}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L408>)

Extracts a tag from a workspace using a given C-string that encodes a workspace name and global address.
- **Inputs**:
    - `cstr`: A constant character pointer representing a C-string in the format '[name]:[gaddr]' where 'name' is the workspace name and 'gaddr' is the global address.
- **Logic and Control Flow**:
    - Declare a character array `name` with size `FD_SHMEM_NAME_MAX` and an unsigned long `gaddr`.
    - Call [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>) to parse `cstr` into `name` and `gaddr`. If parsing fails, return 0UL.
    - Attach to the workspace using [`fd_wksp_attach`](<#fd_wksp_attach>) with `name`. If attachment fails, return 0UL.
    - Retrieve the tag using [`fd_wksp_tag`](<fd_wksp_user.c.md#fd_wksp_tag>) with the attached workspace and `gaddr`.
    - Detach from the workspace using [`fd_wksp_detach`](<#fd_wksp_detach>).
    - Return the retrieved tag.
- **Output**: Returns an unsigned long representing the tag associated with the given workspace and global address, or 0UL if any step fails.
- **Functions Called**:
    - [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>)
    - [`fd_wksp_attach`](<#fd_wksp_attach>)
    - [`fd_wksp_tag`](<fd_wksp_user.c.md#fd_wksp_tag>)
    - [`fd_wksp_detach`](<#fd_wksp_detach>)


---
### fd\_wksp\_cstr\_memset<!-- {{#callable:fd_wksp_cstr_memset}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L424>)

Sets a memory region in a workspace to a specified value using a C-string to identify the region.
- **Inputs**:
    - ``cstr``: A constant character string that specifies the workspace name and global address in the format `[name]:[gaddr]`.
    - ``c``: An integer value to set in the specified memory region.
- **Logic and Control Flow**:
    - Parse the `cstr` to extract the workspace name and global address using [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>).
    - If parsing fails, return immediately.
    - Attach to the workspace using [`fd_wksp_attach`](<#fd_wksp_attach>) with the parsed name.
    - If attachment fails, return immediately.
    - Set the memory region at the global address in the workspace to the value `c` using [`fd_wksp_memset`](<fd_wksp_user.c.md#fd_wksp_memset>).
    - Detach from the workspace using [`fd_wksp_detach`](<#fd_wksp_detach>).
- **Output**: No output is returned; the function performs operations directly on the workspace.
- **Functions Called**:
    - [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>)
    - [`fd_wksp_attach`](<#fd_wksp_attach>)
    - [`fd_wksp_memset`](<fd_wksp_user.c.md#fd_wksp_memset>)
    - [`fd_wksp_detach`](<#fd_wksp_detach>)


---
### fd\_wksp\_map<!-- {{#callable:fd_wksp_map}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L439>)

Maps a workspace global address to a local address using a given string representation of the workspace and address.
- **Inputs**:
    - `cstr`: A string containing the workspace name and global address in the format '[name]:[gaddr]'.
- **Logic and Control Flow**:
    - Parse the input string `cstr` to extract the workspace name and global address using [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>).
    - If parsing fails, return `NULL`.
    - Attach to the workspace using [`fd_wksp_attach`](<#fd_wksp_attach>) with the extracted name.
    - If attachment fails, return `NULL`.
    - Convert the global address to a local address using [`fd_wksp_laddr`](<fd_wksp_user.c.md#fd_wksp_laddr>).
    - If conversion fails, detach from the workspace using [`fd_wksp_detach`](<#fd_wksp_detach>) and return `NULL`.
    - Return the local address.
- **Output**: Returns a pointer to the local address corresponding to the global address in the workspace, or `NULL` if any step fails.
- **Functions Called**:
    - [`fd_wksp_private_cstr_parse`](<#fd_wksp_private_cstr_parse>)
    - [`fd_wksp_attach`](<#fd_wksp_attach>)
    - [`fd_wksp_laddr`](<fd_wksp_user.c.md#fd_wksp_laddr>)
    - [`fd_wksp_detach`](<#fd_wksp_detach>)


---
### fd\_wksp\_unmap<!-- {{#callable:fd_wksp_unmap}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L460>)

Unmaps a local address from a workspace, detaching it if necessary.
- **Inputs**:
    - `laddr`: A constant pointer to the local address to unmap.
- **Logic and Control Flow**:
    - Checks if `laddr` is NULL and returns immediately if true, as NULL might not be an error case.
    - Queries the shared memory join information for the given `laddr` using `fd_shmem_join_query_by_addr`.
    - If the query fails, logs a warning that `laddr` does not seem to be from `fd_wksp_map` and returns.
    - Casts the join information to a `fd_wksp_t` pointer `wksp`.
    - If `wksp` is NULL, logs a warning about being called within `fd_wksp_join` or `fd_wksp_leave` and returns.
    - Calls [`fd_wksp_detach`](<#fd_wksp_detach>) on `wksp` to detach the workspace, logging details.
- **Output**: No output is returned.
- **Functions Called**:
    - [`fd_wksp_detach`](<#fd_wksp_detach>)


---
### fd\_wksp\_pod\_attach<!-- {{#callable:fd_wksp_pod_attach}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L485>)

Attaches to a workspace pod using a global address and returns a pointer to the pod.
- **Inputs**:
    - `gaddr`: A constant character pointer representing the global address of the pod to attach.
- **Logic and Control Flow**:
    - Checks if `gaddr` is NULL and logs an error if true.
    - Maps the global address `gaddr` to a local object pointer `obj` using [`fd_wksp_map`](<#fd_wksp_map>).
    - Checks if `obj` is NULL and logs an error if true.
    - Joins the pod using `fd_pod_join` with the mapped object `obj`.
    - Checks if the pod pointer `pod` is NULL and logs an error if true.
    - Returns the pod pointer `pod`.
- **Output**: Returns a constant unsigned character pointer to the attached pod.
- **Functions Called**:
    - [`fd_wksp_map`](<#fd_wksp_map>)


---
### fd\_wksp\_pod\_detach<!-- {{#callable:fd_wksp_pod_detach}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L498>)

Detaches a pod from the workspace by leaving the pod and unmapping the associated object.
- **Inputs**:
    - `pod`: A pointer to the pod to detach, which must not be NULL.
- **Logic and Control Flow**:
    - Checks if the `pod` is NULL and logs an error if it is.
    - Calls `fd_pod_leave` to leave the pod and obtain the associated object.
    - Checks if the object returned by `fd_pod_leave` is NULL and logs an error if it is.
    - Calls [`fd_wksp_unmap`](<#fd_wksp_unmap>) to unmap the object from the workspace.
- **Output**: No return value.
- **Functions Called**:
    - [`fd_wksp_unmap`](<#fd_wksp_unmap>)


---
### fd\_wksp\_pod\_map<!-- {{#callable:fd_wksp_pod_map}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L508>)

Maps a specified path within a pod to a local address space and returns the mapped object.
- **Inputs**:
    - `pod`: A pointer to the pod from which to map the path.
    - `path`: A string representing the path within the pod to map.
- **Logic and Control Flow**:
    - Check if `pod` is NULL and log an error if true.
    - Check if `path` is NULL and log an error if true.
    - Query the pod for the global address (`gaddr`) corresponding to the `path` using `fd_pod_query_cstr`.
    - If `gaddr` is NULL, log an error indicating the path was not found in the pod.
    - Map the `gaddr` to a local address space using [`fd_wksp_map`](<#fd_wksp_map>).
    - If the mapping fails, log an error indicating the failure to map the path into the local address space.
    - Return the mapped object.
- **Output**: A pointer to the mapped object in the local address space.
- **Functions Called**:
    - [`fd_wksp_map`](<#fd_wksp_map>)


---
### fd\_wksp\_pod\_unmap<!-- {{#callable:fd_wksp_pod_unmap}} -->
[View Source →](<../../../../../src/util/wksp/fd_wksp_helper.c#L523>)

Unmaps a previously mapped object from the workspace.
- **Inputs**:
    - `obj`: A pointer to the object to unmap; must not be NULL.
- **Logic and Control Flow**:
    - Checks if the `obj` is NULL and logs an error if it is.
    - Calls [`fd_wksp_unmap`](<#fd_wksp_unmap>) with `obj` to unmap the object from the workspace.
- **Output**: No return value.
- **Functions Called**:
    - [`fd_wksp_unmap`](<#fd_wksp_unmap>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)