<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements ultra high performance dynamic key-value maps with bounded runtime size and various operations.

# Purpose
The code defines a template for creating ultra-high-performance dynamic key-value maps with bounded runtime size in C. It provides a mechanism to declare and manage maps where keys are mapped to slots in a memory region, allowing for efficient insertion, removal, and querying of keys. The template is designed to be included in a compilation unit, generating static inline APIs for map operations. These operations include aligning and formatting memory for map usage, joining and leaving maps, inserting and removing keys, and querying map contents. The template supports customization through preprocessor directives, allowing users to define key and hash types, key equality and hashing functions, and optimization strategies for map queries.

The code is structured to facilitate the creation of different types of maps within a single compilation unit, making it suitable for header-only library usage. It includes private and public APIs, with private functions handling internal map operations and public functions providing the interface for map manipulation. The template supports non-POD (Plain Old Data) C++ structs by allowing customization of key movement and map entry cleanup. The code also includes options for memoization to accelerate operations involving slow key comparisons. The template is designed to handle keys efficiently, with operations optimized for low fill ratios and customizable query optimization strategies.
# Imports and Dependencies

---
- `../bits/fd_bits.h`
- `stddef.h`
- `../log/fd_log.h`


# Functions

---
### MAP\_<!-- {{#callable:MAP_}} -->
[View Source →](<../../../../../src/util/tmpl/fd_map_dynamic.c#L483>)

Searches for a key in a map and returns the corresponding map slot or a null value if the key is not found.
- **Inputs**:
    - `map`: A pointer to the map where the function will search for the key.
    - `key`: The key to search for in the map.
    - `null`: A pointer to return if the key is not found in the map.
- **Logic and Control Flow**:
    - Check if the key is invalid and log a critical error if so (only if handholding is enabled).
    - Calculate the slot mask from the map's private structure.
    - Compute the hash of the key.
    - Determine the starting slot for linear probing using the hash and slot mask.
    - Enter a loop to search for the key in the map.
    - In each iteration, check if the current slot's key matches the search key using a defined macro for key equality.
    - If the key is found, break the loop and return the current map slot.
    - If the current slot is empty, set the map slot to null and break the loop (for optimization option 0) or return null immediately (for options 1 and 2).
    - If the key is not found and the slot is not empty, move to the next slot using linear probing.
    - Continue the loop until the key is found or an empty slot is encountered.
- **Output**: A pointer to the map slot containing the key if found, or the provided null pointer if the key is not found.
- **Functions Called**:
    - [`MAP_`](<#map_>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)