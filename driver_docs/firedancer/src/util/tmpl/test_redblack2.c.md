<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Unit tests for red-black tree operations, including insertion, deletion, and permutation tests.

# Purpose
The code is a C program that implements and tests a red-black tree data structure. A red-black tree is a type of self-balancing binary search tree. The program defines a structure `rbnode` to represent nodes in the tree, with fields for the key, parent, left and right children, and color. The code includes functions for creating, destroying, finding, inserting, and deleting nodes in the tree. It also includes a series of unit tests to verify the correctness of these operations.

The program is structured to perform various unit tests on the red-black tree operations, such as insertion, deletion, and finding nodes. The [`main`](<#main>) function initializes the environment, sets up a memory pool for the tree nodes, and runs all the tests defined in the [`all_tests`](<#all_tests>) function. The tests include checking the creation of the tree, finding nodes, verifying the successor of nodes, and testing atomic and chain insertions and deletions. The code also includes functions for generating permutations of node insertions and deletions to test the robustness of the tree operations. The results of the tests are logged, and any failures are reported.
# Imports and Dependencies

---
- `stdio.h`
- `string.h`
- `stdlib.h`
- `time.h`
- `limits.h`
- `assert.h`
- `../fd_util.h`
- `fd_redblack.c`


# Global Variables

---
### mu\_tests
- **Type**: ``int``
- **Description**: A global integer variable that counts the number of unit tests executed.
- **Use**: Tracks the total number of unit tests run in the program.


---
### mu\_fails
- **Type**: ``int``
- **Description**: Counts the number of unit tests that have failed during the execution of the test suite.
- **Use**: Increments each time a unit test fails, providing a total count of failed tests.


---
### permutation\_error
- **Type**: ``int``
- **Description**: A global integer variable initialized to 0.
- **Use**: Tracks the number of errors encountered during permutation operations in the `permutation_insert` and `permutation_delete` functions.


---
### pool
- **Type**: ``rbnode*``
- **Description**: The `pool` variable is a static pointer to a `rbnode` structure, initialized to `NULL`. It is used to manage a pool of red-black tree nodes.
- **Use**: Used as a global resource for red-black tree operations, such as node allocation and deallocation.


# Data Structures

---
### rbnode\_struct
- **Type**: ``struct``
- **Members**:
    - ``key``: Stores the key value for the node.
    - ``u``: A union that can store either a structure for red-black tree properties or a free list pointer.
    - ``u.rb.parent``: Stores the index of the parent node in the red-black tree.
    - ``u.rb.left``: Stores the index of the left child node in the red-black tree.
    - ``u.rb.right``: Stores the index of the right child node in the red-black tree.
    - ``u.rb.color``: Stores the color of the node, typically used in red-black trees to maintain balance.
    - ``u.nf``: Stores a pointer for managing a free list when the node is not part of a tree.
- **Description**: Defines a node in a red-black tree, which is a self-balancing binary search tree. The `rbnode_struct` contains an integer `key` and a union `u` that can either hold red-black tree properties (`parent`, `left`, `right`, `color`) or a free list pointer (`nf`). This structure allows the node to be used in a red-black tree or as part of a free list, depending on the context.


---
### rbnode
- **Type**: ``struct``
- **Members**:
    - ``key``: Stores the key value of the node.
    - ``u``: A union that contains either red-black tree pointers or a next-free pointer.
    - ``u.rb.parent``: Stores the index of the parent node in the red-black tree.
    - ``u.rb.left``: Stores the index of the left child node in the red-black tree.
    - ``u.rb.right``: Stores the index of the right child node in the red-black tree.
    - ``u.rb.color``: Stores the color of the node, used in red-black tree balancing.
    - ``u.nf``: Stores the next-free pointer for memory management.
- **Description**: Defines a node in a red-black tree, which is a self-balancing binary search tree. Each node contains a key and a union `u` that can store either red-black tree pointers (`parent`, `left`, `right`, `color`) or a next-free pointer (`nf`) for memory management. The red-black tree pointers are used to maintain the tree structure and balance, while the color field helps in ensuring the tree remains balanced during insertions and deletions.


# Functions

---
### rb\_compare<!-- {{#callable:rb_compare}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L38>)

Compares the keys of two `rbnode` structures and returns the difference as a long integer.
- **Inputs**:
    - `left`: A pointer to the first `rbnode` structure to compare.
    - `right`: A pointer to the second `rbnode` structure to compare.
- **Logic and Control Flow**:
    - Subtracts the `key` of the `right` node from the `key` of the `left` node.
    - Casts the result of the subtraction to a `long` type.
- **Output**: Returns a `long` integer representing the difference between the `key` of the `left` node and the `key` of the `right` node.


---
### all\_tests<!-- {{#callable:all_tests}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L88>)

Executes a series of unit tests for various tree operations and logs the results.
- **Inputs**: None
- **Logic and Control Flow**:
    - Initializes `correct_free` with the current free count of the pool using `rb_free(pool)`.
    - Executes a series of unit tests using the `mu_test` macro, which logs the test name and result, and checks for memory leaks by comparing `correct_free` with the current free count after each test.
    - The tests executed include [`unit_test_create`](<#unit_test_create>), [`unit_test_find`](<#unit_test_find>), [`unit_test_successor`](<#unit_test_successor>), [`unit_test_atomic_insertion`](<#unit_test_atomic_insertion>), [`unit_test_chain_insertion`](<#unit_test_chain_insertion>), [`unit_test_atomic_deletion`](<#unit_test_atomic_deletion>), [`unit_test_chain_deletion`](<#unit_test_chain_deletion>), [`unit_test_permutation_insertion`](<#unit_test_permutation_insertion>), [`unit_test_permutation_deletion`](<#unit_test_permutation_deletion>), [`unit_test_random_insertion_deletion`](<#unit_test_random_insertion_deletion>), and [`unit_test_min`](<#unit_test_min>).
    - Updates `correct_free` after each test to the current free count of the pool.
- **Output**: No return value; the function performs logging and updates global test counters.
- **Functions Called**:
    - [`unit_test_create`](<#unit_test_create>)
    - [`unit_test_find`](<#unit_test_find>)
    - [`unit_test_successor`](<#unit_test_successor>)
    - [`unit_test_atomic_insertion`](<#unit_test_atomic_insertion>)
    - [`unit_test_chain_insertion`](<#unit_test_chain_insertion>)
    - [`unit_test_atomic_deletion`](<#unit_test_atomic_deletion>)
    - [`unit_test_chain_deletion`](<#unit_test_chain_deletion>)
    - [`unit_test_permutation_insertion`](<#unit_test_permutation_insertion>)
    - [`unit_test_permutation_deletion`](<#unit_test_permutation_deletion>)
    - [`unit_test_random_insertion_deletion`](<#unit_test_random_insertion_deletion>)
    - [`unit_test_min`](<#unit_test_min>)


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L112>)

Initializes the environment, sets up a memory pool, runs a series of tests, and reports the results.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Defines `SCRATCH_ALIGN` and `SCRATCH_FOOTPRINT` for memory alignment and size.
    - Allocates a `scratch` array with the defined footprint and alignment.
    - Calculates the maximum number of elements for the given footprint using `rb_max_for_footprint`.
    - Checks if the calculated footprint exceeds the defined footprint and logs an error if true.
    - Creates and joins a red-black tree pool using `rb_new` and `rb_join`.
    - Verifies the maximum size of the pool and logs an error if it does not match the expected value.
    - Calls [`all_tests`](<#all_tests>) to execute a series of unit tests.
    - Deletes the red-black tree pool using `rb_delete` and `rb_leave`.
    - Checks if any tests failed and logs an error with the number of failed tests if any.
    - Logs a success message and returns 0 if all tests pass.
    - Calls `fd_halt` to terminate the program if there are test failures.
- **Output**: Returns 0 if all tests pass; otherwise, the program logs errors and halts.
- **Functions Called**:
    - [`all_tests`](<#all_tests>)


---
### tree\_create<!-- {{#callable:tree_create}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L141>)

Creates a new red-black tree and returns a null pointer.
- **Inputs**: None
- **Logic and Control Flow**:
    - Returns a null pointer, indicating an empty tree.
- **Output**: A null pointer of type `rbtree *`, representing an empty red-black tree.


---
### tree\_destroy<!-- {{#callable:tree_destroy}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L146>)

Releases the resources associated with a red-black tree.
- **Inputs**:
    - `rbt`: A pointer to the red-black tree (`rbtree`) to be destroyed.
- **Logic and Control Flow**:
    - Calls the function `rb_release_tree` with the global `pool` and the provided `rbt` to release the resources of the tree.
- **Output**: No return value.


---
### tree\_find<!-- {{#callable:tree_find}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L150>)

Searches for a node with a specified key in a red-black tree.
- **Inputs**:
    - `rbt`: A pointer to the red-black tree (`rbtree`) in which to search for the node.
    - `key`: An integer representing the key of the node to find in the tree.
- **Logic and Control Flow**:
    - Create a temporary `rbnode` named `query` and set its `key` to the input `key`.
    - Call the `rb_find` function with `pool`, `rbt`, and the address of `query` to search for the node in the tree.
    - Return the result of the `rb_find` function, which is a pointer to the found node or `NULL` if not found.
- **Output**: A pointer to the `rbnode` with the specified key if found, otherwise `NULL`.


---
### tree\_check<!-- {{#callable:tree_check}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L157>)

Verifies the integrity of a red-black tree structure.
- **Inputs**:
    - `rbt`: A pointer to the red-black tree (`rbtree`) to verify.
- **Logic and Control Flow**:
    - Calls the `rb_verify` function with `pool` and `rbt` as arguments to check the tree's integrity.
    - Uses `assert` to ensure that `rb_verify` returns 0, indicating the tree is valid.
    - Returns 1 if the assertion passes, indicating the tree is valid.
- **Output**: Returns 1 if the red-black tree is valid.


---
### tree\_insert<!-- {{#callable:tree_insert}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L163>)

Inserts a node with a specified key into a red-black tree if the key is valid.
- **Inputs**:
    - ``rbt``: A double pointer to the red-black tree where the node will be inserted.
    - ``key``: An integer key for the node to be inserted.
- **Logic and Control Flow**:
    - Check if the `key` is within the valid range defined by `MIN` and `MAX`; if not, log a warning and return `NULL`.
    - Acquire a new node from the pool and assign the `key` to this node.
    - Attempt to insert the node into the red-black tree using `rb_insert`; if insertion fails, log a warning, free the node, and return `NULL`.
    - Return the inserted node if successful.
- **Output**: Returns a pointer to the inserted `rbnode` if successful, or `NULL` if the insertion fails or the key is invalid.


---
### tree\_delete<!-- {{#callable:tree_delete}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L184>)

Removes a node with a specified key from a red-black tree and verifies the deletion.
- **Inputs**:
    - `rbt`: A double pointer to the red-black tree from which to delete the node.
    - `key`: The key of the node to delete from the tree.
- **Logic and Control Flow**:
    - Create a temporary `rbnode` structure `key2` and set its `key` to the input `key`.
    - Use `rb_find` to search for the node with the specified key in the tree. If not found, log a warning and return 0.
    - If the node is found, call `rb_remove` to remove the node from the tree.
    - Release the node's resources using `rb_release`.
    - Verify the node is no longer in the tree using `rb_find`. If it is still present, log a warning and return 0.
    - If the node is successfully deleted, return 1.
- **Output**: Returns 1 if the node is successfully deleted, otherwise returns 0.


---
### swap<!-- {{#callable:swap}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L206>)

Swaps the values of two characters pointed to by the input pointers.
- **Inputs**:
    - `x`: A pointer to a character that will be swapped with the character pointed to by `y`.
    - `y`: A pointer to a character that will be swapped with the character pointed to by `x`.
- **Logic and Control Flow**:
    - Declare a temporary character variable `temp`.
    - Assign the value pointed to by `x` to `temp`.
    - Assign the value pointed to by `y` to the location pointed to by `x`.
    - Assign the value stored in `temp` to the location pointed to by `y`.
- **Output**: No return value; the function modifies the characters at the memory locations pointed to by `x` and `y`.


---
### permute<!-- {{#callable:permute}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L214>)

Generates all permutations of a given string and applies a specified function to each permutation.
- **Inputs**:
    - ``a``: A pointer to a character array (string) to permute.
    - ``start``: The starting index for the permutation process.
    - ``end``: The ending index for the permutation process.
    - ``func``: A function pointer to a function that takes a character array as an argument and performs an operation on it.
- **Logic and Control Flow**:
    - Checks if `start` is equal to `end`; if true, calls `func` with `a` and returns.
    - Iterates over the range from `start` to `end` using a loop variable `i`.
    - Swaps the characters at positions `start` and `i` in the array `a`.
    - Recursively calls [`permute`](<#permute>) with `start + 1` to generate permutations of the remaining elements.
    - Swaps back the characters at positions `start` and `i` to restore the original order before the next iteration.
- **Output**: No direct output; the function applies the provided `func` to each permutation of the array `a`.
- **Functions Called**:
    - [`swap`](<#swap>)
    - [`permute`](<#permute>)


---
### permutation\_insert<!-- {{#callable:permutation_insert}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L229>)

Inserts characters from a string into a red-black tree and checks for insertion success.
- **Inputs**:
    - `a`: A pointer to a null-terminated string of characters to insert into the red-black tree.
- **Logic and Control Flow**:
    - Create a new red-black tree using `tree_create()` and assign it to `rbt`.
    - Iterate over each character in the string `a`.
    - For each character, attempt to insert it into the red-black tree using `tree_insert()`.
    - Check if the insertion was successful by verifying the node is found in the tree and the tree is valid using `tree_find()` and `tree_check()`.
    - If any insertion fails, log a warning message, increment `permutation_error`, and exit the function.
    - Destroy the red-black tree using `tree_destroy()` after all insertions.
- **Output**: No return value; modifies global variable `permutation_error` if an insertion fails.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_find`](<#tree_find>)
    - [`tree_check`](<#tree_check>)
    - [`tree_destroy`](<#tree_destroy>)


---
### permutation\_delete<!-- {{#callable:permutation_delete}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L248>)

Deletes characters from a red-black tree after inserting a predefined set of characters.
- **Inputs**:
    - `a`: A pointer to a character array that contains the characters to delete from the red-black tree.
- **Logic and Control Flow**:
    - Create a red-black tree using `tree_create()` and store it in `rbt`.
    - Define a character array `b` with the value `CHARS`.
    - Iterate over each character in `b`, insert it into the red-black tree, and check if the insertion is successful and the tree is valid.
    - If any insertion fails, log a warning, increment `permutation_error`, and return.
    - Iterate over each character in `a`, delete it from the red-black tree, and check if the deletion is successful and the tree is valid.
    - If any deletion fails, log a warning, increment `permutation_error`, and return.
    - Destroy the red-black tree using `tree_destroy(rbt)`.
- **Output**: No return value; modifies the global variable `permutation_error` if an error occurs.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_find`](<#tree_find>)
    - [`tree_check`](<#tree_check>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_destroy`](<#tree_destroy>)


---
### make\_black\_tree<!-- {{#callable:make_black_tree}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L278>)

Creates a red-black tree, performs a series of insertions and deletions, and verifies the tree's properties.
- **Inputs**: None
- **Logic and Control Flow**:
    - Create a new red-black tree using `tree_create()` and assign it to `rbt`.
    - Insert characters from string `a` into the tree, checking after each insertion with `tree_check()`. If any insertion fails or the check fails, go to the error handling section.
    - Delete characters from string `b` from the tree, checking after each deletion with `tree_check()`. If any deletion fails or the check fails, go to the error handling section.
    - Find characters from string `c` in the tree and verify that each node is black (`node->u.rb.color == 1`). If any node is not found or not black, go to the error handling section.
    - Verify the structure of the tree by checking specific node relationships. If the structure is incorrect, go to the error handling section.
    - Return the tree if all operations are successful.
    - In the error handling section, destroy the tree using `tree_destroy()` and return `NULL`.
- **Output**: A pointer to a red-black tree (`rbtree *`) if successful, or `NULL` if an error occurs.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_check`](<#tree_check>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_find`](<#tree_find>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_create<!-- {{#callable:unit_test_create}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L328>)

Creates and destroys a red-black tree, returning a success indicator.
- **Inputs**: None
- **Logic and Control Flow**:
    - Call [`tree_create`](<#tree_create>) to create a new red-black tree and assign it to `rbt`.
    - Call [`tree_destroy`](<#tree_destroy>) to destroy the red-black tree `rbt`.
    - Return the integer `1` to indicate success.
- **Output**: Returns `1` to indicate successful creation and destruction of the tree.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_find<!-- {{#callable:unit_test_find}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L338>)

Tests the insertion and retrieval of nodes in a red-black tree.
- **Inputs**: None
- **Logic and Control Flow**:
    - Create a red-black tree using [`tree_create`](<#tree_create>).
    - Insert nodes with keys 'R', 'E', 'D', 'S', 'O', 'X', 'C', 'U', 'B', 'T' into the tree using [`tree_insert`](<#tree_insert>).
    - Check if the tree is valid using [`tree_check`](<#tree_check>). If any insertion fails or the tree is invalid, log a warning and go to the error handling section.
    - For each inserted node, use [`tree_find`](<#tree_find>) to verify that the node can be found in the tree. If any node cannot be found, log a warning and go to the error handling section.
    - Destroy the tree using [`tree_destroy`](<#tree_destroy>) and return 1 if all operations are successful.
    - In the error handling section, destroy the tree and return 0.
- **Output**: Returns 1 if all nodes are inserted and found successfully; otherwise, returns 0.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_check`](<#tree_check>)
    - [`tree_find`](<#tree_find>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_successor<!-- {{#callable:unit_test_successor}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L382>)

Tests the successor functionality of a red-black tree by inserting nodes, deleting a node, and verifying the successor of each node.
- **Inputs**: None
- **Logic and Control Flow**:
    - Create a red-black tree using [`tree_create`](<#tree_create>).
    - Insert nodes with keys 'R', 'E', 'D', 'S', 'O', 'X', 'C', 'U', 'B', 'T' into the tree using [`tree_insert`](<#tree_insert>).
    - Delete the node with key 'O' using [`tree_delete`](<#tree_delete>).
    - Check the integrity of the tree using [`tree_check`](<#tree_check>).
    - Verify the successor of each node using `rb_successor` to ensure it matches the expected order: 'B' -> 'C', 'C' -> 'D', 'D' -> 'E', 'E' -> 'R', 'R' -> 'S', 'S' -> 'T', 'T' -> 'U', 'U' -> 'X', 'X' -> NULL.
    - If any operation fails, log a warning and go to the error handling section.
    - Destroy the tree using [`tree_destroy`](<#tree_destroy>) and return 1 if successful.
    - In the error handling section, destroy the tree and return 0.
- **Output**: Returns 1 if all operations succeed and the successors are correct; otherwise, returns 0.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_check`](<#tree_check>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_atomic\_insertion<!-- {{#callable:unit_test_atomic_insertion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L426>)

Tests atomic insertion operations on a red-black tree by inserting predefined character sequences and verifying tree integrity.
- **Inputs**: None
- **Logic and Control Flow**:
    - Initialize a 2D array `cs` with predefined character sequences representing different tree states and transitions.
    - Initialize an array `name` with descriptions of each test case.
    - Iterate over each sequence in `cs` using a loop with index `i`.
    - For each sequence, create a new red-black tree using `tree_create()`.
    - Iterate over each character in the current sequence using a loop with index `j`.
    - Insert each character into the tree using `tree_insert()`, and check the tree's integrity with `tree_check()`.
    - If insertion fails or the tree is not valid, log a warning message and jump to the error handling section.
    - Destroy the tree using `tree_destroy()` after processing each sequence.
    - Return 1 if all insertions are successful and the tree remains valid.
    - In the error handling section, destroy the tree and return 0.
- **Output**: Returns 1 if all test cases pass, otherwise returns 0 if any insertion fails or the tree is invalid.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_check`](<#tree_check>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_chain\_insertion<!-- {{#callable:unit_test_chain_insertion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L490>)

Tests the insertion of elements into a red-black tree in a specific order and checks the tree's integrity after each insertion.
- **Inputs**: None
- **Logic and Control Flow**:
    - Initialize two arrays `a1` and `a2` with predefined integer values.
    - Iterate over each element in `a1`, creating a new red-black tree for each element.
    - For each tree, iterate over all elements in `a2`, inserting each into the tree and checking the tree's integrity after each insertion.
    - Insert the current element from `a1` into the tree and check the tree's integrity.
    - If any insertion or integrity check fails, log a warning and exit the loop with an error.
    - Destroy the tree after all insertions are complete.
    - Return 1 if all insertions and checks are successful, otherwise return 0.
- **Output**: Returns 1 if all insertions and integrity checks are successful, otherwise returns 0.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_check`](<#tree_check>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_atomic\_deletion<!-- {{#callable:unit_test_atomic_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L523>)

Tests the atomic deletion operations on a red-black tree by inserting and deleting nodes according to predefined scenarios.
- **Inputs**:
    - `void`: No input parameters.
- **Logic and Control Flow**:
    - Initialize a red-black tree `rbt` for each test case.
    - Iterate over predefined test cases stored in `cs` and `name` arrays.
    - For each test case, insert nodes into the tree using [`tree_insert`](<#tree_insert>) and check the tree's validity with [`tree_check`](<#tree_check>).
    - If insertion fails, log a warning and jump to the error handling section.
    - Delete nodes from the tree using [`tree_delete`](<#tree_delete>) and check the tree's validity with [`tree_check`](<#tree_check>).
    - If deletion fails, log a warning and jump to the error handling section.
    - Destroy the tree after each test case.
    - Return 1 if all test cases pass without errors.
    - In the error handling section, destroy the tree and return 0.
- **Output**: Returns 1 if all atomic deletion tests pass, otherwise returns 0.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_check`](<#tree_check>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_chain\_deletion<!-- {{#callable:unit_test_chain_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L605>)

Tests the deletion of nodes from a red-black tree in a specific sequence and checks the tree's integrity after each deletion.
- **Inputs**:
    - `void`: No input parameters are required.
- **Logic and Control Flow**:
    - Initialize a character array `a` with the string "BEGI" and calculate its length `n`.
    - Iterate over each character in the array `a`.
    - For each character, create a new red-black tree using `make_black_tree()`.
    - If tree creation fails, log a warning and go to the error handling section.
    - Attempt to delete the current character from the tree using `tree_delete()`.
    - If deletion fails or the tree check fails, log a warning and go to the error handling section.
    - Destroy the tree after each deletion attempt.
    - Return 1 if all deletions are successful.
    - In the error handling section, destroy the tree if it exists and return 0.
- **Output**: Returns 1 if all deletions and checks are successful, otherwise returns 0.
- **Functions Called**:
    - [`make_black_tree`](<#make_black_tree>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_check`](<#tree_check>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_permutation\_insertion<!-- {{#callable:unit_test_permutation_insertion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L634>)

Tests all permutations of a character array for successful insertion into a red-black tree.
- **Inputs**:
    - `void`: No input parameters.
- **Logic and Control Flow**:
    - Initialize a character array `a` with the value `CHARS`.
    - Set `permutation_error` to 0 to track errors during permutation insertion.
    - Call the [`permute`](<#permute>) function with `a`, starting index 0, ending index `strlen(a) - 1`, and the `permutation_insert` function as arguments.
    - Return 1 if `permutation_error` is 0, indicating success, otherwise return 0.
- **Output**: Returns 1 if all permutations are inserted without error, otherwise returns 0.
- **Functions Called**:
    - [`permute`](<#permute>)


---
### unit\_test\_permutation\_deletion<!-- {{#callable:unit_test_permutation_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L643>)

Tests the deletion of all permutations of a set of characters from a red-black tree.
- **Inputs**: None
- **Logic and Control Flow**:
    - Initialize a character array `a` with the value `CHARS`.
    - Set `permutation_error` to 0 to track errors during permutation deletion.
    - Call the [`permute`](<#permute>) function with `a`, starting index 0, ending index `strlen(a) - 1`, and the `permutation_delete` function as arguments.
    - Return 1 if `permutation_error` is 0, indicating success, otherwise return 0.
- **Output**: Returns 1 if all permutations are successfully deleted without errors, otherwise returns 0.
- **Functions Called**:
    - [`permute`](<#permute>)


---
### unit\_test\_random\_insertion\_deletion<!-- {{#callable:unit_test_random_insertion_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L652>)

Tests random insertion and deletion operations on a red-black tree.
- **Inputs**: None
- **Logic and Control Flow**:
    - Create a red-black tree using `tree_create()` and initialize `ninsert`, `ndelete`, and `max` variables.
    - Seed the random number generator with the current time.
    - Perform 1999 random insertions: generate a random key, check if it exists in the tree using `tree_find()`, and if not, insert it using `tree_insert()`. If insertion fails or the tree is invalid, log a warning and go to the error handling section.
    - Perform deletions for keys up to `max`: generate a random key, check if it exists in the tree, and if it does, delete it using `tree_delete()`. If deletion fails or the tree is invalid, log a warning and go to the error handling section.
    - Log the number of successful insertions and deletions.
    - Destroy the tree using `tree_destroy()` and return 1 if successful.
    - In the error handling section, destroy the tree and return 0.
- **Output**: Returns 1 if all operations are successful, otherwise returns 0.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_find`](<#tree_find>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_check`](<#tree_check>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_destroy`](<#tree_destroy>)


---
### unit\_test\_min<!-- {{#callable:unit_test_min}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L698>)

Tests the minimum value retrieval in a red-black tree after various insertions and deletions.
- **Inputs**: None
- **Logic and Control Flow**:
    - Create a red-black tree using [`tree_create`](<#tree_create>).
    - Define a macro `RB_MINIMAL` to find the minimum node in the tree using `rb_minimum`.
    - Check if the minimum node in an empty tree is `NULL`.
    - Insert node 'B' and check if it becomes the minimum node.
    - Insert node 'A' and verify it becomes the new minimum node.
    - Insert node 'C' and ensure 'A' remains the minimum node.
    - Delete node 'B' and confirm 'A' is still the minimum node.
    - Delete node 'A' and check if 'C' becomes the minimum node.
    - Delete node 'C' and verify the tree is empty with no minimum node.
    - Log a warning and go to error handling if any check fails.
    - Destroy the tree using [`tree_destroy`](<#tree_destroy>) before returning success or failure.
- **Output**: Returns `1` if all tests pass, otherwise returns `0` if any test fails.
- **Functions Called**:
    - [`tree_create`](<#tree_create>)
    - [`tree_insert`](<#tree_insert>)
    - [`tree_find`](<#tree_find>)
    - [`tree_delete`](<#tree_delete>)
    - [`tree_destroy`](<#tree_destroy>)


# Function Declarations (Public API)

---
### tree\_create<!-- {{#callable_declaration:tree_create}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L48>)

Creates a new red-black tree.
- **Description**: Use this function to create a new red-black tree. This function initializes the tree structure and returns a pointer to it. The tree is initially empty. This function does not allocate any memory for the tree nodes, and the caller is responsible for managing the memory of the tree structure. Call this function before performing any operations on the tree.
- **Inputs**: None
- **Output**: Returns a pointer to the newly created red-black tree, which is initially empty.
- **See Also**: [`tree_create`](<#tree_create>)  (Implementation)


---
### tree\_destroy<!-- {{#callable_declaration:tree_destroy}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L49>)

Releases resources associated with a red-black tree.
- **Description**: Use this function to release all resources associated with a red-black tree when it is no longer needed. This function must be called to prevent memory leaks after the tree is created and used. Ensure that the tree pointer is valid and that no other operations are performed on the tree after calling this function.
- **Inputs**:
    - `rbt`: A pointer to the red-black tree to destroy. Must not be null. The caller retains ownership of the pointer, but the resources associated with the tree are released.
- **Output**: None
- **See Also**: [`tree_destroy`](<#tree_destroy>)  (Implementation)


---
### tree\_find<!-- {{#callable_declaration:tree_find}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L50>)

Finds a node with the specified key in a red-black tree.
- **Description**: Use this function to search for a node with a given key in a red-black tree. It is important to ensure that the red-black tree is properly initialized and populated with nodes before calling this function. The function returns a pointer to the node if it is found, or NULL if the node with the specified key does not exist in the tree. This function does not modify the tree or the nodes within it.
- **Inputs**:
    - `rbt`: A pointer to the red-black tree in which to search for the node. Must not be NULL, and the tree should be properly initialized.
    - `key`: An integer representing the key of the node to find. There are no specific constraints on the key value, but it should match the key of a node in the tree to be found.
- **Output**: A pointer to the `rbnode` with the specified key if found, or NULL if no such node exists in the tree.
- **See Also**: [`tree_find`](<#tree_find>)  (Implementation)


---
### tree\_check<!-- {{#callable_declaration:tree_check}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L51>)

Checks the validity of a red-black tree.
- **Description**: Use this function to verify the structural integrity of a red-black tree. It is important to call this function to ensure that the tree maintains its properties after operations such as insertion or deletion. The function must be called with a valid pointer to a red-black tree. It will assert if the tree is not valid, which means it should be used in a debug context where assertions are enabled.
- **Inputs**:
    - `rbt`: A pointer to a red-black tree (`rbtree`). Must not be null. The function assumes the tree is initialized and valid for operations.
- **Output**: Returns 1 if the tree is valid. The function will assert and terminate the program if the tree is invalid.
- **See Also**: [`tree_check`](<#tree_check>)  (Implementation)


---
### tree\_insert<!-- {{#callable_declaration:tree_insert}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L52>)

Inserts a key into a red-black tree.
- **Description**: Use this function to add a new key to a red-black tree. The function requires a pointer to the tree and the key to insert. It returns a pointer to the newly inserted node or NULL if the insertion fails. The key must be within the range of `INT_MIN` to `INT_MAX`. If the key is outside this range, the function logs a warning and returns NULL. Ensure the tree is properly initialized before calling this function.
- **Inputs**:
    - `rbt`: A double pointer to the red-black tree where the key will be inserted. Must not be null. The function may modify the tree structure.
    - `key`: An integer key to insert into the tree. Must be within the range of `INT_MIN` to `INT_MAX`. If the key is invalid, the function logs a warning and returns NULL.
- **Output**: Returns a pointer to the newly inserted `rbnode` if successful, or NULL if the insertion fails or the key is invalid.
- **See Also**: [`tree_insert`](<#tree_insert>)  (Implementation)


---
### tree\_delete<!-- {{#callable_declaration:tree_delete}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L53>)

Deletes a node with the specified key from the red-black tree.
- **Description**: Use this function to remove a node with a given key from a red-black tree. It must be called with a valid pointer to a red-black tree and a key that exists in the tree. If the key is not found, the function logs a warning and returns 0. After deletion, it verifies that the node is no longer in the tree. This function is useful for maintaining the integrity of the tree structure by ensuring that nodes are properly removed.
- **Inputs**:
    - `rbt`: A pointer to a pointer to a red-black tree (`rbtree **`). The tree must be initialized and must not be null. The function modifies the tree structure.
    - `key`: An integer representing the key of the node to delete. The key must exist in the tree for the function to succeed. If the key is not found, the function logs a warning and returns 0.
- **Output**: Returns 1 if the node is successfully deleted, or 0 if the key is not found or the deletion fails.
- **See Also**: [`tree_delete`](<#tree_delete>)  (Implementation)


---
### make\_black\_tree<!-- {{#callable_declaration:make_black_tree}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L55>)

Creates a red-black tree with specific nodes and properties.
- **Description**: Use this function to create a red-black tree that contains a predefined set of nodes with specific properties. The function inserts a series of characters into the tree, deletes certain characters, and verifies the properties of the remaining nodes. It ensures that the tree maintains its red-black properties throughout these operations. If any operation fails, the function cleans up and returns `NULL`. This function is useful for testing or initializing a tree with known characteristics.
- **Inputs**: None
- **Output**: Returns a pointer to the created red-black tree, or `NULL` if an error occurs during creation or validation.
- **See Also**: [`make_black_tree`](<#make_black_tree>)  (Implementation)


---
### swap<!-- {{#callable_declaration:swap}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L57>)

Exchanges the values of two characters.
- **Description**: Use this function to swap the values of two characters pointed to by the given pointers. This function is useful when you need to exchange the values of two variables in place. Ensure that the pointers provided are valid and not null, as the function does not perform any null checks or validation on the input pointers.
- **Inputs**:
    - `x`: A pointer to a character whose value will be swapped with the character pointed to by `y`. Must not be null.
    - `y`: A pointer to a character whose value will be swapped with the character pointed to by `x`. Must not be null.
- **Output**: None
- **See Also**: [`swap`](<#swap>)  (Implementation)


---
### permute<!-- {{#callable_declaration:permute}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L58>)

Generates all permutations of a character array and applies a function to each permutation.
- **Description**: Use this function to generate all possible permutations of a given character array. It applies a specified function to each permutation. This function is useful when you need to process or evaluate each permutation of a set of characters. Ensure that the character array is properly initialized and that the `func` parameter is a valid function pointer that can handle the permutations. The function does not return a value, and it assumes that the input parameters are valid.
- **Inputs**:
    - `a`: A pointer to a character array that contains the elements to permute. The array must be null-terminated, and the caller retains ownership.
    - `start`: The starting index for the permutation process. Must be less than or equal to `end` and within the bounds of the array.
    - `end`: The ending index for the permutation process. Must be greater than or equal to `start` and within the bounds of the array.
    - `func`: A function pointer that takes a character pointer as an argument. This function is called with each permutation of the array. The function must be able to handle the permutations safely.
- **Output**: None
- **See Also**: [`permute`](<#permute>)  (Implementation)


---
### permutation\_insert<!-- {{#callable_declaration:permutation_insert}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L59>)

Inserts characters from a string into a red-black tree.
- **Description**: Use this function to insert each character from a given string into a red-black tree. The function creates a new tree and attempts to insert each character as a node. If any insertion fails, it logs a warning and increments a global error counter. The function stops further processing upon encountering an error. It is important to ensure that the input string is valid and non-null before calling this function.
- **Inputs**:
    - `a`: A pointer to a null-terminated string of characters to insert into the tree. The string must not be null, and each character is treated as a key for insertion. Invalid or duplicate characters will cause the function to log a warning and increment the error counter.
- **Output**: None
- **See Also**: [`permutation_insert`](<#permutation_insert>)  (Implementation)


---
### permutation\_delete<!-- {{#callable_declaration:permutation_delete}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L60>)

Deletes specified characters from a red-black tree.
- **Description**: Use this function to remove characters from a red-black tree that initially contains a predefined set of characters. It first inserts a fixed set of characters into the tree and then deletes the characters specified in the input string. This function is useful for testing or operations where specific character deletions are needed. Ensure that the input string only contains characters that are part of the predefined set to avoid errors. The function logs warnings and increments an error counter if any insertion or deletion operation fails.
- **Inputs**:
    - `a`: A null-terminated string containing characters to delete from the tree. The string must only include characters from the predefined set 'ABCDEFGHIJ'. The caller retains ownership of the string, and it must not be null.
- **Output**: None
- **See Also**: [`permutation_delete`](<#permutation_delete>)  (Implementation)


---
### unit\_test\_create<!-- {{#callable_declaration:unit_test_create}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L62>)

Runs a basic unit test for tree creation and destruction.
- **Description**: Use this function to verify that a red-black tree can be created and destroyed without errors. It is a simple test that initializes a tree and then immediately destroys it. This function is useful for ensuring that the basic setup and teardown of a tree structure work correctly. It does not perform any operations on the tree other than creation and destruction.
- **Inputs**: None
- **Output**: Returns 1 to indicate the test always passes.
- **See Also**: [`unit_test_create`](<#unit_test_create>)  (Implementation)


---
### unit\_test\_find<!-- {{#callable_declaration:unit_test_find}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L63>)

Tests the find operation in a red-black tree.
- **Description**: Use this function to verify that the find operation in a red-black tree works correctly. It inserts a set of predefined keys into a newly created tree and checks if each key can be found correctly. If any insertion or find operation fails, the function logs a warning and returns 0. The function must be called in an environment where logging is set up to capture warnings. It returns 1 if all operations succeed, ensuring the tree's integrity is maintained throughout the test.
- **Inputs**: None
- **Output**: Returns 1 if all find operations succeed, otherwise returns 0.
- **See Also**: [`unit_test_find`](<#unit_test_find>)  (Implementation)


---
### unit\_test\_successor<!-- {{#callable_declaration:unit_test_successor}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L64>)

Tests the successor function in a red-black tree.
- **Description**: Use this function to verify the correct operation of the successor function in a red-black tree. It initializes a red-black tree, inserts a series of nodes, deletes a specific node, and then checks the successor of each node in the tree. If any operation fails, it logs a warning and returns 0. If all operations succeed, it returns 1. This function is useful for validating the integrity and correctness of the successor logic in the tree.
- **Inputs**: None
- **Output**: Returns 1 if all tests pass, otherwise returns 0.
- **See Also**: [`unit_test_successor`](<#unit_test_successor>)  (Implementation)


---
### unit\_test\_atomic\_insertion<!-- {{#callable_declaration:unit_test_atomic_insertion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L65>)

Tests atomic insertion operations on a red-black tree.
- **Description**: Use this function to verify the correctness of atomic insertion operations in a red-black tree. It performs a series of insertion tests on different node configurations, ensuring that the tree maintains its balanced properties after each insertion. The function logs warnings if any insertion or tree check fails, and it returns a success or failure status. This function is useful for validating the integrity of the tree's insertion logic.
- **Inputs**: None
- **Output**: Returns 1 if all tests pass, otherwise returns 0 if any test fails.
- **See Also**: [`unit_test_atomic_insertion`](<#unit_test_atomic_insertion>)  (Implementation)


---
### unit\_test\_chain\_insertion<!-- {{#callable_declaration:unit_test_chain_insertion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L66>)

Tests the insertion of a sequence of integers into a red-black tree.
- **Description**: Use this function to verify the correct insertion of a predefined sequence of integers into a red-black tree. It creates a new tree for each integer in the first array, inserts all integers from the second array, and then inserts the current integer from the first array. If any insertion fails or the tree structure is invalid, the function logs a warning and returns 0. This function is useful for testing the integrity and correctness of the tree insertion operations.
- **Inputs**: None
- **Output**: Returns 1 if all insertions are successful and the tree remains valid; otherwise, returns 0.
- **See Also**: [`unit_test_chain_insertion`](<#unit_test_chain_insertion>)  (Implementation)


---
### unit\_test\_atomic\_deletion<!-- {{#callable_declaration:unit_test_atomic_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L67>)

Tests atomic deletion operations on a red-black tree.
- **Description**: Use this function to verify the correctness of atomic deletion operations in a red-black tree. It performs a series of insertions and deletions on predefined node configurations to ensure the tree maintains its properties after each operation. This function is useful for validating the integrity of deletion logic in red-black trees. It must be called in an environment where the red-black tree and related functions are properly initialized and available.
- **Inputs**: None
- **Output**: Returns 1 if all tests pass, otherwise returns 0 if any test fails.
- **See Also**: [`unit_test_atomic_deletion`](<#unit_test_atomic_deletion>)  (Implementation)


---
### unit\_test\_chain\_deletion<!-- {{#callable_declaration:unit_test_chain_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L68>)

Tests the deletion of a sequence of nodes from a red-black tree.
- **Description**: Use this function to verify the correct deletion of a sequence of nodes from a red-black tree. It attempts to delete each character in the string "BEGI" from a newly created red-black tree. The function logs a warning if the tree creation or any deletion operation fails. It returns 1 if all deletions are successful and the tree remains valid after each deletion, otherwise it returns 0. This function is typically used in a testing context to ensure the integrity of tree deletion operations.
- **Inputs**: None
- **Output**: Returns 1 if all deletions are successful and the tree remains valid; returns 0 if any operation fails.
- **See Also**: [`unit_test_chain_deletion`](<#unit_test_chain_deletion>)  (Implementation)


---
### unit\_test\_permutation\_insertion<!-- {{#callable_declaration:unit_test_permutation_insertion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L69>)

Tests the insertion of permutations into a data structure.
- **Description**: Use this function to verify that all permutations of a predefined set of characters can be inserted into a data structure without errors. It is useful for testing the robustness of insertion operations under various permutations. The function initializes a permutation error counter, performs permutations, and checks for errors during insertion. It returns a success indicator based on the absence of errors.
- **Inputs**: None
- **Output**: Returns 1 if all permutations are inserted without errors; otherwise, returns 0.
- **See Also**: [`unit_test_permutation_insertion`](<#unit_test_permutation_insertion>)  (Implementation)


---
### unit\_test\_permutation\_deletion<!-- {{#callable_declaration:unit_test_permutation_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L70>)

Tests the deletion of permutations in a red-black tree.
- **Description**: Use this function to verify the correctness of the permutation deletion operation in a red-black tree. It generates all permutations of a predefined set of characters and attempts to delete each permutation from the tree. The function returns a non-zero value if all deletions are successful, indicating no errors occurred during the process. This function is typically used in a testing environment to ensure the integrity of the deletion logic.
- **Inputs**: None
- **Output**: Returns a non-zero value if all permutation deletions are successful, otherwise returns zero.
- **See Also**: [`unit_test_permutation_deletion`](<#unit_test_permutation_deletion>)  (Implementation)


---
### unit\_test\_random\_insertion\_deletion<!-- {{#callable_declaration:unit_test_random_insertion_deletion}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L71>)

Tests random insertion and deletion operations on a red-black tree.
- **Description**: Use this function to perform a unit test that randomly inserts and deletes keys in a red-black tree. It initializes a red-black tree, inserts up to 1999 random keys, and then deletes random keys from the tree. The function logs warnings if any insertion or deletion fails. It is important to call this function in a controlled test environment as it uses random number generation and logs output. The function returns a success or failure status based on the operations' outcomes.
- **Inputs**: None
- **Output**: Returns 1 if all operations succeed, otherwise returns 0.
- **See Also**: [`unit_test_random_insertion_deletion`](<#unit_test_random_insertion_deletion>)  (Implementation)


---
### unit\_test\_min<!-- {{#callable_declaration:unit_test_min}} -->
[View Source →](<../../../../../src/util/tmpl/test_redblack2.c#L72>)

Tests the minimum value retrieval in a red-black tree.
- **Description**: Use this function to verify that the minimum value retrieval from a red-black tree works correctly. It performs a series of insertions and deletions on a red-black tree and checks if the minimum value is as expected after each operation. This function is useful for validating the integrity of the minimum value retrieval logic in the tree. It must be called in a context where a red-black tree can be created and destroyed, and it assumes that the tree operations such as insertion, deletion, and finding nodes are correctly implemented.
- **Inputs**: None
- **Output**: Returns 1 if all tests pass, otherwise returns 0.
- **See Also**: [`unit_test_min`](<#unit_test_min>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)