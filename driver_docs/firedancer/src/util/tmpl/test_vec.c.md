<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for the `myvec` vector implementation, including operations like expand, contract, and remove.

# Purpose
The code is a C program designed to test the functionality of a vector data structure, specifically a vector of unsigned integers (`uint`). It includes the `fd_vec.c` file, which likely contains the implementation of the vector operations. The program defines a vector type `MYVEC_T` as `uint` and uses macros to set up the vector operations for this type. The program initializes memory and a reference array to store vector elements and performs a series of tests to validate the vector's operations, such as expansion, contraction, and element removal.

The main function sets up the environment and parses command-line arguments to determine the maximum size of the vector and the number of iterations for testing. It uses a random number generator to perform various operations on the vector, such as expanding, contracting, and removing elements, while checking the integrity of the operations against a reference array. The program ensures that the vector operations maintain the correct state and alignment, and it logs warnings if any conditions are not met. The program concludes by cleaning up resources and logging a success message if all tests pass.
# Imports and Dependencies

---
- `../../util/fd_util.h`
- `fd_vec.c`


# Global Variables

---
### mem
- **Type**: ``uchar[]``
- **Description**: An array of unsigned characters with a size defined by `MEM_MAX`, which is twice the product of `REF_MAX` and the size of `MYVEC_T`. The array is aligned to a 128-byte boundary.
- **Use**: Used as a memory buffer for vector operations in the `myvec` module.


---
### ref
- **Type**: ``MYVEC_T` array`
- **Description**: `ref` is a static array of type `MYVEC_T` with a size defined by `REF_MAX`. It is used to store reference values for comparison with another vector during testing.
- **Use**: Used to store reference values for validation against operations performed on another vector.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/tmpl/test_vec.c#L15>)

Executes a series of tests on a vector implementation using command-line parameters to determine the maximum size and number of iterations.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Retrieves `--max` and `--iter-max` values from the command line, defaulting to 512 and 1000000 respectively.
    - Checks if `max` exceeds `REF_MAX` and logs a warning if true, then exits.
    - Logs the testing parameters `max` and `iter_max`.
    - Initializes a random number generator `rng`.
    - Calculates alignment and footprint for the vector and performs alignment checks.
    - Creates a new vector `shvec` and joins it to `vec`.
    - Initializes a counter `cnt` to zero.
    - Iterates `iter_max` times, performing random operations on the vector: expand, contract, remove with backfill, and remove with compaction.
    - Verifies vector properties and contents against a reference array `ref`.
    - Leaves and deletes the vector and random number generator, logging a pass message before halting.
- **Output**: Returns 0 after completing the tests and logging the results.



---
Made with ❤️ by [Driver](https://www.driver.ai/)