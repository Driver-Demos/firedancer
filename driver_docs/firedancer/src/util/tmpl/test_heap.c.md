<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for heap and pool data structures, including operations like insert, remove, and verify.

# Purpose
The code is a C program that tests the functionality of a custom heap and pool data structure. It includes the necessary headers and defines several macros to configure the behavior of the heap and pool. The `ele` structure is defined with fields for left and right child indices and a value, which are used to manage elements within the heap and pool. The program uses these structures to perform various operations such as inserting elements, removing the minimum element, and verifying the integrity of the heap.

The [`main`](<#main>) function initializes the environment, sets up a random number generator, and configures the heap and pool with a specified maximum number of elements. It then performs a series of tests to ensure the correct behavior of the heap and pool operations, including address conversion, alignment, footprint checks, and insertion and removal of elements. The program also includes tests for error handling and logging, particularly in scenarios where operations are expected to fail. The code concludes by cleaning up resources and logging the test results.
# Imports and Dependencies

---
- `../fd_util.h`
- `sys/types.h`
- `sys/wait.h`
- `unistd.h`
- `fd_pool.c`
- `fd_heap.c`


# Global Variables

---
### scratch
- **Type**: ``uchar[]``
- **Description**: An array of unsigned characters with a size defined by `SCRATCH_FOOTPRINT`, aligned to `SCRATCH_ALIGN` bytes.
- **Use**: Used as a memory buffer for operations requiring temporary storage, such as pool and heap management.


# Data Structures

---
### ele
- **Type**: ``struct``
- **Members**:
    - ``left_cidx``: Stores the left child index of type `CIDX_T`.
    - ``right_cidx``: Stores the right child index of type `CIDX_T`.
    - ``val``: Holds a value of type `VAL_T`.
- **Description**: Defines a structure with three members used to represent an element in a data structure, such as a heap or pool, where `left_cidx` and `right_cidx` are indices for child elements, and `val` is the value associated with the element.


---
### ele\_t
- **Type**: ``struct``
- **Members**:
    - ``left_cidx``: Stores the index of the left child in a heap or pool.
    - ``right_cidx``: Stores the index of the right child in a heap or pool.
    - ``val``: Holds a signed character value associated with the element.
- **Description**: Defines a structure `ele` that represents an element in a heap or pool, with fields for managing child indices and a value.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/util/tmpl/test_heap.c#L36>)

Initializes and tests a heap and pool data structure with various operations and checks.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Retrieves `ele_max` and `seed` from command-line arguments using `fd_env_strip_cmdline_ulong`.
    - Checks if `ele_max` exceeds 64 and logs an error if true.
    - Logs the testing parameters `ele_max` and `seed`.
    - Initializes a random number generator `rng` using `fd_rng_new` and `fd_rng_join`.
    - Calculates alignment and footprint for the pool and checks against predefined limits, logging an error if exceeded.
    - Creates and joins a pool using `pool_new` and `pool_join`.
    - Tests special values and address conversion functions for the heap.
    - Tests alignment and footprint of the heap.
    - Creates and joins a heap using `heap_new` and `heap_join`.
    - Performs a series of operations on the heap, including `peek_min`, `insert`, and `remove_min`, while verifying heap integrity.
    - Tests handholding features if applicable, using `FD_EXPECT_LOG_CRIT`.
    - Tests leaving and deleting the heap and pool, ensuring proper cleanup.
    - Logs a success message and halts the program.
- **Output**: Returns 0 upon successful execution.



---
Made with ❤️ by [Driver](https://www.driver.ai/)