<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for utility functions and services in the Firedancer codebase, including logging and memory management.

# Purpose
The code is a C header file that serves as a utility interface for a larger software system. It includes several other header files, such as `fd_rng.h`, `fd_spad.h`, `fd_alloc.h`, `fd_sandbox.h`, and `fd_sat.h`, which provide functionalities related to random number generation, shared memory management, memory allocation, sandboxing, and saturation arithmetic, respectively. The file defines a set of functions and macros that are intended to be used across different parts of the software system, providing a common utility layer. The header file also includes conditional compilation directives to ensure compatibility with different system architectures and configurations.

The file defines two primary functions, [`fd_boot`](<#fd_boot>) and [`fd_halt`](<#fd_halt>), which are used to initialize and terminate the utility services within a thread group. These functions manage logging configurations and shared memory settings through command-line options and environment variables. The header also includes a function [`fd_syscall_poll`](<#fd_syscall_poll>), which standardizes the behavior of the `poll` system call across different architectures, particularly for use in a sandboxed environment. This function is conditionally compiled for hosted environments, ensuring that the software can adapt to different system capabilities. The header file is designed to be included in other C source files, providing a centralized utility interface for the software system.
# Imports and Dependencies

---
- `rng/fd_rng.h`
- `spad/fd_spad.h`
- `alloc/fd_alloc.h`
- `sandbox/fd_sandbox.h`
- `bits/fd_sat.h`


# Function Declarations (Public API)

---
### fd\_boot<!-- {{#callable_declaration:fd_boot}} -->
[View Source →](<../../../../src/util/fd_util.h#L48>)

Initializes all fd_util services for a thread group.
- **Description**: Call this function immediately after the main thread in a thread group starts to initialize all necessary services for the application. This function prepares the environment for the application by setting up logging, shared memory, and thread management. It must be called before any other fd_util services are used. Ensure that the program is in a single-threaded state when calling this function, as it assumes no other threads are running.
- **Inputs**:
    - `pargc`: A pointer to an integer representing the argument count. Must not be null. The function may modify the value pointed to by this parameter.
    - `pargv`: A pointer to an array of argument strings. Must not be null. The function may modify the array or the strings it points to.
- **Output**: None
- **See Also**: [`fd_boot`](<fd_util.c.md#fd_boot>)  (Implementation)


---
### fd\_halt<!-- {{#callable_declaration:fd_halt}} -->
[View Source →](<../../../../src/util/fd_util.h#L296>)

Halts all fd_util services before program termination.
- **Description**: Use this function to stop all services provided by the fd_util library immediately before the program terminates. It is important to call this function to ensure that all resources are properly released and any necessary cleanup is performed. This function should be called only once and only after the program has been booted using the corresponding initialization function. It does not take any parameters and does not return any values.
- **Inputs**: None
- **Output**: None
- **See Also**: [`fd_halt`](<fd_util.c.md#fd_halt>)  (Implementation)


---
### fd\_syscall\_poll<!-- {{#callable_declaration:fd_syscall_poll}} -->
[View Source →](<../../../../src/util/fd_util.h#L314>)

Performs a poll operation on file descriptors with a specified timeout.
- **Description**: Use this function to monitor multiple file descriptors to see if any of them are ready for I/O operations. It is useful in scenarios where you need to wait for events on multiple file descriptors, such as sockets or pipes. The function behaves like the standard `poll` function but uses `ppoll` on Linux systems to ensure consistent behavior across different platforms. The function returns the number of file descriptors with events, or -1 on error, setting `errno` to indicate the error. It is important to handle the case where the function returns -1 by checking `errno` for the specific error code.
- **Inputs**:
    - `fds`: A pointer to an array of `struct pollfd` that specifies the file descriptors to monitor. The caller must ensure this pointer is valid and points to an array of at least `nfds` elements.
    - `nfds`: The number of file descriptors in the `fds` array. Must be a non-negative integer.
    - `timeout`: The maximum time to wait in milliseconds. A negative value means to wait indefinitely, while zero means to return immediately.
- **Output**: Returns the number of file descriptors with events, or -1 on error with `errno` set to indicate the error.
- **See Also**: [`fd_syscall_poll`](<fd_util.c.md#fd_syscall_poll>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)