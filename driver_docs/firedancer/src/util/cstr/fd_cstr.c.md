<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for converting C strings to various data types, formatting strings, and tokenizing strings.

# Purpose
The code provides a set of utility functions for handling C-style strings (`char const *`) and converting them to various data types. It includes functions such as [`fd_cstr_to_int`](<#fd_cstr_to_int>), [`fd_cstr_to_float`](<#fd_cstr_to_float>), and [`fd_cstr_to_ulong_octal`](<#fd_cstr_to_ulong_octal>), which convert string representations to integers, floats, and octal numbers, respectively. These functions use standard library functions like `strtol`, `strtoul`, and `strtof` to perform the conversions. The code also includes functions for string comparison ([`fd_cstr_casecmp`](<#fd_cstr_casecmp>)), calculating string length with a maximum limit ([`fd_cstr_nlen`](<#fd_cstr_nlen>)), and formatted string printing ([`fd_cstr_printf`](<#fd_cstr_printf>), [`fd_cstr_printf_check`](<#fd_cstr_printf_check>), and [`fd_cstr_append_printf`](<#fd_cstr_append_printf>)).

Additionally, the code provides functionality for parsing sequences of numbers from strings with [`fd_cstr_to_ulong_seq`](<#fd_cstr_to_ulong_seq>), which interprets ranges and strides within a string and populates an array with the resulting sequence. The [`fd_cstr_tokenize`](<#fd_cstr_tokenize>) function is used to split a string into tokens based on a specified delimiter, storing the tokens in an array. The code is intended to be part of a library that can be included in other C programs, providing a collection of string manipulation and conversion utilities. The use of conditional compilation with `#if FD_HAS_DOUBLE` suggests that some features, like double precision conversion, are optional based on the compilation environment.
# Imports and Dependencies

---
- `fd_cstr.h`
- `stdio.h`
- `stdlib.h`
- `stdarg.h`
- `strings.h`
- `ctype.h`


# Functions

---
### fd\_cstr\_to\_cstr<!-- {{#callable:fd_cstr_to_cstr}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L11>)

Returns the input C string without modification.
- **Inputs**:
    - `cstr`: A constant character pointer to the input C string.
- **Logic and Control Flow**:
    - Directly returns the input C string `cstr`.
- **Output**: A constant character pointer to the same input C string.


---
### fd\_cstr\_to\_char<!-- {{#callable:fd_cstr_to_char}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L12>)

Returns the first character of a given C-style string.
- **Inputs**:
    - `cstr`: A pointer to a constant character string from which the first character is extracted.
- **Logic and Control Flow**:
    - Accesses the first character of the input string `cstr`.
    - Returns the character at index 0 of `cstr`.
- **Output**: The first character of the input string `cstr` as a `char` type.


---
### fd\_cstr\_to\_schar<!-- {{#callable:fd_cstr_to_schar}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L13>)

Converts a C-style string to a signed character (`schar`).
- **Inputs**:
    - `cstr`: A pointer to a constant character string that represents the number to convert.
- **Logic and Control Flow**:
    - Uses the `strtol` function to convert the string `cstr` to a long integer.
    - Casts the result of `strtol` to `schar`.
- **Output**: Returns the converted value as a `schar`.


---
### fd\_cstr\_to\_short<!-- {{#callable:fd_cstr_to_short}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L14>)

Converts a C-style string to a `short` integer using base 0 conversion.
- **Inputs**:
    - `cstr`: A pointer to a null-terminated string that represents the number to convert.
- **Logic and Control Flow**:
    - Calls the `strtol` function with `cstr`, `NULL`, and base 0 to convert the string to a long integer.
    - Casts the result of `strtol` to a `short` type.
    - Returns the casted `short` value.
- **Output**: A `short` integer that represents the converted value of the input string.


---
### fd\_cstr\_to\_int<!-- {{#callable:fd_cstr_to_int}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L15>)

Converts a C-style string to an integer using base 0 conversion.
- **Inputs**:
    - `cstr`: A pointer to a constant character string that represents the number to convert.
- **Logic and Control Flow**:
    - Uses the `strtol` function to convert the string `cstr` to a long integer.
    - Casts the result of `strtol` to an `int`.
    - Returns the converted integer value.
- **Output**: An integer that represents the converted value of the input string.


---
### fd\_cstr\_to\_long<!-- {{#callable:fd_cstr_to_long}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L16>)

Converts a C-style string to a long integer using base 0.
- **Inputs**:
    - `cstr`: A pointer to a null-terminated C-style string that represents a number.
- **Logic and Control Flow**:
    - Uses the `strtol` function to convert the string `cstr` to a long integer.
    - Passes `NULL` as the second argument to `strtol` to ignore the end pointer.
    - Uses base 0, allowing the function to automatically detect the base of the number in the string.
- **Output**: Returns the converted long integer value.


---
### fd\_cstr\_to\_uchar<!-- {{#callable:fd_cstr_to_uchar}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L17>)

Converts a C-style string to an unsigned char.
- **Inputs**:
    - `cstr`: A pointer to a constant character string that represents the number to convert.
- **Logic and Control Flow**:
    - Uses the `strtoul` function to convert the string `cstr` to an unsigned long integer.
    - Casts the result of `strtoul` to an `uchar` type.
    - Returns the converted value as an `uchar`.
- **Output**: An `uchar` that represents the converted value from the input string.


---
### fd\_cstr\_to\_ushort<!-- {{#callable:fd_cstr_to_ushort}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L18>)

Converts a C-style string to an unsigned short integer.
- **Inputs**:
    - `cstr`: A pointer to a constant character string that represents the number to convert.
- **Logic and Control Flow**:
    - Uses the `strtoul` function to convert the string `cstr` to an unsigned long integer.
    - Casts the result of `strtoul` to an `ushort` type.
    - Returns the converted value as an `ushort`.
- **Output**: An `ushort` value that represents the converted number from the input string.


---
### fd\_cstr\_to\_uint<!-- {{#callable:fd_cstr_to_uint}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L19>)

Converts a C-style string to an unsigned integer (`uint`).
- **Inputs**:
    - `cstr`: A pointer to a null-terminated C-style string that represents a number.
- **Logic and Control Flow**:
    - Uses the `strtoul` function to convert the string `cstr` to an unsigned long integer.
    - Casts the result of `strtoul` to `uint`.
- **Output**: Returns the converted unsigned integer (`uint`) value.


---
### fd\_cstr\_to\_ulong<!-- {{#callable:fd_cstr_to_ulong}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L20>)

Converts a C-style string to an unsigned long integer using base 0.
- **Inputs**:
    - `cstr`: A pointer to a null-terminated string that represents the number to convert.
- **Logic and Control Flow**:
    - Calls the `strtoul` function with `cstr`, `NULL`, and base `0` to perform the conversion.
    - Casts the result of `strtoul` to `ulong`.
    - Returns the converted value.
- **Output**: An unsigned long integer (`ulong`) that represents the converted value of the input string.


---
### fd\_cstr\_to\_float<!-- {{#callable:fd_cstr_to_float}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L21>)

Converts a C-style string to a floating-point number.
- **Inputs**:
    - `cstr`: A pointer to a constant character string that represents a floating-point number.
- **Logic and Control Flow**:
    - Calls the `strtof` function with `cstr` and `NULL` as arguments.
    - `strtof` converts the string pointed to by `cstr` to a `float`.
    - The function returns the converted floating-point number.
- **Output**: A `float` representing the converted value of the input string.


---
### fd\_cstr\_to\_double<!-- {{#callable:fd_cstr_to_double}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L23>)

Converts a C-style string to a double-precision floating-point number.
- **Inputs**:
    - `cstr`: A pointer to a null-terminated C-style string that represents a floating-point number.
- **Logic and Control Flow**:
    - Uses the `strtod` function to convert the string `cstr` to a double.
    - Passes `NULL` as the second argument to `strtod`, indicating that the function does not need to track the end of the parsed number.
- **Output**: Returns the double-precision floating-point number represented by the input string `cstr`.


---
### fd\_cstr\_to\_ulong\_octal<!-- {{#callable:fd_cstr_to_ulong_octal}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L26>)

Converts a C-string representing an octal number to an unsigned long integer.
- **Inputs**:
    - `cstr`: A pointer to a constant character string that represents an octal number.
- **Logic and Control Flow**:
    - Uses the `strtoul` function to convert the string `cstr` to an unsigned long integer.
    - Specifies the base as 8 to interpret the string as an octal number.
    - Returns the converted value as an unsigned long integer.
- **Output**: An unsigned long integer that is the octal conversion of the input string.


---
### fd\_cstr\_to\_ulong\_seq<!-- {{#callable:fd_cstr_to_ulong_seq}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L28>)

Converts a string representation of a sequence of unsigned long integers into an array of unsigned long integers.
- **Inputs**:
    - `cstr`: A pointer to a null-terminated string that contains the sequence of unsigned long integers.
    - `seq`: A pointer to an array where the function will store the converted sequence of unsigned long integers.
    - `seq_max`: The maximum number of elements that can be stored in the `seq` array.
- **Logic and Control Flow**:
    - Initialize `seq_cnt` to 0 to count the number of elements in the sequence.
    - Check if `cstr` is null; if so, return `seq_cnt` as 0.
    - Iterate over the characters in `cstr`, skipping white spaces to find the start of a number.
    - Convert the first number in the sequence using `strtoul` and check for conversion errors.
    - If a dash '-' is found, parse the range end and optional stride, checking for errors.
    - Ensure the sequence is well-formed by checking range and stride validity.
    - Append the parsed range to the `seq` array, ensuring not to exceed `seq_max`.
    - Return the total count of elements added to `seq`.
- **Output**: Returns the number of elements successfully parsed and stored in the `seq` array.


---
### fd\_cstr\_casecmp<!-- {{#callable:fd_cstr_casecmp}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L95>)

Compares two C-style strings in a case-insensitive manner.
- **Inputs**:
    - `a`: A pointer to the first null-terminated string to compare.
    - `b`: A pointer to the second null-terminated string to compare.
- **Logic and Control Flow**:
    - Calls the `strcasecmp` function to perform a case-insensitive comparison of the strings pointed to by `a` and `b`.
- **Output**: Returns an integer less than, equal to, or greater than zero if `a` is found, respectively, to be less than, to match, or be greater than `b`.


---
### fd\_cstr\_nlen<!-- {{#callable:fd_cstr_nlen}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L101>)

Calculates the length of a string up to a maximum number of characters.
- **Inputs**:
    - `s`: A pointer to the input string whose length is to be calculated.
    - `m`: The maximum number of characters to consider when calculating the string length.
- **Logic and Control Flow**:
    - Calls the `strnlen` function with the input string `s` and the maximum length `m`.
- **Output**: Returns the length of the string `s`, but not more than `m` characters.


---
### fd\_cstr\_printf<!-- {{#callable:fd_cstr_printf}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L107>)

Formats a string into a buffer with a specified size and optionally returns the length of the formatted string.
- **Inputs**:
    - `buf`: A pointer to the buffer where the formatted string will be stored.
    - `sz`: The size of the buffer.
    - `opt_len`: An optional pointer to store the length of the formatted string.
    - `fmt`: A format string that specifies how to format the data.
    - `...`: Additional arguments to format according to the format string.
- **Logic and Control Flow**:
    - Check if `buf` is NULL or `sz` is zero; if true, set `opt_len` to 0 and return `buf`.
    - Initialize a variable argument list `ap` and start it with `fmt`.
    - Use `vsnprintf` to format the string into `buf` with size `sz` using the arguments in `ap`.
    - Calculate the length of the formatted string using `fd_ulong_if` and `fd_ulong_min` to ensure it does not exceed `sz-1`.
    - Terminate the string in `buf` with a null character at the calculated length.
    - End the variable argument list `ap`.
    - If `opt_len` is not NULL, set it to the calculated length.
    - Return the pointer to `buf`.
- **Output**: Returns a pointer to the buffer `buf` containing the formatted string.


---
### fd\_cstr\_printf\_check<!-- {{#callable:fd_cstr_printf_check}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L126>)

Formats a string into a buffer and checks if the formatted string fits within the buffer size.
- **Inputs**:
    - ``buf``: A pointer to the buffer where the formatted string will be stored.
    - ``sz``: The size of the buffer.
    - ``opt_len``: An optional pointer to store the length of the formatted string.
    - ``fmt``: A format string that specifies how to format the data.
    - ``...``: Additional arguments to format according to the format string.
- **Logic and Control Flow**:
    - Check if `buf` is NULL or `sz` is zero; if true, set `opt_len` to 0 and return 0.
    - Initialize a variable argument list `ap` and start it with `va_start`.
    - Use `vsnprintf` to format the string into `buf` with the given size `sz` and arguments `ap`.
    - Calculate the length of the formatted string using `fd_ulong_if` and `fd_ulong_min`.
    - Terminate the string in `buf` with a null character at the calculated length.
    - End the variable argument list with `va_end`.
    - If `opt_len` is not NULL, store the calculated length in `opt_len`.
    - Return 1 if the formatted string length matches the return value of `vsnprintf`, otherwise return 0.
- **Output**: Returns 1 if the formatted string fits within the buffer size, otherwise returns 0.


---
### fd\_cstr\_append\_printf<!-- {{#callable:fd_cstr_append_printf}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L145>)

Appends formatted data to a buffer using a format string and variable arguments.
- **Inputs**:
    - ``buf``: A pointer to the buffer where the formatted string will be appended.
    - ``fmt``: A format string that specifies how to format the variable arguments.
- **Logic and Control Flow**:
    - Check if `buf` is NULL; if so, return NULL.
    - Initialize a `va_list` to handle the variable arguments.
    - Use `vsprintf` to format the string according to `fmt` and store it in `buf`.
    - End the use of `va_list`.
    - Calculate the return pointer by adding the result of `fd_ulong_if` to `buf`.
- **Output**: Returns a pointer to the end of the formatted string in the buffer.


---
### fd\_cstr\_tokenize<!-- {{#callable:fd_cstr_tokenize}} -->
[View Source →](<../../../../../src/util/cstr/fd_cstr.c#L156>)

Tokenizes a string into substrings based on a specified delimiter and stores them in an array.
- **Inputs**:
    - ``tok``: A pointer to an array of character pointers where the function will store the start of each token.
    - ``tok_max``: The maximum number of tokens that can be stored in the `tok` array.
    - ``p``: A pointer to the string to be tokenized.
    - ``delim``: The character used as a delimiter to separate tokens in the string.
- **Logic and Control Flow**:
    - Check if the input string `p` is NULL; if so, return 0.
    - Initialize `tok_cnt` to 0 to count the number of tokens found.
    - Enter an infinite loop to process the string.
    - Skip leading whitespace characters in the string `p`.
    - If the end of the string is reached (indicated by a null character), break the loop.
    - If the current token count `tok_cnt` is less than `tok_max`, store the current position of `p` in the `tok` array.
    - Increment the token count `tok_cnt`.
    - Continue to move through the string until the delimiter or end of the string is found.
    - If the end of the string is reached, break the loop.
    - Replace the delimiter with a null character to terminate the current token.
    - Move to the next character in the string `p`.
- **Output**: Returns the number of tokens found and stored in the `tok` array.



---
Made with ❤️ by [Driver](https://www.driver.ai/)