<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Utility functions for booting, halting, and system polling in the Firedancer codebase.

# Purpose
The code provides utility functions for managing the initialization and termination of a program, as well as some system-level operations. It includes functions such as [`fd_boot`](<#fd_boot>) and [`fd_halt`](<#fd_halt>), which are responsible for setting up and tearing down the environment, respectively. These functions call private boot and halt functions for logging, shared memory, and tile management, indicating that the program is structured to handle these components in a modular fashion. The [`fd_boot`](<#fd_boot>) function is called immediately after the program starts, while [`fd_halt`](<#fd_halt>) is called just before the program terminates.

Additionally, the code includes system-level functions like [`_fd_tickcount`](<#_fd_tickcount>), [`fd_yield`](<#fd_yield>), and [`fd_syscall_poll`](<#fd_syscall_poll>). The [`_fd_tickcount`](<#_fd_tickcount>) function returns a tick count, which is likely used for timing or performance measurement. The [`fd_yield`](<#fd_yield>) function calls `sched_yield`, allowing the current thread to yield the processor, which can be useful in multi-threaded applications. The [`fd_syscall_poll`](<#fd_syscall_poll>) function provides a wrapper around the `poll` or `ppoll` system calls, depending on the platform, to monitor multiple file descriptors for events. This code is intended to be part of a larger system, providing foundational operations that other components can build upon.
# Imports and Dependencies

---
- `fd_util.h`
- `poll.h`
- `sched.h`
- `time.h`


# Functions

---
### fd\_boot<!-- {{#callable:fd_boot}} -->
[View Source →](<../../../../src/util/fd_util.c#L4>)

Initializes the program by booting the logging, shared memory, and tile subsystems.
- **Inputs**:
    - `pargc`: A pointer to an integer representing the argument count.
    - `pargv`: A pointer to an array of strings representing the argument vector.
- **Logic and Control Flow**:
    - Call `fd_log_private_boot` with `pargc` and `pargv` to initialize the logging subsystem.
    - Call `fd_shmem_private_boot` with `pargc` and `pargv` to initialize the shared memory subsystem.
    - Call `fd_tile_private_boot` with `pargc` and `pargv` to initialize the tile subsystem, setting the caller as tile 0.
- **Output**: No return value.


---
### fd\_halt<!-- {{#callable:fd_halt}} -->
[View Source →](<../../../../src/util/fd_util.c#L14>)

Prepares the program for termination by halting private components related to tiles, shared memory, and logging.
- **Inputs**: None
- **Logic and Control Flow**:
    - Calls `fd_tile_private_halt` to halt tile-related operations.
    - Calls `fd_shmem_private_halt` to halt shared memory operations.
    - Calls `fd_log_private_halt` to halt logging operations.
- **Output**: No output is returned as the function is of type `void`.


---
### \_fd\_tickcount<!-- {{#callable:_fd_tickcount}} -->
[View Source →](<../../../../src/util/fd_util.c#L23>)

Returns the current tick count by calling `fd_tickcount()`.
- **Inputs**:
    - `_`: A placeholder parameter that is not used in the function.
- **Logic and Control Flow**:
    - Ignore the input parameter `_` by casting it to `void`.
    - Call the `fd_tickcount()` function to get the current tick count.
    - Return the result of `fd_tickcount()`.
- **Output**: The function returns a `long` integer representing the current tick count.


---
### fd\_yield<!-- {{#callable:fd_yield}} -->
[View Source →](<../../../../src/util/fd_util.c#L35>)

Calls the `sched_yield` function to yield the processor to another thread.
- **Inputs**: None
- **Logic and Control Flow**:
    - Calls the `sched_yield` function, which is a system call that yields the processor to another thread or process, allowing other threads or processes to run.
- **Output**: No output is returned as the function is of type `void`.


---
### fd\_syscall\_poll<!-- {{#callable:fd_syscall_poll}} -->
[View Source →](<../../../../src/util/fd_util.c#L37>)

Performs a polling operation on file descriptors with an optional timeout, using `ppoll` on Linux systems and `poll` on others.
- **Inputs**:
    - `fds`: A pointer to an array of `struct pollfd` that specifies the file descriptors to poll.
    - `nfds`: The number of file descriptors in the `fds` array.
    - `timeout`: The timeout period in milliseconds; if negative, the function waits indefinitely.
- **Logic and Control Flow**:
    - Checks if the code is running on a Linux system using the `__linux__` preprocessor directive.
    - If `timeout` is negative, calls `ppoll` with a `NULL` timespec to wait indefinitely.
    - If `timeout` is non-negative, converts `timeout` from milliseconds to a `struct timespec` and calls `ppoll` with this timespec.
    - If not on a Linux system, calls `poll` with the provided `timeout`.
- **Output**: Returns the result of the `ppoll` or `poll` system call, which indicates the number of file descriptors with events or an error code.



---
Made with ❤️ by [Driver](https://www.driver.ai/)