<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines a vector conditional API for SIMD operations with constructors, memory, element, binary, logical, conditional, conversion, reduction, and miscellaneous operations.

# Purpose
The code defines a set of macros and inline functions for handling vector conditionals using SIMD (Single Instruction, Multiple Data) operations, specifically targeting 32-bit integer lanes with support for 64-bit lanes. The primary data type used is `vc_t`, which represents a vector of integers where each lane is either 0 (indicating true) or -1 (indicating false). This representation allows for efficient bitwise operations to mask other vector types. The code provides constructors, memory operations, element operations, binary and logical operations, conditional operations, conversion operations, reduction operations, and miscellaneous operations for manipulating these vector conditionals.

The code is intended to be included indirectly through `fd_sse.h` and not directly, as indicated by the preprocessor directive at the beginning. It defines a public API for creating and manipulating vector conditionals, including functions for loading and storing vector conditionals from memory, performing logical and arithmetic operations, and converting between different vector types. The code also includes operations for transposing 4x4 matrices of vector conditionals and gathering elements from memory based on vector indices. The use of macros and inline functions is preferred to minimize the risk of compiler optimizations affecting performance.
# Functions

---
### vc\_bcast<!-- {{#callable:vc_bcast}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L46>)

Broadcasts a single integer value across all lanes of a 128-bit SIMD vector, converting it to a vector conditional format.
- **Inputs**:
    - `c0`: An integer value to broadcast across all lanes of the SIMD vector. It is treated as a C-style logical value, where zero is false and non-zero is true.
- **Logic and Control Flow**:
    - Convert `c0` to a C-style logical value by using `-!!c0`, which results in 0 for false and -1 for true.
    - Use `FD_COMPILER_FORGET(c0)` to prevent the compiler from optimizing away the conversion.
    - Return a 128-bit SIMD vector with all lanes set to the converted value using `_mm_set1_epi32(c0)`.
- **Output**: A 128-bit SIMD vector (`__m128i`) with all lanes set to the C-style logical value of `c0`.


---
### vc\_bcast\_pair<!-- {{#callable:vc_bcast_pair}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L53>)

Creates a vector conditional with alternating lanes based on two integer inputs.
- **Inputs**:
    - `c0`: An integer representing a logical value; non-zero becomes -1 (true), zero becomes 0 (false).
    - `c1`: An integer representing a logical value; non-zero becomes -1 (true), zero becomes 0 (false).
- **Logic and Control Flow**:
    - Convert `c0` to a logical value: non-zero becomes -1, zero becomes 0.
    - Convert `c1` to a logical value: non-zero becomes -1, zero becomes 0.
    - Return a vector conditional with the pattern `[c0, c1, c0, c1]`.
- **Output**: A `vc_t` vector conditional with the pattern `[c0, c1, c0, c1]`, where each element is either 0 or -1.


---
### vc\_bcast\_wide<!-- {{#callable:vc_bcast_wide}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L59>)

Creates a vector conditional with two pairs of lanes, each pair having the same logical value derived from the inputs.
- **Inputs**:
    - `c0`: An integer representing a logical value for the first pair of lanes.
    - `c1`: An integer representing a logical value for the second pair of lanes.
- **Logic and Control Flow**:
    - Convert `c0` to a logical value where non-zero becomes -1 and zero becomes 0.
    - Convert `c1` to a logical value where non-zero becomes -1 and zero becomes 0.
    - Use `_mm_setr_epi32` to create a vector with the pattern `[c0, c0, c1, c1]`.
- **Output**: Returns a `vc_t` vector conditional with the pattern `[c0, c0, c1, c1]`.


---
### vc\_ld<!-- {{#callable:vc_ld}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L90>)

Loads a 16-byte aligned vector of integers from memory and returns it as a vector conditional with logical values.
- **Inputs**:
    - `p`: A pointer to a 16-byte aligned memory location containing four integers.
- **Logic and Control Flow**:
    - Load a 128-bit integer vector from the memory location pointed to by `p` using `_mm_load_si128`.
    - Compare the loaded vector to zero using `_mm_cmpeq_epi32`, resulting in a vector where each lane is either 0 (if the corresponding integer is zero) or -1 (if the integer is non-zero).
    - XOR the result with a vector of -1s using `_mm_xor_si128`, converting the comparison result into a vector conditional where 0 indicates true and -1 indicates false.
- **Output**: A `vc_t` vector conditional where each lane is 0 if the corresponding integer in the input is non-zero, and -1 if it is zero.


---
### vc\_ld\_fast<!-- {{#callable:vc_ld_fast}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L94>)

Loads a 128-bit vector of integers from a 16-byte aligned memory location.
- **Inputs**:
    - `p`: A pointer to a constant integer array that is 16-byte aligned.
- **Logic and Control Flow**:
    - Uses the `_mm_load_si128` intrinsic to load a 128-bit vector from the memory location pointed to by `p`.
- **Output**: Returns a `vc_t` type, which is a 128-bit vector of integers loaded from the specified memory location.


---
### vc\_st<!-- {{#callable:vc_st}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L95>)

Stores a vector conditional `c` into a 16-byte aligned memory location `p`.
- **Inputs**:
    - `p`: A pointer to an integer array where the vector conditional will be stored. It must be 16-byte aligned.
    - `c`: A vector conditional of type `vc_t` to be stored at the location pointed to by `p`.
- **Logic and Control Flow**:
    - Uses the `_mm_store_si128` intrinsic to store the vector conditional `c` into the memory location pointed to by `p`.
- **Output**: No return value; the function performs a memory store operation.


---
### vc\_ldu<!-- {{#callable:vc_ldu}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L97>)

Loads a 128-bit vector from an unaligned memory address and returns a vector conditional where each lane is either 0 or -1 based on whether the loaded value is zero.
- **Inputs**:
    - `p`: A pointer to a memory location from which a 128-bit vector is loaded. The pointer does not need to be aligned.
- **Logic and Control Flow**:
    - Load a 128-bit vector from the memory location pointed to by `p` using `_mm_loadu_si128`.
    - Compare the loaded vector with zero using `_mm_cmpeq_epi32`, resulting in a vector where each lane is 0xFFFFFFFF if the corresponding lane in the loaded vector is zero, and 0 otherwise.
    - XOR the result with a vector of all 1s (`_mm_set1_epi32(-1)`), converting 0xFFFFFFFF to 0 and 0 to 0xFFFFFFFF, effectively creating a vector conditional.
- **Output**: Returns a `vc_t` vector conditional where each 32-bit lane is 0 if the corresponding lane in the loaded vector is zero, and -1 otherwise.


---
### vc\_ldu\_fast<!-- {{#callable:vc_ldu_fast}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L101>)

Loads a 128-bit vector of integers from an unaligned memory address.
- **Inputs**:
    - ``p``: A pointer to a memory location from which to load the vector.
- **Logic and Control Flow**:
    - Uses the `_mm_loadu_si128` intrinsic to load a 128-bit vector from the memory address pointed to by `p`.
- **Output**: Returns a `vc_t` type, which is a 128-bit vector of integers loaded from the specified memory location.


---
### vc\_stu<!-- {{#callable:vc_stu}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L102>)

Stores a vector conditional `c` into a memory location `p` without requiring alignment.
- **Inputs**:
    - `p`: A pointer to the memory location where the vector conditional `c` will be stored. The location does not need to be aligned.
    - `c`: The vector conditional of type `vc_t` to store at the memory location `p`.
- **Logic and Control Flow**:
    - Uses the `_mm_storeu_si128` intrinsic to store the vector conditional `c` into the memory location pointed to by `p`.
- **Output**: No return value; the function performs a memory store operation.


---
### vc\_expand<!-- {{#callable:vc_expand}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vc.h#L235>)

Expands a vector conditional by duplicating either the first two or last two lanes based on a flag.
- **Inputs**:
    - `c`: A vector conditional of type `vc_t`.
    - `imm_hi`: An integer flag that determines which lanes to duplicate; 0 for the first two lanes, 1 for the last two lanes.
- **Logic and Control Flow**:
    - Checks if `imm_hi` is true (non-zero).
    - If `imm_hi` is true, shuffles the vector `c` to duplicate the last two lanes using `_mm_shuffle_epi32` with the shuffle mask `_MM_SHUFFLE(3,2,3,2)`.
    - If `imm_hi` is false, uses the vector `c` as is.
    - Converts the 32-bit integer lanes to 64-bit integer lanes using `_mm_cvtepi32_epi64`.
- **Output**: A `vc_t` vector with expanded lanes, where either the first two or last two lanes are duplicated.



---
Made with ❤️ by [Driver](https://www.driver.ai/)