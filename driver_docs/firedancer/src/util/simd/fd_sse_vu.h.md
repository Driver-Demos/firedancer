<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for vector operations on 128-bit unsigned integer vectors using SSE intrinsics.

# Purpose
The code defines a set of macros and inline functions for handling SIMD (Single Instruction, Multiple Data) operations on vectors of unsigned 32-bit integers using SSE (Streaming SIMD Extensions) intrinsics. The primary data type used is `vu_t`, which represents a vector of four unsigned 32-bit integers. The code provides a comprehensive API for constructing, manipulating, and performing arithmetic, logical, and memory operations on these vectors. It includes constructors for creating vectors with specific values, broadcasting values across all lanes, and permuting elements within vectors. Arithmetic operations such as addition, subtraction, multiplication, and comparisons are defined, along with logical operations like AND, OR, XOR, and NOT.

The code also includes functions for loading and storing vectors from and to memory, with both aligned and unaligned variants. It provides conversion functions to transform vectors into different data types, such as floating-point and integer types, and includes reduction operations to compute sums, minimums, and maximums across vector elements. Additionally, the code offers utility functions for conditional operations, bitwise shifts, and rotations, as well as a function to transpose a 4x4 matrix of vectors. The use of macros and inline functions aims to optimize performance by leveraging the capabilities of the SSE instruction set while maintaining type safety and flexibility in vector operations.
# Functions

---
### vu\_bcast\_pair<!-- {{#callable:vu_bcast_pair}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L25>)

Creates a vector with the pattern `[ u0 u1 u0 u1 ]` from two unsigned integers.
- **Inputs**:
    - `u0`: An unsigned 32-bit integer to be broadcasted to the first and third positions of the vector.
    - `u1`: An unsigned 32-bit integer to be broadcasted to the second and fourth positions of the vector.
- **Logic and Control Flow**:
    - Convert `u0` to a signed integer `i0`.
    - Convert `u1` to a signed integer `i1`.
    - Use `_mm_setr_epi32` to create a vector with the pattern `[ i0 i1 i0 i1 ]`.
- **Output**: A `vu_t` vector with the pattern `[ u0 u1 u0 u1 ]`.


---
### vu\_bcast\_wide<!-- {{#callable:vu_bcast_wide}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L31>)

Creates a vector with the pattern `[ u0 u0 u1 u1 ]` from two unsigned integers.
- **Inputs**:
    - `u0`: An unsigned 32-bit integer to be broadcasted to the first two lanes of the vector.
    - `u1`: An unsigned 32-bit integer to be broadcasted to the last two lanes of the vector.
- **Logic and Control Flow**:
    - Convert `u0` to a signed integer `i0`.
    - Convert `u1` to a signed integer `i1`.
    - Use `_mm_setr_epi32` to create a vector with the pattern `[ i0 i0 i1 i1 ]`.
- **Output**: A `vu_t` vector with the pattern `[ u0 u0 u1 u1 ]`.


---
### vu\_ld<!-- {{#callable:vu_ld}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L63>)

Loads a 128-bit vector of four unsigned 32-bit integers from a 16-byte aligned memory location.
- **Inputs**:
    - ``p``: A pointer to a 16-byte aligned memory location containing four unsigned 32-bit integers.
- **Logic and Control Flow**:
    - Casts the input pointer `p` to a pointer of type `__m128i const *`.
    - Uses the `_mm_load_si128` intrinsic to load a 128-bit vector from the memory location pointed to by `p`.
- **Output**: Returns a `vu_t` type, which is a 128-bit vector containing four unsigned 32-bit integers loaded from the specified memory location.


---
### vu\_st<!-- {{#callable:vu_st}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L64>)

Stores a vector of four unsigned 32-bit integers into a 16-byte aligned memory location.
- **Inputs**:
    - ``p``: A pointer to a 16-byte aligned memory location where the vector will be stored.
    - ``i``: A vector of type `vu_t` containing four unsigned 32-bit integers to store.
- **Logic and Control Flow**:
    - Uses the `_mm_store_si128` intrinsic to store the vector `i` into the memory location pointed to by `p`.
- **Output**: No return value; the function performs a memory store operation.


---
### vu\_ldu<!-- {{#callable:vu_ldu}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L66>)

Loads a 128-bit vector of unsigned 32-bit integers from an unaligned memory address.
- **Inputs**:
    - ``p``: A pointer to the memory location from which to load the vector.
- **Logic and Control Flow**:
    - Casts the input pointer `p` to a pointer of type `__m128i const *`.
    - Uses the `_mm_loadu_si128` intrinsic to load a 128-bit vector from the unaligned memory location pointed to by `p`.
- **Output**: Returns a `vu_t` type, which is a 128-bit vector containing four unsigned 32-bit integers loaded from the specified memory location.


---
### vu\_stu<!-- {{#callable:vu_stu}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L67>)

Stores a vector of unsigned 32-bit integers to a memory location without requiring alignment.
- **Inputs**:
    - ``p``: A pointer to the memory location where the vector will be stored. The location does not need to be aligned.
    - ``i``: A vector of unsigned 32-bit integers (`vu_t`) to store at the memory location pointed to by `p`.
- **Logic and Control Flow**:
    - Uses the `_mm_storeu_si128` intrinsic to store the vector `i` at the memory location `p`.
- **Output**: No return value; the function performs a memory store operation.


---
### vu\_extract\_variable<!-- {{#callable:vu_extract_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L92>)

Extracts an unsigned 32-bit integer from a specified lane of a vector of unsigned integers.
- **Inputs**:
    - ``a``: A vector of unsigned 32-bit integers (`vu_t`).
    - ``n``: An integer specifying the lane index (0 to 3) from which to extract the unsigned integer.
- **Logic and Control Flow**:
    - Declare a union `t` with a `__m128i` array and a `uint` array, both of size 1.
    - Store the vector `a` into the `__m128i` array of the union `t` using `_mm_store_si128`.
    - Return the `n`-th element from the `uint` array of the union `t`.
- **Output**: Returns the unsigned 32-bit integer from the specified lane `n` of the vector `a`.


---
### vu\_insert\_variable<!-- {{#callable:vu_insert_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L99>)

Replaces the value in a specified lane of a vector with a new unsigned integer value.
- **Inputs**:
    - ``a``: A vector of type `vu_t` containing four unsigned 32-bit integers.
    - ``n``: An integer specifying the lane index (0 to 3) where the new value will be inserted.
    - ``v``: An unsigned integer value to insert into the specified lane of the vector.
- **Logic and Control Flow**:
    - Store the vector `a` into a union `t` that allows access to the vector as an array of unsigned integers.
    - Replace the value at index `n` in the array `t->u` with the new value `v`.
    - Load the modified array back into a vector and return it.
- **Output**: A vector of type `vu_t` with the value in lane `n` replaced by `v`.


---
### vu\_rol<!-- {{#callable:vu_rol}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L150>)

Performs a bitwise left rotation on each 32-bit lane of a vector of unsigned integers by a specified number of bits.
- **Inputs**:
    - ``a``: A vector of unsigned 32-bit integers (`vu_t`) to rotate.
    - ``imm``: An integer specifying the number of bits to rotate left, masked to 5 bits (0-31).
- **Logic and Control Flow**:
    - Masks the `imm` value with 31 to ensure it is within the range of 0 to 31.
    - Performs a left shift on the vector `a` by the masked `imm` value using `vu_shl`.
    - Performs a right shift on the vector `a` by the negated and masked `imm` value using `vu_shr`.
    - Combines the results of the left and right shifts using a bitwise OR operation with `vu_or`.
- **Output**: A vector of unsigned 32-bit integers (`vu_t`) with each lane rotated left by the specified number of bits.


---
### vu\_ror<!-- {{#callable:vu_ror}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L151>)

Performs a bitwise right rotation on each 32-bit lane of a vector of unsigned integers by a specified number of bits.
- **Inputs**:
    - ``a``: A vector of unsigned 32-bit integers (`vu_t`) to rotate.
    - ``imm``: An integer specifying the number of bits to rotate right, masked to 5 bits (0-31).
- **Logic and Control Flow**:
    - Compute the right shift of vector `a` by `imm & 31` bits using `vu_shr`.
    - Compute the left shift of vector `a` by `(-imm) & 31` bits using `vu_shl`.
    - Combine the results of the two shifts using a bitwise OR operation with `vu_or`.
- **Output**: Returns a vector of unsigned 32-bit integers (`vu_t`) with each lane rotated right by the specified number of bits.


---
### vu\_rol\_variable<!-- {{#callable:vu_rol_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L154>)

Performs a variable bitwise left rotation on a vector of unsigned 32-bit integers.
- **Inputs**:
    - ``a``: A vector of unsigned 32-bit integers (`vu_t`).
    - ``n``: An integer specifying the number of positions to rotate the bits to the left.
- **Logic and Control Flow**:
    - Compute `n & 31` to ensure the rotation count is within the range of 0 to 31 bits.
    - Perform a left shift on `a` by `n & 31` bits using `vu_shl_variable`.
    - Perform a right shift on `a` by `(-n) & 31` bits using `vu_shr_variable`.
    - Combine the results of the left and right shifts using a bitwise OR operation with `vu_or`.
- **Output**: Returns a vector of unsigned 32-bit integers (`vu_t`) with the bits rotated to the left by `n` positions.


---
### vu\_ror\_variable<!-- {{#callable:vu_ror_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L155>)

Performs a variable right rotation on a vector of unsigned 32-bit integers.
- **Inputs**:
    - ``a``: A vector of unsigned 32-bit integers (`vu_t`).
    - ``n``: An integer specifying the number of positions to rotate the vector to the right.
- **Logic and Control Flow**:
    - Compute `n & 31` to ensure the rotation count is within the range of 0 to 31.
    - Perform a right shift on vector `a` by `n & 31` positions using `vu_shr_variable`.
    - Perform a left shift on vector `a` by `(-n) & 31` positions using `vu_shl_variable`.
    - Combine the results of the right and left shifts using a bitwise OR operation with `vu_or`.
- **Output**: Returns a vector of unsigned 32-bit integers (`vu_t`) that is the result of the right rotation.


---
### vu\_rol\_vector<!-- {{#callable:vu_rol_vector}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L157>)

Performs a bitwise left rotation on each 32-bit lane of a vector `vu_t` by a specified amount in another vector `vi_t`.
- **Inputs**:
    - ``a``: A vector of type `vu_t` where each lane contains a 32-bit unsigned integer to be rotated.
    - ``b``: A vector of type `vi_t` where each lane specifies the number of positions to rotate the corresponding lane in `a`.
- **Logic and Control Flow**:
    - Broadcasts the integer value 31 to all lanes of a vector `vi_t` and assigns it to `m`.
    - Performs a bitwise AND operation between `b` and `m` to ensure the rotation amount is within 0 to 31, then left shifts each lane of `a` by the resulting value.
    - Negates `b`, performs a bitwise AND with `m`, and right shifts each lane of `a` by the resulting value.
    - Combines the results of the left and right shifts using a bitwise OR operation to complete the rotation.
- **Output**: Returns a vector `vu_t` where each lane contains the result of the left rotation operation.


---
### vu\_ror\_vector<!-- {{#callable:vu_ror_vector}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L162>)

Performs a bitwise right rotation on each 32-bit lane of a vector of unsigned integers by a specified number of bits.
- **Inputs**:
    - ``a``: A vector of unsigned 32-bit integers (`vu_t`) to rotate.
    - ``b``: A vector of signed 32-bit integers (`vi_t`) specifying the number of bits to rotate each corresponding lane in `a`.
- **Logic and Control Flow**:
    - Broadcasts the integer value 31 to all lanes of a vector `m` using `vi_bcast` to create a mask for bitwise operations.
    - Performs a bitwise AND operation between `b` and `m` to ensure the shift amount is within the range of 0 to 31 bits.
    - Calculates the right-shifted vector by applying `vu_shr_vector` to `a` with the masked shift amount.
    - Calculates the left-shifted vector by applying `vu_shl_vector` to `a` with the negated and masked shift amount.
    - Combines the right-shifted and left-shifted vectors using a bitwise OR operation with `vu_or` to produce the final rotated vector.
- **Output**: A vector of unsigned 32-bit integers (`vu_t`) where each lane is the result of rotating the corresponding lane in `a` to the right by the number of bits specified in `b`.


---
### vu\_to\_vd\_core<!-- {{#callable:vu_to_vd_core}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L223>)

Converts a vector of unsigned 32-bit integers to a vector of double-precision floating-point numbers, handling values greater than or equal to 2^31 using two's complement and floating-point arithmetic.
- **Inputs**:
    - ``u``: A vector of unsigned 32-bit integers (`vu_t`).
- **Logic and Control Flow**:
    - Compare each element of `u` with zero using `_mm_cmpgt_epi32`, resulting in a vector `c` where each element is 0 if the corresponding element in `u` is less than 2^31, and -1 otherwise.
    - Convert `u` to double-precision floating-point using `_mm_cvtepi32_pd`, resulting in `d`, where each element is `u` if less than 2^31, or `u - 2^32` otherwise.
    - Add 2^32 to each element of `d` using `_mm_add_pd`, resulting in `ds`, where each element is `u + 2^32` if less than 2^31, or `u` otherwise.
    - Convert `c` to a 64-bit integer vector using `_mm_cvtepi32_epi64`, resulting in `cl`, where each element is 0L if the corresponding element in `u` is less than 2^31, and -1L otherwise.
    - Blend `d` and `ds` using `_mm_blendv_pd` based on `cl`, resulting in the final vector of double-precision floating-point numbers.
- **Output**: A vector of double-precision floating-point numbers (`__m128d`).


---
### vu\_to\_vf<!-- {{#callable:vu_to_vf}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L241>)

Converts a vector of unsigned 32-bit integers to a vector of single-precision floating-point numbers.
- **Inputs**:
    - ``u``: A vector of unsigned 32-bit integers (`vu_t`).
- **Logic and Control Flow**:
    - Converts the input vector `u` to two double-precision floating-point vectors using [`vu_to_vd_core`](<#vu_to_vd_core>) and `vu_to_vd` functions.
    - Converts these double-precision vectors to single-precision floating-point vectors using `_mm_cvtpd_ps`.
    - Concatenates the two single-precision vectors into one using `_mm_shuffle_ps` with the shuffle mask `_MM_SHUFFLE(1,0,1,0)`.
- **Output**: A vector of single-precision floating-point numbers (`vf_t`).
- **Functions Called**:
    - [`vu_to_vd_core`](<#vu_to_vd_core>)


---
### vu\_sum\_all<!-- {{#callable:vu_sum_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L268>)

Computes the sum of all elements in a vector of unsigned 32-bit integers and broadcasts the result to all lanes of the vector.
- **Inputs**:
    - ``x``: A vector of unsigned 32-bit integers (`vu_t`) containing the elements to sum.
- **Logic and Control Flow**:
    - Performs a horizontal addition of the elements in `x` using `_mm_hadd_epi32`, resulting in a vector where the first two lanes contain the sum of the first two elements and the sum of the last two elements.
    - Performs another horizontal addition on the result, producing a vector where all lanes contain the total sum of the original vector elements.
- **Output**: A vector (`vu_t`) where all lanes contain the sum of the elements in the input vector `x`.


---
### vu\_min\_all<!-- {{#callable:vu_min_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L274>)

Finds the minimum value in a vector of unsigned 32-bit integers and returns a vector with all lanes set to this minimum value.
- **Inputs**:
    - `x`: A vector of unsigned 32-bit integers (`vu_t`).
- **Logic and Control Flow**:
    - Shuffle the input vector `x` to rearrange its elements using `_mm_shuffle_epi32` with the order (1, 0, 3, 2).
    - Compute the minimum of the original and shuffled vectors using `_mm_min_epu32`, resulting in a vector with two minimum values.
    - Shuffle the resulting vector again with the order (2, 3, 0, 1).
    - Compute the minimum of the vector from the previous step and the newly shuffled vector to find the overall minimum value.
    - Return the vector with all lanes set to the minimum value.
- **Output**: A vector (`vu_t`) where all lanes contain the minimum value found in the input vector.


---
### vu\_max\_all<!-- {{#callable:vu_max_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L284>)

Finds the maximum value in a vector of unsigned 32-bit integers and broadcasts it across all lanes.
- **Inputs**:
    - `x`: A vector of unsigned 32-bit integers (`vu_t`).
- **Logic and Control Flow**:
    - Shuffle the input vector `x` to rearrange its elements using `_mm_shuffle_epi32` with the order `(1, 0, 3, 2)`.
    - Compute the maximum of the original and shuffled vectors using `_mm_max_epu32`.
    - Shuffle the resulting vector again with the order `(2, 3, 0, 1)`.
    - Compute the maximum of the current vector and the newly shuffled vector using `_mm_max_epu32`.
    - Return the vector with the maximum value broadcasted across all lanes.
- **Output**: A vector (`vu_t`) where each lane contains the maximum value found in the input vector.


---
### vu\_gather<!-- {{#callable:vu_gather}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vu.h#L302>)

Gathers 32-bit integers from a base address using specified indices and returns them as a vector.
- **Inputs**:
    - `b`: A pointer to the base address of an array of unsigned 32-bit integers.
    - `i`: A vector of indices (`vi_t`) used to gather elements from the base address.
- **Logic and Control Flow**:
    - Uses the `_mm_i32gather_epi32` intrinsic to gather 32-bit integers from the base address `b` using indices specified in `i`.
    - The gathered integers are returned as a vector of type `vu_t`.
- **Output**: A vector (`vu_t`) containing the gathered 32-bit integers from the specified indices.



---
Made with ❤️ by [Driver](https://www.driver.ai/)