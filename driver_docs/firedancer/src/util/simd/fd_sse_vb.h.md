<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for vector byte operations using SSE, defining macros and functions for vector construction, manipulation, arithmetic, and logical operations on 128-bit vectors of unsigned 8-bit integers.

# Purpose
The code defines a set of macros and inline functions for handling SIMD (Single Instruction, Multiple Data) operations on vectors of 8-bit unsigned integers using SSE (Streaming SIMD Extensions) intrinsics. The primary data type used is `vb_t`, which is an alias for `__m128i`, representing a 128-bit vector. The code provides a variety of operations on these vectors, including constructors, memory operations, arithmetic, bitwise, logical, and conditional operations. It also includes conversion functions to transform vector elements into different data types and reduction operations to compute aggregate values like sum, minimum, and maximum across vector elements.

The file is intended to be included indirectly through `fd_sse.h`, as indicated by the preprocessor directive at the beginning. It provides a broad range of functionality for vector manipulation, focusing on operations that can be performed on 16-element vectors of 8-bit unsigned integers. The use of macros and inline functions aims to optimize performance by leveraging the capabilities of the SSE instruction set. The code does not define public APIs or external interfaces but rather serves as a utility for internal use in applications that require efficient vector processing.
# Functions

---
### vb\_bcast\_pair<!-- {{#callable:vb_bcast_pair}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L26>)

Creates a 128-bit vector with alternating repetitions of two input bytes.
- **Inputs**:
    - `b0`: The first unsigned 8-bit integer to be repeated in the vector.
    - `b1`: The second unsigned 8-bit integer to be repeated in the vector.
- **Logic and Control Flow**:
    - Converts `b0` and `b1` to signed 8-bit integers.
    - Uses `_mm_setr_epi8` to create a 128-bit vector with the pattern `[b0, b1, b0, b1, ..., b0, b1]`.
- **Output**: A 128-bit vector (`vb_t`) containing the pattern `[b0, b1, b0, b1, ..., b0, b1]`.


---
### vb\_bcast\_quad<!-- {{#callable:vb_bcast_quad}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L32>)

Creates a 128-bit vector with four 8-bit unsigned integers repeated four times.
- **Inputs**:
    - `b0`: The first 8-bit unsigned integer to include in the vector.
    - `b1`: The second 8-bit unsigned integer to include in the vector.
    - `b2`: The third 8-bit unsigned integer to include in the vector.
    - `b3`: The fourth 8-bit unsigned integer to include in the vector.
- **Logic and Control Flow**:
    - Converts each input `uchar` to a `char` type.
    - Uses `_mm_setr_epi8` to create a 128-bit vector with the pattern `[b0, b1, b2, b3, b0, b1, b2, b3, b0, b1, b2, b3, b0, b1, b2, b3]`.
- **Output**: A 128-bit vector (`vb_t`) containing the input bytes repeated four times.


---
### vb\_bcast\_oct<!-- {{#callable:vb_bcast_oct}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L38>)

Creates a 128-bit vector with two repetitions of eight 8-bit unsigned integers.
- **Inputs**:
    - `b0`: The first 8-bit unsigned integer.
    - `b1`: The second 8-bit unsigned integer.
    - `b2`: The third 8-bit unsigned integer.
    - `b3`: The fourth 8-bit unsigned integer.
    - `b4`: The fifth 8-bit unsigned integer.
    - `b5`: The sixth 8-bit unsigned integer.
    - `b6`: The seventh 8-bit unsigned integer.
    - `b7`: The eighth 8-bit unsigned integer.
- **Logic and Control Flow**:
    - Converts each input `uchar` to a `char` type.
    - Uses `_mm_setr_epi8` to create a 128-bit vector with the first eight elements set to `b0` through `b7` and the next eight elements repeating `b0` through `b7`.
- **Output**: A 128-bit vector (`vb_t`) containing two repetitions of the input bytes.


---
### vb\_expand\_pair<!-- {{#callable:vb_expand_pair}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L44>)

Creates a 128-bit vector with the first half filled with `b0` and the second half filled with `b1`.
- **Inputs**:
    - `b0`: An unsigned 8-bit integer (`uchar`) to fill the first half of the vector.
    - `b1`: An unsigned 8-bit integer (`uchar`) to fill the second half of the vector.
- **Logic and Control Flow**:
    - Converts `b0` and `b1` to signed 8-bit integers (`char`).
    - Uses `_mm_setr_epi8` to create a 128-bit vector (`vb_t`).
    - Fills the first 8 bytes of the vector with `b0`.
    - Fills the last 8 bytes of the vector with `b1`.
- **Output**: A 128-bit vector (`vb_t`) with the first 8 bytes set to `b0` and the last 8 bytes set to `b1`.


---
### vb\_expand\_quad<!-- {{#callable:vb_expand_quad}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L50>)

Expands four `uchar` values into a 16-byte vector with each value repeated four times.
- **Inputs**:
    - `b0`: The first `uchar` value to expand.
    - `b1`: The second `uchar` value to expand.
    - `b2`: The third `uchar` value to expand.
    - `b3`: The fourth `uchar` value to expand.
- **Logic and Control Flow**:
    - Converts each input `uchar` value (`b0`, `b1`, `b2`, `b3`) to a `char` type.
    - Uses `_mm_setr_epi8` to create a 16-byte vector where each input value is repeated four times in sequence.
- **Output**: A `vb_t` vector containing the expanded values in the format `[ b0 b0 b0 b0 b1 b1 b1 b1 b2 b2 b2 b2 b3 b3 b3 b3 ]`.


---
### vb\_expand\_oct<!-- {{#callable:vb_expand_oct}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L56>)

Creates a vector with each input byte duplicated in sequence.
- **Inputs**:
    - `b0`: First unsigned 8-bit integer to duplicate.
    - `b1`: Second unsigned 8-bit integer to duplicate.
    - `b2`: Third unsigned 8-bit integer to duplicate.
    - `b3`: Fourth unsigned 8-bit integer to duplicate.
    - `b4`: Fifth unsigned 8-bit integer to duplicate.
    - `b5`: Sixth unsigned 8-bit integer to duplicate.
    - `b6`: Seventh unsigned 8-bit integer to duplicate.
    - `b7`: Eighth unsigned 8-bit integer to duplicate.
- **Logic and Control Flow**:
    - Converts each input byte to a signed 8-bit integer.
    - Duplicates each converted byte.
    - Arranges the duplicated bytes in a sequence.
    - Returns the sequence as a 128-bit vector.
- **Output**: A 128-bit vector (`vb_t`) with each input byte duplicated in sequence.


---
### vb\_ld<!-- {{#callable:vb_ld}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L102>)

Loads 16 unsigned 8-bit integers from a 16-byte aligned memory location into a vector.
- **Inputs**:
    - `p`: A pointer to a 16-byte aligned memory location containing 16 unsigned 8-bit integers.
- **Logic and Control Flow**:
    - Casts the input pointer `p` to a pointer of type `__m128i const *`.
    - Uses the `_mm_load_si128` intrinsic to load the data from the memory location pointed to by the casted pointer into a `__m128i` vector.
- **Output**: A `vb_t` type, which is a `__m128i` vector containing the loaded 16 unsigned 8-bit integers.


---
### vb\_st<!-- {{#callable:vb_st}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L103>)

Stores a 128-bit vector of unsigned 8-bit integers into a 16-byte aligned memory location.
- **Inputs**:
    - ``p``: A pointer to a 16-byte aligned memory location where the vector will be stored.
    - ``i``: A 128-bit vector of type `vb_t` containing unsigned 8-bit integers to store.
- **Logic and Control Flow**:
    - Uses the `_mm_store_si128` intrinsic to store the vector `i` into the memory location pointed to by `p`.
- **Output**: No return value; the function performs a memory store operation.


---
### vb\_ldu<!-- {{#callable:vb_ldu}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L105>)

Loads a 16-byte vector of unsigned 8-bit integers from an unaligned memory address.
- **Inputs**:
    - `p`: A pointer to the memory location from which to load the vector.
- **Logic and Control Flow**:
    - Casts the input pointer `p` to a pointer of type `__m128i const *`.
    - Uses the `_mm_loadu_si128` intrinsic to load a 16-byte vector from the unaligned memory location pointed to by `p`.
- **Output**: Returns a `vb_t` type, which is a 16-byte vector of unsigned 8-bit integers.


---
### vb\_stu<!-- {{#callable:vb_stu}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L106>)

Stores a 128-bit vector of unsigned 8-bit integers to a memory location without alignment requirements.
- **Inputs**:
    - ``p``: A pointer to the memory location where the vector will be stored. The location does not need to be aligned.
    - ``i``: A `vb_t` type representing a 128-bit vector of unsigned 8-bit integers to store.
- **Logic and Control Flow**:
    - Uses the `_mm_storeu_si128` intrinsic to store the vector `i` at the memory location pointed to by `p`.
- **Output**: No return value; the function performs a memory store operation.


---
### vb\_extract\_variable<!-- {{#callable:vb_extract_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L125>)

Extracts an unsigned 8-bit integer from a specified lane of a 128-bit vector.
- **Inputs**:
    - ``a``: A 128-bit vector (`vb_t`) containing 16 unsigned 8-bit integers.
    - ``n``: An integer specifying the lane (0 to 15) from which to extract the unsigned 8-bit integer.
- **Logic and Control Flow**:
    - Stores the 128-bit vector `a` into a union `t` that allows access to the vector as an array of 16 unsigned 8-bit integers.
    - Returns the unsigned 8-bit integer located at the `n`-th position in the array `t->i`.
- **Output**: An unsigned 8-bit integer extracted from the `n`-th lane of the vector `a`.


---
### vb\_insert\_variable<!-- {{#callable:vb_insert_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L132>)

Inserts a given unsigned 8-bit integer into a specified position of a 128-bit vector and returns the modified vector.
- **Inputs**:
    - ``a``: A 128-bit vector of type `vb_t` where each lane holds an unsigned 8-bit integer.
    - ``n``: An integer specifying the position (0 to 15) in the vector where the new value will be inserted.
    - ``v``: An unsigned 8-bit integer (`uchar`) to insert into the vector at position `n`.
- **Logic and Control Flow**:
    - Store the 128-bit vector `a` into a temporary union `t` that allows access to individual bytes.
    - Replace the byte at position `n` in the array `t->i` with the value `v`.
    - Load the modified array back into a 128-bit vector and return it.
- **Output**: Returns a 128-bit vector of type `vb_t` with the specified byte replaced by the new value.


---
### vb\_rol<!-- {{#callable:vb_rol}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L179>)

Performs a bitwise left rotation on each byte of a 128-bit vector by a specified number of bits.
- **Inputs**:
    - ``a``: A 128-bit vector of type `vb_t` where each lane contains an unsigned 8-bit integer.
    - ``imm``: An integer specifying the number of bits to rotate each byte in the vector `a` to the left.
- **Logic and Control Flow**:
    - Calculate the left shift of vector `a` by `imm & 7` bits using `vb_shl` function.
    - Calculate the right shift of vector `a` by `(-imm) & 7` bits using `vb_shr` function.
    - Combine the results of the left and right shifts using the `vb_or` function to perform the rotation.
- **Output**: A 128-bit vector of type `vb_t` with each byte rotated left by the specified number of bits.


---
### vb\_ror<!-- {{#callable:vb_ror}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L180>)

Performs a bitwise right rotation on each byte of a 128-bit vector by a specified number of bits.
- **Inputs**:
    - ``a``: A 128-bit vector of type `vb_t` where each lane contains an unsigned 8-bit integer.
    - ``imm``: An integer specifying the number of bits to rotate right, constrained to the range 0 to 7.
- **Logic and Control Flow**:
    - Compute the effective rotation amount by taking `imm & 7` to ensure it is within the range 0 to 7.
    - Perform a right shift on the vector `a` by the computed rotation amount using `vb_shr`.
    - Perform a left shift on the vector `a` by the complement of the rotation amount using `vb_shl`.
    - Combine the results of the right and left shifts using a bitwise OR operation with `vb_or`.
- **Output**: Returns a 128-bit vector of type `vb_t` with each byte rotated right by the specified number of bits.


---
### vb\_rol\_variable<!-- {{#callable:vb_rol_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L182>)

Performs a variable bitwise left rotation on a vector of 8-bit unsigned integers.
- **Inputs**:
    - ``a``: A vector of 8-bit unsigned integers (`vb_t`) to rotate.
    - ``n``: An integer specifying the number of bits to rotate by, where only the lower 3 bits are used (i.e., `n & 7`).
- **Logic and Control Flow**:
    - Compute the left shift of `a` by `n & 7` bits using `vb_shl_variable`.
    - Compute the right shift of `a` by `(-n) & 7` bits using `vb_shr_variable`.
    - Combine the results of the left and right shifts using a bitwise OR operation with `vb_or`.
- **Output**: Returns a `vb_t` vector where each element is the result of rotating the corresponding element in `a` to the left by `n` bits.


---
### vb\_ror\_variable<!-- {{#callable:vb_ror_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L183>)

Performs a bitwise right rotation on each byte of a 128-bit vector by a variable number of bits.
- **Inputs**:
    - ``a``: A 128-bit vector of type `vb_t` where each lane contains an unsigned 8-bit integer.
    - ``n``: An integer specifying the number of bits to rotate right, which is masked to the range 0-7.
- **Logic and Control Flow**:
    - Masks the input `n` with 7 to ensure the rotation is within 0-7 bits.
    - Calls `vb_shr_variable` to perform a right shift on `a` by `n` bits.
    - Calls `vb_shl_variable` to perform a left shift on `a` by `(-n) & 7` bits.
    - Combines the results of the shifts using `vb_or` to complete the right rotation.
- **Output**: Returns a 128-bit vector of type `vb_t` with each byte rotated right by `n` bits.


---
### vb\_sum\_all<!-- {{#callable:vb_sum_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L265>)

Calculates the sum of all elements in a vector of unsigned 8-bit integers and broadcasts the result across the vector.
- **Inputs**:
    - `x`: A vector of type `vb_t` containing 16 unsigned 8-bit integers.
- **Logic and Control Flow**:
    - Use `_mm_sad_epu8` to compute the sum of the lower and upper halves of the vector `x`, storing each result in 64 bits.
    - Shuffle the vector `x` to broadcast the sum of the lower half using `_mm_shuffle_epi8` and `vb_bcast(0)`.
    - Shuffle the vector `x` to broadcast the sum of the upper half using `_mm_shuffle_epi8` and `vb_bcast(8)`.
    - Add the two shuffled vectors using `_mm_add_epi8` to obtain the final result.
- **Output**: A vector of type `vb_t` where each element is the sum of all elements in the input vector `x`.


---
### vb\_min\_all<!-- {{#callable:vb_min_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L271>)

Finds the minimum value in a vector of unsigned 8-bit integers and broadcasts it across all lanes of the vector.
- **Inputs**:
    - ``x``: A vector of type `vb_t` containing 16 unsigned 8-bit integers.
- **Logic and Control Flow**:
    - Use `_mm_min_epu8` to find the minimum between `x` and a shuffled version of `x` with indices `[8, 9, 10, 11, 12, 13, 14, 15, 0, 1, 2, 3, 4, 5, 6, 7]`, effectively comparing elements across the vector.
    - Repeat the minimum operation with a new shuffle pattern `[4, 5, 6, 7, 0, 1, 2, 3, 4, 5, 6, 7, 0, 1, 2, 3]` to further reduce the vector.
    - Continue reducing the vector by finding the minimum with a shuffle pattern created by `vb_bcast_quad(2, 3, 0, 1)`, which groups elements into pairs for comparison.
    - Finally, use `vb_bcast_pair(1, 0)` to ensure the minimum value is broadcast across all lanes of the vector.
- **Output**: A vector of type `vb_t` where all lanes contain the minimum value found in the input vector `x`.
- **Functions Called**:
    - [`vb_bcast_quad`](<#vb_bcast_quad>)
    - [`vb_bcast_pair`](<#vb_bcast_pair>)


---
### vb\_max\_all<!-- {{#callable:vb_max_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vb.h#L280>)

Finds the maximum value in a vector of unsigned 8-bit integers and broadcasts it across all lanes of the vector.
- **Inputs**:
    - ``x``: A vector of type `vb_t` containing 16 unsigned 8-bit integers.
- **Logic and Control Flow**:
    - Use `_mm_max_epu8` to compare and find the maximum between `x` and a shuffled version of `x` with indices `[8, 9, 10, 11, 12, 13, 14, 15, 0, 1, 2, 3, 4, 5, 6, 7]`.
    - Repeat the maximum comparison with another shuffled version of `x` with indices `[4, 5, 6, 7, 0, 1, 2, 3, 4, 5, 6, 7, 0, 1, 2, 3]`.
    - Continue the maximum comparison with a broadcasted quad shuffle using `vb_bcast_quad(2, 3, 0, 1)`.
    - Perform the final maximum comparison with a broadcasted pair shuffle using `vb_bcast_pair(1, 0)`.
- **Output**: A vector of type `vb_t` where all lanes contain the maximum value found in the input vector `x`.
- **Functions Called**:
    - [`vb_bcast_quad`](<#vb_bcast_quad>)
    - [`vb_bcast_pair`](<#vb_bcast_pair>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)