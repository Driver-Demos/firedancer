<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines a vector float API using SSE intrinsics for operations on 128-bit vectors of single-precision floats.

# Purpose
The code defines a set of macros and inline functions for operations on vector floats using SIMD (Single Instruction, Multiple Data) instructions, specifically targeting the SSE (Streaming SIMD Extensions) instruction set. The primary data type used is `vf_t`, which represents a vector of four single-precision floating-point numbers. The code provides a variety of operations on these vectors, including constructors, arithmetic operations, logical operations, memory operations, and conversion operations. These operations are designed to perform computations on multiple data points simultaneously, leveraging the parallel processing capabilities of modern CPUs.

The code is structured to provide a comprehensive API for handling vectorized floating-point operations. It includes constructors for creating vectors, predefined constants, and functions for loading and storing data from memory. Arithmetic operations such as addition, subtraction, multiplication, and division are defined, along with more complex operations like fused multiply-add. Logical operations and conditional operations are also provided, allowing for comparisons and conditional assignments. The code includes conversion functions to transform vector floats into other data types, such as integers or doubles. Additionally, the code provides reduction operations to compute the sum, minimum, or maximum of all elements in a vector. The use of macros and inline functions aims to optimize performance by minimizing function call overhead and allowing the compiler to generate efficient machine code.
# Functions

---
### vf\_bcast\_pair<!-- {{#callable:vf_bcast_pair}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L37>)

Creates a vector float with the pattern `[f0, f1, f0, f1]` using two input floats.
- **Inputs**:
    - `f0`: The first float value to be used in the vector.
    - `f1`: The second float value to be used in the vector.
- **Logic and Control Flow**:
    - Calls the `_mm_setr_ps` function with the arguments `f0`, `f1`, `f0`, `f1`.
- **Output**: Returns a `vf_t` vector float with the pattern `[f0, f1, f0, f1]`.


---
### vf\_bcast\_wide<!-- {{#callable:vf_bcast_wide}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L42>)

Creates a vector float with the pattern `[f0, f0, f1, f1]` using two input floats.
- **Inputs**:
    - `f0`: The first float value to be broadcasted into the first two lanes of the vector.
    - `f1`: The second float value to be broadcasted into the last two lanes of the vector.
- **Logic and Control Flow**:
    - Uses the `_mm_setr_ps` intrinsic to create a vector float with the specified pattern `[f0, f0, f1, f1]`.
- **Output**: A `vf_t` vector float with the pattern `[f0, f0, f1, f1]`.


---
### vf\_extract\_variable<!-- {{#callable:vf_extract_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L98>)

Extracts a float from a specified lane of a vector float.
- **Inputs**:
    - ``a``: A vector float (`vf_t`) containing four single-precision floating-point values.
    - ``n``: An integer specifying the lane index (0 to 3) from which to extract the float.
- **Logic and Control Flow**:
    - Declare an array `f` of four floats with the attribute `V_ATTR`.
    - Store the contents of the vector float `a` into the array `f` using `_mm_store_ps`.
    - Return the float at index `n` from the array `f`.
- **Output**: A single-precision floating-point value extracted from the specified lane of the vector float.


---
### vf\_insert\_variable<!-- {{#callable:vf_insert_variable}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L105>)

Replaces the element at a specified index in a vector float with a new float value.
- **Inputs**:
    - ``a``: A vector float (`vf_t`) containing four 32-bit wide lanes, each holding a single precision floating point value.
    - ``n``: An integer representing the index (0 to 3) of the lane in the vector `a` to be replaced.
    - ``v``: A float value to insert into the vector `a` at the specified index `n`.
- **Logic and Control Flow**:
    - Store the vector float `a` into a local array `f` of four floats using `_mm_store_ps`.
    - Replace the element at index `n` in the array `f` with the float value `v`.
    - Load the modified array `f` back into a vector float using `_mm_load_ps`.
    - Return the modified vector float.
- **Output**: A vector float (`vf_t`) with the element at index `n` replaced by the float value `v`.


---
### vf\_to\_vu\_fast<!-- {{#callable:vf_to_vu_fast}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L278>)

Converts a vector of floats to a vector of unsigned integers, handling values in the range [0, 2^32) using SIMD operations.
- **Inputs**:
    - `a`: A vector of floats (`vf_t`) assumed to contain integer values in the range [0, 2^32).
- **Logic and Control Flow**:
    - Broadcasts the value 2^31 into a vector `s`.
    - Compares each element of `a` with `s` to create a condition vector `c` where each element is -1 if the corresponding element in `a` is less than 2^31, and 0 otherwise.
    - Subtracts `s` from `a` to create a vector `as`.
    - Uses the condition vector `c` to select between `a` and `as`, converting the result to a vector of signed integers `u`.
    - Adds 2^31 to each element of `u` to create a vector `us`.
    - Blends `us` and `u` based on the condition vector `c` to produce the final result.
- **Output**: A vector of unsigned integers (`__m128i`) corresponding to the input vector `a`.


---
### vf\_sum\_all<!-- {{#callable:vf_sum_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L298>)

Computes the sum of all elements in a vector float and broadcasts the result to all lanes.
- **Inputs**:
    - `x`: A vector float (`vf_t`) containing four single-precision floating point values.
- **Logic and Control Flow**:
    - Performs a horizontal addition on the vector `x`, combining adjacent pairs of elements.
    - Performs another horizontal addition on the result to sum all elements.
    - Returns the result as a vector with the sum broadcasted to all lanes.
- **Output**: A vector float (`vf_t`) where each lane contains the sum of all elements in the input vector `x`.


---
### vf\_min\_all<!-- {{#callable:vf_min_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L304>)

Finds the minimum value in a vector of four floats and broadcasts it across all lanes.
- **Inputs**:
    - `x`: A vector of four single-precision floating point values (`vf_t`).
- **Logic and Control Flow**:
    - Permutes the input vector `x` to rearrange its elements using `_MM_SHUFFLE(1, 0, 3, 2)` and stores the result in `y`.
    - Computes the element-wise minimum of `x` and `y` using `_mm_min_ps` and updates `x`.
    - Permutes the updated `x` again using `_MM_SHUFFLE(2, 3, 0, 1)` and stores the result in `y`.
    - Computes the element-wise minimum of the updated `x` and `y` using `_mm_min_ps` to find the minimum value across all elements of the original vector.
- **Output**: A vector (`vf_t`) where all four lanes contain the minimum value found in the input vector `x`.


---
### vf\_max\_all<!-- {{#callable:vf_max_all}} -->
[View Source →](<../../../../../src/util/simd/fd_sse_vf.h#L314>)

Computes the maximum value of a vector of four floats and broadcasts it across all elements of the vector.
- **Inputs**:
    - `x`: A vector of four single-precision floating point values (`vf_t`).
- **Logic and Control Flow**:
    - Permutes the elements of `x` using `_mm_permute_ps` to rearrange them in the order x2, x3, x0, x1.
    - Computes the element-wise maximum of `x` and the permuted vector using `_mm_max_ps`, resulting in a vector with the maximum values of the first two and last two elements.
    - Permutes the resulting vector again to rearrange the elements in the order x13, x02.
    - Computes the element-wise maximum again to find the maximum value across all elements of the vector.
    - Returns the vector with the maximum value broadcasted across all elements.
- **Output**: A vector (`vf_t`) where all elements are the maximum value found in the input vector `x`.



---
Made with ❤️ by [Driver](https://www.driver.ai/)