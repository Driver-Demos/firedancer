<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Generates Markdown documentation for metrics, converting metric names to snake_case and formatting them.

# Purpose
The code is a script that generates documentation for metrics in Markdown format. It processes a collection of metrics, which are categorized into links, tiles, and specific tile types, and writes them to a file named `metrics-generated.md` located in the `book/api` directory. The script uses a helper function [`_write_metric`](<#_write_metric>) to format each metric's name, type, and description into a table row, applying specific formatting rules such as converting camel case to snake case and adding HTML spans for styling.

The script imports types from a local module and uses the `TextIO` type from the `typing` module to handle file operations. It iterates over different categories of metrics, writing each category to the Markdown file with appropriate headers and formatting. The script also includes preamble content from external Markdown files for links and tiles. The final output is a structured Markdown document that lists all metrics with their details, facilitating easy reference and documentation.
# Imports and Dependencies

---
- `.types.*`
- `typing.TextIO`
- `re`


# Functions

---
### camel2snake<!-- {{#callable:firedancer/src/disco/metrics/generate/write_docs.camel2snake}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/write_docs.py#L5>)

Converts a camel case string to a snake case string.
- **Inputs**:
    - `str`: A string in camel case format.
- **Logic and Control Flow**:
    - Uses a regular expression to find positions in the string where a lowercase letter is followed by an uppercase letter.
    - Inserts an underscore ('_') before each uppercase letter found, except if it is the first character of the string.
    - Converts the entire string to lowercase.
- **Output**: A string converted from camel case to snake case.


---
### \_write\_metric<!-- {{#callable:firedancer/src/disco/metrics/generate/write_docs._write_metric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/write_docs.py#L8>)

Writes metric data to a file in a formatted table.
- **Inputs**:
    - `f`: A file-like object where the metric data will be written.
    - `metric`: An instance of the `Metric` class, which contains the metric data to write.
    - `prefix`: A string to prepend to the metric name for formatting purposes.
- **Logic and Control Flow**:
    - Check if `metric` is an instance of `CounterEnumMetric` or `GaugeEnumMetric`.
    - If true, iterate over `metric.enum.values` to process each value.
    - For each value, convert `metric.name` and `value.name` from camel case to snake case using [`camel2snake`](<#camel2snake>).
    - Format the `full_name` and `full_tag` with HTML span elements and zero-width spaces for display purposes.
    - Write the formatted metric data to the file `f` with the type and description, including the value label.
    - If `metric` is not an instance of `CounterEnumMetric` or `GaugeEnumMetric`, format `full_name` similarly without processing enum values.
    - Write the formatted metric data to the file `f` with the type and description.
- **Output**: Writes formatted metric data to the provided file-like object `f`.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/write_docs.camel2snake`](<#camel2snake>)


---
### write\_docs<!-- {{#callable:firedancer/src/disco/metrics/generate/write_docs.write_docs}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/write_docs.py#L23>)

Generates a Markdown document with metrics information and writes it to a file.
- **Inputs**:
    - `metrics`: An instance of the `Metrics` class containing metric data to document.
- **Logic and Control Flow**:
    - Opens a file at the path '../../../book/api/metrics-generated.md' for writing.
    - Writes a section header and preamble for 'All Links' to the file.
    - Iterates over `metrics.link_out` and `metrics.link_in`, writing each metric using the [`_write_metric`](<#_write_metric>) function with the prefix 'link'.
    - Writes a closing div tag for the 'All Links' section.
    - Writes a section header and preamble for 'All Tiles' to the file.
    - Iterates over `metrics.common`, writing each metric using the [`_write_metric`](<#_write_metric>) function with the prefix 'tile'.
    - Writes a closing div tag for the 'All Tiles' section.
    - Iterates over each `Tile` in the `Tile` enumeration.
    - For each `Tile` present in `metrics.tiles`, writes a section header for the tile, iterates over the metrics for that tile, and writes each metric using the [`_write_metric`](<#_write_metric>) function with the tile name as the prefix.
    - Writes a closing div tag for each tile section.
    - Prints a message indicating the number of metrics written to the file.
- **Output**: A Markdown file containing formatted metrics information is written to the specified path.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/write_docs._write_metric`](<#_write_metric>)
    - [`firedancer/src/disco/metrics/generate/types.Metrics.count`](<types.py.md#metricscount>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)