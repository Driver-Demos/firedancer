<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines metric-related classes and functions for parsing XML data into metric objects.

# Purpose
The code defines a system for managing and parsing metrics, which are categorized into different types such as `Counter`, `Gauge`, and `Histogram`. These metrics are associated with various `Tile` categories, which are represented as an enumeration. The code provides classes to represent different metric types, including `CounterMetric`, `GaugeMetric`, `HistogramMetric`, and their enum-based counterparts. Each metric type has attributes such as `name`, `description`, and `clickhouse_exclude`, and methods to calculate its [`footprint`](<#metricfootprint>) and [`count`](<#metriccount>).

The code also includes functionality to parse XML data to create instances of these metric classes. The [`parse_metrics`](<#parse_metrics>) function reads XML data to extract metric definitions, including enums and tiles, and constructs a `Metrics` object that organizes these metrics into common, tile-specific, link-in, and link-out categories. The `Metrics` class provides methods to calculate the total count of metrics and to layout the metrics by assigning offsets. This code is intended to be used as a library for managing and processing metric data, particularly in environments where metrics are defined in XML format.
# Imports and Dependencies

---
- `enum.Enum`
- `typing.Dict`
- `typing.List`
- `typing.Optional`
- `xml.etree.ElementTree`


# Classes

---
### Tile<!-- {{#class:firedancer/src/disco/metrics/generate/types.Tile}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L5>)

- **Decorators**: `@Enum`
- **Description**: Defines a set of named constants representing different types of tiles, each associated with a unique integer value.
- **Inherits From**:
    - `Enum`


---
### MetricType<!-- {{#class:firedancer/src/disco/metrics/generate/types.MetricType}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L41>)

- **Description**: Defines different types of metrics as enumeration values, including `COUNTER`, `GAUGE`, and `HISTOGRAM`.
- **Inherits From**:
    - `Enum`


---
### HistogramConverter<!-- {{#class:firedancer/src/disco/metrics/generate/types.HistogramConverter}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L46>)

- **Members**:
    - `NONE`: Represents no conversion.
    - `SECONDS`: Represents conversion to seconds.
    - `NANOSECONDS`: Represents conversion to nanoseconds.
- **Description**: Defines conversion types for histograms, specifying whether to apply no conversion, convert to seconds, or convert to nanoseconds.
- **Inherits From**:
    - `Enum`


---
### EnumValue<!-- {{#class:firedancer/src/disco/metrics/generate/types.EnumValue}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L51>)

- **Members**:
    - `value`: Stores an integer value for the enumeration.
    - `name`: Holds the name of the enumeration as a string.
    - `label`: Contains a label for the enumeration as a string.
- **Description**: Represents an enumeration value with an integer value, a name, and a label.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.EnumValue.__init__`](<#enumvalue__init__>)

**Methods**

---
#### EnumValue\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.EnumValue.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L52>)

Initializes an instance of the `EnumValue` class with specified attributes.
- **Inputs**:
    - `value`: An integer representing the value of the enum.
    - `name`: A string representing the name of the enum.
    - `label`: A string representing the label of the enum.
- **Logic and Control Flow**:
    - Assigns the input `value` to the instance variable `self.value`.
    - Assigns the input `name` to the instance variable `self.name`.
    - Assigns the input `label` to the instance variable `self.label`.
- **Output**: None, as this is a constructor method for initializing an object.
- **See also**: [`firedancer/src/disco/metrics/generate/types.EnumValue`](<#enumvalue>)  (Base Class)



---
### MetricEnum<!-- {{#class:firedancer/src/disco/metrics/generate/types.MetricEnum}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L57>)

- **Members**:
    - `name`: Stores the name of the metric enumeration.
    - `values`: Holds a list of `EnumValue` objects representing the enumeration values.
- **Description**: Represents a metric enumeration with a name and a list of enumeration values.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.MetricEnum.__init__`](<#metricenum__init__>)

**Methods**

---
#### MetricEnum\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.MetricEnum.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L58>)

Initializes a `MetricEnum` object with a name and a list of `EnumValue` objects.
- **Inputs**:
    - `name`: A string representing the name of the metric enumeration.
    - `values`: A list of `EnumValue` objects representing the values associated with the metric enumeration.
- **Logic and Control Flow**:
    - Assigns the `name` parameter to the `name` attribute of the `MetricEnum` instance.
    - Assigns the `values` parameter to the `values` attribute of the `MetricEnum` instance.
- **Output**: None, as this is a constructor method for initializing an object.
- **See also**: [`firedancer/src/disco/metrics/generate/types.MetricEnum`](<#metricenum>)  (Base Class)



---
### Metric<!-- {{#class:firedancer/src/disco/metrics/generate/types.Metric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L62>)

- **Members**:
    - `type`: Specifies the type of the metric as a `MetricType`.
    - `name`: Holds the name of the metric as a string.
    - `tile`: Optionally associates the metric with a `Tile`.
    - `description`: Contains a description of the metric as a string.
    - `clickhouse_exclude`: Indicates whether to exclude the metric from ClickHouse as a boolean.
    - `offset`: Stores the offset value for the metric, initialized to 0.
- **Description**: Represents a metric with attributes for type, name, tile, description, and exclusion from ClickHouse. It provides methods to calculate its footprint and count.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.Metric.__init__`](<#metric__init__>)
    - [`firedancer/src/disco/metrics/generate/types.Metric.footprint`](<#metricfootprint>)
    - [`firedancer/src/disco/metrics/generate/types.Metric.count`](<#metriccount>)

**Methods**

---
#### Metric\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.Metric.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L63>)

Initializes a `Metric` object with specified attributes.
- **Inputs**:
    - `type`: The type of the metric, specified as a `MetricType` enum.
    - `name`: The name of the metric, specified as a string.
    - `tile`: An optional `Tile` enum indicating the tile associated with the metric.
    - `description`: A string providing a description of the metric.
    - `clickhouse_exclude`: A boolean indicating whether to exclude the metric from ClickHouse.
- **Logic and Control Flow**:
    - Assigns the `type` parameter to the `self.type` attribute.
    - Assigns the `name` parameter to the `self.name` attribute.
    - Assigns the `tile` parameter to the `self.tile` attribute.
    - Assigns the `description` parameter to the `self.description` attribute.
    - Assigns the `clickhouse_exclude` parameter to the `self.clickhouse_exclude` attribute.
    - Initializes the `self.offset` attribute to 0.
- **Output**: None (constructor method).
- **See also**: [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)  (Base Class)


---
#### Metric\.footprint<!-- {{#callable:firedancer/src/disco/metrics/generate/types.Metric.footprint}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L71>)

Returns a fixed integer value representing the footprint of the metric.
- **Inputs**: None
- **Logic and Control Flow**:
    - Returns the integer value `8`.
- **Output**: An integer value `8`.
- **See also**: [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)  (Base Class)


---
#### Metric\.count<!-- {{#callable:firedancer/src/disco/metrics/generate/types.Metric.count}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L74>)

Returns a constant integer value of 1.
- **Inputs**: None
- **Logic and Control Flow**:
    - Returns the integer 1 without any conditions or calculations.
- **Output**: An integer value of 1.
- **See also**: [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)  (Base Class)



---
### CounterMetric<!-- {{#class:firedancer/src/disco/metrics/generate/types.CounterMetric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L77>)

- **Members**:
    - `converter`: Specifies the histogram conversion type for the counter metric.
- **Description**: Extends the `Metric` class to represent a counter metric with an optional histogram conversion type. Inherits properties from `Metric` and adds a `converter` to handle specific conversion requirements for the counter metric.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.CounterMetric.__init__`](<#countermetric__init__>)
- **Inherits From**:
    - [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)

**Methods**

---
#### CounterMetric\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.CounterMetric.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L78>)

Initializes a `CounterMetric` object with specified attributes and a default or provided histogram converter.
- **Inputs**:
    - `name`: A string representing the name of the metric.
    - `tile`: An optional `Tile` enum value indicating the tile associated with the metric.
    - `description`: A string providing a description of the metric.
    - `clickhouse_exclude`: A boolean indicating whether to exclude the metric from ClickHouse.
    - `converter`: A `HistogramConverter` enum value specifying the converter type, defaulting to `HistogramConverter.NONE`.
- **Logic and Control Flow**:
    - Calls the parent class [`__init__`](<#enumvalue__init__>) method with `MetricType.COUNTER`, `name`, `tile`, `description`, and `clickhouse_exclude` as arguments.
    - Sets the `converter` attribute of the `CounterMetric` instance to the provided `converter` argument.
- **Output**: None (constructor method).
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.EnumValue.__init__`](<#enumvalue__init__>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.CounterMetric`](<#countermetric>)  (Base Class)



---
### GaugeMetric<!-- {{#class:firedancer/src/disco/metrics/generate/types.GaugeMetric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L82>)

- **Description**: Inherits from `Metric` and initializes a gauge metric with a specified name, tile, description, and a flag to exclude it from ClickHouse.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.GaugeMetric.__init__`](<#gaugemetric__init__>)
- **Inherits From**:
    - [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)

**Methods**

---
#### GaugeMetric\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.GaugeMetric.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L83>)

Initializes a `GaugeMetric` object with specified attributes.
- **Inputs**:
    - `name`: A string representing the name of the metric.
    - `tile`: An optional `Tile` enum value indicating the tile associated with the metric.
    - `description`: A string providing a description of the metric.
    - `clickhouse_exclude`: A boolean indicating whether to exclude the metric from ClickHouse.
- **Logic and Control Flow**:
    - Calls the [`__init__`](<#enumvalue__init__>) method of the parent `Metric` class with `MetricType.GAUGE` and the provided arguments.
- **Output**: None, as it is a constructor for initializing an object.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.EnumValue.__init__`](<#enumvalue__init__>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.GaugeMetric`](<#gaugemetric>)  (Base Class)



---
### HistogramMetric<!-- {{#class:firedancer/src/disco/metrics/generate/types.HistogramMetric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L86>)

- **Members**:
    - `converter`: Stores the histogram converter type.
    - `min`: Stores the minimum value for the histogram.
    - `max`: Stores the maximum value for the histogram.
- **Description**: Represents a histogram metric, inheriting from the `Metric` class, and includes additional attributes for a converter, minimum, and maximum values.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.HistogramMetric.__init__`](<#histogrammetric__init__>)
    - [`firedancer/src/disco/metrics/generate/types.HistogramMetric.footprint`](<#histogrammetricfootprint>)
- **Inherits From**:
    - [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)

**Methods**

---
#### HistogramMetric\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.HistogramMetric.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L87>)

Initializes a `HistogramMetric` object with specific attributes for histogram metrics.
- **Inputs**:
    - `name`: A string representing the name of the histogram metric.
    - `tile`: An optional `Tile` enum value indicating the tile associated with the metric.
    - `description`: A string providing a description of the histogram metric.
    - `clickhouse_exclude`: A boolean indicating whether to exclude the metric from ClickHouse.
    - `converter`: A `HistogramConverter` enum value specifying the conversion type for the histogram.
    - `min`: A string representing the minimum value for the histogram range.
    - `max`: A string representing the maximum value for the histogram range.
- **Logic and Control Flow**:
    - Calls the parent class `Metric` constructor with `MetricType.HISTOGRAM`, `name`, `tile`, `description`, and `clickhouse_exclude` to initialize common metric attributes.
    - Assigns the `converter` parameter to the `converter` attribute of the `HistogramMetric` instance.
    - Assigns the `min` parameter to the `min` attribute of the `HistogramMetric` instance.
    - Assigns the `max` parameter to the `max` attribute of the `HistogramMetric` instance.
- **Output**: None, as this is a constructor method for initializing an object.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.EnumValue.__init__`](<#enumvalue__init__>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.HistogramMetric`](<#histogrammetric>)  (Base Class)


---
#### HistogramMetric\.footprint<!-- {{#callable:firedancer/src/disco/metrics/generate/types.HistogramMetric.footprint}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L94>)

Returns a fixed integer value representing the footprint of a `HistogramMetric`.
- **Inputs**: None
- **Logic and Control Flow**:
    - Returns the integer value `136`.
- **Output**: An integer value `136`.
- **See also**: [`firedancer/src/disco/metrics/generate/types.HistogramMetric`](<#histogrammetric>)  (Base Class)



---
### CounterEnumMetric<!-- {{#class:firedancer/src/disco/metrics/generate/types.CounterEnumMetric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L97>)

- **Members**:
    - `type`: Specifies the metric type as `MetricType.COUNTER`.
    - `enum`: Holds the enumeration of metric values.
    - `converter`: Defines the histogram conversion type.
- **Description**: Represents a counter metric with enumerated values, inheriting from `Metric`. It includes additional attributes for enumeration and conversion, and overrides methods to calculate the footprint and count based on the enumeration values.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric.__init__`](<#counterenummetric__init__>)
    - [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric.footprint`](<#counterenummetricfootprint>)
    - [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric.count`](<#counterenummetriccount>)
- **Inherits From**:
    - [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)

**Methods**

---
#### CounterEnumMetric\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.CounterEnumMetric.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L98>)

Initializes a `CounterEnumMetric` object with specified attributes and sets its type to `MetricType.COUNTER`.
- **Inputs**:
    - `name`: A string representing the name of the metric.
    - `tile`: An optional `Tile` enum value indicating the tile associated with the metric.
    - `description`: A string providing a description of the metric.
    - `clickhouse_exclude`: A boolean indicating whether to exclude the metric from ClickHouse.
    - `enum`: A `MetricEnum` object representing the enumeration associated with the metric.
    - `converter`: A `HistogramConverter` enum value specifying the converter type, defaulting to `HistogramConverter.NONE`.
- **Logic and Control Flow**:
    - Calls the parent class [`__init__`](<#metric__init__>) method with `MetricType.COUNTER`, `name`, `tile`, `description`, and `clickhouse_exclude` as arguments.
    - Sets the `type` attribute to `MetricType.COUNTER`.
    - Assigns the `enum` parameter to the `enum` attribute.
    - Assigns the `converter` parameter to the `converter` attribute.
- **Output**: None, as it is a constructor method for initializing an object.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.Metric.__init__`](<#metric__init__>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric`](<#counterenummetric>)  (Base Class)


---
#### CounterEnumMetric\.footprint<!-- {{#callable:firedancer/src/disco/metrics/generate/types.CounterEnumMetric.footprint}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L104>)

Calculates the memory footprint of the `CounterEnumMetric` instance based on the number of enum values.
- **Inputs**: None
- **Logic and Control Flow**:
    - Accesses the `enum` attribute of the `CounterEnumMetric` instance, which is an instance of `MetricEnum`.
    - Retrieves the `values` attribute from the `enum`, which is a list of `EnumValue` instances.
    - Calculates the length of the `values` list to determine the number of enum values.
    - Multiplies the length of the `values` list by 8 to compute the memory footprint.
- **Output**: Returns an integer representing the memory footprint, calculated as 8 times the number of enum values.
- **See also**: [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric`](<#counterenummetric>)  (Base Class)


---
#### CounterEnumMetric\.count<!-- {{#callable:firedancer/src/disco/metrics/generate/types.CounterEnumMetric.count}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L107>)

Returns the number of values in the `enum` attribute of the `CounterEnumMetric` class.
- **Inputs**: None
- **Logic and Control Flow**:
    - Accesses the `enum` attribute of the `CounterEnumMetric` instance.
    - Calls the `len` function on the `values` attribute of the `enum` to get the count of values.
    - Returns the count as an integer.
- **Output**: An integer representing the number of values in the `enum` attribute.
- **See also**: [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric`](<#counterenummetric>)  (Base Class)



---
### GaugeEnumMetric<!-- {{#class:firedancer/src/disco/metrics/generate/types.GaugeEnumMetric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L110>)

- **Members**:
    - `enum`: Holds the `MetricEnum` instance associated with the gauge metric.
- **Description**: Represents a gauge metric that uses an enumeration to define its possible values. Inherits from the `Metric` class and initializes with a `MetricType.GAUGE` type. Provides methods to calculate the memory footprint and count of the enumeration values.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric.__init__`](<#gaugeenummetric__init__>)
    - [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric.footprint`](<#gaugeenummetricfootprint>)
    - [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric.count`](<#gaugeenummetriccount>)
- **Inherits From**:
    - [`firedancer/src/disco/metrics/generate/types.Metric`](<#metric>)

**Methods**

---
#### GaugeEnumMetric\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.GaugeEnumMetric.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L111>)

Initializes a `GaugeEnumMetric` object with specified attributes and sets the metric type to `GAUGE`.
- **Inputs**:
    - `name`: A string representing the name of the metric.
    - `tile`: An optional `Tile` enum value indicating the tile associated with the metric.
    - `description`: A string providing a description of the metric.
    - `clickhouse_exclude`: A boolean indicating whether to exclude the metric from ClickHouse.
    - `enum`: A `MetricEnum` object representing the enumeration associated with the metric.
- **Logic and Control Flow**:
    - Calls the parent class `Metric` constructor with `MetricType.GAUGE`, `name`, `tile`, `description`, and `clickhouse_exclude` as arguments.
    - Assigns the `enum` parameter to the `enum` attribute of the `GaugeEnumMetric` instance.
- **Output**: None (constructor method).
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.EnumValue.__init__`](<#enumvalue__init__>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric`](<#gaugeenummetric>)  (Base Class)


---
#### GaugeEnumMetric\.footprint<!-- {{#callable:firedancer/src/disco/metrics/generate/types.GaugeEnumMetric.footprint}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L116>)

Calculates the memory footprint of the `GaugeEnumMetric` instance based on the number of enum values.
- **Inputs**: None
- **Logic and Control Flow**:
    - Accesses the `enum` attribute of the `GaugeEnumMetric` instance.
    - Calculates the length of the `values` list in the `enum` attribute.
    - Multiplies the length by 8 to compute the memory footprint.
- **Output**: An integer representing the memory footprint, calculated as 8 times the number of enum values.
- **See also**: [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric`](<#gaugeenummetric>)  (Base Class)


---
#### GaugeEnumMetric\.count<!-- {{#callable:firedancer/src/disco/metrics/generate/types.GaugeEnumMetric.count}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L119>)

Returns the number of values in the `enum` attribute of the `GaugeEnumMetric` class.
- **Inputs**: None
- **Logic and Control Flow**:
    - Accesses the `enum` attribute of the `GaugeEnumMetric` instance.
    - Calls the `len` function on the `values` attribute of the `enum` to get the count of values.
    - Returns the result of the `len` function.
- **Output**: An integer representing the number of values in the `enum` attribute.
- **See also**: [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric`](<#gaugeenummetric>)  (Base Class)



---
### Metrics<!-- {{#class:firedancer/src/disco/metrics/generate/types.Metrics}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L122>)

- **Members**:
    - `common`: Holds a list of common `Metric` objects.
    - `tiles`: Maps `Tile` objects to lists of `Metric` objects.
    - `link_in`: Contains a list of inbound link `Metric` objects.
    - `link_out`: Contains a list of outbound link `Metric` objects.
    - `enums`: Stores a list of `MetricEnum` objects.
- **Description**: Manages collections of `Metric` objects, organizing them into categories such as common, tiles, inbound links, and outbound links, and provides methods to count and layout these metrics.
- **Methods**:
    - [`firedancer/src/disco/metrics/generate/types.Metrics.__init__`](<#metrics__init__>)
    - [`firedancer/src/disco/metrics/generate/types.Metrics.count`](<#metricscount>)
    - [`firedancer/src/disco/metrics/generate/types.Metrics.layout`](<#metricslayout>)

**Methods**

---
#### Metrics\.\_\_init\_\_<!-- {{#callable:firedancer/src/disco/metrics/generate/types.Metrics.__init__}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L123>)

Initializes the `Metrics` class with lists and dictionaries of metrics and metric enums.
- **Inputs**:
    - `common`: A list of `Metric` objects that are common metrics.
    - `tiles`: A dictionary mapping `Tile` enums to lists of `Metric` objects.
    - `link_in`: A list of `Metric` objects for incoming links.
    - `link_out`: A list of `Metric` objects for outgoing links.
    - `enums`: A list of `MetricEnum` objects.
- **Logic and Control Flow**:
    - Assigns the `common` parameter to the `self.common` attribute.
    - Assigns the `tiles` parameter to the `self.tiles` attribute.
    - Assigns the `link_in` parameter to the `self.link_in` attribute.
    - Assigns the `link_out` parameter to the `self.link_out` attribute.
    - Assigns the `enums` parameter to the `self.enums` attribute.
- **Output**: None
- **See also**: [`firedancer/src/disco/metrics/generate/types.Metrics`](<#metrics>)  (Base Class)


---
#### Metrics\.count<!-- {{#callable:firedancer/src/disco/metrics/generate/types.Metrics.count}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L130>)

Calculates the total count of all metrics in the `Metrics` class.
- **Inputs**: None
- **Logic and Control Flow**:
    - Iterates over the `common` list and sums the result of the `count()` method for each `Metric` object.
    - Iterates over each list of `Metric` objects in the `tiles` dictionary and sums the result of the `count()` method for each `Metric` object, then sums these results.
    - Iterates over the `link_in` list and sums the result of the `count()` method for each `Metric` object.
    - Iterates over the `link_out` list and sums the result of the `count()` method for each `Metric` object.
    - Returns the total sum of all these counts.
- **Output**: An integer representing the total count of all metrics.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.Metric.count`](<#metriccount>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.Metrics`](<#metrics>)  (Base Class)


---
#### Metrics\.layout<!-- {{#callable:firedancer/src/disco/metrics/generate/types.Metrics.layout}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L136>)

Assigns offset values to metrics in the `link_in`, `link_out`, `common`, and `tiles` attributes based on their footprint.
- **Inputs**: None
- **Logic and Control Flow**:
    - Initialize `offset` to 0 for `link_in` metrics and iterate over each metric.
    - Set the `offset` attribute of each `link_in` metric and update `offset` by adding the metric's footprint divided by 8.
    - Reinitialize `offset` to 0 for `link_out` metrics and repeat the process of setting offsets and updating `offset`.
    - Reinitialize `offset` to 0 for `common` metrics and repeat the process of setting offsets and updating `offset`.
    - Iterate over each list of metrics in `tiles`, initialize `tile_offset` to the current `offset`, and set the `offset` for each metric in the list, updating `tile_offset` accordingly.
- **Output**: No return value; modifies the `offset` attribute of metrics in place.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.Metric.footprint`](<#metricfootprint>)
- **See also**: [`firedancer/src/disco/metrics/generate/types.Metrics`](<#metrics>)  (Base Class)



# Functions

---
### parse\_metric<!-- {{#callable:firedancer/src/disco/metrics/generate/types.parse_metric}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L158>)

Parses an XML element representing a metric and returns a corresponding `Metric` object based on its type and attributes.
- **Inputs**:
    - `tile`: An optional `Tile` enum value that specifies the tile associated with the metric.
    - `metric`: An `ET.Element` object representing the XML element of the metric to parse.
    - `enums`: A dictionary mapping string names to `MetricEnum` objects, used for resolving enum references in the metric.
- **Logic and Control Flow**:
    - Extracts the 'name' attribute from the `metric` element.
    - Initializes `description` by checking for a 'summary' child element or attribute in the `metric` element.
    - Determines the `clickhouse_exclude` flag based on the 'clickhouse_exclude' attribute in the `metric` element.
    - Checks the tag of the `metric` element to determine its type ('counter', 'gauge', or 'histogram').
    - For 'counter' metrics, checks for a 'converter' attribute and resolves it to a `HistogramConverter` enum value.
    - For 'counter' and 'gauge' metrics, checks for an 'enum' attribute and returns a [`CounterEnumMetric`](<#counterenummetric>) or [`GaugeEnumMetric`](<#gaugeenummetric>) if present, otherwise returns a [`CounterMetric`](<#countermetric>) or [`GaugeMetric`](<#gaugemetric>).
    - For 'histogram' metrics, resolves the 'converter', 'min', and 'max' attributes and returns a [`HistogramMetric`](<#histogrammetric>).
    - Raises an exception if the `metric` element has an unknown tag.
- **Output**: A `Metric` object corresponding to the parsed XML element, which can be a [`CounterMetric`](<#countermetric>), [`GaugeMetric`](<#gaugemetric>), [`HistogramMetric`](<#histogrammetric>), [`CounterEnumMetric`](<#counterenummetric>), or [`GaugeEnumMetric`](<#gaugeenummetric>).
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.CounterEnumMetric`](<#counterenummetric>)
    - [`firedancer/src/disco/metrics/generate/types.CounterMetric`](<#countermetric>)
    - [`firedancer/src/disco/metrics/generate/types.GaugeEnumMetric`](<#gaugeenummetric>)
    - [`firedancer/src/disco/metrics/generate/types.GaugeMetric`](<#gaugemetric>)
    - [`firedancer/src/disco/metrics/generate/types.HistogramMetric`](<#histogrammetric>)


---
### parse\_metrics<!-- {{#callable:firedancer/src/disco/metrics/generate/types.parse_metrics}} -->
[View Source →](<../../../../../../src/disco/metrics/generate/types.py#L202>)

Parses XML data to create a [`Metrics`](<#metrics>) object containing metric definitions and enumerations.
- **Inputs**:
    - `xml_data`: A string containing XML data that defines metrics and enumerations.
- **Logic and Control Flow**:
    - Parse the XML data into an element tree using `ET.fromstring`.
    - Extract and construct [`MetricEnum`](<#metricenum>) objects from the XML elements with the tag 'enum'.
    - Find the 'common' element in the XML and assert its existence, then parse its child elements into `Metric` objects using [`parse_metric`](<#parse_metric>).
    - Find all 'tile' elements, convert their names to uppercase, and parse their child elements into `Metric` objects grouped by `Tile` enum values.
    - Find the 'linkin' element, assert its existence, and parse its child elements into `Metric` objects.
    - Find the 'linkout' element, assert its existence, and parse its child elements into `Metric` objects.
    - Return a [`Metrics`](<#metrics>) object initialized with the parsed common metrics, tile metrics, link-in metrics, link-out metrics, and enumerations.
- **Output**: A [`Metrics`](<#metrics>) object containing parsed metrics and enumerations from the XML data.
- **Functions Called**:
    - [`firedancer/src/disco/metrics/generate/types.MetricEnum`](<#metricenum>)
    - [`firedancer/src/disco/metrics/generate/types.EnumValue`](<#enumvalue>)
    - [`firedancer/src/disco/metrics/generate/types.parse_metric`](<#parse_metric>)
    - [`firedancer/src/disco/metrics/generate/types.Metrics`](<#metrics>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)