<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for reading, loading, unloading, and allocating protected memory for Solana keypairs.

# Purpose
The code is a C header file that provides function declarations for handling cryptographic key operations in a secure manner. It includes functions to read (`fd_keyload_read`) and load (`fd_keyload_load`) JSON-encoded keypairs from a file descriptor or disk, ensuring that the key data is stored in memory regions that are protected against unauthorized access and do not appear in core dumps. The [`fd_keyload_unload`](<#fd_keyload_unload>) function is used to unload keys from memory, ensuring that the memory is no longer valid for access. Additionally, the [`fd_keyload_alloc_protected_pages`](<#fd_keyload_alloc_protected_pages>) function allocates memory pages with guard pages for enhanced security, preventing the memory from being paged out or accessed by child processes. The header file includes necessary error handling, terminating the process with an error message if any operation fails.
# Imports and Dependencies

---
- `../fd_disco_base.h`


# Function Declarations (Public API)

---
### fd\_keyload\_unload<!-- {{#callable_declaration:FD_FN_SENSITIVE::fd_keyload_unload}} -->
[View Source →](<../../../../../src/disco/keyguard/fd_keyload.h#L57>)

Unloads a key from shared memory.
- **Description**: Use this function to remove a key from shared memory that was previously loaded using `fd_keyload_load`. Ensure that the `public_key_only` parameter matches the value used during the loading process. After calling this function, the key should not be accessed, as the memory will no longer be valid. This function is essential for maintaining security by ensuring that sensitive key material is properly cleared from memory.
- **Inputs**:
    - `key`: A pointer to the key in shared memory. This must be the same pointer returned by `fd_keyload_load`. The caller must ensure this pointer is valid and corresponds to a loaded key.
    - `public_key_only`: An integer indicating whether only the public key was loaded (non-zero) or the full key (zero). This must match the value used when the key was loaded with `fd_keyload_load`.
- **Output**: None
- **See Also**: [`FD_FN_SENSITIVE::fd_keyload_unload`](<fd_keyload.c.md#fd_fn_sensitivefd_keyload_unload>)  (Implementation)


---
### fd\_keyload\_alloc\_protected\_pages<!-- {{#callable_declaration:FD_FN_SENSITIVE::fd_keyload_alloc_protected_pages}} -->
[View Source →](<../../../../../src/disco/keyguard/fd_keyload.h#L76>)

Allocates protected memory pages with guard pages.
- **Description**: Use this function to allocate a specified number of memory pages that are protected by unreadable and unwritable guard pages on each side. The allocated pages are configured to not be paged out to disk, not appear in core dumps, and be wiped on fork to prevent access by child processes. This function is useful for securely storing sensitive data in memory. It terminates the process with an error message if the allocation fails. The allocated memory is not intended to be freed, and no deallocation function is provided.
- **Inputs**:
    - `page_cnt`: Specifies the number of regular 4 kB pages to allocate. Must be a positive number. If invalid, the process will terminate with an error.
    - `guard_page_cnt`: Specifies the number of guard pages to allocate on each side of the regular pages. Must be a positive number. If invalid, the process will terminate with an error.
- **Output**: Returns a pointer to the first byte of the allocated protected memory. The memory within the specified range is readable and writable, while the guard pages will cause a segmentation fault if accessed.
- **See Also**: [`FD_FN_SENSITIVE::fd_keyload_alloc_protected_pages`](<fd_keyload.c.md#fd_fn_sensitivefd_keyload_alloc_protected_pages>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)