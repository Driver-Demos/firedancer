<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures and functions for managing Firedancer topologies, including workspaces, tiles, and links.

# Purpose
The `fd_topo.h` file is a C header file that defines the data structures and functions for managing the topology of a Firedancer application. This file provides a comprehensive framework for configuring and managing the relationships between various components such as workspaces, links, and tiles within the Firedancer system. The primary data structure, `fd_topo_t`, encapsulates the entire topology, including arrays of workspaces (`fd_topo_wksp_t`), links (`fd_topo_link_t`), tiles (`fd_topo_tile_t`), and objects (`fd_topo_obj_t`). Each of these components has specific attributes and constraints, such as maximum counts and configuration parameters, which are defined as constants.

The file also includes function prototypes for operations on the topology, such as finding specific components by name or ID, joining and leaving shared memory workspaces, and running tiles either in a single process or as separate processes. These functions facilitate the management of memory and execution within the Firedancer environment, ensuring that resources are allocated and utilized efficiently. Additionally, the file defines callback structures and functions for handling specific operations on topology objects, allowing for extensibility and customization of the Firedancer system's behavior.
# Imports and Dependencies

---
- `../stem/fd_stem.h`
- `../../tango/fd_tango.h`
- `../../waltz/xdp/fd_xdp1.h`
- `../../ballet/base58/fd_base58.h`
- `../../util/net/fd_net_headers.h`


# Data Structures

---
### fd\_topo\_wksp\_t
- **Type**: ``struct``
- **Members**:
    - ``id``: The ID of the workspace, indexed from [0, wksp_cnt).
    - ``name``: The name of the workspace, with a maximum length of 12 characters.
    - ``numa_idx``: The index of the NUMA node from which the workspace should be allocated.
    - ``page_sz``: The size of the pages backing the workspace, one of `FD_PAGE_SIZE_*`.
    - ``page_cnt``: The number of pages mapped to the workspace to store all necessary data.
    - ``part_max``: The maximum number of partitions in the workspace, limiting concurrent allocations.
    - ``wksp``: A pointer to the workspace memory in the local process.
    - ``known_footprint``: The total size in bytes of all data stored in the workspace at startup.
    - ``total_footprint``: The total size in bytes of all data that could be stored in the workspace, including known and loose data.
- **Description**: `fd_topo_wksp_t` is a data structure representing a workspace in the Firedancer topology. It includes fields for identifying the workspace (`id` and `name`), specifying its NUMA node allocation (`numa_idx`), and several computed fields that describe the memory characteristics of the workspace, such as page size (`page_sz`), page count (`page_cnt`), and partition limits (`part_max`). The structure also includes pointers and size metrics for managing the workspace's memory footprint (`wksp`, `known_footprint`, and `total_footprint`).


---
### fd\_topo\_link\_t
- **Type**: ``struct``
- **Members**:
    - ``id``: The unique identifier for the link, indexed from [0, link_cnt).
    - ``name``: The name of the link, allowing multiple links with the same name in a topology.
    - ``kind_id``: The identifier for the link within its name, ensuring uniqueness when combined with `name`.
    - ``depth``: The depth of the mcache representing the link.
    - ``mtu``: The maximum transmission unit of data fragments in the mcache, with 0 indicating no dcache.
    - ``burst``: The maximum number of MTU-sized data fragments that can be burst to the dcache.
    - ``mcache_obj_id``: The object identifier for the mcache.
    - ``dcache_obj_id``: The object identifier for the dcache.
    - ``mcache``: A pointer to the mcache of this link.
    - ``dcache``: A pointer to the dcache of this link, if it exists.
    - ``permit_no_consumers``: A flag indicating if the topology allows this link to have no consumers.
    - ``permit_no_producers``: A flag indicating if the topology allows this link to have no producers.
- **Description**: Represents a link in a topology, which is an mcache in a workspace with one producer and one or more consumers. It may also have a dcache for storing fragments referred to by mcache entries. The link is uniquely identified by either its `id` or the combination of `name` and `kind_id`. It includes configuration fields such as `depth`, `mtu`, and `burst`, as well as computed fields like `mcache` and `dcache`. Flags `permit_no_consumers` and `permit_no_producers` determine if the link can exist without consumers or producers, respectively.


---
### fd\_topo\_ip\_port\_t
- **Type**: ``struct``
- **Members**:
    - ``ip``: IP address in network byte order.
    - ``port``: Port number in host byte order.
- **Description**: Defines a structure to store an IP address and a port number, with the IP address stored in network byte order and the port number in host byte order. This structure is useful for network communication where both IP and port are required.


---
### fd\_topo\_net\_tile
- **Type**: ``struct``
- **Members**:
    - `umem_dcache_obj_id`: Stores the object ID for the dcache used in XDP UMEM frames.
    - `bind_address`: Holds the bind address for network operations.
    - `shred_listen_port`: Specifies the port for listening to shred data.
    - `quic_transaction_listen_port`: Specifies the port for listening to QUIC transactions.
    - `legacy_transaction_listen_port`: Specifies the port for listening to legacy transactions.
    - `gossip_listen_port`: Specifies the port for listening to gossip data.
    - `repair_intake_listen_port`: Specifies the port for listening to repair intake data.
    - `repair_serve_listen_port`: Specifies the port for serving repair data.
    - `send_src_port`: Specifies the source port for sending data.
- **Description**: Defines network-related parameters for a tile in the Firedancer topology, including object IDs for memory caches and various network ports for listening and sending data.


---
### fd\_topo\_net\_tile\_t
- **Type**: ``struct``
- **Members**:
    - `umem_dcache_obj_id`: dcache for XDP UMEM frames.
    - `bind_address`: The bind address for the network tile.
    - `shred_listen_port`: The port for listening to shreds.
    - `quic_transaction_listen_port`: The port for listening to QUIC transactions.
    - `legacy_transaction_listen_port`: The port for listening to legacy transactions.
    - `gossip_listen_port`: The port for listening to gossip.
    - `repair_intake_listen_port`: The port for listening to repair intake.
    - `repair_serve_listen_port`: The port for serving repairs.
    - `send_src_port`: The source port for sending data.
- **Description**: Defines network-related parameters for a tile in the Firedancer topology, including ports for various services and a dcache object ID for XDP UMEM frames.


---
### fd\_topo\_tile
- **Type**: ``struct``
- **Members**:
    - ``id``: The unique identifier for the tile, indexed from 0 to tile count.
    - ``name``: The name of the tile, allowing multiple tiles with the same name in a topology.
    - ``metrics_name``: The name used for metrics lookup, allowing tiles to share a name but report different metrics.
    - ``kind_id``: The identifier within its name, uniquely identifying a tile along with the name.
    - ``is_agave``: Indicates if the tile runs in the Agave address space.
    - ``allow_shutdown``: Indicates if the tile can shut down gracefully.
    - ``cpu_idx``: The CPU index to pin the tile on, with special values indicating a floating tile.
    - ``in_cnt``: The number of input links the tile reads from.
    - ``in_link_id``: The identifiers of the input links, indexed from 0 to input count.
    - ``in_link_reliable``: Indicates if each input link is reliable or unreliable.
    - ``in_link_poll``: Indicates if each input link should be polled by the tile infrastructure.
    - ``out_cnt``: The number of output links the tile writes to.
    - ``out_link_id``: The identifiers of the output links, indexed from 0 to output count.
    - ``tile_obj_id``: The object identifier for the tile.
    - ``metrics_obj_id``: The object identifier for metrics.
    - ``keyswitch_obj_id``: The object identifier for keyswitch.
    - ``in_link_fseq_obj_id``: The object identifiers for the fseq of each input link.
    - ``uses_obj_cnt``: The count of objects the tile uses.
    - ``uses_obj_id``: The identifiers of the objects the tile uses.
    - ``uses_obj_mode``: The modes of the objects the tile uses.
    - ``metrics``: Shared memory for metrics that the tile writes.
    - ``in_link_fseq``: The fseq of each input link, uniquely identified by link and tile identifiers.
    - ``net``: Configuration for network-related operations.
    - ``xdp``: Configuration for XDP-specific options.
    - ``sock``: Configuration for socket-specific options.
    - ``netlink``: Configuration for netlink-specific options.
    - ``gossvf``: Configuration for gossip with versioned features.
    - ``gossip``: Configuration for gossip operations.
    - ``quic``: Configuration for QUIC protocol options.
    - ``verify``: Configuration for verification operations.
    - ``dedup``: Configuration for deduplication operations.
    - ``bundle``: Configuration for bundle operations.
    - ``pack``: Configuration for packing operations.
    - ``poh``: Configuration for proof of history operations.
    - ``shred``: Configuration for shred operations.
    - ``store``: Configuration for storage operations.
    - ``sign``: Configuration for signing operations.
    - ``gui``: Configuration for GUI operations.
    - ``metric``: Configuration for metric operations.
    - ``replay``: Configuration for replay operations.
    - ``exec``: Configuration for execution operations.
    - ``benchs``: Configuration for benchmarking send operations.
    - ``bencho``: Configuration for benchmarking operations.
    - ``benchg``: Configuration for benchmarking general operations.
    - ``repair``: Configuration for repair operations.
    - ``store_int``: Configuration for internal storage operations.
    - ``send``: Configuration for send operations.
    - ``pktgen``: Configuration for packet generation operations.
    - ``archiver``: Configuration for archiver operations.
    - ``tower``: Configuration for tower operations.
    - ``shredcap``: Configuration for shred capture operations.
    - ``snapct``: Configuration for snapshot capture operations.
    - ``snapld``: Configuration for snapshot load operations.
    - ``snapin``: Configuration for snapshot input operations.
    - ``ipecho``: Configuration for IP echo operations.
    - ``bank``: Configuration for bank operations.
    - ``resolv``: Configuration for resolve operations.
    - ``genesi``: Configuration for genesis operations.
- **Description**: Represents a unique process in the Firedancer topology, managing input and output links, CPU pinning, and various configuration options for network, metrics, and other operations. It includes fields for identifying and configuring the tile's behavior, such as its ID, name, CPU index, and link information. The structure also supports multiple configuration options through a union, allowing for flexible setup of network, gossip, QUIC, and other protocol-specific settings. Computed fields provide shared memory access for metrics and input link sequences.


---
### fd\_topo\_tile\_t
- **Type**: ``struct``
- **Members**:
    - `id`: The ID of this tile, indexed from [0, tile_cnt).
    - `name`: The name of this tile, with multiple tiles allowed to share the same name in a topology.
    - `metrics_name`: The name used for looking up metrics, allowing tiles to share a name but report different metrics.
    - `kind_id`: The ID of this tile within its name, uniquely identifying a tile along with the name.
    - `is_agave`: Indicates if the tile needs to run in the Agave (Anza) address space.
    - `allow_shutdown`: Indicates if the tile is allowed to shutdown gracefully.
    - `cpu_idx`: The CPU index to pin the tile on, with a special value indicating the tile should not be pinned.
    - `in_cnt`: The number of links that this tile reads from.
    - `in_link_id`: The link_id of each link that this tile reads from, indexed in [0, in_cnt).
    - `in_link_reliable`: Indicates if each link that this tile reads from is a reliable or unreliable consumer.
    - `in_link_poll`: Indicates if each link that this tile reads from should be polled by the tile infrastructure.
    - `out_cnt`: The number of links that this tile writes to.
    - `out_link_id`: The link_id of each link that this tile writes to, indexed in [0, link_cnt).
    - `tile_obj_id`: The object ID associated with this tile.
    - `metrics_obj_id`: The object ID for metrics associated with this tile.
    - `keyswitch_obj_id`: The object ID for keyswitch associated with this tile.
    - `in_link_fseq_obj_id`: The object ID for the fseq of each link that this tile reads from.
    - `uses_obj_cnt`: The number of objects that this tile can use.
    - `uses_obj_id`: The object ID of each object that this tile can use.
    - `uses_obj_mode`: The mode of each object that this tile can use.
    - `metrics`: The shared memory for metrics that this tile should write.
    - `in_link_fseq`: The fseq of each link that this tile reads from.
    - `net`: Configuration for network-related operations of the tile.
    - `xdp`: Configuration for XDP-specific options of the tile.
    - `sock`: Configuration for socket-specific options of the tile.
    - `netlink`: Configuration for netlink-specific options of the tile.
    - `gossvf`: Configuration for gossip verification options of the tile.
    - `gossip`: Configuration for gossip options of the tile.
    - `quic`: Configuration for QUIC-specific options of the tile.
    - `verify`: Configuration for verification options of the tile.
    - `dedup`: Configuration for deduplication options of the tile.
    - `bundle`: Configuration for bundle-specific options of the tile.
    - `pack`: Configuration for packing-specific options of the tile.
    - `poh`: Configuration for proof of history options of the tile.
    - `shred`: Configuration for shred-specific options of the tile.
    - `store`: Configuration for store-specific options of the tile.
    - `sign`: Configuration for signing-specific options of the tile.
    - `gui`: Configuration for GUI-specific options of the tile.
    - `metric`: Configuration for metric-specific options of the tile.
    - `replay`: Configuration for replay-specific options of the tile.
    - `exec`: Configuration for execution-specific options of the tile.
    - `benchs`: Configuration for benchmarking-specific options of the tile.
    - `bencho`: Configuration for benchmarking output-specific options of the tile.
    - `benchg`: Configuration for benchmarking generation-specific options of the tile.
    - `repair`: Configuration for repair-specific options of the tile.
    - `store_int`: Configuration for internal store-specific options of the tile.
    - `send`: Configuration for send-specific options of the tile.
    - `pktgen`: Configuration for packet generation-specific options of the tile.
    - `archiver`: Configuration for archiving-specific options of the tile.
    - `tower`: Configuration for tower-specific options of the tile.
    - `shredcap`: Configuration for shred capture-specific options of the tile.
    - `snapct`: Configuration for snapshot capture-specific options of the tile.
    - `snapld`: Configuration for snapshot load-specific options of the tile.
    - `snapin`: Configuration for snapshot input-specific options of the tile.
    - `ipecho`: Configuration for IP echo-specific options of the tile.
    - `bank`: Configuration for bank-specific options of the tile.
    - `resolv`: Configuration for resolver-specific options of the tile.
    - `genesi`: Configuration for genesis-specific options of the tile.
- **Description**: Represents a unique process spawned by Firedancer to represent one thread of execution, with each tile belonging to exactly one workspace. It acts as a consumer of input links and a producer of output links, with automatic polling of input links and management of output link credits. The structure includes various configuration options for different functionalities such as networking, gossip, and verification, among others.


---
### fd\_topo\_obj\_t
- **Type**: ``struct``
- **Members**:
    - `id`: A unique identifier for the object.
    - `name`: A character array storing the name of the object, with a maximum length of 12 characters plus a null terminator.
    - `wksp_id`: The identifier of the workspace to which the object belongs.
    - `offset`: The offset of the object within its workspace.
    - `footprint`: The memory footprint of the object.
- **Description**: Defines an object within a topology, including its unique identifier, name, associated workspace, and memory characteristics such as offset and footprint.


---
### fd\_topo
- **Type**: ``struct``
- **Members**:
    - ``app_name``: A character array that stores the application name.
    - ``props``: An array of unsigned characters for storing properties.
    - ``wksp_cnt``: The count of workspaces in the topology.
    - ``link_cnt``: The count of links in the topology.
    - ``tile_cnt``: The count of tiles in the topology.
    - ``obj_cnt``: The count of objects in the topology.
    - ``workspaces``: An array of `fd_topo_wksp_t` structures representing workspaces.
    - ``links``: An array of `fd_topo_link_t` structures representing links.
    - ``tiles``: An array of `fd_topo_tile_t` structures representing tiles.
    - ``objs``: An array of `fd_topo_obj_t` structures representing objects.
    - ``agave_affinity_cnt``: The count of CPU affinities for Agave.
    - ``agave_affinity_cpu_idx``: An array of CPU indices for Agave affinity.
    - ``max_page_size``: The maximum page size, either 2^21 or 2^30.
    - ``gigantic_page_threshold``: The threshold for gigantic pages, related to `hugetlbfs`.
- **Description**: Describes the overall structure of a Firedancer configuration, including workspaces, tiles, and links. It manages the topology of the system by maintaining counts and arrays of workspaces, links, tiles, and objects, as well as properties and configurations related to memory management and CPU affinity.


---
### fd\_topo\_t
- **Type**: ``struct``
- **Members**:
    - ``app_name``: Stores the name of the application as a string.
    - ``props``: Holds properties of the topology as a byte array.
    - ``wksp_cnt``: Indicates the number of workspaces in the topology.
    - ``link_cnt``: Indicates the number of links in the topology.
    - ``tile_cnt``: Indicates the number of tiles in the topology.
    - ``obj_cnt``: Indicates the number of objects in the topology.
    - ``workspaces``: Array of workspaces in the topology.
    - ``links``: Array of links in the topology.
    - ``tiles``: Array of tiles in the topology.
    - ``objs``: Array of objects in the topology.
    - ``agave_affinity_cnt``: Indicates the number of CPU affinities for Agave.
    - ``agave_affinity_cpu_idx``: Array of CPU indices for Agave affinity.
    - ``max_page_size``: Specifies the maximum page size used.
    - ``gigantic_page_threshold``: Threshold for gigantic page allocation.
- **Description**: Describes the overall structure of a Firedancer configuration, detailing the workspaces, tiles, and links that form the topology. It includes arrays for workspaces, links, tiles, and objects, along with counts for each type. The structure also manages properties, application name, and CPU affinities for Agave, as well as memory page size configurations.


---
### fd\_topo\_run\_tile\_t
- **Type**: ``struct``
- **Members**:
    - ``name``: A pointer to a constant character string representing the name.
    - ``keep_host_networking``: An integer flag indicating whether to keep host networking.
    - ``allow_connect``: An integer flag indicating whether connections are allowed.
    - ``allow_renameat``: An integer flag indicating whether renaming is allowed.
    - ``rlimit_file_cnt``: An unsigned long representing the file count resource limit.
    - ``rlimit_address_space``: An unsigned long representing the address space resource limit.
    - ``rlimit_data``: An unsigned long representing the data resource limit.
    - ``for_tpool``: An integer flag indicating if the structure is for a thread pool.
    - ``populate_allowed_seccomp``: A function pointer for populating allowed seccomp filters.
    - ``populate_allowed_fds``: A function pointer for populating allowed file descriptors.
    - ``scratch_align``: A function pointer for getting the alignment of scratch space.
    - ``scratch_footprint``: A function pointer for getting the footprint of scratch space.
    - ``loose_footprint``: A function pointer for getting the loose footprint.
    - ``privileged_init``: A function pointer for privileged initialization.
    - ``unprivileged_init``: A function pointer for unprivileged initialization.
    - ``run``: A function pointer for running the tile.
    - ``rlimit_file_cnt_fn``: A function pointer for getting the file count resource limit.
- **Description**: Defines a structure for managing the configuration and execution of a Firedancer tile, including resource limits, networking permissions, and function pointers for initialization and execution tasks.


---
### fd\_topo\_obj\_callbacks
- **Type**: ``struct``
- **Members**:
    - ``name``: A pointer to a constant character string representing the name of the callback.
    - ``footprint``: A function pointer that calculates the memory footprint of an object in the topology.
    - ``align``: A function pointer that determines the alignment requirements of an object in the topology.
    - ``loose``: A function pointer that calculates the loose memory footprint of an object in the topology.
    - ``new``: A function pointer that initializes a new object in the topology.
- **Description**: Defines a set of callback functions for handling objects within a topology, including functions for calculating memory footprint, alignment, and initialization of new objects.


---
### fd\_topo\_obj\_callbacks\_t
- **Type**: ``struct``
- **Members**:
    - ``name``: Pointer to a constant character string representing the name of the callback.
    - ``footprint``: Function pointer to calculate the footprint of an object in the topology.
    - ``align``: Function pointer to determine the alignment of an object in the topology.
    - ``loose``: Function pointer to determine the loose memory requirements of an object in the topology.
    - ``new``: Function pointer to initialize a new object in the topology.
- **Description**: Defines a set of callback functions for managing objects within a Firedancer topology, including functions for calculating memory footprint, alignment, and initialization of objects.


# Functions

---
### fd\_topo\_workspace\_align<!-- {{#callable:fd_topo_workspace_align}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L632>)

Returns the alignment size for a workspace, currently set to 4096 bytes.
- **Inputs**: None
- **Logic and Control Flow**:
    - The function returns a constant value of 4096UL, which represents the alignment size for a workspace.
    - The comment suggests that this value should be the maximum alignment of all child members that could be aligned into the workspace.
    - The comment also notes that the alignment should ideally be calculated dynamically or reduced if possible.
- **Output**: A constant unsigned long value of 4096, representing the alignment size for a workspace.


---
### fd\_topo\_obj\_wksp\_base<!-- {{#callable:fd_topo_obj_wksp_base}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L649>)

Returns the base address of the workspace associated with a given object in the topology.
- **Inputs**:
    - ``topo``: A pointer to a constant `fd_topo_t` structure representing the topology.
    - ``obj_id``: An unsigned long integer representing the ID of the object within the topology.
- **Logic and Control Flow**:
    - Check if `obj_id` is less than `FD_TOPO_MAX_OBJS` using `FD_TEST` macro.
    - Retrieve the object from `topo->objs` using `obj_id` and verify its ID matches `obj_id`.
    - Retrieve the workspace ID (`wksp_id`) from the object.
    - Check if `wksp_id` is less than `FD_TOPO_MAX_WKSPS` using `FD_TEST` macro.
    - Retrieve the workspace from `topo->workspaces` using `wksp_id` and verify its ID matches `wksp_id`.
    - Return the base address of the workspace (`wksp->wksp`).
- **Output**: A pointer to the base address of the workspace associated with the specified object.


---
### fd\_topo\_tile\_name\_cnt<!-- {{#callable:fd_topo_tile_name_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L663>)

Counts the number of tiles in the topology with a specified name.
- **Inputs**:
    - `topo`: A pointer to a `fd_topo_t` structure representing the topology.
    - `name`: A constant character pointer representing the name of the tile to count.
- **Logic and Control Flow**:
    - Initialize a counter `cnt` to zero.
    - Iterate over each tile in the topology using a loop that runs from 0 to `topo->tile_cnt`.
    - For each tile, compare its name with the given `name` using `strcmp`.
    - If the names match, increment the counter `cnt`.
    - Return the value of `cnt` after the loop completes.
- **Output**: Returns the count of tiles with the specified name as an unsigned long integer.


---
### fd\_topo\_find\_wksp<!-- {{#callable:fd_topo_find_wksp}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L677>)

Searches for a workspace by name in the topology and returns its index or `ULONG_MAX` if not found.
- **Inputs**:
    - ``topo``: A pointer to a `fd_topo_t` structure representing the topology.
    - ``name``: A constant character pointer representing the name of the workspace to find.
- **Logic and Control Flow**:
    - Iterates over the workspaces in the topology using a for loop with index `i` ranging from 0 to `topo->wksp_cnt`.
    - Compares the name of each workspace (`topo->workspaces[i].name`) with the input `name` using `strcmp`.
    - If a match is found, returns the index `i`.
    - If no match is found after the loop, returns `ULONG_MAX`.
- **Output**: Returns the index of the workspace if found, otherwise returns `ULONG_MAX`.


---
### fd\_topo\_find\_tile<!-- {{#callable:fd_topo_find_tile}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L690>)

Finds the index of a tile in the topology that matches a given name and kind ID.
- **Inputs**:
    - ``topo``: A pointer to a `fd_topo_t` structure representing the topology.
    - ``name``: A constant character pointer representing the name of the tile to find.
    - ``kind_id``: An unsigned long integer representing the kind ID of the tile to find.
- **Logic and Control Flow**:
    - Iterate over each tile in the `topo` structure using a for loop.
    - For each tile, check if the tile's name matches the `name` parameter and the tile's kind ID matches the `kind_id` parameter.
    - If both conditions are true, return the current index `i`.
    - If no matching tile is found after the loop, return `ULONG_MAX`.
- **Output**: Returns the index of the tile if found, otherwise returns `ULONG_MAX`.


---
### fd\_topo\_find\_link<!-- {{#callable:fd_topo_find_link}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L704>)

Finds the index of a link in the topology that matches a given name and kind ID.
- **Inputs**:
    - ``topo``: A pointer to a `fd_topo_t` structure representing the topology.
    - ``name``: A constant character pointer representing the name of the link to find.
    - ``kind_id``: An unsigned long integer representing the kind ID of the link to find.
- **Logic and Control Flow**:
    - Iterates over each link in the topology using a for loop.
    - Checks if the current link's name matches the given `name` and its `kind_id` matches the given `kind_id`.
    - If a match is found, returns the index of the link.
    - If no match is found after checking all links, returns `ULONG_MAX`.
- **Output**: Returns the index of the link if found, otherwise returns `ULONG_MAX`.


---
### fd\_topo\_find\_tile\_in\_link<!-- {{#callable:fd_topo_find_tile_in_link}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L714>)

Finds the index of an input link in a tile that matches a given name and kind ID.
- **Inputs**:
    - `topo`: A pointer to a `fd_topo_t` structure representing the topology.
    - `tile`: A pointer to a `fd_topo_tile_t` structure representing the tile.
    - `name`: A string representing the name of the link to find.
    - `kind_id`: An unsigned long integer representing the kind ID of the link to find.
- **Logic and Control Flow**:
    - Iterate over each input link of the tile using a loop from 0 to `tile->in_cnt`.
    - For each input link, check if the link's name matches the given `name` and the link's kind ID matches the given `kind_id`.
    - If a match is found, return the index `i` of the matching input link.
    - If no match is found after checking all input links, return `ULONG_MAX`.
- **Output**: Returns the index of the matching input link if found, otherwise returns `ULONG_MAX`.


---
### fd\_topo\_find\_tile\_out\_link<!-- {{#callable:fd_topo_find_tile_out_link}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L726>)

Finds the index of an outgoing link from a tile that matches a given name and kind ID.
- **Inputs**:
    - ``topo``: A pointer to a `fd_topo_t` structure representing the topology.
    - ``tile``: A pointer to a `fd_topo_tile_t` structure representing the tile.
    - ``name``: A string representing the name of the link to find.
    - ``kind_id``: An unsigned long representing the kind ID of the link to find.
- **Logic and Control Flow**:
    - Iterate over the outgoing links of the tile using a loop from 0 to `tile->out_cnt`.
    - For each link, check if the link's name matches the given `name` and the link's kind ID matches the given `kind_id`.
    - If a match is found, return the index `i` of the matching link.
    - If no matching link is found after the loop, return `ULONG_MAX`.
- **Output**: Returns the index of the matching outgoing link, or `ULONG_MAX` if no match is found.


---
### fd\_topo\_find\_link\_producer<!-- {{#callable:fd_topo_find_link_producer}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L741>)

Finds the ID of the tile that produces a given link in the topology.
- **Inputs**:
    - ``topo``: A pointer to a `fd_topo_t` structure representing the topology.
    - ``link``: A pointer to a `fd_topo_link_t` structure representing the link for which the producer tile ID is sought.
- **Logic and Control Flow**:
    - Iterate over each tile in the topology using a loop that runs from 0 to `topo->tile_cnt`.
    - For each tile, iterate over its output links using a loop that runs from 0 to `tile->out_cnt`.
    - Check if the current output link ID matches the given link's ID using `FD_UNLIKELY`.
    - If a match is found, return the index `i` of the tile as the producer ID.
    - If no producer is found after checking all tiles, return `ULONG_MAX`.
- **Output**: Returns the index of the tile that produces the specified link, or `ULONG_MAX` if no such tile exists.


---
### fd\_topo\_link\_consumer\_cnt<!-- {{#callable:fd_topo_link_consumer_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L756>)

Counts the number of consumers for a given link in a topology.
- **Inputs**:
    - ``topo``: A pointer to an `fd_topo_t` structure representing the topology.
    - ``link``: A pointer to an `fd_topo_link_t` structure representing the link for which to count consumers.
- **Logic and Control Flow**:
    - Initialize a counter `cnt` to zero.
    - Iterate over each tile in the topology using a loop with index `i`.
    - For each tile, iterate over its input links using a loop with index `j`.
    - Check if the `j`-th input link ID of the current tile matches the ID of the given link.
    - If a match is found, increment the counter `cnt`.
    - Return the counter `cnt` as the result.
- **Output**: Returns the number of consumers for the specified link as an unsigned long integer.


---
### fd\_topo\_link\_reliable\_consumer\_cnt<!-- {{#callable:fd_topo_link_reliable_consumer_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L772>)

Counts the number of reliable consumers for a given link in a topology.
- **Inputs**:
    - ``topo``: A pointer to an `fd_topo_t` structure representing the topology.
    - ``link``: A pointer to an `fd_topo_link_t` structure representing the link for which reliable consumers are counted.
- **Logic and Control Flow**:
    - Initialize a counter `cnt` to zero.
    - Iterate over each tile in the topology using a loop with index `i`.
    - For each tile, iterate over its input links using a loop with index `j`.
    - Check if the current input link ID matches the given link's ID and if the link is marked as reliable.
    - If both conditions are true, increment the counter `cnt`.
    - Return the counter `cnt` as the result.
- **Output**: Returns the count of reliable consumers as an unsigned long integer (`ulong`).


---
### fd\_topo\_tile\_consumer\_cnt<!-- {{#callable:fd_topo_tile_consumer_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L786>)

Returns the number of output links a tile writes to in a topology.
- **Inputs**:
    - `topo`: A pointer to a `fd_topo_t` structure representing the topology. This parameter is not used in the function.
    - `tile`: A pointer to a `fd_topo_tile_t` structure representing the tile whose output link count is to be retrieved.
- **Logic and Control Flow**:
    - The function takes two parameters: `topo` and `tile`, but only `tile` is used.
    - The function returns the value of `tile->out_cnt`, which represents the number of output links the tile writes to.
- **Output**: The function returns an `ulong` representing the number of output links a tile writes to.


---
### fd\_topo\_tile\_reliable\_consumer\_cnt<!-- {{#callable:fd_topo_tile_reliable_consumer_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L793>)

Counts the number of reliable consumers for a given tile's output links in a topology.
- **Inputs**:
    - ``topo``: A pointer to a `fd_topo_t` structure representing the topology.
    - ``tile``: A pointer to a `fd_topo_tile_t` structure representing the tile whose output links are being evaluated.
- **Logic and Control Flow**:
    - Initialize `reliable_cons_cnt` to 0.
    - Iterate over each tile in the topology using index `i`.
    - For each tile, iterate over its input links using index `j`.
    - For each input link, iterate over the output links of the given tile using index `k`.
    - Check if the input link ID matches the output link ID and if the input link is marked as reliable.
    - If both conditions are true, increment `reliable_cons_cnt`.
    - Return `reliable_cons_cnt`.
- **Output**: Returns the count of reliable consumers for the given tile's output links as an unsigned long integer.


---
### fd\_topo\_tile\_producer\_cnt<!-- {{#callable:fd_topo_tile_producer_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L810>)

Counts the number of input links for a tile that are actively polled.
- **Inputs**:
    - `topo`: A pointer to a constant `fd_topo_t` structure, representing the topology configuration. It is not used in this function.
    - `tile`: A pointer to a constant `fd_topo_tile_t` structure, representing the tile whose input links are being counted.
- **Logic and Control Flow**:
    - Initialize `in_cnt` to 0 to keep track of the number of polled input links.
    - Iterate over each input link of the tile using a loop from 0 to `tile->in_cnt`.
    - For each input link, check if `tile->in_link_poll[i]` is true (indicating the link is polled).
    - If the link is polled, increment `in_cnt`.
    - Continue the loop until all input links are checked.
    - Return the value of `in_cnt` as the result.
- **Output**: Returns the count of input links that are polled for the given tile as an unsigned long integer.


# Function Declarations (Public API)

---
### fd\_topo\_obj\_laddr<!-- {{#callable_declaration:fd_topo_obj_laddr}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L642>)

Returns the local address of a topology object.
- **Description**: Use this function to get the local address of an object within a topology. It is important to ensure that the `obj_id` is valid and within the range of defined objects in the topology. This function should be called only after the topology is properly initialized and populated with objects. Invalid `obj_id` values, such as `ULONG_MAX` or values exceeding the maximum number of objects, will trigger a critical log message and halt execution.
- **Inputs**:
    - `topo`: A pointer to a constant `fd_topo_t` structure representing the topology. Must not be null and should be properly initialized.
    - `obj_id`: An unsigned long integer representing the object ID. Must be less than `FD_TOPO_MAX_OBJS` and not equal to `ULONG_MAX`. Invalid values will cause a critical log message and halt execution.
- **Output**: Returns a pointer to the base address of the workspace where the specified object is allocated, cast to a `void *`. The returned address is in the local address space.
- **See Also**: [`fd_topo_obj_laddr`](<fd_topo.c.md#fd_topo_obj_laddr>)  (Implementation)


---
### fd\_topo\_join\_tile\_workspaces<!-- {{#callable_declaration:fd_topo_join_tile_workspaces}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L830>)

Join all necessary workspaces for a specific tile in the topology.
- **Description**: Use this function to map all shared memory required by a specific tile in the topology into the process. This is necessary to ensure that the tile has access to all the memory it needs before the process is sandboxed, as memory mapping is not possible after sandboxing. Call this function when preparing a tile for execution in a sandboxed environment.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `tile`: A pointer to an `fd_topo_tile_t` structure representing the tile whose workspaces need to be joined. Must not be null.
- **Output**: None
- **See Also**: [`fd_topo_join_tile_workspaces`](<fd_topo.c.md#fd_topo_join_tile_workspaces>)  (Implementation)


---
### fd\_topo\_join\_workspace<!-- {{#callable_declaration:fd_topo_join_workspace}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L839>)

Maps a workspace into the process's address space.
- **Description**: Use this function to map the shared memory associated with a specific workspace into the process's address space. This is necessary for accessing the memory resources of the workspace. Ensure that the `topo` and `wksp` pointers are valid and non-null before calling this function. The `mode` parameter determines the access permissions for the mapped memory, which can be read-only or read-write. This function must be called before any operations that require access to the workspace's memory.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `wksp`: A pointer to an `fd_topo_wksp_t` structure representing the workspace to join. Must not be null.
    - `mode`: An integer specifying the access mode for the memory mapping. Valid values are `FD_SHMEM_JOIN_MODE_READ_WRITE` or `FD_SHMEM_JOIN_MODE_READ_ONLY`.
- **Output**: None
- **See Also**: [`fd_topo_join_workspace`](<fd_topo.c.md#fd_topo_join_workspace>)  (Implementation)


---
### fd\_topo\_join\_workspaces<!-- {{#callable_declaration:fd_topo_join_workspaces}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L849>)

Maps all workspaces in the topology into the process address space.
- **Description**: Use this function to map all workspaces in a given topology into the process address space. This is necessary when the process needs to access the shared memory associated with each workspace. The function should be called with a valid topology structure and a mode indicating the access permissions. Ensure that the topology is correctly initialized and contains valid workspaces before calling this function.
- **Inputs**:
    - `topo`: A pointer to a `fd_topo_t` structure representing the topology. Must not be null and should be properly initialized with valid workspaces.
    - `mode`: An integer indicating the access mode for the workspaces. Valid values are `FD_SHMEM_JOIN_MODE_READ_WRITE` for read-write access and `FD_SHMEM_JOIN_MODE_READ_ONLY` for read-only access.
- **Output**: None
- **See Also**: [`fd_topo_join_workspaces`](<fd_topo.c.md#fd_topo_join_workspaces>)  (Implementation)


---
### fd\_topo\_leave\_workspaces<!-- {{#callable_declaration:fd_topo_leave_workspaces}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L869>)

Unmaps all previously mapped workspaces in the topology.
- **Description**: Use this function to unmap all shared memory workspaces that were previously mapped in the given topology. It is important to ensure that the topology pointer is not null before calling this function. Only workspaces that have been previously joined will be unmapped, making this function safe to call even if some workspaces were not mapped.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. This parameter must not be null. The function will unmap all workspaces that were previously mapped in this topology.
- **Output**: None
- **See Also**: [`fd_topo_leave_workspaces`](<fd_topo.c.md#fd_topo_leave_workspaces>)  (Implementation)


---
### fd\_topo\_create\_workspace<!-- {{#callable_declaration:fd_topo_create_workspace}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L889>)

Creates or updates a workspace in the topology.
- **Description**: Use this function to create a new workspace or update an existing one in the topology. It formats the workspace correctly and handles memory allocation. If `update_existing` is set to 1, the function updates the existing workspace without zeroing all pages, which is useful for development but risky for production as it may leave residual data. The function returns 0 on success and -1 if there is insufficient memory, with other errors causing the program to exit.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `wksp`: A pointer to an `fd_topo_wksp_t` structure representing the workspace to create or update. Must not be null.
    - `update_existing`: An integer flag indicating whether to update an existing workspace (1) or create a new one (0).
- **Output**: Returns 0 on success or -1 if there is insufficient memory. Other errors cause the program to exit.
- **See Also**: [`fd_topo_create_workspace`](<fd_topo.c.md#fd_topo_create_workspace>)  (Implementation)


---
### fd\_topo\_fill\_tile<!-- {{#callable_declaration:fd_topo_fill_tile}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L897>)

Fills a tile with necessary workspace data.
- **Description**: Use this function to populate a tile with the required workspace data in a topology. It iterates over the workspaces in the topology and fills them if the tile needs them. This function should be called when a tile needs to be prepared with its associated workspaces. Ensure that the `topo` and `tile` parameters are correctly initialized before calling this function.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null and should be properly initialized.
    - `tile`: A pointer to an `fd_topo_tile_t` structure representing the tile to be filled. Must not be null and should be properly initialized.
- **Output**: None
- **See Also**: [`fd_topo_fill_tile`](<fd_topo.c.md#fd_topo_fill_tile>)  (Implementation)


---
### fd\_topo\_workspace\_fill<!-- {{#callable_declaration:fd_topo_workspace_fill}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L903>)

Joins shared memory objects in a workspace to the local process.
- **Description**: Use this function to map shared memory objects associated with a specific workspace into the local process's address space. This is necessary for accessing the memory of objects that reside in the specified workspace. Ensure that the `topo` and `wksp` parameters are valid and correctly initialized before calling this function. The function does not return a value and assumes that the workspace and topology structures are properly configured.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null and should be properly initialized.
    - `wksp`: A pointer to an `fd_topo_wksp_t` structure representing the workspace to fill. Must not be null and should be properly initialized.
- **Output**: None
- **See Also**: [`fd_topo_workspace_fill`](<fd_topo.c.md#fd_topo_workspace_fill>)  (Implementation)


---
### fd\_topo\_wksp\_new<!-- {{#callable_declaration:fd_topo_wksp_new}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L910>)

Applies a new function to each object in a specified workspace.
- **Description**: Use this function to apply a specified callback function to each object within a given workspace in the topology. This is useful for initializing or processing objects based on their presence in a workspace. Ensure that the `topo` and `wksp` parameters are valid and that the `callbacks` array is properly initialized with function pointers for each object type. The function iterates over objects in the workspace and applies the corresponding callback function if available.
- **Inputs**:
    - `topo`: A pointer to a constant `fd_topo_t` structure representing the topology. Must not be null.
    - `wksp`: A pointer to a constant `fd_topo_wksp_t` structure representing the workspace. Must not be null.
    - `callbacks`: An array of pointers to `fd_topo_obj_callbacks_t` structures. Each structure contains function pointers for object-specific operations. The array must be null-terminated.
- **Output**: None
- **See Also**: [`fd_topo_wksp_new`](<fd_topo.c.md#fd_topo_wksp_new>)  (Implementation)


---
### fd\_topo\_fill<!-- {{#callable_declaration:fd_topo_fill}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L917>)

Fills all workspaces in the topology with necessary data.
- **Description**: Use this function to populate all workspaces within a given topology structure. It iterates over each workspace in the topology and fills it with the required data. This function should be called when you need to ensure that all workspaces in the topology are initialized and ready for use. It assumes that the `topo` parameter is a valid and properly initialized pointer to a `fd_topo_t` structure.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. This parameter must not be null and should be properly initialized before calling the function.
- **Output**: None
- **See Also**: [`fd_topo_fill`](<fd_topo.c.md#fd_topo_fill>)  (Implementation)


---
### fd\_topo\_tile\_stack\_join<!-- {{#callable_declaration:fd_topo_tile_stack_join}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L924>)

Joins a huge page optimized stack for a specified tile.
- **Description**: Use this function to map a huge page optimized stack into the process for a specific tile in a Firedancer topology. This function requires the stack to already exist at a known path in the hugetlbfs mount. It is important to ensure that the application and tile names, along with the tile kind ID, are correctly specified to form the stack's path. This function is typically used in environments where memory management is optimized for performance using huge pages.
- **Inputs**:
    - `app_name`: A string representing the application name. It must not be null and should be a valid C string.
    - `tile_name`: A string representing the tile name. It must not be null and should be a valid C string.
    - `tile_kind_id`: An unsigned long integer representing the kind ID of the tile. It should be a valid identifier for the tile kind.
- **Output**: Returns a pointer to the base of the joined stack. If the operation fails, the function logs an error and does not return.
- **See Also**: [`fd_topo_tile_stack_join`](<fd_topo_run.c.md#fd_topo_tile_stack_join>)  (Implementation)


---
### fd\_topo\_install\_xdp<!-- {{#callable_declaration:fd_topo_install_xdp}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L933>)

Installs an XDP program on a network interface.
- **Description**: Use this function to install an XDP program on a network interface specified in the topology. It configures the interface with the necessary ports for network communication. This function must be called with a valid topology structure that includes network tile configurations. It returns a structure containing file descriptors for the XDP socket map and program link. Ensure that the network interface specified in the topology is available and correctly configured before calling this function.
- **Inputs**:
    - `topo`: A pointer to a constant `fd_topo_t` structure representing the network topology. This must not be null and should contain valid network tile configurations.
    - `bind_addr`: An unsigned integer representing an optional IPv4 address for filtering by destination IP. It can be zero if no filtering is required.
- **Output**: Returns an `fd_xdp_fds_t` structure containing file descriptors for the XDP socket map and program link.
- **See Also**: [`fd_topo_install_xdp`](<fd_topo_run.c.md#fd_topo_install_xdp>)  (Implementation)


---
### fd\_topo\_run\_single\_process<!-- {{#callable_declaration:fd_topo_run_single_process}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L962>)

Runs all tiles in a single process with specified user and group IDs.
- **Description**: Use this function to execute all tiles within a single process, switching the process to the specified user and group IDs. This function is useful for debugging and tooling, as it allows all tiles to run in the same address space without sandboxing. The function spawns a thread for each tile and switches the thread to the given UID and GID. It is important to note that the threads will not exit, as tiles are expected to run indefinitely. The function logs an error and exits the application if a tile exits unexpectedly. The `agave` parameter controls which tiles are started based on their Agave status.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `agave`: An integer that determines which tiles to start. If 0, only non-Agave tiles are started; if 1, only Agave tiles are started; any other value starts all tiles.
    - `uid`: An unsigned integer representing the user ID to switch to. Must be a valid user ID.
    - `gid`: An unsigned integer representing the group ID to switch to. Must be a valid group ID.
    - `tile_run`: A function pointer to a function that takes a constant pointer to `fd_topo_tile_t` and returns an `fd_topo_run_tile_t`. This function determines how each tile is run.
- **Output**: None
- **See Also**: [`fd_topo_run_single_process`](<fd_topo_run.c.md#fd_topo_run_single_process>)  (Implementation)


---
### fd\_topo\_run\_tile<!-- {{#callable_declaration:fd_topo_run_tile}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L1004>)

Runs a tile within the current process and thread.
- **Description**: Use this function to execute a specific tile in the current process and thread context. It is designed to run indefinitely, as tiles are expected to operate continuously. The function can sandbox the process if specified, and it will switch the thread to the provided user and group IDs. Ensure that the `tile_run` structure is properly configured with necessary callbacks and limits before calling this function. This function does not return, and any premature exit of the tile will result in an error log and application termination.
- **Inputs**:
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null.
    - `tile`: A pointer to an `fd_topo_tile_t` structure representing the tile to run. Must not be null.
    - `sandbox`: An integer flag indicating whether to sandbox the process (non-zero) or not (zero).
    - `keep_controlling_terminal`: An integer flag indicating whether to keep the controlling terminal (non-zero) or detach it (zero) if sandboxing is enabled.
    - `dumpable`: An integer flag indicating whether the process should be made dumpable (non-zero) or not (zero).
    - `uid`: A user ID to switch the thread to before starting the tile. Must be a valid user ID.
    - `gid`: A group ID to switch the thread to before starting the tile. Must be a valid group ID.
    - `allow_fd`: An integer representing a file descriptor that is allowed to exist in the process if sandboxing is enabled. If not used, set to -1.
    - `wait`: A pointer to a volatile integer used for debugging. If non-null, the function waits until the value is non-zero before launching the tile.
    - `debugger`: A pointer to a volatile integer used for debugging. If non-null, the function waits for a debugger to attach before setting the value to non-zero.
    - `tile_run`: A pointer to an `fd_topo_run_tile_t` structure containing callbacks and limits for running the tile. Must be properly initialized.
- **Output**: None
- **See Also**: [`fd_topo_run_tile`](<fd_topo_run.c.md#fd_topo_run_tile>)  (Implementation)


---
### fd\_topo\_mlock\_max\_tile<!-- {{#callable_declaration:fd_topo_mlock_max_tile}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L1037>)

Finds the maximum memory lock requirement for any tile in the topology.
- **Description**: Use this function to determine the maximum amount of memory that any single tile in the topology will lock using `mlock()`. This is useful for setting the `RLIMIT_MLOCK` value to ensure that all tiles can lock the required memory without failure. The function calculates the maximum memory lock requirement by considering all tiles in the topology and their associated memory needs, including workspaces, huge pages for stacks, and private locked memory maps. It is important to call this function after the topology is fully configured to get an accurate result.
- **Inputs**:
    - `topo`: A pointer to a constant `fd_topo_t` structure representing the topology. This parameter must not be null, and the topology should be fully configured before calling this function.
- **Output**: Returns an unsigned long representing the maximum memory lock requirement in bytes for any single tile in the topology.
- **See Also**: [`fd_topo_mlock_max_tile`](<fd_topo.c.md#fd_topo_mlock_max_tile>)  (Implementation)


---
### fd\_topo\_mlock<!-- {{#callable_declaration:fd_topo_mlock}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L1045>)

Calculates the total memory size of all workspaces in a topology.
- **Description**: Use this function to determine the total memory size, in bytes, required by all workspaces in a given topology. This is useful for understanding the memory footprint of the topology. Ensure that the `topo` parameter is a valid pointer to a `fd_topo_t` structure before calling this function.
- **Inputs**:
    - `topo`: A pointer to a `fd_topo_t` structure representing the topology. Must not be null. The function assumes that the structure is properly initialized and contains valid data about the workspaces.
- **Output**: Returns the total memory size in bytes of all workspaces in the topology.
- **See Also**: [`fd_topo_mlock`](<fd_topo.c.md#fd_topo_mlock>)  (Implementation)


---
### fd\_topo\_gigantic\_page\_cnt<!-- {{#callable_declaration:fd_topo_gigantic_page_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L1053>)

Counts the number of gigantic pages for a specific NUMA node.
- **Description**: Use this function to determine the total number of gigantic pages allocated for a specific NUMA node within a given topology. This is useful for memory management and resource allocation in systems that utilize NUMA architecture. Ensure that the `topo` parameter is a valid pointer to an `fd_topo_t` structure and that `numa_idx` is within the valid range of NUMA nodes present in the topology.
- **Inputs**:
    - `topo`: A pointer to a constant `fd_topo_t` structure representing the topology. Must not be null.
    - `numa_idx`: An unsigned long representing the index of the NUMA node. Must be a valid index within the topology's NUMA nodes.
- **Output**: Returns the total number of gigantic pages as an unsigned long for the specified NUMA node.
- **See Also**: [`fd_topo_gigantic_page_cnt`](<fd_topo.c.md#fd_topo_gigantic_page_cnt>)  (Implementation)


---
### fd\_topo\_huge\_page\_cnt<!-- {{#callable_declaration:fd_topo_huge_page_cnt}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L1063>)

Returns the number of huge pages needed by the topology on a specified NUMA node.
- **Description**: Use this function to determine the number of huge pages required by the topology on a specific NUMA node. It accounts for pages needed by workspaces and process stacks. The function can also include anonymous huge pages if specified. This is useful for memory planning and allocation in systems using huge pages.
- **Inputs**:
    - `topo`: A pointer to a `fd_topo_t` structure representing the topology. Must not be null.
    - `numa_idx`: The index of the NUMA node for which the huge page count is needed. Must be a valid NUMA node index.
    - `include_anonymous`: An integer flag indicating whether to include anonymous huge pages in the count. Non-zero values include anonymous pages, zero excludes them.
- **Output**: The function returns an unsigned long integer representing the number of huge pages needed by the topology on the specified NUMA node.
- **See Also**: [`fd_topo_huge_page_cnt`](<fd_topo.c.md#fd_topo_huge_page_cnt>)  (Implementation)


---
### fd\_topo\_print\_log<!-- {{#callable_declaration:fd_topo_print_log}} -->
[View Source →](<../../../../../src/disco/topo/fd_topo.h#L1071>)

Prints a message describing the topology to an output stream.
- **Description**: Use this function to output a detailed description of the topology represented by `topo`. The output can be directed to either the standard output or a log file, depending on the value of the `stdout` parameter. This function is useful for debugging or monitoring the current state of the topology. Ensure that `topo` is a valid pointer to a properly initialized `fd_topo_t` structure before calling this function.
- **Inputs**:
    - `stdout`: An integer flag that determines the output destination. If non-zero, the message is printed to standard output. If zero, the message is logged as a NOTICE to the log file.
    - `topo`: A pointer to an `fd_topo_t` structure representing the topology. Must not be null and should be properly initialized before use.
- **Output**: None
- **See Also**: [`fd_topo_print_log`](<fd_topo.c.md#fd_topo_print_log>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)