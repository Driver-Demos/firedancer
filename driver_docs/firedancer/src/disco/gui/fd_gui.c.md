<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implementation of a graphical user interface (GUI) for monitoring and managing blockchain metrics, transactions, and network status, with functions for handling slot events, leader schedules, and plugin messages.

# Purpose
The code is a C module that manages a graphical user interface (GUI) for a distributed system, likely a blockchain or similar network. It provides functions to initialize, update, and manage the state of the GUI, which includes handling various events and messages related to network operations, slot management, and transaction processing. The module interacts with other components through a series of function calls and message handling routines, which update the GUI's state and broadcast updates to connected clients via WebSockets.

Key components of the code include functions for creating and joining GUI instances ([`fd_gui_new`](<#fd_gui_new>), [`fd_gui_join`](<#fd_gui_join>)), setting identity keys ([`fd_gui_set_identity`](<#fd_gui_set_identity>)), and handling WebSocket connections ([`fd_gui_ws_open`](<#fd_gui_ws_open>)). The code also defines functions to manage slot events, such as starting and ending slots ([`fd_gui_handle_slot_start`](<#fd_gui_handle_slot_start>), [`fd_gui_handle_slot_end`](<#fd_gui_handle_slot_end>)), handling slot completions and resets, and updating slot rankings. Additionally, the module processes various plugin messages to update the GUI with information about the network's state, such as leader schedules, balance updates, and block engine status. The code is structured to handle a wide range of events and updates, ensuring that the GUI reflects the current state of the network accurately.
# Imports and Dependencies

---
- `fd_gui.h`
- `fd_gui_printf.h`
- `../metrics/fd_metrics.h`
- `../plugin/fd_plugin.h`
- `../../ballet/base58/fd_base58.h`
- `../../ballet/json/cJSON.h`
- `../../disco/genesis/fd_genesis_cluster.h`
- `../../disco/pack/fd_pack.h`
- `../../disco/pack/fd_pack_cost.h`
- `stdio.h`
- `../../util/tmpl/fd_sort.c`


# Functions

---
### fd\_gui\_footprint<!-- {{#callable:fd_gui_footprint}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L20>)

Returns the size of the `fd_gui_t` structure.
- **Inputs**: None
- **Logic and Control Flow**:
    - The function calls `sizeof(fd_gui_t)` to determine the size of the `fd_gui_t` structure.
    - The result is returned directly.
- **Output**: Returns the size of the `fd_gui_t` structure as an unsigned long.


---
### fd\_gui\_new<!-- {{#callable:fd_gui_new}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L25>)

Creates a new `fd_gui_t` instance using shared memory and initializes its fields.
- **Inputs**:
    - `shmem`: Pointer to shared memory for the GUI instance.
    - `http`: Pointer to an `fd_http_server_t` instance for handling HTTP requests.
    - `version`: String representing the version of the GUI.
    - `cluster`: String representing the cluster name.
    - `identity_key`: Pointer to an array containing the identity key.
    - `has_vote_key`: Integer indicating if a vote key is present.
    - `vote_key`: Pointer to an array containing the vote key.
    - `is_full_client`: Integer indicating if the client is a full client.
    - `snapshots_enabled`: Integer indicating if snapshots are enabled.
    - `is_voting`: Integer indicating if the instance is currently voting.
    - `schedule_strategy`: Integer representing the scheduling strategy.
    - `topo`: Pointer to an `fd_topo_t` instance representing the topology.
    - `now`: Current time in milliseconds since epoch.
- **Logic and Control Flow**:
    - Check if `shmem` is NULL; if so, log a warning and return NULL.
    - Check if `shmem` is aligned; if not, log a warning and return NULL.
    - Check if the number of tiles in `topo` exceeds a predefined limit; if so, log a warning and return NULL.
    - Cast `shmem` to `fd_gui_t` and initialize its fields with the provided arguments.
    - If `has_vote_key` is true, copy the `vote_key` and encode it; otherwise, clear the vote key.
    - Set various fields in the `gui` structure based on the input parameters.
    - Initialize arrays and counters to default values.
    - Return the pointer to the initialized `fd_gui_t` instance.
- **Output**: Returns a pointer to the newly created `fd_gui_t` instance.
- **Functions Called**:
    - [`fd_gui_align`](<#fd_gui_align>)


---
### fd\_gui\_join<!-- {{#callable:fd_gui_join}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L176>)

Casts a pointer from `void *` to `fd_gui_t *`.
- **Inputs**:
    - `shmem`: A pointer to shared memory that is cast to `fd_gui_t *`.
- **Logic and Control Flow**:
    - The function directly casts the input pointer `shmem` to type `fd_gui_t *`.
    - No conditional statements or loops are present in the function.
- **Output**: Returns a pointer of type `fd_gui_t *` that points to the same memory location as `shmem`.


---
### fd\_gui\_set\_identity<!-- {{#callable:fd_gui_set_identity}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L181>)

Sets the identity key for the GUI and broadcasts the updated identity and balance.
- **Inputs**:
    - `gui`: A pointer to the `fd_gui_t` structure that represents the GUI context.
    - `identity_pubkey`: A pointer to a constant array of `uchar` representing the public key to set as the identity.
- **Logic and Control Flow**:
    - Copies the first 32 bytes of `identity_pubkey` into the `identity_key` field of the `gui->summary` structure.
    - Encodes the `identity_pubkey` into Base58 format and stores it in `gui->summary.identity_key_base58`.
    - Ensures the Base58 string is null-terminated.
    - Calls [`fd_gui_printf_identity_key`](<fd_gui_printf.c.md#fd_gui_printf_identity_key>) to print the updated identity key.
    - Broadcasts the updated identity key to all connected WebSocket clients using `fd_http_server_ws_broadcast`.
    - Calls [`fd_gui_printf_identity_balance`](<fd_gui_printf.c.md#fd_gui_printf_identity_balance>) to print the updated identity balance.
    - Broadcasts the updated identity balance to all connected WebSocket clients.
- **Output**: The function does not return a value. It updates the GUI state and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_printf_identity_key`](<fd_gui_printf.c.md#fd_gui_printf_identity_key>)
    - [`fd_gui_printf_identity_balance`](<fd_gui_printf.c.md#fd_gui_printf_identity_balance>)


---
### fd\_gui\_ws\_open<!-- {{#callable:fd_gui_ws_open}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L195>)

Opens a WebSocket connection and sends various GUI status updates.
- **Inputs**:
    - `gui`: Pointer to a `fd_gui_t` structure that holds the GUI state.
    - `ws_conn_id`: WebSocket connection identifier of type `ulong`.
- **Logic and Control Flow**:
    - Defines an array of function pointers `printers` that point to various printing functions based on the GUI state.
    - Iterates over the `printers` array and calls each function with the `gui` pointer, sending the output to the WebSocket connection.
    - Checks if the block engine is available and prints its status if it is.
    - Iterates over the epochs and prints the skip rate and epoch information if they are available.
    - Finally, prints the peers information.
- **Output**: The function does not return a value but sends multiple status updates to the WebSocket connection.
- **Functions Called**:
    - [`fd_gui_printf_block_engine`](<fd_gui_printf.c.md#fd_gui_printf_block_engine>)
    - [`fd_gui_printf_skip_rate`](<fd_gui_printf.c.md#fd_gui_printf_skip_rate>)
    - [`fd_gui_printf_epoch`](<fd_gui_printf.c.md#fd_gui_printf_epoch>)
    - [`fd_gui_printf_peers_all`](<fd_gui_printf.c.md#fd_gui_printf_peers_all>)


---
### fd\_gui\_tile\_timers\_snap<!-- {{#callable:fd_gui_tile_timers_snap}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L253>)

Records the timer metrics for each tile in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that contains the GUI state and metrics.
- **Logic and Control Flow**:
    - Retrieve the current tile timer snapshot from `gui->summary.tile_timers_snap` using the index `gui->summary.tile_timers_snap_idx`.
    - Update the index `gui->summary.tile_timers_snap_idx` to point to the next snapshot, wrapping around if necessary.
    - Iterate over each tile in `gui->topo->tiles` using a loop.
    - Check if the tile's metrics are available; if not, exit the function early.
    - Retrieve the metrics for the current tile using `fd_metrics_tile`.
    - Store various timer metrics from the tile's metrics into the current snapshot.
- **Output**: The function does not return a value. It updates the timer metrics for each tile in the GUI.


---
### fd\_gui\_estimated\_tps\_snap<!-- {{#callable:fd_gui_estimated_tps_snap}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L278>)

Calculates and updates the estimated transactions per second (TPS) based on completed slots.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state and metrics.
- **Logic and Control Flow**:
    - Checks if `gui->summary.slot_completed` is equal to `ULONG_MAX`, and returns if true.
    - Iterates from 0 to the minimum of `gui->summary.slot_completed + 1` and `FD_GUI_SLOTS_CNT`.
    - For each slot, retrieves the slot data using [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>).
    - Checks if the slot exists, if not, breaks the loop.
    - Checks if the slot's `completed_time` is `LONG_MAX`, if so, continues to the next iteration.
    - Checks if the slot's `completed_time` is older than the `gui->next_sample_400millis`, if so, breaks the loop.
    - Checks if the slot was skipped, if so, continues to the next iteration.
    - Accumulates the total transaction counts, vote transaction counts, and non-vote failed transaction counts.
    - Updates the estimated TPS history with the accumulated counts.
    - Increments the index for the estimated TPS history, wrapping around if necessary.
- **Output**: The function does not return a value but updates the `gui->summary.estimated_tps_history` with the calculated transaction counts.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)


---
### fd\_gui\_txn\_waterfall\_snap<!-- {{#callable:fd_gui_txn_waterfall_snap}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L311>)

Captures and summarizes transaction metrics from various tiles in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure containing GUI state and configuration.
    - `cur`: Pointer to the `fd_gui_txn_waterfall_t` structure to store the output metrics.
- **Logic and Control Flow**:
    - Initialize output fields in `cur` to zero.
    - Iterate over each bank tile and retrieve metrics based on whether the client is full or not.
    - Accumulate successful and failed transaction counts from bank metrics.
    - Retrieve and accumulate metrics from the pack tile.
    - Retrieve and accumulate metrics from the resolv tile.
    - Retrieve and accumulate metrics from the dedup tile.
    - Retrieve and accumulate metrics from the verify tile.
    - Retrieve and accumulate metrics from the quic tile.
    - Retrieve and accumulate metrics from the net tile.
    - Retrieve and accumulate metrics from the bundle tile.
    - Store input metrics from pack and quic tiles.
- **Output**: Populates the `cur` structure with various transaction metrics including success, failure, and invalid counts from different tiles.


---
### fd\_gui\_tile\_stats\_snap<!-- {{#callable:fd_gui_tile_stats_snap}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L555>)

Captures and updates tile statistics based on the current state of the GUI and transaction waterfall.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `waterfall`: Pointer to a constant `fd_gui_txn_waterfall_t` structure that contains transaction waterfall data.
    - `stats`: Pointer to a `fd_gui_tile_stats_t` structure where the updated statistics will be stored.
    - `now`: Current time in nanoseconds used for timestamping the statistics.
- **Logic and Control Flow**:
    - Sets the sample time in `stats` to the current time.
    - Initializes `net_in_rx_bytes` and `net_out_tx_bytes` to zero.
    - Iterates over network tiles to accumulate received and transmitted byte counts.
    - Iterates over socket tiles to accumulate received and transmitted byte counts.
    - Counts the number of QUIC connections from the QUIC tiles.
    - If a bundle tile exists, retrieves its smoothed round-trip time and initializes a histogram for message receive delays.
    - Calculates verification drop and total counts based on the waterfall data.
    - Calculates deduplication drop and total counts.
    - Retrieves the pack buffer count and capacity from the pack tile.
    - Records the total transaction execution count from the waterfall data.
- **Output**: Updates the `stats` structure with the calculated statistics for network bytes, QUIC connections, round-trip times, verification counts, deduplication counts, and pack buffer information.


---
### fd\_gui\_run\_boot\_progress<!-- {{#callable:fd_gui_run_boot_progress}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L628>)

Updates the boot progress state based on the current snapshot metrics.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `now`: Current time in nanoseconds.
- **Logic and Control Flow**:
    - Retrieve metrics for the tiles `snapct`, `snapdc`, and `snapin` using `fd_topo_find_tile`.
    - Determine the current snapshot phase from `snapct_metrics`.
    - Transition the boot progress phase based on conditions related to `slot_caught_up`, `snapshot_phase`, and other metrics.
    - If in the `CATCHING_UP` phase and the reset count is `ULONG_MAX`, transition to `LOADING_INCREMENTAL_SNAPSHOT`.
    - Update the `boot_progress` structure based on the current phase, including timestamps and metrics for loading snapshots.
- **Output**: The function does not return a value but updates the state of the `gui` structure.


---
### fd\_gui\_poll<!-- {{#callable:fd_gui_poll}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L717>)

Polls the GUI for updates and performs actions based on the current time.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `now`: Current time in nanoseconds used to determine when to perform updates.
- **Logic and Control Flow**:
    - Initializes `did_work` to 0 to track if any updates were made.
    - Checks if `now` is greater than `gui->next_sample_400millis` to perform a 400 ms update.
    - Calls [`fd_gui_estimated_tps_snap`](<#fd_gui_estimated_tps_snap>), [`fd_gui_printf_estimated_tps`](<fd_gui_printf.c.md#fd_gui_printf_estimated_tps>), and broadcasts updates via `fd_http_server_ws_broadcast`.
    - Updates `gui->next_sample_400millis` to the next scheduled time.
    - Checks if `now` is greater than `gui->next_sample_100millis` to perform a 100 ms update.
    - Calls [`fd_gui_txn_waterfall_snap`](<#fd_gui_txn_waterfall_snap>), [`fd_gui_printf_live_txn_waterfall`](<fd_gui_printf.c.md#fd_gui_printf_live_txn_waterfall>), and broadcasts updates.
    - Updates tile statistics and checks for boot progress updates.
    - Checks if `now` is greater than `gui->next_sample_10millis` to perform a 10 ms update.
    - Calls [`fd_gui_tile_timers_snap`](<#fd_gui_tile_timers_snap>), [`fd_gui_printf_live_tile_timers`](<fd_gui_printf.c.md#fd_gui_printf_live_tile_timers>), and broadcasts updates.
    - Updates the next sample time for 10 ms.
    - Returns `did_work` indicating if any updates were made.
- **Output**: Returns 1 if any updates were made, otherwise returns 0.
- **Functions Called**:
    - [`fd_gui_estimated_tps_snap`](<#fd_gui_estimated_tps_snap>)
    - [`fd_gui_printf_estimated_tps`](<fd_gui_printf.c.md#fd_gui_printf_estimated_tps>)
    - [`fd_gui_txn_waterfall_snap`](<#fd_gui_txn_waterfall_snap>)
    - [`fd_gui_printf_live_txn_waterfall`](<fd_gui_printf.c.md#fd_gui_printf_live_txn_waterfall>)
    - [`fd_gui_tile_stats_snap`](<#fd_gui_tile_stats_snap>)
    - [`fd_gui_printf_live_tile_stats`](<fd_gui_printf.c.md#fd_gui_printf_live_tile_stats>)
    - [`fd_gui_run_boot_progress`](<#fd_gui_run_boot_progress>)
    - [`fd_gui_printf_boot_progress`](<fd_gui_printf.c.md#fd_gui_printf_boot_progress>)
    - [`fd_gui_tile_timers_snap`](<#fd_gui_tile_timers_snap>)
    - [`fd_gui_printf_live_tile_timers`](<fd_gui_printf.c.md#fd_gui_printf_live_tile_timers>)
    - [`fd_gui_printf_shred_updates`](<fd_gui_printf.c.md#fd_gui_printf_shred_updates>)


---
### fd\_gui\_handle\_gossip\_update<!-- {{#callable:fd_gui_handle_gossip_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L769>)

Handles updates to the gossip peer information in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to a message containing gossip update data.
- **Logic and Control Flow**:
    - Checks if the current peer count exceeds the maximum allowed, logging a debug message if it does.
    - Extracts the peer count from the message header.
    - Iterates through existing peers to find and remove those not present in the update message.
    - Iterates through the new peer data to add new peers or update existing ones.
    - Calls [`fd_gui_printf_peers_gossip_update`](<fd_gui_printf.c.md#fd_gui_printf_peers_gossip_update>) to log the changes and broadcasts the update via WebSocket.
- **Output**: No return value; updates the state of the GUI and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_printf_peers_gossip_update`](<fd_gui_printf.c.md#fd_gui_printf_peers_gossip_update>)


---
### fd\_gui\_handle\_vote\_account\_update<!-- {{#callable:fd_gui_handle_vote_account_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L897>)

Handles updates to the vote account by processing incoming messages.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to a message containing vote account updates.
- **Logic and Control Flow**:
    - Checks if the current vote account count exceeds the maximum allowed count.
    - Extracts the number of peers from the message header.
    - Iterates through existing vote accounts to find and remove any that are not present in the new message.
    - Iterates through the new peer data to add new vote accounts or update existing ones.
    - Updates the GUI with the changes in vote accounts and broadcasts the updates.
- **Output**: Updates the state of the vote accounts in the `fd_gui_t` structure and broadcasts the changes to connected clients.
- **Functions Called**:
    - [`fd_gui_printf_peers_vote_account_update`](<fd_gui_printf.c.md#fd_gui_printf_peers_vote_account_update>)


---
### fd\_gui\_handle\_validator\_info\_update<!-- {{#callable:fd_gui_handle_validator_info_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L993>)

Updates the validator information in the GUI based on the provided message.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to a message containing validator information.
- **Logic and Control Flow**:
    - Check if the current count of validator information exceeds `FD_GUI_MAX_PEER_CNT`. If it does, log a debug message and return.
    - Convert the message pointer to a constant `uchar` pointer.
    - Initialize counters for added, updated, and removed validators.
    - Store the count of validators before processing the new message.
    - Search for an existing validator in the current list using a loop.
    - If the validator is not found, copy the new information into the GUI structure and increment the count.
    - If the validator is found, check if any of the information has changed. If it has, update the existing information.
    - Calculate the number of added validators and prepare the list of added indices.
    - Call [`fd_gui_printf_peers_validator_info_update`](<fd_gui_printf.c.md#fd_gui_printf_peers_validator_info_update>) to print the updates and broadcast the changes.
- **Output**: No return value. The function updates the GUI state and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_printf_peers_validator_info_update`](<fd_gui_printf.c.md#fd_gui_printf_peers_validator_info_update>)


---
### fd\_gui\_request\_slot<!-- {{#callable:fd_gui_request_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1075>)

Processes a request for a specific slot in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI context.
    - `ws_conn_id`: WebSocket connection identifier for the client making the request.
    - `request_id`: Identifier for the request, used for tracking responses.
    - `params`: JSON object containing parameters for the request, specifically the 'slot' parameter.
- **Logic and Control Flow**:
    - Retrieve the 'slot' parameter from the `params` JSON object.
    - Check if the 'slot' parameter is a number; if not, return a bad request error.
    - Get the slot corresponding to the provided slot number using [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>).
    - If the slot does not exist, send a null query response and return.
    - Print the slot request details and send a WebSocket message to the client.
- **Output**: Returns 0 on success or an error code if the request is invalid.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)
    - [`fd_gui_printf_null_query_response`](<fd_gui_printf.c.md#fd_gui_printf_null_query_response>)
    - [`fd_gui_printf_slot_request`](<fd_gui_printf.c.md#fd_gui_printf_slot_request>)


---
### fd\_gui\_request\_slot\_transactions<!-- {{#callable:fd_gui_request_slot_transactions}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1096>)

Processes a request for slot transactions.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI context.
    - `ws_conn_id`: WebSocket connection identifier for the client making the request.
    - `request_id`: Identifier for the request, used for response matching.
    - `params`: JSON object containing parameters for the request, specifically the 'slot' parameter.
- **Logic and Control Flow**:
    - Retrieve the 'slot' parameter from the `params` JSON object.
    - Check if the 'slot' parameter is a number; if not, return a bad request error.
    - Get the slot information using the [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>) function.
    - If the slot does not exist, send a null query response and return.
    - Print the slot transactions request using [`fd_gui_printf_slot_transactions_request`](<fd_gui_printf.c.md#fd_gui_printf_slot_transactions_request>).
    - Send the response over the WebSocket connection.
- **Output**: Returns 0 on success or an error code if the request is invalid.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)
    - [`fd_gui_printf_null_query_response`](<fd_gui_printf.c.md#fd_gui_printf_null_query_response>)
    - [`fd_gui_printf_slot_transactions_request`](<fd_gui_printf.c.md#fd_gui_printf_slot_transactions_request>)


---
### fd\_gui\_request\_slot\_detailed<!-- {{#callable:fd_gui_request_slot_detailed}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1117>)

Processes a detailed request for a specific slot in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI context.
    - `ws_conn_id`: WebSocket connection identifier for the client making the request.
    - `request_id`: Identifier for the request, used for tracking responses.
    - `params`: JSON object containing parameters for the request, specifically the 'slot' parameter.
- **Logic and Control Flow**:
    - Retrieve the 'slot' parameter from the `params` JSON object.
    - Check if the 'slot' parameter is a number; if not, return a bad request error.
    - Extract the slot number from the parameter.
    - Retrieve the corresponding slot information using [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>).
    - If the slot does not exist, send a null query response and return.
    - If the slot exists, print the detailed request information for the slot.
    - Send the response over the WebSocket connection.
- **Output**: Returns 0 on success or an error code if the request is invalid or the slot does not exist.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)
    - [`fd_gui_printf_null_query_response`](<fd_gui_printf.c.md#fd_gui_printf_null_query_response>)
    - [`fd_gui_printf_slot_request_detailed`](<fd_gui_printf.c.md#fd_gui_printf_slot_request_detailed>)


---
### fd\_gui\_slot\_duration<!-- {{#callable:fd_gui_slot_duration}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1138>)

Calculates the duration between the completion times of two consecutive slots.
- **Inputs**:
    - `gui`: Pointer to a constant `fd_gui_t` structure representing the graphical user interface.
    - `cur`: Pointer to a constant `fd_gui_slot_t` structure representing the current slot.
- **Logic and Control Flow**:
    - Retrieve the previous slot using [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>) with the slot number of the current slot minus one.
    - Check if the previous slot is valid and not skipped or completed, and if the current slot is valid.
    - If any checks fail, return `ULONG_MAX` to indicate an invalid duration.
    - If all checks pass, calculate the duration by subtracting the completion time of the previous slot from the completion time of the current slot.
- **Output**: Returns the duration as an unsigned long value, or `ULONG_MAX` if the duration cannot be calculated.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)


---
### fd\_gui\_try\_insert\_ranking<!-- {{#callable:fd_gui_try_insert_ranking}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1160>)

Inserts rankings for a given slot into the rankings structure.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI.
    - `rankings`: Pointer to the `fd_gui_slot_rankings_t` structure where rankings will be stored.
    - `slot`: Pointer to the `fd_gui_slot_t` structure representing the slot to be ranked.
- **Logic and Control Flow**:
    - Checks if the `slot` is marked as skipped; if so, it inserts the slot into the skipped rankings and returns.
    - Calculates the duration of the slot using the [`fd_gui_slot_duration`](<#fd_gui_slot_duration>) function.
    - If the duration is valid, it inserts the duration ranking.
    - Inserts the tips, fees, rewards, rewards per compute unit, and compute units into their respective rankings.
- **Output**: The function does not return a value; it modifies the rankings structure directly.
- **Functions Called**:
    - [`fd_gui_slot_duration`](<#fd_gui_slot_duration>)


---
### fd\_gui\_update\_slot\_rankings<!-- {{#callable:fd_gui_update_slot_rankings}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1189>)

Updates the rankings of slots in the graphical user interface.
- **Inputs**:
    - `gui`: A pointer to the `fd_gui_t` structure that contains the GUI state.
- **Logic and Control Flow**:
    - Check if `startup_ledger_max_slot` is equal to `ULONG_MAX`. If true, exit the function.
    - Check if `slot_rooted` is equal to `ULONG_MAX`. If true, exit the function.
    - Initialize `epoch_start_slot` and `epoch` to `ULONG_MAX`.
    - Iterate over the first two epochs to find the smallest `start_slot` and `epoch`.
    - If `epoch` is still `ULONG_MAX`, exit the function.
    - Calculate `epoch_idx` as `epoch % 2`.
    - Check if the current `rankings_slot` is greater than `slot_rooted`. If true, exit the function.
    - Set `rankings_slot` to the maximum of its current value and `startup_ledger_max_slot + 1`.
    - Iterate from `slot_rooted` down to `rankings_slot`, updating rankings for each slot.
- **Output**: The function does not return a value but updates the rankings in the GUI state.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)
    - [`fd_gui_try_insert_ranking`](<#fd_gui_try_insert_ranking>)


---
### fd\_gui\_request\_slot\_rankings<!-- {{#callable:fd_gui_request_slot_rankings}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1225>)

Processes a request for slot rankings based on user preference.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `ws_conn_id`: WebSocket connection identifier for the client making the request.
    - `request_id`: Identifier for the request to track responses.
    - `params`: JSON object containing parameters for the request, specifically a boolean indicating user preference.
- **Logic and Control Flow**:
    - Retrieve the 'mine' parameter from the `params` JSON object.
    - Check if the 'mine' parameter is a boolean; if not, return a bad request error.
    - Convert the 'mine' parameter to an integer value.
    - Call [`fd_gui_update_slot_rankings`](<#fd_gui_update_slot_rankings>) to update the rankings based on the current state.
    - Call [`fd_gui_printf_slot_rankings_request`](<fd_gui_printf.c.md#fd_gui_printf_slot_rankings_request>) to format and send the rankings request response.
    - Send the response over the WebSocket connection.
- **Output**: Returns 0 on success, indicating the request was processed successfully.
- **Functions Called**:
    - [`fd_gui_update_slot_rankings`](<#fd_gui_update_slot_rankings>)
    - [`fd_gui_printf_slot_rankings_request`](<fd_gui_printf.c.md#fd_gui_printf_slot_rankings_request>)


---
### fd\_gui\_request\_slot\_shreds<!-- {{#callable:fd_gui_request_slot_shreds}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1240>)

Processes a request for slot shreds.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `ws_conn_id`: WebSocket connection identifier for the client making the request.
    - `request_id`: Identifier for the request, used for response matching.
    - `params`: JSON object containing parameters for the request, specifically the 'slot' parameter.
- **Logic and Control Flow**:
    - Retrieve the 'slot' parameter from the `params` JSON object.
    - Check if the 'slot' parameter is a number; if not, return a bad request error.
    - Get the slot corresponding to the provided slot number.
    - Check if the slot is valid and if the history tail is within bounds; if not, send a null query response and return.
    - Print the slot shred updates for the specified slot and send the response over the WebSocket connection.
- **Output**: Returns 0 on success, or an error code if the request is invalid or the slot is not found.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_printf_null_query_response`](<fd_gui_printf.c.md#fd_gui_printf_null_query_response>)
    - [`fd_gui_printf_slot_shred_updates`](<fd_gui_printf.c.md#fd_gui_printf_slot_shred_updates>)


---
### fd\_gui\_ws\_message<!-- {{#callable:fd_gui_ws_message}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1262>)

Processes WebSocket messages and dispatches requests based on the parsed JSON data.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `ws_conn_id`: WebSocket connection identifier for the current connection.
    - `data`: Pointer to the incoming message data as a byte array.
    - `data_len`: Length of the incoming message data.
- **Logic and Control Flow**:
    - Parse the incoming `data` into a JSON object using `cJSON_ParseWithLengthOpts`.
    - Check if the JSON object was created successfully; if not, return a bad request error.
    - Extract the `id`, `topic`, and `key` fields from the JSON object.
    - Validate the `id` to ensure it is a number; if not, delete the JSON object and return a bad request error.
    - Validate the `topic` to ensure it is a string; if not, delete the JSON object and return a bad request error.
    - Validate the `key` to ensure it is a string; if not, delete the JSON object and return a bad request error.
    - Use conditional statements to determine the appropriate action based on the `topic` and `key` values.
    - For each valid combination of `topic` and `key`, call the corresponding request function (e.g., [`fd_gui_request_slot`](<#fd_gui_request_slot>), [`fd_gui_request_slot_detailed`](<#fd_gui_request_slot_detailed>), etc.) with the extracted parameters.
    - If the `topic` and `key` do not match any known commands, delete the JSON object and return an unknown method error.
- **Output**: Returns an integer status code indicating the result of processing the message, such as success or various error conditions.
- **Functions Called**:
    - [`fd_gui_request_slot`](<#fd_gui_request_slot>)
    - [`fd_gui_request_slot_detailed`](<#fd_gui_request_slot_detailed>)
    - [`fd_gui_request_slot_transactions`](<#fd_gui_request_slot_transactions>)
    - [`fd_gui_request_slot_rankings`](<#fd_gui_request_slot_rankings>)
    - [`fd_gui_request_slot_shreds`](<#fd_gui_request_slot_shreds>)
    - [`fd_gui_printf_summary_ping`](<fd_gui_printf.c.md#fd_gui_printf_summary_ping>)


---
### fd\_gui\_clear\_slot<!-- {{#callable:fd_gui_clear_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1356>)

Clears and initializes a slot in the GUI structure.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that contains the GUI state.
    - `_slot`: The slot number to be cleared.
    - `_parent_slot`: The parent slot number associated with the slot being cleared.
- **Logic and Control Flow**:
    - Retrieve the slot from the `gui->slots` array using the modulo operation with `FD_GUI_SLOTS_CNT`.
    - Initialize the `mine` variable to 0 and `epoch_idx` to 0.
    - Iterate over the epochs to check if the current slot belongs to any epoch.
    - If the slot belongs to an epoch, determine if it is 'mined' by comparing the slot leader's public key with the GUI's identity key.
    - Set various properties of the slot to their initial values, including `max_compute_units`, `completed_time`, and `level`.
    - If the slot is mined, update the epoch's total slots and initialize the leader slot structure.
    - If the slot is 0, set its level to `FD_GUI_SLOT_LEVEL_ROOTED`.
    - Return the cleared slot.
- **Output**: Returns a pointer to the cleared `fd_gui_slot_t` structure.


---
### fd\_gui\_handle\_leader\_schedule<!-- {{#callable:fd_gui_handle_leader_schedule}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1421>)

Handles the leader schedule by updating the GUI state with epoch and slot information.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `leader_schedule`: Pointer to a constant `fd_stake_weight_msg_t` structure containing leader schedule data.
    - `now`: Current time in milliseconds since epoch.
- **Logic and Control Flow**:
    - Checks if `staked_cnt` and `slot_cnt` in `leader_schedule` do not exceed maximum limits.
    - Calculates the index for the current epoch using the modulo operation.
    - Updates the epoch information in the `gui` structure with values from `leader_schedule`.
    - Initializes rankings and stakes for the epoch.
    - Deletes previous leader schedule and joins a new one based on the current leader schedule.
    - Determines the start time for the epoch based on the start slot.
    - Prints the epoch information and broadcasts it via WebSocket.
- **Output**: The function does not return a value but updates the state of the `gui` structure and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)
    - [`fd_gui_printf_epoch`](<fd_gui_printf.c.md#fd_gui_printf_epoch>)


---
### fd\_gui\_handle\_slot\_start<!-- {{#callable:fd_gui_handle_slot_start}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1475>)

Handles the start of a slot in the GUI, updating the slot state and capturing relevant metrics.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `msg`: Pointer to an array of `ulong` containing the slot number and parent slot number.
    - `now`: Current time in long format used for timestamping.
- **Logic and Control Flow**:
    - Extracts the slot number and parent slot number from the `msg` array.
    - Tests if the `debug_in_leader_slot` is set to `ULONG_MAX` to ensure no slot is currently being processed.
    - Sets `debug_in_leader_slot` to the current slot number.
    - Retrieves the slot structure using the slot number.
    - If the slot does not exist, it clears the slot using [`fd_gui_clear_slot`](<#fd_gui_clear_slot>).
    - Calls [`fd_gui_tile_timers_snap`](<#fd_gui_tile_timers_snap>) to capture the current state of tile timers.
    - Updates the index for tile timer snapshots.
    - Creates a `waterfall` structure and captures the transaction waterfall state.
    - Calls [`fd_gui_tile_stats_snap`](<#fd_gui_tile_stats_snap>) to capture tile statistics for the current slot.
- **Output**: No return value; updates the state of the GUI and captures metrics.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_tile_timers_snap`](<#fd_gui_tile_timers_snap>)
    - [`fd_gui_txn_waterfall_snap`](<#fd_gui_txn_waterfall_snap>)
    - [`fd_gui_tile_stats_snap`](<#fd_gui_tile_stats_snap>)


---
### fd\_gui\_handle\_slot\_end<!-- {{#callable:fd_gui_handle_slot_end}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1496>)

Handles the end of a slot by updating metrics and state related to the slot.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `msg`: Pointer to an array of `ulong` containing the slot number and compute units used.
    - `now`: Current time in long format used for timestamping.
- **Logic and Control Flow**:
    - Extracts the slot number and compute units used from the `msg` array.
    - Checks if the current slot matches the expected debug slot and logs an error if it does not.
    - Sets the debug slot to `ULONG_MAX` to indicate no active debug slot.
    - Retrieves the slot structure corresponding to the slot number.
    - Updates the compute units for the slot.
    - Calls [`fd_gui_tile_timers_snap`](<#fd_gui_tile_timers_snap>) to capture the current state of tile timers.
    - Calculates the end index for downsampling tile timers.
    - If a leader slot exists, samples tile timers randomly and stores them.
    - Snaps the state of the transaction waterfall and updates the slot's waterfall references.
    - Captures tile statistics for the slot.
- **Output**: No return value; updates the state of the GUI and slot metrics.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_tile_timers_snap`](<#fd_gui_tile_timers_snap>)
    - [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>)
    - [`fd_gui_txn_waterfall_snap`](<#fd_gui_txn_waterfall_snap>)
    - [`fd_gui_tile_stats_snap`](<#fd_gui_tile_stats_snap>)


---
### fd\_gui\_try\_insert\_ephemeral\_slot<!-- {{#callable:fd_gui_try_insert_ephemeral_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1553>)

Inserts an ephemeral slot into a list, updating timestamps and evicting old slots.
- **Inputs**:
    - `slots`: Pointer to an array of `fd_gui_ephemeral_slot_t` structures representing ephemeral slots.
    - `slots_sz`: The current size of the slots array.
    - `slot`: The slot number to be inserted.
    - `now`: The current time in nanoseconds.
- **Logic and Control Flow**:
    - Initialize a flag `already_present` to 0.
    - Iterate over the slots array up to `slots_sz`.
    - Check if any slot is older than 4.8 seconds and evict it by setting its slot to `ULONG_MAX`.
    - If the current slot matches the input `slot`, update its timestamp and set `already_present` to 1.
    - If the slot was already present, return early.
    - If not present, insert the new slot at the end of the array and sort the array.
- **Output**: The function does not return a value; it modifies the slots array in place.


---
### fd\_gui\_try\_insert\_catch\_up\_slot<!-- {{#callable:fd_gui_try_insert_catch_up_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1577>)

Inserts a catch-up slot into a run-length encoded history.
- **Inputs**:
    - `slots`: Pointer to an array of `ulong` representing the catch-up slots.
    - `slots_sz`: Pointer to a `ulong` representing the current size of the slots array.
    - `slot`: The `ulong` value representing the new slot to insert.
- **Logic and Control Flow**:
    - Iterates through the `slots` array to check for adjacent slots.
    - If a slot is found that is one less than the new slot, it increments that slot.
    - If a slot is found that is one more than the new slot, it decrements that slot.
    - If no adjacent slots are found, the new slot is added twice to the array.
    - Removes any intervals that touch by setting them to `ULONG_MAX`.
    - Sorts the `slots` array and updates the size.
- **Output**: The function modifies the `slots` array in place and updates the size in `slots_sz`.


---
### fd\_gui\_ephemeral\_slots\_contains<!-- {{#callable:fd_gui_ephemeral_slots_contains}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1611>)

Checks if a specific slot exists in a list of ephemeral slots.
- **Inputs**:
    - `slots`: Pointer to an array of `fd_gui_ephemeral_slot_t` structures representing ephemeral slots.
    - `slots_sz`: The size of the `slots` array.
    - `slot`: The slot number to check for existence in the `slots` array.
- **Logic and Control Flow**:
    - Iterates through the `slots` array up to `slots_sz`.
    - Checks if the current slot is equal to `ULONG_MAX`, which indicates the end of valid slots.
    - If the current slot matches the input `slot`, returns 1 to indicate presence.
    - If no match is found after the loop, returns 0 to indicate absence.
- **Output**: Returns 1 if the specified slot exists in the array, otherwise returns 0.


---
### fd\_gui\_handle\_shred<!-- {{#callable:fd_gui_handle_shred}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1620>)

Handles the processing of a shred event in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `slot`: The slot number associated with the shred event.
    - `shred_idx`: The index of the shred within the slot.
    - `fec_idx`: The index for Forward Error Correction (FEC) associated with the shred.
    - `is_turbine`: An integer indicating if the shred is from a turbine (1) or not (0).
    - `tsorig`: The original timestamp of the shred event.
- **Logic and Control Flow**:
    - Checks if the slot is already in the ephemeral slots for turbine.
    - If the shred is from a turbine, attempts to insert the slot into ephemeral slots.
    - If the slot was not previously sent and is from a turbine, updates the current turbine slot.
    - Prints the turbine slot information and broadcasts it via WebSocket.
    - If the caught-up slot is not set, attempts to insert the slot into catch-up slots.
    - Creates a new `fd_gui_slot_staged_shred_event_t` structure to store the shred event details.
    - Populates the event structure with the timestamp, shred index, FEC index, slot number, and event type.
- **Output**: No return value; the function modifies the GUI state and broadcasts updates.
- **Functions Called**:
    - [`fd_gui_ephemeral_slots_contains`](<#fd_gui_ephemeral_slots_contains>)
    - [`fd_gui_try_insert_ephemeral_slot`](<#fd_gui_try_insert_ephemeral_slot>)
    - [`fd_gui_printf_turbine_slot`](<fd_gui_printf.c.md#fd_gui_printf_turbine_slot>)
    - [`fd_gui_try_insert_catch_up_slot`](<#fd_gui_try_insert_catch_up_slot>)


---
### fd\_gui\_handle\_repair\_slot<!-- {{#callable:fd_gui_handle_repair_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1647>)

Handles the repair slot by updating the GUI state and broadcasting changes.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `slot`: The slot number that is being repaired.
    - `now`: The current time in milliseconds since epoch.
- **Logic and Control Flow**:
    - Check if the `slot` is already in the ephemeral slots for repairs using [`fd_gui_ephemeral_slots_contains`](<#fd_gui_ephemeral_slots_contains>).
    - Insert the `slot` into the ephemeral slots for repairs using [`fd_gui_try_insert_ephemeral_slot`](<#fd_gui_try_insert_ephemeral_slot>).
    - If the `slot` was not previously sent and is not the current repair slot, update the current repair slot.
    - Call [`fd_gui_printf_repair_slot`](<fd_gui_printf.c.md#fd_gui_printf_repair_slot>) to print the repair slot information.
    - Broadcast the updated repair slot information using `fd_http_server_ws_broadcast`.
    - If the `slot_caught_up` is not set, insert the `slot` into the catch-up slots using [`fd_gui_try_insert_catch_up_slot`](<#fd_gui_try_insert_catch_up_slot>).
- **Output**: No return value; the function updates the GUI state and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_ephemeral_slots_contains`](<#fd_gui_ephemeral_slots_contains>)
    - [`fd_gui_try_insert_ephemeral_slot`](<#fd_gui_try_insert_ephemeral_slot>)
    - [`fd_gui_printf_repair_slot`](<fd_gui_printf.c.md#fd_gui_printf_repair_slot>)
    - [`fd_gui_try_insert_catch_up_slot`](<#fd_gui_try_insert_catch_up_slot>)


---
### fd\_gui\_handle\_reset\_slot\_legacy<!-- {{#callable:fd_gui_handle_reset_slot_legacy}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1662>)

Resets the state of a GUI slot based on the provided message data.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `msg`: Pointer to an array of `ulong` containing message data, including last landed vote, parent count, and slot information.
    - `now`: Current time in long format used for timestamping.
- **Logic and Control Flow**:
    - Extracts the last landed vote, parent count, and current slot from the `msg` array.
    - Validates that the parent count is less than 4096.
    - Iterates over the parent slots to clear any that do not exist in the GUI state.
    - Updates the vote distance if it has changed since the last update.
    - Checks and updates the voting state based on the last landed vote and current slot.
    - Iterates through the slots to determine if any need to be republished based on their state.
    - Calculates the estimated slot duration based on completed slots.
    - Updates the completed slot and broadcasts the new state if necessary.
    - Handles the case where the slot has caught up with the expected state.
- **Output**: No return value; updates the state of the GUI and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_printf_vote_distance`](<fd_gui_printf.c.md#fd_gui_printf_vote_distance>)
    - [`fd_gui_printf_vote_state`](<fd_gui_printf.c.md#fd_gui_printf_vote_state>)
    - [`fd_gui_printf_slot`](<fd_gui_printf.c.md#fd_gui_printf_slot>)
    - [`fd_gui_get_slot_const`](<fd_gui.h.md#fd_gui_get_slot_const>)
    - [`fd_gui_slot_duration`](<#fd_gui_slot_duration>)
    - [`fd_gui_printf_estimated_slot_duration_nanos`](<fd_gui_printf.c.md#fd_gui_printf_estimated_slot_duration_nanos>)
    - [`fd_gui_printf_completed_slot`](<fd_gui_printf.c.md#fd_gui_printf_completed_slot>)
    - [`fd_gui_try_insert_ephemeral_slot`](<#fd_gui_try_insert_ephemeral_slot>)
    - [`fd_gui_printf_slot_caught_up`](<fd_gui_printf.c.md#fd_gui_printf_slot_caught_up>)
    - [`fd_gui_printf_skip_rate`](<fd_gui_printf.c.md#fd_gui_printf_skip_rate>)


---
### fd\_gui\_handle\_completed\_slot<!-- {{#callable:fd_gui_handle_completed_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1826>)

Handles the completion of a slot by updating its status and broadcasting relevant information.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the graphical user interface state.
    - `msg`: Pointer to an array of `ulong` containing slot completion details such as transaction counts and fees.
    - `now`: Current time in milliseconds since epoch.
- **Logic and Control Flow**:
    - Extracts slot details from the `msg` array.
    - Retrieves the corresponding slot from the GUI state using [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>).
    - If the slot does not exist, it clears the slot using [`fd_gui_clear_slot`](<#fd_gui_clear_slot>).
    - Updates the slot's completion time, parent slot, and maximum compute units.
    - Checks if the slot's level is less than `FD_GUI_SLOT_LEVEL_COMPLETED` to determine its new level.
    - Updates transaction counts, fees, and compute units for the slot.
    - Handles epoch end time updates if the slot is the end slot of an epoch.
    - Broadcasts the new skip rate if the slot is owned by the current node.
- **Output**: No return value; updates the state of the GUI and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_printf_skip_rate`](<fd_gui_printf.c.md#fd_gui_printf_skip_rate>)


---
### fd\_gui\_handle\_rooted\_slot\_legacy<!-- {{#callable:fd_gui_handle_rooted_slot_legacy}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1892>)

Handles the processing of a rooted slot by updating its level and broadcasting the changes.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to an array of `ulong` containing the slot number to be processed.
- **Logic and Control Flow**:
    - Extracts the slot number from the `msg` array.
    - Iterates from the given slot down to zero, updating each parent slot's level to `FD_GUI_SLOT_LEVEL_ROOTED`.
    - Checks if the slot exists; if not, it breaks the loop.
    - Logs an error if the expected parent slot does not match the actual slot.
    - Broadcasts the updated slot information after processing.
- **Output**: Updates the level of the slots to `FD_GUI_SLOT_LEVEL_ROOTED` and broadcasts the changes to the HTTP server.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_printf_slot`](<fd_gui_printf.c.md#fd_gui_printf_slot>)
    - [`fd_gui_printf_root_slot`](<fd_gui_printf.c.md#fd_gui_printf_root_slot>)


---
### fd\_gui\_handle\_optimistically\_confirmed\_slot<!-- {{#callable:fd_gui_handle_optimistically_confirmed_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1922>)

Handles the optimistically confirmed slot by updating the slot levels and broadcasting changes.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to an array of `ulong` containing the slot number at index 0.
- **Logic and Control Flow**:
    - Extracts the slot number from `msg`.
    - Iterates from 0 to the minimum of the slot number and `FD_GUI_SLOTS_CNT`.
    - For each iteration, retrieves the parent slot and checks its validity.
    - If the slot is valid and its level is less than `FD_GUI_SLOT_LEVEL_OPTIMISTICALLY_CONFIRMED`, updates its level.
    - If the current slot is less than the previously confirmed slot, marks the slots as completed.
- **Output**: Updates the level of slots to optimistically confirmed and broadcasts the changes.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_printf_slot`](<fd_gui_printf.c.md#fd_gui_printf_slot>)
    - [`fd_gui_printf_optimistically_confirmed_slot`](<fd_gui_printf.c.md#fd_gui_printf_optimistically_confirmed_slot>)


---
### fd\_gui\_handle\_balance\_update<!-- {{#callable:fd_gui_handle_balance_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1973>)

Handles updates to account balances for identity and vote accounts.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds GUI state.
    - `msg`: Pointer to an array of `ulong` containing the account type and the new balance.
- **Logic and Control Flow**:
    - Checks the first element of `msg` to determine the account type.
    - If the account type is 0, updates the identity account balance and calls [`fd_gui_printf_identity_balance`](<fd_gui_printf.c.md#fd_gui_printf_identity_balance>).
    - If the account type is 1, updates the vote account balance and calls [`fd_gui_printf_vote_balance`](<fd_gui_printf.c.md#fd_gui_printf_vote_balance>).
    - If the account type is unknown, logs an error message.
- **Output**: No return value; updates the GUI state and broadcasts the new balance.
- **Functions Called**:
    - [`fd_gui_printf_identity_balance`](<fd_gui_printf.c.md#fd_gui_printf_identity_balance>)
    - [`fd_gui_printf_vote_balance`](<fd_gui_printf.c.md#fd_gui_printf_vote_balance>)


---
### fd\_gui\_handle\_start\_progress<!-- {{#callable:fd_gui_handle_start_progress}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L1992>)

Handles the start of the progress phase in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to a message of type `uchar` that indicates the progress phase.
- **Logic and Control Flow**:
    - Extracts the first byte from `msg` to determine the progress phase type.
    - Uses a `switch` statement to handle different phase types based on the extracted byte.
    - Updates the `gui->summary.startup_progress.phase` based on the phase type.
    - Logs the current progress phase using `FD_LOG_INFO`.
    - Calls [`fd_gui_printf_startup_progress`](<fd_gui_printf.c.md#fd_gui_printf_startup_progress>) to print the updated progress.
    - Broadcasts the updated progress using `fd_http_server_ws_broadcast`.
- **Output**: No return value; updates the GUI state and broadcasts the progress.
- **Functions Called**:
    - [`fd_gui_printf_startup_progress`](<fd_gui_printf.c.md#fd_gui_printf_startup_progress>)


---
### fd\_gui\_handle\_genesis\_hash<!-- {{#callable:fd_gui_handle_genesis_hash}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2091>)

Handles the genesis hash by encoding the message and updating the GUI cluster information.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to a constant array of `uchar` that contains the message to be processed.
- **Logic and Control Flow**:
    - Encodes the `msg` using `FD_BASE58_ENCODE_32_BYTES` into `hash_cstr`.
    - Identifies the cluster using `fd_genesis_cluster_identify` with `hash_cstr`.
    - Retrieves the cluster name using `fd_genesis_cluster_name` with the identified cluster.
    - Compares the current cluster name in `gui->summary.cluster` with the new cluster name.
    - If the cluster names are different, updates `gui->summary.cluster`, prints the new cluster, and broadcasts the update.
- **Output**: No return value; updates the GUI state and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_printf_cluster`](<fd_gui_printf.c.md#fd_gui_printf_cluster>)


---
### fd\_gui\_handle\_block\_engine\_update<!-- {{#callable:fd_gui_handle_block_engine_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2105>)

Handles updates to the block engine information in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `msg`: Pointer to a message containing the block engine update data.
- **Logic and Control Flow**:
    - Casts the `msg` pointer to a specific structure type `fd_plugin_msg_block_engine_update_t` to access the update data.
    - Sets the `has_block_engine` flag in the `gui` structure to indicate that a block engine is present.
    - Copies the block engine name, URL, and IP address from the update message to the corresponding fields in the `gui` structure.
    - Calls [`fd_gui_printf_block_engine`](<fd_gui_printf.c.md#fd_gui_printf_block_engine>) to print the updated block engine information.
    - Calls `fd_http_server_ws_broadcast` to broadcast the updated block engine information to connected clients.
- **Output**: No return value; updates the GUI state and broadcasts the changes.
- **Functions Called**:
    - [`fd_gui_printf_block_engine`](<fd_gui_printf.c.md#fd_gui_printf_block_engine>)


---
### fd\_gui\_handle\_snapshot\_update<!-- {{#callable:fd_gui_handle_snapshot_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2120>)

Processes snapshot updates for the graphical user interface.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `msg`: Pointer to a constant `fd_snapct_update_t` structure containing snapshot update information.
- **Logic and Control Flow**:
    - Checks if `msg` is not NULL and if the `read_path` has a valid length.
    - Determines the snapshot index based on the type of snapshot (full or incremental).
    - Extracts the filename from the `read_path` and skips the leading '/' character.
    - If the snapshot type is incremental, it attempts to parse the filename to extract two slot numbers.
    - If the snapshot type is full, it attempts to parse the filename to extract one slot number.
    - Logs an error if parsing the filename fails.
    - Formats and stores the `read_path` in the GUI's boot progress structure.
- **Output**: No return value; updates the GUI state based on the snapshot information.


---
### fd\_gui\_handle\_reset\_slot<!-- {{#callable:fd_gui_handle_reset_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2144>)

Resets the specified slot in the GUI and updates related state.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `reset_slot`: The slot number to reset, must not be `ULONG_MAX`.
    - `now`: The current time in long format.
- **Logic and Control Flow**:
    - Checks if `reset_slot` is equal to `ULONG_MAX` and asserts it is not.
    - Returns early if the current completed slot is equal to `reset_slot`.
    - Updates the `slot_completed` field in the GUI state.
    - If the slot exists, prints the slot information and broadcasts it.
    - Prints the completed slot information and broadcasts it.
    - Updates the turbine slot if the new completed slot exceeds the maximum turbine slot.
    - Checks if the slot caught up condition is met and updates the state accordingly.
    - Ensures that a history exists for the previous completed slot.
    - Validates the order of completed slots.
    - Handles fork switches by checking for skipped slots and updating their state.
    - Publishes new skipped slots if necessary.
- **Output**: No return value; updates the state of the GUI and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_printf_slot`](<fd_gui_printf.c.md#fd_gui_printf_slot>)
    - [`fd_gui_printf_completed_slot`](<fd_gui_printf.c.md#fd_gui_printf_completed_slot>)
    - [`fd_gui_try_insert_ephemeral_slot`](<#fd_gui_try_insert_ephemeral_slot>)
    - [`fd_gui_printf_slot_caught_up`](<fd_gui_printf.c.md#fd_gui_printf_slot_caught_up>)
    - [`fd_gui_slot_is_ancestor`](<fd_gui.h.md#fd_gui_slot_is_ancestor>)
    - [`fd_gui_is_skipped_on_fork`](<fd_gui.h.md#fd_gui_is_skipped_on_fork>)
    - [`fd_gui_get_parent_slot_on_fork`](<fd_gui.h.md#fd_gui_get_parent_slot_on_fork>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_printf_skip_rate`](<fd_gui_printf.c.md#fd_gui_printf_skip_rate>)


---
### fd\_gui\_handle\_rooted\_slot<!-- {{#callable:fd_gui_handle_rooted_slot}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2288>)

Handles the rooting of slots and manages the archiving of shred events.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that contains the GUI state.
    - `root_slot`: The slot number that is being rooted.
- **Logic and Control Flow**:
    - Iterates from the `root_slot` backwards to the oldest slot, rooting each slot until a rooted slot is encountered.
    - For each slot, checks if it exists and if its level is less than `FD_GUI_SLOT_LEVEL_ROOTED`.
    - Updates the level of each slot to `FD_GUI_SLOT_LEVEL_ROOTED` and broadcasts the change.
    - Archives shred events by moving them to a scratch space, sorting them, and copying them to the history.
- **Output**: Updates the state of the GUI and broadcasts changes related to the rooted slots and archived shred events.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_printf_slot`](<fd_gui_printf.c.md#fd_gui_printf_slot>)
    - [`fd_gui_printf_root_slot`](<fd_gui_printf.c.md#fd_gui_printf_root_slot>)


---
### fd\_gui\_handle\_tower\_update<!-- {{#callable:fd_gui_handle_tower_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2377>)

Handles updates from the tower tile, managing consensus-related updates such as rooting and vote state.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure that holds the GUI state.
    - `tower`: Pointer to a `fd_tower_slot_done_t` structure containing information about the tower's state.
    - `now`: Current time in milliseconds since epoch.
- **Logic and Control Flow**:
    - Checks if a new root is set and if it differs from the current rooted slot, then calls [`fd_gui_handle_rooted_slot`](<#fd_gui_handle_rooted_slot>).
    - Calculates the vote distance and updates it if it has changed, broadcasting the new distance.
    - Checks the current vote state and updates it based on the vote slot and reset slot, broadcasting any changes.
- **Output**: No return value; updates the GUI state and broadcasts changes via WebSocket.
- **Functions Called**:
    - [`fd_gui_handle_rooted_slot`](<#fd_gui_handle_rooted_slot>)
    - [`fd_gui_printf_vote_distance`](<fd_gui_printf.c.md#fd_gui_printf_vote_distance>)
    - [`fd_gui_printf_vote_state`](<fd_gui_printf.c.md#fd_gui_printf_vote_state>)


---
### fd\_gui\_handle\_replay\_update<!-- {{#callable:fd_gui_handle_replay_update}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2413>)

Handles updates for replaying completed slots in the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `slot_completed`: Pointer to the `fd_gui_slot_completed_t` structure containing details about the completed slot.
    - `now`: Current time in milliseconds since epoch.
- **Logic and Control Flow**:
    - Checks if the first replay slot is set to `ULONG_MAX` and updates it if true.
    - Retrieves the slot corresponding to the completed slot from the GUI state.
    - If the slot exists, updates its parent slot; otherwise, clears the slot and sets its parent.
    - Updates various properties of the slot, including completion time, parent slot, and transaction counts.
    - Determines the level of the slot based on optimistic confirmation or completion.
    - Updates epoch end times if the completed slot matches the end slot of any epoch.
    - Broadcasts the new skip rate if the slot is owned by the current user.
    - Handles the reset of the completed slot if it differs from the last completed slot.
    - Records a 'slot complete' event for the shreds in the completed slot.
- **Output**: No return value; updates the state of the GUI and broadcasts changes.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_printf_skip_rate`](<fd_gui_printf.c.md#fd_gui_printf_skip_rate>)
    - [`fd_gui_handle_reset_slot`](<#fd_gui_handle_reset_slot>)


---
### fd\_gui\_plugin\_message<!-- {{#callable:fd_gui_plugin_message}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2494>)

Processes plugin messages for the GUI.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `plugin_msg`: An unsigned long integer representing the type of plugin message.
    - `msg`: Pointer to a constant unsigned char array containing the message data.
    - `now`: A long integer representing the current time.
- **Logic and Control Flow**:
    - Evaluates the `plugin_msg` to determine the type of message received.
    - Calls the appropriate handler function based on the message type.
    - Handles cases for slot rooted, optimistically confirmed, completed slots, leader schedule, slot start, slot end, gossip updates, vote account updates, validator info updates, slot resets, balance updates, start progress, genesis hash updates, and block engine updates.
    - Logs an error for unhandled message types.
- **Output**: No return value; the function modifies the GUI state based on the received message.
- **Functions Called**:
    - [`fd_gui_handle_rooted_slot_legacy`](<#fd_gui_handle_rooted_slot_legacy>)
    - [`fd_gui_handle_optimistically_confirmed_slot`](<#fd_gui_handle_optimistically_confirmed_slot>)
    - [`fd_gui_handle_completed_slot`](<#fd_gui_handle_completed_slot>)
    - [`fd_gui_handle_leader_schedule`](<#fd_gui_handle_leader_schedule>)
    - [`fd_gui_handle_slot_start`](<#fd_gui_handle_slot_start>)
    - [`fd_gui_handle_slot_end`](<#fd_gui_handle_slot_end>)
    - [`fd_gui_handle_gossip_update`](<#fd_gui_handle_gossip_update>)
    - [`fd_gui_handle_vote_account_update`](<#fd_gui_handle_vote_account_update>)
    - [`fd_gui_handle_validator_info_update`](<#fd_gui_handle_validator_info_update>)
    - [`fd_gui_handle_reset_slot_legacy`](<#fd_gui_handle_reset_slot_legacy>)
    - [`fd_gui_handle_balance_update`](<#fd_gui_handle_balance_update>)
    - [`fd_gui_handle_start_progress`](<#fd_gui_handle_start_progress>)
    - [`fd_gui_handle_genesis_hash`](<#fd_gui_handle_genesis_hash>)
    - [`fd_gui_handle_block_engine_update`](<#fd_gui_handle_block_engine_update>)


---
### fd\_gui\_became\_leader<!-- {{#callable:fd_gui_became_leader}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2562>)

Updates the state of the GUI when a node becomes the leader.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `_slot`: The slot number associated with the leader.
    - `start_time_nanos`: The start time in nanoseconds when the node became the leader.
    - `end_time_nanos`: The end time in nanoseconds when the node will stop being the leader.
    - `max_compute_units`: The maximum compute units allocated for the leader.
    - `max_microblocks`: The maximum number of microblocks that can be processed.
- **Logic and Control Flow**:
    - Retrieve the slot associated with the given `_slot` using [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>).
    - If the slot is not found, clear the slot using [`fd_gui_clear_slot`](<#fd_gui_clear_slot>).
    - Retrieve the leader slot using [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>).
    - If the leader slot is not found, exit the function.
    - Set the `max_compute_units` for the slot.
    - Update the `leader_start_time` and `leader_end_time` for the leader slot.
    - If the `microblocks_upper_bound` is at its maximum value, set it to `max_microblocks`.
- **Output**: The function does not return a value. It modifies the state of the GUI and the leader slot.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>)


---
### fd\_gui\_unbecame\_leader<!-- {{#callable:fd_gui_unbecame_leader}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2580>)

Updates the upper bound of microblocks for a leader slot when it ceases to be the leader.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the graphical user interface state.
    - `_slot`: The slot number that indicates the specific leader slot being updated.
    - `microblocks_in_slot`: The new upper bound for microblocks in the specified slot.
- **Logic and Control Flow**:
    - Retrieves the slot structure associated with the given `_slot` using [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>).
    - If the slot does not exist, it clears the slot using [`fd_gui_clear_slot`](<#fd_gui_clear_slot>).
    - Retrieves the leader slot structure for the specified `_slot` using [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>).
    - If the leader slot exists, it updates the `microblocks_upper_bound` field with the provided `microblocks_in_slot` value.
- **Output**: No return value; the function modifies the state of the leader slot directly.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>)


---
### fd\_gui\_microblock\_execution\_begin<!-- {{#callable:fd_gui_microblock_execution_begin}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2591>)

Begins the execution of a microblock by processing transactions and updating the GUI state.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the GUI state.
    - `now`: Current time in nanoseconds.
    - `_slot`: The slot number associated with the microblock.
    - `txns`: Array of pointers to transaction payloads to be processed.
    - `txn_cnt`: The number of transactions in the `txns` array.
    - `microblock_idx`: Index of the microblock being processed.
    - `pack_txn_idx`: Index for packing transactions.
- **Logic and Control Flow**:
    - Retrieve the slot associated with `_slot` using [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>).
    - If the slot is not found, clear the slot using [`fd_gui_clear_slot`](<#fd_gui_clear_slot>).
    - Retrieve the leader slot associated with `_slot` using [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>).
    - If the leader slot is not found, exit the function.
    - Update the `start_offset` of the leader slot's transactions based on `pack_txn_idx`.
    - Update the GUI's `pack_txn_idx` to reflect the maximum transaction index processed.
    - Iterate over each transaction in the `txns` array.
    - For each transaction, compute the cost and fees, and update the corresponding transaction entry in the GUI.
    - Increment the `begin_microblocks` count in the leader slot's transaction structure based on the number of transactions processed.
- **Output**: The function does not return a value but updates the GUI state and transaction entries.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>)


---
### fd\_gui\_microblock\_execution\_end<!-- {{#callable:fd_gui_microblock_execution_end}} -->
[View Source →](<../../../../../src/disco/gui/fd_gui.c#L2647>)

Handles the end of microblock execution by updating transaction details and slot information.
- **Inputs**:
    - `gui`: Pointer to the `fd_gui_t` structure representing the graphical user interface.
    - `now`: Current time in nanoseconds.
    - `bank_idx`: Index of the bank processing the transaction.
    - `_slot`: Slot number associated with the transaction.
    - `txn_cnt`: Count of transactions being processed.
    - `txns`: Pointer to an array of transaction pointers.
    - `pack_txn_idx`: Index of the transaction in the packed transaction history.
    - `txn_start_pct`: Percentage of the transaction start.
    - `txn_load_end_pct`: Percentage of the transaction load end.
    - `txn_end_pct`: Percentage of the transaction end.
    - `txn_preload_end_pct`: Percentage of the transaction preload end.
    - `tips`: Tips associated with the transaction.
- **Logic and Control Flow**:
    - Checks if the expected transaction count is not equal to 1 and logs an error if true.
    - Retrieves the slot associated with the given `_slot` and clears it if not found.
    - Retrieves the leader slot associated with the given `_slot` and returns if not found.
    - Updates the end offset of transactions in the leader slot based on the provided `pack_txn_idx` and `txn_cnt`.
    - Updates the `pack_txn_idx` in the GUI structure to reflect the maximum index of processed transactions.
    - Iterates over the transactions and updates their details in the GUI transaction history.
- **Output**: No return value; updates the state of the GUI and transaction history.
- **Functions Called**:
    - [`fd_gui_get_slot`](<fd_gui.h.md#fd_gui_get_slot>)
    - [`fd_gui_clear_slot`](<#fd_gui_clear_slot>)
    - [`fd_gui_get_leader_slot`](<fd_gui.h.md#fd_gui_get_leader_slot>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)