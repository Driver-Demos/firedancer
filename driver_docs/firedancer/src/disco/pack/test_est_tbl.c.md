<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests for the `fd_est_tbl` functions using various statistical distributions.

# Purpose
The code is a C program that tests the functionality of an estimation table, which is likely defined in the included header file `fd_est_tbl.h`. The program initializes a random number generator and performs a series of tests on the estimation table to verify its behavior with different statistical distributions. The main components of the code include the creation and joining of an estimation table, updating the table with values from various distributions, and estimating statistical properties such as mean and variance. The tests cover scenarios with empty queries, single entry normal distributions, exponential distributions, and mixed distributions, ensuring that the estimation table provides accurate statistical estimates.

The program uses several functions and macros, such as `fd_est_tbl_new`, `fd_est_tbl_join`, `fd_est_tbl_update`, and `fd_est_tbl_estimate`, to interact with the estimation table. It also employs logging and testing macros like `FD_LOG_NOTICE` and `FD_TEST` to document the progress and validate the results of the tests. The code is structured to run as an executable, with a [`main`](<#main>) function that orchestrates the setup, execution, and validation of the tests. The program concludes by cleaning up resources and halting execution, indicating successful completion if all tests pass.
# Imports and Dependencies

---
- `math.h`
- `fd_est_tbl.h`


# Global Variables

---
### scratch
- **Type**: ``uchar[]``
- **Description**: An array of unsigned characters (`uchar`) with a size determined by the macro `FD_EST_TBL_FOOTPRINT(TBL_SZ)`. The array is aligned according to the alignment specified by `FD_EST_TBL_ALIGN`.
- **Use**: Used as a memory buffer for the function `fd_est_tbl_new` to create a new estimation table.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/disco/pack/test_est_tbl.c#L5>)

Initializes and tests an estimation table with various statistical distributions using random number generation.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Initializes a random number generator `rng` using `fd_rng_new` and `fd_rng_join`.
    - Verifies alignment and footprint of the estimation table using `FD_TEST`.
    - Creates and joins an estimation table `tbl` with a default value of 1234 using [`fd_est_tbl_new`](<fd_est_tbl.h.md#fd_est_tbl_new>) and [`fd_est_tbl_join`](<fd_est_tbl.h.md#fd_est_tbl_join>).
    - Tests the estimation table with an empty query to ensure it returns the default value.
    - Updates the estimation table with values and tests the estimates for a normal distribution in bin 1.
    - Calculates and verifies the mean and variance for the normal distribution using statistical properties.
    - Tests the estimation table with an exponential distribution in bin 2 and verifies the results.
    - Simulates mixed distributions in bins 3 to 7, updating the table and verifying the mean and variance against analytical values.
    - Deletes the random number generator using `fd_rng_delete` and `fd_rng_leave`.
    - Logs the success of the tests and halts the program with `fd_halt`.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_est_tbl_align`](<fd_est_tbl.h.md#fd_est_tbl_align>)
    - [`fd_est_tbl_footprint`](<fd_est_tbl.h.md#fd_est_tbl_footprint>)
    - [`fd_est_tbl_new`](<fd_est_tbl.h.md#fd_est_tbl_new>)
    - [`fd_est_tbl_join`](<fd_est_tbl.h.md#fd_est_tbl_join>)
    - [`fd_est_tbl_estimate`](<fd_est_tbl.h.md#fd_est_tbl_estimate>)
    - [`fd_est_tbl_update`](<fd_est_tbl.h.md#fd_est_tbl_update>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)