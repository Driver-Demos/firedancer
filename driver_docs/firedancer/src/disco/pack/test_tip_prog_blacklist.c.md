<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests the blacklist functionality for public keys using base58 encoding in the Firedancer codebase.

# Purpose
This code is a C program designed to test the functionality of a blacklist checking mechanism for public keys encoded in Base58. It includes the necessary headers for Base58 decoding and blacklist checking. The program defines a [`test`](<#test>) function that decodes a given Base58-encoded public key and checks if it is blacklisted for bundles or non-bundles using the `fd_pack_tip_prog_check_blacklist` function. The expected result is determined by the `banned_for_bundles` and `banned_for_nonbundles` parameters, and the test asserts that the actual blacklist status matches the expected status.

The [`main`](<#main>) function initializes the program and runs a series of tests on various public keys, categorized into mainnet and testnet programs, tip payment accounts, and arbitrary accounts. Each test checks if the public key is correctly identified as blacklisted or not, based on predefined conditions. The program logs a notice if all tests pass and then halts execution. This code is intended to be executed as a standalone program to verify the correctness of the blacklist checking logic.
# Imports and Dependencies

---
- `../../ballet/fd_ballet_base.h`
- `../../ballet/base58/fd_base58.h`
- `fd_pack_tip_prog_blacklist.h`


# Functions

---
### test<!-- {{#callable:test}} -->
[View Source →](<../../../../../src/disco/pack/test_tip_prog_blacklist.c#L5>)

Validates if a Base58-encoded public key is correctly blacklisted based on given conditions.
- **Inputs**:
    - `base58_pubkey`: A pointer to a constant character string representing the Base58-encoded public key.
    - `banned_for_bundles`: An integer flag indicating if the public key is banned for bundles (1 if banned, 0 if not).
    - `banned_for_nonbundles`: An integer flag indicating if the public key is banned for non-bundles (1 if banned, 0 if not).
- **Logic and Control Flow**:
    - Declare a variable `pubkey` of type `fd_acct_addr_t` to store the decoded public key.
    - Decode the `base58_pubkey` into the `pubkey` using `fd_base58_decode_32` and verify the success of this operation with `FD_TEST`.
    - Calculate the `expected` value by combining the `banned_for_bundles` and `banned_for_nonbundles` flags using bitwise operations.
    - Check if the result of [`fd_pack_tip_prog_check_blacklist`](<fd_pack_tip_prog_blacklist.h.md#fd_pack_tip_prog_check_blacklist>) for the `pubkey` matches the `expected` value using `FD_TEST`.
- **Output**: No output is returned; the function uses assertions to validate conditions.
- **Functions Called**:
    - [`fd_pack_tip_prog_check_blacklist`](<fd_pack_tip_prog_blacklist.h.md#fd_pack_tip_prog_check_blacklist>)


---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/disco/pack/test_tip_prog_blacklist.c#L15>)

Initializes the environment, tests a series of public keys against a blacklist, logs a success message, and halts the program.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Executes the [`test`](<#test>) function multiple times with different public keys and ban status parameters.
    - Each [`test`](<#test>) call decodes a base58 public key and checks it against a blacklist using `fd_pack_tip_prog_check_blacklist`.
    - Logs a notice message 'pass' using `FD_LOG_NOTICE` if all tests pass.
    - Calls `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`test`](<#test>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)