<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures for handling shreds, banks, microblocks, and PoH initialization in Firedancer.

# Purpose
The code defines several data structures and types that are used in a distributed computing environment, specifically within a system called Firedancer. The primary focus is on managing and processing data related to transactions, microblocks, and banks in a distributed ledger or blockchain context. The file includes multiple header files, indicating that it is part of a larger system and relies on external components for its functionality.

Key structures defined in the code include `fd_shred34`, which manages a collection of up to 34 shreds for efficient data caching and access, and `fd_became_leader`, which contains information about a node becoming a leader in a distributed system, including slot timing and bank management details. Other structures like `fd_rooted_bank`, `fd_completed_bank`, and `fd_microblock_trailer` provide mechanisms for handling bank states, completed transactions, and microblock metadata, respectively. The file does not define any functions or executable code, suggesting it is a header file intended to be included in other C source files to provide type definitions and data structure declarations for use in the Firedancer system.
# Imports and Dependencies

---
- `stem/fd_stem.h`
- `shred/fd_shredder.h`
- `../ballet/shred/fd_shred.h`
- `../flamenco/leaders/fd_leaders_base.h`
- `pack/fd_pack.h`
- `topo/fd_topo.h`
- `bundle/fd_bundle_crank.h`
- `linux/filter.h`


# Data Structures

---
### fd\_shred34
- **Type**: ``struct fd_shred34``
- **Members**:
    - `shred_cnt`: The number of shreds contained in the structure.
    - `est_txn_cnt`: An estimate of the number of transactions in the shred, used for diagnostics.
    - `stride`: The byte interval between the start of consecutive shreds.
    - `offset`: The byte offset from the start of the structure to the first shred.
    - `shred_sz`: The size of each shred in bytes.
    - `pkts`: An array of 34 unions, each containing a `fd_shred_t` or a buffer of maximum size `FD_SHRED_MAX_SZ`.
- **Description**: A collection of up to 34 shreds, aligned for efficient use in a data cache and accessible from Rust, with a size constraint to be less than `USHORT_MAX`. Each shred's payload is defined by its position, stride, offset, and size, and the structure includes diagnostic information about the estimated number of transactions.


---
### fd\_shred34\_t
- **Type**: ``struct``
- **Members**:
    - `shred_cnt`: The number of shreds in the collection.
    - `est_txn_cnt`: An estimate of the number of transactions in the collection.
    - `stride`: The byte distance between the start of consecutive shreds.
    - `offset`: The byte offset from the start of the struct to the first shred.
    - `shred_sz`: The size of each shred in bytes.
    - `pkts`: An array of up to 34 shreds, each with a payload that spans a specific byte range.
- **Description**: A `fd_shred34_t` is a data structure that holds up to 34 shreds, organized for efficient use in a data cache and accessible from Rust. The structure includes fields for the count of shreds, an estimated transaction count, and parameters for calculating the byte range of each shred's payload. The `pkts` array contains the shreds, each of which can be accessed by calculating its byte range using the `stride`, `offset`, and `shred_sz` fields.


---
### fd\_became\_leader
- **Type**: ``struct``
- **Members**:
    - `slot`: The slot number for which the leader is becoming active.
    - `slot_start_ns`: The start time of the slot in nanoseconds.
    - `slot_end_ns`: The end time of the slot in nanoseconds.
    - `bank`: An opaque pointer to a Rust `Arc<Bank>` object for transaction execution or bank management.
    - `bank_idx`: The index of the bank, refcounted by the replay tile.
    - `max_microblocks_in_slot`: The maximum number of microblocks allowed in the slot.
    - `ticks_per_slot`: The number of ticks the PoH tile will put in the block.
    - `tick_duration_ns`: The duration of each tick in nanoseconds.
    - `total_skipped_ticks`: The number of ticks skipped by the PoH tile that need to be published.
    - `hashcnt_per_tick`: The number of hashes per tick for the proof of history component.
    - `epoch`: The epoch of the slot for which the leader is becoming active.
    - `limits`: Consensus-critical cost limits for the slot.
    - `bundle`: Information from the accounts database necessary for bundle tip programs.
- **Description**: Represents the state and configuration for a leader in a distributed system, including timing, bank references, microblock limits, and consensus-critical parameters for a specific slot and epoch.


---
### fd\_became\_leader\_t
- **Type**: ``struct``
- **Members**:
    - `slot`: The slot number for which the leader is becoming active.
    - `slot_start_ns`: The start time of the slot in nanoseconds.
    - `slot_end_ns`: The end time of the slot in nanoseconds.
    - `bank`: An opaque pointer to a Rust Arc<Bank> object for transaction execution or bank management.
    - `bank_idx`: The index of the bank, refcounted by the replay tile.
    - `max_microblocks_in_slot`: The maximum number of microblocks allowed in the block.
    - `ticks_per_slot`: The number of ticks the PoH tile will put in the block.
    - `tick_duration_ns`: The duration of each tick in nanoseconds.
    - `total_skipped_ticks`: The number of ticks skipped by the PoH tile that need to be published.
    - `hashcnt_per_tick`: The number of hashes per tick for the proof of history component.
    - `epoch`: The epoch of the slot for which leadership is assumed.
    - `limits`: Consensus-critical cost limits for the slot.
    - `bundle`: Information from the accounts database necessary for bundle tip programs.
- **Description**: Represents the state and configuration for a leader in a distributed system, including timing, bank references, and cost limits for a specific slot.


---
### fd\_rooted\_bank
- **Type**: ``struct``
- **Members**:
    - ``bank``: A pointer to a bank object.
    - ``slot``: An unsigned long integer representing the slot number.
- **Description**: Represents a bank object associated with a specific slot in a system, where `bank` is a pointer to the bank and `slot` indicates the slot number.


---
### fd\_rooted\_bank\_t
- **Type**: ``struct``
- **Members**:
    - `bank`: A pointer to a bank object.
    - `slot`: The slot number associated with the bank.
- **Description**: `fd_rooted_bank_t` is a structure that contains a pointer to a bank object and the slot number associated with that bank. It is used to represent a bank that is rooted at a specific slot in the system.


---
### fd\_completed\_bank
- **Type**: ``struct``
- **Members**:
    - `slot`: An unsigned long integer representing the slot number.
    - `hash`: An array of 32 unsigned characters representing the hash value.
- **Description**: Stores information about a completed bank, including the slot number and a hash value associated with the bank.


---
### fd\_completed\_bank\_t
- **Type**: ``struct``
- **Members**:
    - `slot`: The slot number associated with the completed bank.
    - `hash`: A 32-byte array representing the hash of the completed bank.
- **Description**: Represents a completed bank with a specific slot number and its corresponding hash. This structure is used to store information about a bank that has finished processing, identified by its slot and hash.


---
### fd\_microblock\_trailer
- **Type**: ``struct``
- **Members**:
    - ``hash``: An array of 32 unsigned characters representing the hash of the transactions in the microblock.
    - ``pack_txn_idx``: A sequentially increasing index of the first transaction in the microblock, used for maintaining an ordered history of transactions.
    - ``tips``: The tips included in the transaction, measured in lamports, with 0 indicating non-bundle transactions.
    - ``txn_start_pct``: An unsigned character representing the percentage of elapsed time at which the first transaction starts.
    - ``txn_load_end_pct``: An unsigned character representing the percentage of elapsed time at which the first transaction finishes loading.
    - ``txn_end_pct``: An unsigned character representing the percentage of elapsed time at which the first transaction is completed.
    - ``txn_preload_end_pct``: An unsigned character representing the percentage of elapsed time at which the first transaction finishes preloading.
- **Description**: Represents metadata for a microblock, including transaction hash, index, tips, and timing percentages for state transitions of the first transaction.


---
### fd\_microblock\_trailer\_t
- **Type**: ``struct fd_microblock_trailer``
- **Members**:
    - `hash`: An array of 32 unsigned characters representing the hash of the transactions in the microblock.
    - `pack_txn_idx`: A sequentially increasing index of the first transaction in the microblock, used for maintaining an ordered history of transactions.
    - `tips`: The tips included in the transaction, measured in lamports, with 0 indicating non-bundle transactions.
    - `txn_start_pct`: An unsigned character indicating the percentage of elapsed time at which the first transaction in the microblock starts.
    - `txn_load_end_pct`: An unsigned character indicating the percentage of elapsed time at which the first transaction in the microblock finishes loading.
    - `txn_end_pct`: An unsigned character indicating the percentage of elapsed time at which the first transaction in the microblock is executed.
    - `txn_preload_end_pct`: An unsigned character indicating the percentage of elapsed time at which the first transaction in the microblock finishes preloading.
- **Description**: Represents metadata for a microblock, including transaction hash, index, tips, and timing percentages for transaction state transitions within the microblock.


---
### fd\_done\_packing
- **Type**: ``struct``
- **Members**:
    - `microblocks_in_slot`: Stores the number of microblocks in a slot.
- **Description**: Represents a structure that holds information about the number of microblocks contained within a slot, which is used in the context of packing operations.


---
### fd\_done\_packing\_t
- **Type**: ``struct``
- **Members**:
    - `microblocks_in_slot`: The number of microblocks contained in a slot.
- **Description**: Represents the completion of packing operations for a slot, specifically tracking the number of microblocks that have been packed into the slot.


---
### fd\_microblock\_bank\_trailer
- **Type**: ``struct``
- **Members**:
    - `bank`: An opaque pointer to the bank used for executing and committing transactions.
    - `bank_idx`: An index of the bank in a pool of banks, managed by the replay tile.
    - `microblock_idx`: A sequentially increasing index of the microblock across all banks.
    - `pack_idx`: An index related to the packing process.
    - `pack_txn_idx`: A sequentially increasing index of the first transaction in the microblock across all slots.
    - `is_bundle`: Indicates if the microblock is a bundle of transactions that should execute in order and commit or fail atomically.
- **Description**: The `fd_microblock_bank_trailer` structure is used to manage and track the execution and commitment of microblocks within a bank. It includes pointers and indices that help ensure transactions are processed in the correct order and maintain a history of transactions. The structure also supports the concept of transaction bundles, which are sets of transactions that must be executed in sequence and either all commit or fail together.


---
### fd\_microblock\_bank\_trailer\_t
- **Type**: ``struct``
- **Members**:
    - `bank`: An opaque pointer to the bank used for executing and committing transactions.
    - `bank_idx`: An index of the bank in a pool of banks, managed by the replay tile.
    - `microblock_idx`: A sequentially increasing index of the microblock across all banks.
    - `pack_idx`: A sequentially increasing index of the pack.
    - `pack_txn_idx`: A sequentially increasing index of the first transaction in the microblock across all slots.
    - `is_bundle`: Indicates if the microblock is a bundle with potentially conflicting transactions.
- **Description**: `fd_microblock_bank_trailer_t` is a data structure that holds metadata related to microblocks in a bank. It includes pointers and indices that help manage the execution and commitment of transactions, ensuring they are processed in the correct order. The structure also indicates if a microblock is a bundle, which requires atomic execution of transactions.


---
### fd\_poh\_init\_msg\_t
- **Type**: ``struct``
- **Members**:
    - `tick_duration_ns`: Specifies the duration of a tick in nanoseconds.
    - `hashcnt_per_tick`: Indicates the number of hashes per tick.
    - `ticks_per_slot`: Represents the number of ticks in a slot.
    - `tick_height`: Denotes the height of the tick.
    - `last_entry_hash`: Stores the hash of the last entry as a 32-byte array.
- **Description**: Defines a packed structure used to initialize parameters for a proof of history (PoH) component, including tick duration, hash count per tick, ticks per slot, tick height, and the last entry hash.



---
Made with ❤️ by [Driver](https://www.driver.ai/)