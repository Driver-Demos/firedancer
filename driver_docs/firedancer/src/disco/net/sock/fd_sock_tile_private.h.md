<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures and constants for managing UDP and RAW socket communication in a sock tile.

# Purpose
The code is a C header file that defines private structures and constants for managing socket communication in a network application. It is intended for use in a hosted environment, as indicated by the `FD_HAS_HOSTED` preprocessor directive. The file sets up the maximum number of UDP ports (`FD_SOCK_TILE_MAX_SOCKETS`), transmission links (`MAX_NET_INS`), and reception links (`MAX_NET_OUTS`) that a socket tile can handle. These constants help configure the limits of the socket tile's capabilities.

The file defines several structures, including `fd_sock_tile_metrics`, `fd_sock_link_tx`, `fd_sock_link_rx`, and `fd_sock_tile`. These structures manage metrics, transmission links, reception links, and the overall state of a socket tile. The `fd_sock_tile` structure includes arrays for managing multiple sockets, transmission and reception links, and batch processing of messages. It also includes fields for tracking socket metrics, such as packet counts and byte totals. This header file is not intended to define public APIs or external interfaces but rather to provide internal definitions and configurations for socket management within a specific application context.
# Imports and Dependencies

---
- `../../../util/fd_util_base.h`
- `../../metrics/generated/fd_metrics_enums.h`
- `poll.h`
- `sys/socket.h`


# Data Structures

---
### fd\_sock\_tile\_metrics
- **Type**: ``struct``
- **Members**:
    - `sys_recvmmsg_cnt`: Counts the number of `recvmmsg` system calls.
    - `sys_sendmmsg_cnt`: Array that counts the number of `sendmmsg` system calls for each socket error type.
    - `rx_pkt_cnt`: Counts the number of received packets.
    - `tx_pkt_cnt`: Counts the number of transmitted packets.
    - `tx_drop_cnt`: Counts the number of dropped packets during transmission.
    - `rx_bytes_total`: Tracks the total number of bytes received.
    - `tx_bytes_total`: Tracks the total number of bytes transmitted.
- **Description**: The `fd_sock_tile_metrics` structure collects various metrics related to socket operations, including counts of system calls, packets, and bytes for both receiving and transmitting data. It helps monitor the performance and reliability of socket communication by tracking the number of system calls, packets processed, and bytes transferred, as well as any packet drops during transmission.


---
### fd\_sock\_tile\_metrics\_t
- **Type**: ``struct fd_sock_tile_metrics``
- **Members**:
    - `sys_recvmmsg_cnt`: Counts the number of `recvmmsg` system calls made.
    - `sys_sendmmsg_cnt`: Array that counts the number of `sendmmsg` system calls made, indexed by `FD_METRICS_ENUM_SOCK_ERR_CNT`.
    - `rx_pkt_cnt`: Counts the number of received packets.
    - `tx_pkt_cnt`: Counts the number of transmitted packets.
    - `tx_drop_cnt`: Counts the number of dropped transmitted packets.
    - `rx_bytes_total`: Tracks the total number of bytes received.
    - `tx_bytes_total`: Tracks the total number of bytes transmitted.
- **Description**: Collects and stores various metrics related to socket operations, including counts of system calls, packets, and bytes for both transmission and reception, as well as dropped packets.


---
### fd\_sock\_link\_tx
- **Type**: ``struct``
- **Members**:
    - `base`: A pointer to a base memory address.
    - `chunk0`: An unsigned long integer representing the initial chunk of data.
    - `wmark`: An unsigned long integer representing a watermark value.
- **Description**: Manages transmission link state for a socket tile, including a base memory address, an initial data chunk, and a watermark for tracking data flow.


---
### fd\_sock\_link\_tx\_t
- **Type**: ``struct fd_sock_link_tx``
- **Members**:
    - ``base``: A pointer to the base address of the transmission link.
    - ``chunk0``: An unsigned long integer representing the initial chunk index.
    - ``wmark``: An unsigned long integer representing the watermark for the transmission link.
- **Description**: Manages the transmission link state for a socket tile, including the base address, initial chunk index, and watermark for data transmission.


---
### fd\_sock\_link\_rx
- **Type**: ``struct``
- **Members**:
    - ``base``: A pointer to a memory location used as the base address for the data structure.
    - ``chunk0``: An unsigned long integer representing the initial chunk of data.
    - ``wmark``: An unsigned long integer used as a watermark for data processing.
    - ``chunk``: An unsigned long integer representing the current chunk of data being processed.
- **Description**: Defines a structure for managing RX (receive) links in a socket tile, including pointers and markers for handling data chunks.


---
### fd\_sock\_link\_rx\_t
- **Type**: ``struct``
- **Members**:
    - `base`: Pointer to the base address of the RX link.
    - `chunk0`: Initial chunk index for the RX link.
    - `wmark`: Watermark for the RX link.
    - `chunk`: Current chunk index for the RX link.
- **Description**: Defines the structure for a receive (RX) link in a socket tile, including pointers and indices for managing data chunks.


---
### fd\_sock\_tile
- **Type**: ``struct``
- **Members**:
    - `pollfd`: An array of `pollfd` structures for RX `SOCK_DGRAM` sockets.
    - `sock_cnt`: The count of active sockets.
    - `proto_id`: An array of protocol identifiers for each socket.
    - `tx_sock`: The file descriptor for the TX `SOCK_RAW` socket.
    - `tx_idle_cnt`: The count of idle TX operations.
    - `bind_address`: The address to which the TX socket is bound.
    - `batch_cnt`: The count of RX/TX batches, limited by `STEM_BURST`.
    - `batch_iov`: A pointer to an array of `iovec` structures for batch operations.
    - `batch_cmsg`: A pointer to control message data for batch operations.
    - `batch_sa`: A pointer to an array of `sockaddr_in` structures for batch operations.
    - `batch_msg`: A pointer to an array of `mmsghdr` structures for batch operations.
    - `rx_sock_port`: An array of port numbers for RX sockets.
    - `link_rx_map`: A mapping of RX links to sockets.
    - `link_rx`: An array of RX link structures.
    - `link_tx`: An array of TX link structures.
    - `tx_scratch0`: A pointer to the start of TX scratch memory.
    - `tx_scratch1`: A pointer to the end of TX scratch memory.
    - `tx_ptr`: A pointer within the TX scratch memory range.
    - `metrics`: A structure containing metrics for the socket tile.
- **Description**: Manages socket operations for both RX and TX, including handling multiple UDP ports and raw socket transmission. It maintains state for socket file descriptors, batch processing, and link management, and includes metrics for performance monitoring.


---
### fd\_sock\_tile\_t
- **Type**: ``struct``
- **Members**:
    - `pollfd`: Array of `pollfd` structures for RX SOCK_DGRAM sockets.
    - `sock_cnt`: Count of active sockets.
    - `proto_id`: Array of protocol identifiers for each socket.
    - `tx_sock`: File descriptor for the TX SOCK_RAW socket.
    - `tx_idle_cnt`: Count of idle TX operations.
    - `bind_address`: Address to bind the TX socket.
    - `batch_cnt`: Count of RX/TX batches.
    - `batch_iov`: Pointer to an array of `iovec` structures for batch operations.
    - `batch_cmsg`: Pointer to control message data for batch operations.
    - `batch_sa`: Pointer to an array of `sockaddr_in` structures for batch operations.
    - `batch_msg`: Pointer to an array of `mmsghdr` structures for batch operations.
    - `rx_sock_port`: Array of port numbers for RX sockets.
    - `link_rx_map`: Mapping of RX links to sockets.
    - `link_rx`: Array of RX link structures.
    - `link_tx`: Array of TX link structures.
    - `tx_scratch0`: Pointer to the start of TX scratch memory.
    - `tx_scratch1`: Pointer to the end of TX scratch memory.
    - `tx_ptr`: Current pointer within the TX scratch memory range.
    - `metrics`: Structure containing local metrics for the socket tile.
- **Description**: Manages the state and operations of a socket tile, including RX and TX socket handling, batch processing, and metrics collection. It supports multiple UDP ports and links for RX and TX operations, and uses scratch memory for TX operations.



---
Made with ❤️ by [Driver](https://www.driver.ai/)