<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Public API for ristretto255 group elements, specifically for Solana VM syscall sol_curve_group_op.

# Purpose
The `fd_ristretto255.h` file provides a public API for operations on the Ristretto255 group, specifically for use within the Solana virtual machine's `sol_curve_group_op` syscall. This API is designed to be stable regardless of the underlying backend implementation, such as reference or AVX. The file includes functions for handling Ristretto255 group elements, which are a prime order group derived from Curve25519. It defines operations such as setting, adding, subtracting, and validating group elements, as well as compressing and decompressing them to and from byte arrays.

The file also includes functions for checking equality and negated equality of group elements, and for mapping hash outputs to curve points. The API uses typedefs and macros to ensure compatibility with Ed25519 operations, while maintaining the distinction between Ristretto and Ed25519 group elements. The header file includes necessary declarations and inline functions to facilitate these operations, ensuring that they are not exposed to secret data due to their variable execution time.
# Imports and Dependencies

---
- `fd_curve25519.h`


# Global Variables

---
### fd\_ristretto255\_compressed\_zero
- **Type**: ``uchar[32]``
- **Description**: An array of 32 unsigned characters initialized to zero. It represents a compressed zero element in the Ristretto255 group.
- **Use**: Used as a constant reference for operations involving zero elements in the Ristretto255 group.


# Functions

---
### fd\_ristretto255\_point\_validate<!-- {{#callable:fd_ristretto255_point_validate}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L58>)

Validates if a 32-byte array represents a valid element of the Ristretto255 group.
- **Inputs**:
    - `buf`: A constant 32-byte array that represents a potential Ristretto255 group element.
- **Logic and Control Flow**:
    - Declare a variable `t` of type `fd_ristretto255_point_t` to store the decompressed point.
    - Call the function [`fd_ristretto255_point_frombytes`](<fd_ristretto255.c.md#fd_ristretto255_point_frombytes>) with `t` and `buf` as arguments to attempt decompression.
    - Return the result of the decompression attempt as a boolean value, where a non-zero result indicates success.
- **Output**: Returns 1 if the 32-byte array is a valid Ristretto255 group element, otherwise returns 0.
- **Functions Called**:
    - [`fd_ristretto255_point_frombytes`](<fd_ristretto255.c.md#fd_ristretto255_point_frombytes>)


---
### fd\_ristretto255\_point\_eq<!-- {{#callable:fd_ristretto255_point_eq}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L68>)

Checks if two Ristretto255 group elements are equal by comparing their coordinates.
- **Inputs**:
    - `p`: A pointer to the first Ristretto255 group element.
    - `q`: A pointer to the second Ristretto255 group element.
- **Logic and Control Flow**:
    - Convert both input points `p` and `q` to their internal coordinate representations using [`fd_ed25519_point_to`](<ref/fd_curve25519.h.md#fd_ed25519_point_to>) function.
    - Multiply the x-coordinate of `p` with the y-coordinate of `q` and store the result in `cmp[0]`.
    - Multiply the x-coordinate of `q` with the y-coordinate of `p` and store the result in `cmp[1]`.
    - Check if the results in `cmp[0]` and `cmp[1]` are equal using `fd_f25519_eq` and store the result in `xx`.
    - Multiply the x-coordinates of both `p` and `q` and store the result in `cmp[0]`.
    - Multiply the y-coordinates of both `p` and `q` and store the result in `cmp[1]`.
    - Check if the results in `cmp[0]` and `cmp[1]` are equal using `fd_f25519_eq` and store the result in `yy`.
    - Return the logical OR of `xx` and `yy` to determine if the points are equal.
- **Output**: Returns 1 if the points are equal, otherwise returns 0.
- **Functions Called**:
    - [`fd_ed25519_point_to`](<ref/fd_curve25519.h.md#fd_ed25519_point_to>)


---
### fd\_ristretto255\_point\_eq\_neg<!-- {{#callable:fd_ristretto255_point_eq_neg}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L92>)

Checks if two Ristretto group elements are negations of each other.
- **Inputs**:
    - `p`: A pointer to the first Ristretto group element.
    - `q`: A pointer to the second Ristretto group element.
- **Logic and Control Flow**:
    - Convert both points `p` and `q` to their internal representations using [`fd_ed25519_point_to`](<ref/fd_curve25519.h.md#fd_ed25519_point_to>) function.
    - Negate the x-coordinate of point `p` and store it in `neg`.
    - Multiply the negated x-coordinate of `p` with the y-coordinate of `q` and store the result in `cmp[0]`.
    - Multiply the x-coordinate of `q` with the y-coordinate of `p` and store the result in `cmp[1]`.
    - Check if `cmp[0]` is equal to `cmp[1]` and store the result in `xx`.
    - Multiply the negated x-coordinate of `p` with the x-coordinate of `q` and store the result in `cmp[0]`.
    - Multiply the y-coordinates of `p` and `q` and store the result in `cmp[1]`.
    - Check if `cmp[0]` is equal to `cmp[1]` and store the result in `yy`.
    - Return the logical OR of `xx` and `yy`.
- **Output**: Returns 1 if -p equals q, otherwise returns 0.
- **Functions Called**:
    - [`fd_ed25519_point_to`](<ref/fd_curve25519.h.md#fd_ed25519_point_to>)


# Function Declarations (Public API)

---
### fd\_ristretto255\_point\_tobytes<!-- {{#callable_declaration:fd_ristretto255_point_tobytes}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L40>)

Converts a Ristretto255 group element to a 32-byte array.
- **Description**: Use this function to convert a Ristretto255 group element into its compressed 32-byte representation. This is useful for serialization or transmission of group elements. Ensure that the input group element is valid and initialized before calling this function. The function writes the result into the provided buffer and returns a pointer to this buffer.
- **Inputs**:
    - `buf`: A buffer of at least 32 bytes where the function will store the compressed representation of the group element. The caller must ensure that this buffer is allocated and has sufficient space.
    - `p`: A pointer to a constant `fd_ristretto255_point_t` representing the group element to convert. The pointer must not be null, and the group element must be valid and initialized.
- **Output**: Returns a pointer to the `buf` containing the 32-byte compressed representation of the group element.
- **See Also**: [`fd_ristretto255_point_tobytes`](<fd_ristretto255.c.md#fd_ristretto255_point_tobytes>)  (Implementation)


---
### fd\_ristretto255\_point\_frombytes<!-- {{#callable_declaration:fd_ristretto255_point_frombytes}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L50>)

Decompresses a 32-byte array into a ristretto group element.
- **Description**: Use this function to convert a 32-byte array into a ristretto255 group element. The function returns a pointer to the decompressed group element on success, or NULL if the input does not represent a valid canonical point. This function is useful when you need to work with ristretto255 group elements in their decompressed form. Ensure that the input array is a valid representation of a ristretto255 group element before calling this function.
- **Inputs**:
    - `p`: A pointer to an `fd_ristretto255_point_t` where the decompressed group element will be stored. The caller must ensure this pointer is valid and allocated.
    - `buf`: A constant 32-byte array representing the compressed form of a ristretto255 group element. The array must be a valid canonical representation, otherwise the function will return NULL.
- **Output**: Returns a pointer to the decompressed `fd_ristretto255_point_t` on success, or NULL if the input is not a valid canonical point.
- **See Also**: [`fd_ristretto255_point_frombytes`](<fd_ristretto255.c.md#fd_ristretto255_point_frombytes>)  (Implementation)


---
### fd\_ristretto255\_hash\_to\_curve<!-- {{#callable_declaration:fd_ristretto255_hash_to_curve}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L120>)

Computes a Ristretto group element from a 64-byte input.
- **Description**: Use this function to compute a Ristretto group element from a 64-byte array of uniformly random input, such as the output of a hash function. This function acts as a random oracle, ensuring that the output is indistinguishable from random. It is important to provide a valid pointer for the output parameter and a 64-byte input array. The function returns the computed Ristretto group element, which is stored in the provided output parameter.
- **Inputs**:
    - `h`: A pointer to an `fd_ristretto255_point_t` where the result will be stored. Must not be null. The caller retains ownership.
    - `s`: A constant 64-byte array of uniformly random input. Must not be null. The function expects exactly 64 bytes.
- **Output**: Returns a pointer to the computed `fd_ristretto255_point_t` stored in `h`.
- **See Also**: [`fd_ristretto255_hash_to_curve`](<fd_ristretto255.c.md#fd_ristretto255_hash_to_curve>)  (Implementation)


---
### fd\_ristretto255\_map\_to\_curve<!-- {{#callable_declaration:fd_ristretto255_map_to_curve}} -->
[View Source →](<../../../../../src/ballet/ed25519/fd_ristretto255.h#L131>)

Computes a Ristretto group element from a 32-byte input.
- **Description**: Use this function to map a 32-byte array to an element of the Ristretto group. This function is intended for internal use and does not behave like a random oracle. It is important to ensure that the input array is uniformly random, such as the output of a hash function, to maintain the expected behavior. The function returns a pointer to the computed Ristretto group element.
- **Inputs**:
    - `h`: A pointer to an `fd_ristretto255_point_t` where the result will be stored. The caller must ensure this pointer is valid and allocated before calling the function.
    - `s`: A constant 32-byte array of uniformly random input data. The array must be exactly 32 bytes long, and the caller retains ownership of the data.
- **Output**: Returns a pointer to the `fd_ristretto255_point_t` containing the computed Ristretto group element.
- **See Also**: [`fd_ristretto255_map_to_curve`](<fd_ristretto255.c.md#fd_ristretto255_map_to_curve>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)