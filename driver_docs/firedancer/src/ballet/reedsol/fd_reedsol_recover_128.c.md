<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Auto-generated C code for recovering 128 Reed-Solomon encoded shreds with error checking.

# Purpose
The code defines a function [`fd_reedsol_private_recover_var_128`](<#fd_reedsol_private_recover_var_128>), which is part of a Reed-Solomon error correction implementation. This function is responsible for recovering data from a set of shreds, which are fragments of data that include both original data and parity information. The function takes several parameters: the size of each shred, an array of pointers to the shreds, the count of data and parity shreds, and an array indicating which shreds are erased. The function uses these inputs to attempt to reconstruct the original data by leveraging the parity information.

The function operates by first determining which shreds are available and which are erased. It then generates a permutation index (`pi`) based on the erased shreds and performs a series of operations involving loading, multiplying, and transforming the shreds using finite field arithmetic. The function checks for data integrity by comparing regenerated shreds with existing ones and returns an error code if any discrepancies are found. The function is part of a broader library for Reed-Solomon coding, as indicated by the inclusion of headers `fd_reedsol_ppt.h` and `fd_reedsol_fderiv.h`, and it is intended for internal use, as suggested by the `private` designation in its name.
# Imports and Dependencies

---
- `fd_reedsol_ppt.h`
- `fd_reedsol_fderiv.h`


# Functions

---
### fd\_reedsol\_private\_recover\_var\_128<!-- {{#callable:fd_reedsol_private_recover_var_128}} -->
[View Source →](<../../../../../src/ballet/reedsol/fd_reedsol_recover_128.c#L5>)

Recovers data from shreds using Reed-Solomon error correction, handling up to 128 shreds at a time.
- **Inputs**:
    - `shred_sz`: The size of each shred in bytes.
    - `shred`: An array of pointers to the shreds, where each shred is a byte array.
    - `data_shred_cnt`: The number of data shreds.
    - `parity_shred_cnt`: The number of parity shreds.
    - `erased`: An array indicating which shreds are erased (1 for erased, 0 for not erased).
- **Logic and Control Flow**:
    - Initialize arrays `_erased` and `pi` to track erased shreds and permutation indices.
    - Calculate the total number of shreds (`shred_cnt`) and count the number of loaded data shreds (`loaded_cnt`).
    - If `loaded_cnt` is less than `data_shred_cnt`, return `FD_REEDSOL_ERR_PARTIAL`.
    - Generate permutation indices using [`fd_reedsol_private_gen_pi_128`](<fd_reedsol_pi.c.md#fd_reedsol_private_gen_pi_128>).
    - Iterate over each position in the shreds, loading non-erased shreds and filling erased positions with zero.
    - Multiply each loaded shred by its corresponding permutation index.
    - Perform inverse FFT, derivative generation, and FFT on the shreds.
    - Multiply erased shreds by their permutation indices again.
    - Store regenerated values for erased shreds, compare and reload values for non-erased shreds, and check for corruption.
    - If any corruption is detected, return `FD_REEDSOL_ERR_CORRUPT`.
    - Continue processing until all shreds are handled, then return `FD_REEDSOL_SUCCESS`.
- **Output**: Returns an integer status code: `FD_REEDSOL_SUCCESS` on successful recovery, `FD_REEDSOL_ERR_PARTIAL` if not enough data shreds are loaded, or `FD_REEDSOL_ERR_CORRUPT` if corruption is detected.
- **Functions Called**:
    - [`fd_reedsol_private_gen_pi_128`](<fd_reedsol_pi.c.md#fd_reedsol_private_gen_pi_128>)
    - [`gf_ldu`](<fd_reedsol_arith_none.h.md#gf_ldu>)
    - [`fd_reedsol_ifft_128_0`](<wrapped_impl/fd_reedsol_fft_impl_128_0.c.md#fd_reedsol_ifft_128_0>)
    - [`fd_reedsol_fft_128_0`](<wrapped_impl/fd_reedsol_fft_impl_128_0.c.md#fd_reedsol_fft_128_0>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)