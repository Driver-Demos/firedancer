<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Auto-generated C code for recovering data from Reed-Solomon encoded shreds with error checking.

# Purpose
The code defines a function [`fd_reedsol_private_recover_var_16`](<#fd_reedsol_private_recover_var_16>), which is part of a Reed-Solomon error correction implementation. This function is responsible for recovering data from a set of shreds, which are fragments of data that include both original data and parity information. The function takes parameters such as the size of each shred, pointers to the shreds, the count of data and parity shreds, and an array indicating which shreds are erased. The function uses these inputs to reconstruct the original data by performing operations on the shreds, including loading, multiplying, and transforming them using Fast Fourier Transform (FFT) and its inverse (IFFT).

The function is designed to handle up to 16 shreds at a time, using a series of operations to determine which shreds are erased and need recovery. It uses Galois Field arithmetic to perform the necessary calculations for error correction. The function checks for data integrity by comparing regenerated shreds with existing ones and returns specific error codes if it detects partial data or corruption. The code is part of a larger library, as indicated by the inclusion of headers `fd_reedsol_ppt.h` and `fd_reedsol_fderiv.h`, and it is intended to be used internally within the library rather than as a public API.
# Imports and Dependencies

---
- `fd_reedsol_ppt.h`
- `fd_reedsol_fderiv.h`


# Functions

---
### fd\_reedsol\_private\_recover\_var\_16<!-- {{#callable:fd_reedsol_private_recover_var_16}} -->
[View Source →](<../../../../../src/ballet/reedsol/fd_reedsol_recover_16.c#L5>)

Recovers data from a set of shreds using Reed-Solomon error correction, ensuring data integrity by checking for corrupt shreds.
- **Inputs**:
    - `shred_sz`: The size of each shred in bytes.
    - `shred`: An array of pointers to the shreds, where each pointer points to a shred of data.
    - `data_shred_cnt`: The number of data shreds.
    - `parity_shred_cnt`: The number of parity shreds.
    - `erased`: An array indicating which shreds are erased (1 for erased, 0 for not erased).
- **Logic and Control Flow**:
    - Initialize `_erased` and `pi` arrays to track erased shreds and permutation indices.
    - Calculate the total number of shreds (`shred_cnt`) and initialize `loaded_cnt` to zero.
    - Iterate over the first 16 shreds to determine which shreds to load based on the `erased` array and update `_erased` and `loaded_cnt`.
    - If `loaded_cnt` is less than `data_shred_cnt`, return `FD_REEDSOL_ERR_PARTIAL`.
    - Generate permutation indices using [`fd_reedsol_private_gen_pi_16`](<fd_reedsol_pi.c.md#fd_reedsol_private_gen_pi_16>).
    - Initialize `diff` to zero to track differences in regenerated shreds.
    - Iterate over each position in the shreds, loading un-erased shreds into vectors and filling erased vectors with zero.
    - Multiply each vector by its corresponding permutation index.
    - Perform inverse FFT, derivative, and FFT operations on the vectors.
    - Multiply the vectors by their permutation indices again.
    - Store, compare, or reload values based on the erased status of each shred using `STORE_COMPARE_RELOAD` and `STORE_COMPARE` macros.
    - Repeat the process for remaining shreds in blocks of 16, adjusting the FFT and IFFT offsets accordingly.
    - If any differences are detected in regenerated shreds, return `FD_REEDSOL_ERR_CORRUPT`.
    - Increment `shred_pos` by `GF_WIDTH` and adjust if necessary to stay within bounds.
    - Return `FD_REEDSOL_SUCCESS` if all operations complete without error.
- **Output**: Returns an integer status code: `FD_REEDSOL_SUCCESS` on successful recovery, `FD_REEDSOL_ERR_PARTIAL` if not enough data shreds are loaded, or `FD_REEDSOL_ERR_CORRUPT` if a corrupt shred is detected.
- **Functions Called**:
    - [`fd_reedsol_private_gen_pi_16`](<fd_reedsol_pi.c.md#fd_reedsol_private_gen_pi_16>)
    - [`gf_ldu`](<fd_reedsol_arith_none.h.md#gf_ldu>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)