<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements Reed-Solomon encoding and recovery functions with error handling for data shreds.

# Purpose
The code is part of a Reed-Solomon error correction library, which is used to encode and recover data with redundancy to protect against data loss. It includes functions for finalizing the encoding and recovery processes of data shreds. The [`fd_reedsol_encode_fini`](<#fd_reedsol_encode_fini>) function finalizes the encoding of data shreds into parity shreds based on the number of data and parity shreds specified. It uses different encoding functions depending on the number of data shreds, optimizing for different sizes. The [`fd_reedsol_recover_fini`](<#fd_reedsol_recover_fini>) function finalizes the recovery process by determining the number of unerased shreds needed to recover the original data and calls the appropriate recovery function based on the number of unerased shreds.

The code also includes a function [`fd_reedsol_strerror`](<#fd_reedsol_strerror>) that translates error codes into human-readable error messages. The file imports binary constants based on the implementation type defined by `FD_REEDSOL_ARITH_IMPL`, which allows the code to use different arithmetic implementations for encoding and recovery. This setup provides flexibility in choosing the most suitable implementation for the hardware or performance requirements. The code is intended to be part of a larger library and does not define a public API or external interface directly.
# Imports and Dependencies

---
- `fd_reedsol_private.h`


# Functions

---
### fd\_reedsol\_encode\_fini<!-- {{#callable:fd_reedsol_encode_fini}} -->
[View Source →](<../../../../../src/ballet/reedsol/fd_reedsol.c#L13>)

Finalizes the Reed-Solomon encoding process by selecting the appropriate encoding function based on the number of data and parity shreds, and then resets the shred counts.
- **Inputs**:
    - `rs`: A pointer to an `fd_reedsol_t` structure that contains the encoding parameters and state.
- **Logic and Control Flow**:
    - Checks if `FD_REEDSOL_ARITH_IMPL` is 3 and both `data_shred_cnt` and `parity_shred_cnt` are 32, then calls `fd_reedsol_private_encode_32_32` with the appropriate parameters.
    - If the above condition is not met, checks if `data_shred_cnt` is less than or equal to 16, then calls [`fd_reedsol_private_encode_16`](<fd_reedsol_encode_16.c.md#fd_reedsol_private_encode_16>).
    - If `data_shred_cnt` is less than or equal to 32, calls [`fd_reedsol_private_encode_32`](<fd_reedsol_encode_32.c.md#fd_reedsol_private_encode_32>).
    - If `data_shred_cnt` is less than or equal to 64, calls [`fd_reedsol_private_encode_64`](<fd_reedsol_encode_64.c.md#fd_reedsol_private_encode_64>).
    - If none of the above conditions are met, calls [`fd_reedsol_private_encode_128`](<fd_reedsol_encode_128.c.md#fd_reedsol_private_encode_128>).
    - Resets `data_shred_cnt` and `parity_shred_cnt` to 0.
- **Output**: No return value; the function modifies the `fd_reedsol_t` structure pointed to by `rs`.
- **Functions Called**:
    - [`fd_reedsol_private_encode_16`](<fd_reedsol_encode_16.c.md#fd_reedsol_private_encode_16>)
    - [`fd_reedsol_private_encode_32`](<fd_reedsol_encode_32.c.md#fd_reedsol_private_encode_32>)
    - [`fd_reedsol_private_encode_64`](<fd_reedsol_encode_64.c.md#fd_reedsol_private_encode_64>)
    - [`fd_reedsol_private_encode_128`](<fd_reedsol_encode_128.c.md#fd_reedsol_private_encode_128>)


---
### fd\_reedsol\_recover\_fini<!-- {{#callable:fd_reedsol_recover_fini}} -->
[View Source →](<../../../../../src/ballet/reedsol/fd_reedsol.c#L34>)

Finalizes the recovery process by checking unerased shreds and calling the appropriate recovery function based on the number of unerased shreds.
- **Inputs**:
    - ``rs``: A pointer to an `fd_reedsol_t` structure that contains the data and parity shred counts and recovery information.
- **Logic and Control Flow**:
    - Initialize `data_shred_cnt` and `parity_shred_cnt` from the `rs` structure.
    - Reset `data_shred_cnt` and `parity_shred_cnt` in the `rs` structure to zero.
    - Initialize `unerased` to zero and iterate over the total number of shreds (`data_shred_cnt + parity_shred_cnt`).
    - For each shred, increment `unerased` if the shred is not erased.
    - Break the loop if `unerased` equals `data_shred_cnt`.
    - If `unerased` does not equal `data_shred_cnt`, return `FD_REEDSOL_ERR_PARTIAL`.
    - Depending on the value of `i`, call the appropriate `fd_reedsol_private_recover_var_*` function to perform the recovery.
- **Output**: Returns an integer status code, which is either a success or an error code indicating partial recovery.
- **Functions Called**:
    - [`fd_reedsol_private_recover_var_16`](<fd_reedsol_recover_16.c.md#fd_reedsol_private_recover_var_16>)
    - [`fd_reedsol_private_recover_var_32`](<fd_reedsol_recover_32.c.md#fd_reedsol_private_recover_var_32>)
    - [`fd_reedsol_private_recover_var_64`](<fd_reedsol_recover_64.c.md#fd_reedsol_private_recover_var_64>)
    - [`fd_reedsol_private_recover_var_128`](<fd_reedsol_recover_128.c.md#fd_reedsol_private_recover_var_128>)
    - [`fd_reedsol_private_recover_var_256`](<fd_reedsol_recover_256.c.md#fd_reedsol_private_recover_var_256>)


---
### fd\_reedsol\_strerror<!-- {{#callable:fd_reedsol_strerror}} -->
[View Source →](<../../../../../src/ballet/reedsol/fd_reedsol.c#L79>)

Maps error codes to their corresponding error message strings.
- **Inputs**:
    - `err`: An integer representing the error code to be translated into a string message.
- **Logic and Control Flow**:
    - Use a switch statement to check the value of `err`.
    - If `err` is `FD_REEDSOL_SUCCESS`, return the string "success".
    - If `err` is `FD_REEDSOL_ERR_CORRUPT`, return the string "corrupt".
    - If `err` is `FD_REEDSOL_ERR_PARTIAL`, return the string "partial".
    - If `err` does not match any known error codes, return the string "unknown".
- **Output**: A constant character pointer to a string that describes the error.



---
Made with ❤️ by [Driver](https://www.driver.ai/)