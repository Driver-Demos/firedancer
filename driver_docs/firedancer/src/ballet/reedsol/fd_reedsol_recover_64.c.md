<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Auto-generated C code for recovering 64 Reed-Solomon shreds with error checking and correction.

# Purpose
The code defines a function [`fd_reedsol_private_recover_var_64`](<#fd_reedsol_private_recover_var_64>), which is part of a Reed-Solomon error correction implementation. This function is responsible for recovering data from a set of shreds, which are fragments of data that include both original data and parity information. The function takes parameters such as the size of each shred, pointers to the shreds, the count of data and parity shreds, and an array indicating which shreds are erased. It uses these inputs to reconstruct the original data by performing operations on Galois fields, which are mathematical structures used in error correction algorithms.

The function performs several key operations, including loading data shreds, generating parity information, and checking for data integrity. It uses a series of macros and functions, such as `FD_REEDSOL_GENERATE_IFFT`, `FD_REEDSOL_GENERATE_FFT`, and `FD_REEDSOL_GENERATE_FDERIV`, to perform inverse fast Fourier transforms, fast Fourier transforms, and finite field derivatives, respectively. The function checks for errors during the recovery process and returns specific error codes if it detects partial or corrupt data. The code is part of a larger library for Reed-Solomon error correction, and it is intended to be used internally within the library rather than as a public API.
# Imports and Dependencies

---
- `fd_reedsol_ppt.h`
- `fd_reedsol_fderiv.h`


# Functions

---
### fd\_reedsol\_private\_recover\_var\_64<!-- {{#callable:fd_reedsol_private_recover_var_64}} -->
[View Source →](<../../../../../src/ballet/reedsol/fd_reedsol_recover_64.c#L5>)

Recovers data from a set of shreds using Reed-Solomon error correction, handling up to 64 shreds at a time.
- **Inputs**:
    - `shred_sz`: The size of each shred in bytes.
    - `shred`: A pointer to an array of pointers, each pointing to a shred of data.
    - `data_shred_cnt`: The number of data shreds.
    - `parity_shred_cnt`: The number of parity shreds.
    - `erased`: A pointer to an array indicating which shreds are erased (1 for erased, 0 for not erased).
- **Logic and Control Flow**:
    - Initialize arrays `_erased` and `pi` to track erased shreds and permutation indices.
    - Calculate the total number of shreds as the sum of data and parity shreds.
    - Iterate over 64 possible shreds, marking them as erased or not based on the `erased` input and the number of loaded data shreds.
    - If the number of loaded data shreds is less than `data_shred_cnt`, return `FD_REEDSOL_ERR_PARTIAL`.
    - Generate permutation indices using [`fd_reedsol_private_gen_pi_64`](<fd_reedsol_pi.c.md#fd_reedsol_private_gen_pi_64>).
    - Initialize `diff` to track differences between regenerated and original shreds.
    - Iterate over the shred size, processing shreds in blocks of 64.
    - Load un-erased shreds into vectors, filling erased vectors with zero.
    - Multiply each vector by its corresponding permutation index.
    - Perform inverse FFT, derivative, and FFT operations on the vectors.
    - Multiply erased vectors by their permutation indices again.
    - Store regenerated values for erased shreds, compare regenerated values with original for non-erased shreds, and reload original values for used shreds.
    - If any differences are detected, return `FD_REEDSOL_ERR_CORRUPT`.
    - Adjust `shred_pos` to process the next block of shreds.
    - Return `FD_REEDSOL_SUCCESS` if all operations complete without error.
- **Output**: Returns an integer status code: `FD_REEDSOL_SUCCESS` on successful recovery, `FD_REEDSOL_ERR_PARTIAL` if not enough data shreds are available, or `FD_REEDSOL_ERR_CORRUPT` if a corruption is detected.
- **Functions Called**:
    - [`fd_reedsol_private_gen_pi_64`](<fd_reedsol_pi.c.md#fd_reedsol_private_gen_pi_64>)
    - [`gf_ldu`](<fd_reedsol_arith_none.h.md#gf_ldu>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)