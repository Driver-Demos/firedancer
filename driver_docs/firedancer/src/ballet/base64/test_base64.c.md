<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests Base64 encoding and decoding against predefined vectors and benchmarks performance.

# Purpose
The code is a C program designed to test and benchmark Base64 encoding and decoding functions. It includes a series of unit tests that verify the correctness of these functions against predefined test vectors. These vectors include both valid and intentionally corrupted Base64 strings to ensure the functions handle both correctly. The program uses the `fd_base64_encode` and `fd_base64_decode` functions to encode and decode data, respectively, and checks the results against expected values using assertions. The test vectors are defined in the `fd_base64_test_vec` structure, which includes the raw data, its length, the encoded data, and its length.

Additionally, the program performs a round-trip test to verify that data can be encoded and then decoded back to its original form without loss. It also includes a throughput test to measure the performance of the decoding function, reporting the results in terms of gigabits per second and nanoseconds per byte. The program initializes a random number generator for generating random data during the round-trip test and logs the results of the tests and benchmarks. The program is structured to be executed as a standalone application, with the [`main`](<#main>) function serving as the entry point.
# Imports and Dependencies

---
- `fd_base64.h`
- `../fd_ballet.h`


# Global Variables

---
### test\_long\_raw
- **Type**: ``uchar const[]``
- **Description**: An array of unsigned characters that contains a sequence of hexadecimal values. It is defined as a static constant, meaning its value does not change during the execution of the program.
- **Use**: Used as a test vector for verifying Base64 encoding and decoding operations.


---
### test\_vector
- **Type**: ``fd_base64_test_vec_t const``
- **Description**: An array of `fd_base64_test_vec_t` structures that contains test cases for Base64 encoding and decoding. Each element in the array includes a raw input string, its length, the expected Base64 encoded string, and its length.
- **Use**: Used to verify the correctness of Base64 encoding and decoding functions by comparing the output against predefined test cases.


---
### test\_corrupt
- **Type**: ``char const * const[]``
- **Description**: An array of constant character pointers that contains strings representing invalid or corrupt Base64 encoded data. The array is terminated with a `NULL` pointer to indicate the end of the list.
- **Use**: Used to test the Base64 decoding function by providing it with invalid input strings to ensure it correctly identifies and handles errors.


# Data Structures

---
### fd\_base64\_test\_vec
- **Type**: ``struct``
- **Members**:
    - `raw_len`: The length of the raw data in bytes.
    - `raw`: A pointer to the raw data to be encoded or decoded.
    - `enc_len`: The length of the encoded data in bytes.
    - `enc`: A pointer to the encoded Base64 data.
- **Description**: Defines a structure for storing a Base64 test vector, which includes both the raw data and its corresponding Base64 encoded representation, along with their respective lengths.


---
### fd\_base64\_test\_vec\_t
- **Type**: ``struct``
- **Members**:
    - ``raw_len``: The length of the raw data in bytes.
    - ``raw``: A pointer to the raw data to be encoded or decoded.
    - ``enc_len``: The length of the encoded data in bytes.
    - ``enc``: A pointer to the encoded Base64 data.
- **Description**: Defines a structure for storing a Base64 test vector, which includes both the raw data and its corresponding Base64 encoded representation, along with their respective lengths.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/ballet/base64/test_base64.c#L71>)

Executes Base64 encoding and decoding tests, including unit tests, round-trip tests, and throughput benchmarks, using a random number generator for data generation.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line argument strings.
- **Logic and Control Flow**:
    - Initializes the system with `fd_boot` and sets up a random number generator `rng`.
    - Iterates over `test_vector` to perform unit tests for Base64 decoding and encoding, verifying results with `FD_TEST`.
    - Iterates over `test_corrupt` to ensure decoding fails for corrupt Base64 strings, logging errors if it does not.
    - Performs a round-trip test 100,000 times, encoding and then decoding random data, verifying the integrity of the data.
    - Conducts a throughput test by decoding a large Base64 string multiple times, measuring and logging the performance in Gbps and ns/byte.
    - Cleans up by deleting the random number generator and halting the system with `fd_halt`.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_base64_decode`](<fd_base64.c.md#fd_base64_decode>)
    - [`fd_base64_encode`](<fd_base64.c.md#fd_base64_encode>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)