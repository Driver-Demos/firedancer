<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Header file for deserializing vectors of shreds into block entries with initialization and processing functions.

# Purpose
This C header file defines the interface for a deshredder, which is responsible for deserializing a vector of shreds into block entries. The `fd_deshredder_t` structure holds the state of the deshredder, including a vector of data shreds, a buffer for concatenated shreds, and metadata such as the number of shreds and buffer size. The [`fd_deshredder_init`](<#fd_deshredder_init>) function initializes the deshredder with a buffer, its size, a vector of shreds, and the count of shreds, ensuring that each shred has passed validation checks. The [`fd_deshredder_next`](<#fd_deshredder_next>) function processes batches of shreds, concatenating them into the buffer and returning the number of bytes written or an error code if issues occur, such as insufficient buffer space or invalid shred types.
# Imports and Dependencies

---
- `../fd_ballet_base.h`
- `fd_shred.h`


# Data Structures

---
### fd\_deshredder\_t
- **Type**: ``struct``
- **Members**:
    - `shreds`: A pointer to a vector of constant pointers to `fd_shred_t` data shreds.
    - `shred_cnt`: An unsigned integer representing the number of shreds left in the buffer.
    - `buf`: A pointer to an unsigned character array that serves as the target buffer for deserialized data.
    - `bufsz`: An unsigned long integer indicating the free space available in the target buffer.
    - `result`: A long integer storing the cached return code of the deshredder operation.
- **Description**: Deserializes a vector of shreds into block entries, managing a buffer to store the concatenated shreds and tracking the number of shreds processed and the operation's result.


# Function Declarations (Public API)

---
### fd\_deshredder\_init<!-- {{#callable_declaration:fd_deshredder_init}} -->
[View Source →](<../../../../../src/ballet/shred/fd_deshredder.h#L46>)

Initializes a deshredder for processing shreds.
- **Description**: Use this function to prepare a deshredder for processing a series of shreds into a buffer. This function sets up the deshredder with a buffer where concatenated shreds will be written, a vector of shreds to process, and the count of these shreds. Ensure that each shred has passed validation checks and ideally authentication checks before calling this function. This function must be called before any other operations on the deshredder.
- **Inputs**:
    - `shredder`: A pointer to an `fd_deshredder_t` structure that will be initialized. Must not be null.
    - `buf`: A pointer to a buffer where concatenated shreds will be written. Must not be null.
    - `bufsz`: The size of the buffer in bytes. Must be large enough to hold the concatenated shreds.
    - `shreds`: A pointer to a contiguous vector of `fd_shred_t` pointers representing the shreds to process. Must not be null and must point to valid shreds.
    - `shred_cnt`: The number of shreds in the `shreds` vector. Must be a non-negative value.
- **Output**: None
- **See Also**: [`fd_deshredder_init`](<fd_deshredder.c.md#fd_deshredder_init>)  (Implementation)


---
### fd\_deshredder\_next<!-- {{#callable_declaration:fd_deshredder_next}} -->
[View Source →](<../../../../../src/ballet/shred/fd_deshredder.h#L84>)

Concatenates a batch of shreds into a buffer.
- **Description**: Use this function to process and concatenate a batch of shreds into a buffer previously initialized with `fd_deshredder_init`. It is typically necessary to call this function multiple times to process all shreds, as each block can contain multiple batches. The function updates the shredder's result code to indicate the status of the operation, such as completion of a batch or slot, or an error condition. Ensure that the shredder has been properly initialized and that the buffer has sufficient space to accommodate the shreds. Do not call this function again on the same shredder if an error occurs.
- **Inputs**:
    - `shredder`: A pointer to an `fd_deshredder_t` structure that has been initialized with `fd_deshredder_init`. The shredder must not be null, and it must have a valid buffer and shred vector. The function will update the shredder's internal state and result code.
- **Output**: Returns the number of bytes written to the buffer if at least one shred was consumed. Returns a negative error code if an error occurs, such as `-FD_SHRED_ENOMEM` if the buffer is too small or `-FD_SHRED_EINVAL` if the shred type is invalid. The shredder's result code is updated to reflect the operation's outcome.
- **See Also**: [`fd_deshredder_next`](<fd_deshredder.c.md#fd_deshredder_next>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)