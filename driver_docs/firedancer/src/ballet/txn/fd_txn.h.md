<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures and functions for representing and parsing Solana transactions, including instructions, account addresses, and transaction properties.

# Purpose
The code defines a C header file for handling Solana transactions, specifically focusing on the structure and parsing of these transactions. The primary data structures defined are `fd_txn_t`, which represents a Solana transaction, and `fd_txn_instr_t`, which represents an instruction within a transaction. A Solana transaction is composed of a list of instructions, account addresses, and a recent block hash. The header file also defines constants related to transaction formats, sizes, and limits, such as `FD_TXN_VLEGACY` and `FD_TXN_V0` for transaction versions, and `FD_TXN_SIGNATURE_SZ` for the size of an Ed25519 signature.

The file provides several inline functions and macros to facilitate the manipulation and analysis of transactions. These include functions to retrieve signatures, account addresses, and recent block hashes from a transaction, as well as functions to determine if an account is writable or a signer. The header also includes a parsing function, [`fd_txn_parse_core`](<#fd_txn_parse_core>), which processes a transaction from its serialized form into a structured format. Additionally, the file defines categories for account addresses based on their properties, such as whether they are writable or come from an address lookup table, and provides iterators for traversing these accounts. The header is intended to be included in other C files that need to work with Solana transactions, providing a structured and efficient way to handle transaction data.
# Imports and Dependencies

---
- `../fd_ballet_base.h`
- `../ed25519/fd_ed25519.h`


# Data Structures

---
### fd\_txn\_instr
- **Type**: ``struct``
- **Members**:
    - ``program_id``: The index of the program's account address in the transaction's list of account addresses.
    - ``_padding_reserved_1``: Explicit padding to align the structure.
    - ``acct_cnt``: The number of accounts this instruction references.
    - ``data_sz``: The size in bytes of the data passed to this instruction.
    - ``acct_off``: The byte offset where the account address index array starts.
    - ``data_off``: The byte offset where the instruction data array starts.
- **Description**: Defines a Solana transaction instruction, specifying the invocation of an on-chain program with associated accounts and data. The structure includes fields for the program identifier, account count, data size, and offsets for account addresses and data within the transaction. This allows the instruction to reference accounts and data by their positions in the transaction's payload.


---
### fd\_txn\_instr\_t
- **Type**: ``struct``
- **Members**:
    - ``program_id``: The index of the program's account address in the transaction's list of account addresses.
    - ``_padding_reserved_1``: Explicit padding that the compiler would insert.
    - ``acct_cnt``: The number of accounts this instruction references.
    - ``data_sz``: The size in bytes of the data passed to this instruction.
    - ``acct_off``: The offset in bytes where the account address index array starts.
    - ``data_off``: The offset in bytes where the instruction data array starts.
- **Description**: Describes a Solana transaction instruction, which is a command or step to execute in a transaction. It specifies the invocation of a smart contract with arguments in the form of binary data and/or accounts. The instruction uses indices to reference accounts from the transaction's list of account addresses, introducing two layers of indirection.


---
### fd\_txn
- **Type**: ``struct``
- **Members**:
    - ``transaction_version``: Stores the version number of the transaction.
    - ``signature_cnt``: Indicates the number of signatures in the transaction.
    - ``signature_off``: Specifies the byte offset where the signatures start.
    - ``message_off``: Specifies the byte offset where the message starts.
    - ``readonly_signed_cnt``: Counts the number of read-only signatures.
    - ``readonly_unsigned_cnt``: Counts the number of read-only unsigned account addresses.
    - ``acct_addr_cnt``: Indicates the number of account addresses in the transaction.
    - ``acct_addr_off``: Specifies the byte offset where the account addresses start.
    - ``recent_blockhash_off``: Specifies the byte offset where the recent blockhash starts.
    - ``addr_table_lookup_cnt``: Indicates the number of address lookup tables in the transaction.
    - ``addr_table_adtl_writable_cnt``: Counts the total number of writable account addresses from address table lookups.
    - ``addr_table_adtl_cnt``: Counts the total number of account addresses from address lookup tables.
    - ``_padding_reserved_1``: Explicit padding for alignment purposes.
    - ``instr_cnt``: Indicates the number of instructions in the transaction.
    - ``instr``: Flexible array member containing the instructions of the transaction.
- **Description**: Represents a Solana transaction, encapsulating details such as version, signatures, account addresses, and instructions. It includes offsets for various components like signatures, messages, and account addresses, allowing efficient access to transaction data. The structure supports different transaction versions and includes fields for handling address lookup tables, which extend the number of accounts a transaction can reference. The flexible array member `instr` holds the transaction's instructions, which are executed in sequence.


---
### fd\_txn\_t
- **Type**: ``struct``
- **Members**:
    - ``transaction_version``: The version number of the transaction.
    - ``signature_cnt``: The number of signatures in the transaction.
    - ``signature_off``: The byte offset where the signatures start.
    - ``message_off``: The byte offset where the message starts.
    - ``readonly_signed_cnt``: The count of read-only signatures.
    - ``readonly_unsigned_cnt``: The count of read-only unsigned account addresses.
    - ``acct_addr_cnt``: The number of account addresses in the transaction.
    - ``acct_addr_off``: The byte offset where the account addresses start.
    - ``recent_blockhash_off``: The byte offset where the recent blockhash starts.
    - ``addr_table_lookup_cnt``: The number of address lookup tables in the transaction.
    - ``addr_table_adtl_writable_cnt``: The count of writable account addresses from address table lookups.
    - ``addr_table_adtl_cnt``: The total count of account addresses from address lookup tables.
    - ``_padding_reserved_1``: Explicit padding for alignment.
    - ``instr_cnt``: The number of instructions in the transaction.
    - ``instr``: The array of instructions in the transaction.
- **Description**: Represents a Solana transaction, which includes a list of instructions, account addresses, a recent blockhash, and potentially address lookup tables. The structure manages transaction versioning, signature handling, account address management, and instruction execution. It ensures atomicity and consistency in transaction processing by maintaining offsets and counts for various components, such as signatures, account addresses, and instructions.


---
### fd\_txn\_acct\_addr\_lut
- **Type**: ``struct``
- **Members**:
    - ``addr_off``: The offset in bytes where the account address is stored, relative to the start of the transaction.
    - ``writable_cnt``: The number of account addresses selected as writable from the on-chain list.
    - ``readonly_cnt``: The number of account addresses selected as read-only from the on-chain list.
    - ``writable_off``: The offset in bytes where the writable account indices begin, relative to the start of the transaction.
    - ``readonly_off``: The offset in bytes where the read-only account indices begin, relative to the start of the transaction.
- **Description**: Specifies which account addresses from an on-chain list should be included in a transaction's list of account addresses, allowing for the selection of writable and read-only accounts.


---
### fd\_txn\_acct\_addr\_lut\_t
- **Type**: ``struct``
- **Members**:
    - ``addr_off``: The offset in bytes where the address of the account containing the list to load is stored.
    - ``writable_cnt``: The number of account addresses selected as writable from the on-chain list.
    - ``readonly_cnt``: The number of account addresses selected as read-only from the on-chain list.
    - ``writable_off``: The offset in bytes where the writable account indices begin.
    - ``readonly_off``: The offset in bytes where the read-only account indices begin.
- **Description**: Specifies which account addresses from an on-chain list should be selected to include in the list of account addresses available to instructions in a Solana transaction.


---
### fd\_txn\_parse\_counters
- **Type**: ``struct``
- **Members**:
    - ``success_cnt``: The number of times a transaction parsed successfully.
    - ``failure_cnt``: The number of times a transaction was ill-formed and failed to parse for any reason.
    - ``failure_ring``: An array storing information about the causes of recent transaction parsing failures, with undefined contents if fewer than `FD_TXN_PARSE_COUNTERS_RING_SZ` failures have occurred.
- **Description**: Collects metrics about the outcome of parsing transactions, including counts of successful and failed parses, and details about recent parsing failures.


---
### fd\_txn\_parse\_counters\_t
- **Type**: ``struct``
- **Members**:
    - `success_cnt`: The number of times a transaction parsed successfully.
    - `failure_cnt`: The number of times a transaction was ill-formed and failed to parse.
    - `failure_ring`: An array storing information about the causes of recent transaction parsing failures.
- **Description**: Collects metrics about the outcome of parsing transactions, including counts of successful and failed parses, and details about recent parsing failures.


---
### fd\_acct\_addr
- **Type**: ``union``
- **Members**:
    - ``b``: An array of unsigned characters with a size defined by `FD_TXN_ACCT_ADDR_SZ`.
- **Description**: A `union` named `fd_acct_addr` that represents a Solana account address. It contains a single member `b`, which is an array of unsigned characters (`uchar`) with a size specified by the macro `FD_TXN_ACCT_ADDR_SZ`. This union is used to store account addresses, which can be Ed25519 public keys, SHA256 hashes, or other fixed-size values. The `union` does not imply any specific memory alignment.


---
### fd\_acct\_addr\_t
- **Type**: ``union``
- **Members**:
    - ``b``: An array of `uchar` with a size defined by `FD_TXN_ACCT_ADDR_SZ`.
- **Description**: Represents a Solana account address, which can be an Ed25519 public key, a SHA256 hash from a program-derived address, a hardcoded sysvar, or other types. This union does not imply any specific alignment.


# Functions

---
### fd\_txn\_get\_address\_tables\_const<!-- {{#callable:fd_txn_get_address_tables_const}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L388>)

Returns a constant pointer to the address tables in a Solana transaction.
- **Inputs**:
    - `txn`: A constant pointer to a `fd_txn_t` structure representing a Solana transaction.
- **Logic and Control Flow**:
    - Calculate the address of the address tables by adding the `instr_cnt` field of `txn` to the `instr` array pointer.
    - Cast the calculated address to a constant pointer of type `fd_txn_acct_addr_lut_t`.
    - Return the casted pointer.
- **Output**: A constant pointer to the `fd_txn_acct_addr_lut_t` structure, representing the address tables in the transaction.


---
### fd\_txn\_get\_signatures<!-- {{#callable:fd_txn_get_signatures}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L413>)

Returns a pointer to the array of Ed25519 signatures in the transaction payload.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `payload`: A pointer to the serialized transaction data.
- **Logic and Control Flow**:
    - Calculate the address of the signatures by adding the `signature_off` offset from the `txn` structure to the `payload` pointer.
    - Cast the calculated address to a pointer of type `fd_ed25519_sig_t const *`.
    - Return the cast pointer.
- **Output**: A pointer to the first signature in the transaction's signature array within the payload.


---
### fd\_txn\_get\_acct\_addrs<!-- {{#callable:fd_txn_get_acct_addrs}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L419>)

Returns a pointer to the array of account addresses in a Solana transaction payload.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `payload`: A pointer to the serialized transaction data.
- **Logic and Control Flow**:
    - Calculate the address of the account addresses by adding the `acct_addr_off` offset from the `txn` structure to the `payload` pointer.
    - Cast the calculated address to a pointer of type `fd_acct_addr_t const *`.
    - Return the casted pointer.
- **Output**: A pointer to the first account address in the transaction's account address list.


---
### fd\_txn\_get\_recent\_blockhash<!-- {{#callable:fd_txn_get_recent_blockhash}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L425>)

Retrieves the recent blockhash from a Solana transaction payload using an offset.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `payload`: A pointer to the transaction data from which the recent blockhash is extracted.
- **Logic and Control Flow**:
    - Calculate the address of the recent blockhash by adding the `recent_blockhash_off` offset from the `txn` structure to the base `payload` address.
    - Cast the calculated address to a `uchar const *` type and return it.
- **Output**: A pointer to the recent blockhash within the transaction payload.


---
### fd\_txn\_get\_instr\_accts<!-- {{#callable:fd_txn_get_instr_accts}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L431>)

Calculates the pointer to the start of the account address index array for a given instruction in a Solana transaction.
- **Inputs**:
    - `instr`: A pointer to a `fd_txn_instr_t` structure representing a Solana transaction instruction.
    - `payload`: A pointer to the start of the transaction data in memory.
- **Logic and Control Flow**:
    - Calculate the memory address by adding the `acct_off` offset from the `instr` structure to the `payload` pointer.
    - Cast the resulting address to a `uchar const *` type.
- **Output**: A pointer to the start of the account address index array for the specified instruction.


---
### fd\_txn\_get\_instr\_data<!-- {{#callable:fd_txn_get_instr_data}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L437>)

Calculates the pointer to the instruction data within a transaction payload.
- **Inputs**:
    - `instr`: A pointer to a `fd_txn_instr_t` structure representing a transaction instruction, which contains the offset to the instruction data.
    - `payload`: A pointer to the start of the transaction data in memory, which is used as the base address for calculating the instruction data location.
- **Logic and Control Flow**:
    - Cast `payload` to an unsigned long integer for arithmetic operations.
    - Add the `data_off` offset from the `instr` structure to the `payload` address to calculate the absolute address of the instruction data.
    - Cast the resulting address back to a `uchar const *` pointer type.
- **Output**: A pointer to the instruction data within the transaction payload, cast as `uchar const *`.


---
### fd\_txn\_is\_simple\_vote\_transaction<!-- {{#callable:fd_txn_is_simple_vote_transaction}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L456>)

Determines if a given Solana transaction is a simple vote transaction.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `payload`: A pointer to the serialized data of the transaction.
- **Logic and Control Flow**:
    - Retrieve the base address of account addresses using [`fd_txn_get_acct_addrs`](<#fd_txn_get_acct_addrs>) with `txn` and `payload` as arguments.
    - Check if the transaction has exactly one instruction; if not, return 0.
    - Check if the transaction version is `FD_TXN_VLEGACY`; if not, return 0.
    - Check if the transaction has more than two signatures; if so, return 0.
    - Retrieve the program ID index from the first instruction of the transaction.
    - Calculate the program ID address using the base address and the program ID index.
    - Compare the program ID with the predefined `vote_program_id` using `fd_memeq`; return 1 if they match, otherwise return 0.
- **Output**: Returns 1 if the transaction is a simple vote transaction, otherwise returns 0.
- **Functions Called**:
    - [`fd_txn_get_acct_addrs`](<#fd_txn_get_acct_addrs>)


---
### fd\_txn\_align<!-- {{#callable:fd_txn_align}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L476>)

Returns the alignment requirement in bytes for a memory region to be used as a `fd_txn_t`.
- **Inputs**: None
- **Logic and Control Flow**:
    - Calls `alignof(fd_txn_t)` to determine the alignment requirement.
    - Returns the result of `alignof(fd_txn_t)`.
- **Output**: The function returns an `ulong` representing the alignment requirement in bytes for a `fd_txn_t`.


---
### fd\_txn\_footprint<!-- {{#callable:fd_txn_footprint}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L483>)

Calculates the total memory footprint of a transaction, including its instructions and address tables.
- **Inputs**:
    - `instr_cnt`: The number of instructions in the transaction.
    - `addr_table_lookup_cnt`: The number of address table lookups in the transaction.
- **Logic and Control Flow**:
    - Calculate the size of the transaction structure `fd_txn_t`.
    - Multiply `instr_cnt` by the size of one instruction `fd_txn_instr_t` to get the total size of all instructions.
    - Multiply `addr_table_lookup_cnt` by the size of one address lookup table `fd_txn_acct_addr_lut_t` to get the total size of all address tables.
    - Add the sizes calculated in the previous steps to get the total footprint.
- **Output**: Returns the total size in bytes of the transaction, including its instructions and address tables.


---
### fd\_txn\_account\_cnt<!-- {{#callable:fd_txn_account_cnt}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L540>)

Calculates the number of accounts in a transaction that match specified categories.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `include_cat`: An integer representing the categories of accounts to include, using bitwise flags defined by `FD_TXN_ACCT_CAT_*` constants.
- **Logic and Control Flow**:
    - Initialize a counter `cnt` to zero.
    - Check if `include_cat` includes `FD_TXN_ACCT_CAT_WRITABLE_SIGNER` and add the count of writable signer accounts to `cnt`.
    - Check if `include_cat` includes `FD_TXN_ACCT_CAT_READONLY_SIGNER` and add the count of readonly signer accounts to `cnt`.
    - Check if `include_cat` includes `FD_TXN_ACCT_CAT_READONLY_NONSIGNER_IMM` and add the count of readonly non-signer immediate accounts to `cnt`.
    - Check if `include_cat` includes `FD_TXN_ACCT_CAT_WRITABLE_ALT` and add the count of writable accounts from address table lookups to `cnt`.
    - Check if `include_cat` includes `FD_TXN_ACCT_CAT_WRITABLE_NONSIGNER_IMM` and add the count of writable non-signer immediate accounts to `cnt`.
    - Check if `include_cat` includes `FD_TXN_ACCT_CAT_READONLY_ALT` and add the count of readonly accounts from address table lookups to `cnt`.
    - Return the total count `cnt`.
- **Output**: Returns an unsigned long integer representing the total number of accounts that match the specified categories.


---
### fd\_txn\_acct\_iter\_init<!-- {{#callable:fd_txn_acct_iter_init}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L610>)

Initializes an iterator for iterating over account addresses in a transaction based on specified categories.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `include_cat`: An integer representing the categories of account addresses to include, using bitwise combinations of `FD_TXN_ACCT_CAT_*` values.
- **Logic and Control Flow**:
    - Initialize an array `control` with three elements set to 0 to store start and count pairs for account address categories.
    - Set `i` to -1 to facilitate incrementing to 0 in the first use.
    - Extract various counts from the `txn` structure for convenience, such as `signature_cnt`, `readonly_signed_cnt`, `readonly_unsigned_cnt`, `acct_addr_cnt`, `addr_table_adtl_cnt`, and `addr_table_adtl_writable_cnt`.
    - Use the `INCLUDE_RANGE` macro to populate the `control` array with start and count pairs for each category specified in `include_cat`.
    - Check each category using bitwise operations and populate `control` with the start index and count of accounts for that category.
    - Remove empty intervals from the `control` array by checking if the count is zero and adjusting the control values accordingly.
    - Return a single `ulong` value combining the non-empty intervals from `control` into a single control word.
- **Output**: A `ulong` value representing the control word for iterating over the specified account address categories.


---
### fd\_txn\_acct\_iter\_next<!-- {{#callable:FD_FN_CONST::fd_txn_acct_iter_next}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L666>)

Advances an account iterator to the next account index based on specified criteria.
- **Inputs**:
    - `cur`: The current iterator state, represented as a `fd_txn_acct_iter_t` value.
- **Logic and Control Flow**:
    - Increment the low byte of `cur` by 1 and decrement the count byte by 1.
    - Check if the count byte is zero (indicating the end of the current interval).
    - If the count byte is zero, shift `cur` right by 16 bits to move to the next interval.
    - Return the updated iterator state.
- **Output**: Returns the updated iterator state as a `fd_txn_acct_iter_t` value.


---
### fd\_txn\_acct\_iter\_end<!-- {{#callable:FD_FN_CONST::fd_txn_acct_iter_end}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L673>)

Returns the end value for an account iterator, which is `0UL`.
- **Inputs**: None
- **Logic and Control Flow**:
    - The function is defined as `static inline` and is marked with `FD_FN_CONST`, indicating it is a constant function that does not depend on any input parameters.
    - The function returns a constant value `0UL`, which represents the end of an account iterator.
- **Output**: The function returns an `fd_txn_acct_iter_t` type, which is an alias for `ulong`, specifically the value `0UL`.


---
### fd\_txn\_acct\_iter\_idx<!-- {{#callable:FD_FN_CONST::fd_txn_acct_iter_idx}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L674>)

Extracts the lower 8 bits from the input `fd_txn_acct_iter_t` value.
- **Inputs**:
    - `cur`: A `fd_txn_acct_iter_t` value representing the current state of an account iterator.
- **Logic and Control Flow**:
    - Perform a bitwise AND operation between `cur` and `0xFFUL` to isolate the lower 8 bits.
- **Output**: Returns an `ulong` representing the index of the current account in the iteration.


---
### fd\_txn\_parse<!-- {{#callable:fd_txn_parse}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L712>)

Calls [`fd_txn_parse_core`](<fd_txn_parse.c.md#fd_txn_parse_core>) to parse a Solana transaction from a given payload.
- **Inputs**:
    - `payload`: A pointer to the first byte of the encoded transaction data.
    - `payload_sz`: The size in bytes of the payload.
    - `out_buf`: A pointer to the memory where the parsed transaction will be stored.
    - `counters_opt`: An optional pointer to a `fd_txn_parse_counters_t` structure for collecting parsing metrics.
- **Logic and Control Flow**:
    - Calls [`fd_txn_parse_core`](<fd_txn_parse.c.md#fd_txn_parse_core>) with the provided `payload`, `payload_sz`, `out_buf`, `counters_opt`, and a `NULL` for the optional payload size parameter.
- **Output**: Returns the total size of the resulting `fd_txn` struct on success, or 0 on failure.
- **Functions Called**:
    - [`fd_txn_parse_core`](<fd_txn_parse.c.md#fd_txn_parse_core>)


---
### fd\_txn\_is\_writable<!-- {{#callable:fd_txn_is_writable}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L726>)

Determines if an account at a given index in a Solana transaction is writable.
- **Inputs**:
    - `txn`: A pointer to a `fd_txn_t` structure representing a Solana transaction.
    - `idx`: An unsigned short integer representing the index of the account to check for writability.
- **Logic and Control Flow**:
    - Check if the transaction version is `FD_TXN_V0` and if `idx` is greater than or equal to `txn->acct_addr_cnt`.
    - If true, check if `idx` is less than the sum of `txn->acct_addr_cnt` and `txn->addr_table_adtl_writable_cnt`; return 1 if true, otherwise return 0.
    - If the transaction version is not `FD_TXN_V0`, check if `idx` is less than the difference between `txn->signature_cnt` and `txn->readonly_signed_cnt`; return 1 if true.
    - Check if `idx` is greater than or equal to `txn->signature_cnt` and less than the difference between `txn->acct_addr_cnt` and `txn->readonly_unsigned_cnt`; return 1 if true.
    - Return 0 if none of the conditions for writability are met.
- **Output**: Returns 1 if the account at the specified index is writable, otherwise returns 0.


---
### fd\_txn\_is\_signer<!-- {{#callable:fd_txn_is_signer}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L751>)

Determines if the account at a given index in a transaction is a signer.
- **Inputs**:
    - `txn`: A pointer to a constant `fd_txn_t` structure representing a Solana transaction.
    - `idx`: An integer representing the index of the account to check within the transaction.
- **Logic and Control Flow**:
    - Check if `idx` is less than `txn->signature_cnt`.
    - Return 1 if the condition is true, indicating the account is a signer.
    - Return 0 if the condition is false, indicating the account is not a signer.
- **Output**: Returns 1 if the account at the specified index is a signer, otherwise returns 0.


# Function Declarations (Public API)

---
### fd\_txn\_parse\_core<!-- {{#callable_declaration:fd_txn_parse_core}} -->
[View Source →](<../../../../../src/ballet/txn/fd_txn.h#L703>)

Parses a Solana transaction from its canonical encoding.
- **Description**: Use this function to parse a Solana transaction from its encoded format, typically received over a network. Ensure that the `payload` contains the transaction data and does not exceed the maximum transmission unit (`FD_TXN_MTU`). The function writes the parsed transaction into `out_buf`, which must have sufficient space (`FD_TXN_MAX_SZ`). If `counters_opt` is provided, it updates parsing success and failure metrics. Optionally, `payload_sz_opt` can be used to store the number of bytes processed. The function returns the size of the parsed transaction on success or 0 on failure.
- **Inputs**:
    - `payload`: Pointer to the transaction data to parse. Must not be null and should not exceed `FD_TXN_MTU` bytes.
    - `payload_sz`: Size of the transaction data in bytes. Must be less than or equal to `FD_TXN_MTU`.
    - `out_buf`: Pointer to the buffer where the parsed transaction will be stored. Must have at least `FD_TXN_MAX_SZ` bytes available.
    - `counters_opt`: Optional pointer to a `fd_txn_parse_counters_t` structure for collecting parsing metrics. Can be null.
    - `payload_sz_opt`: Optional pointer to a `ulong` where the function will store the number of bytes processed. Can be null.
- **Output**: Returns the size of the parsed transaction on success, or 0 on failure. Updates `counters_opt` and `payload_sz_opt` if provided.
- **See Also**: [`fd_txn_parse_core`](<fd_txn_parse.c.md#fd_txn_parse_core>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)