<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Tests and benchmarks for the Murmur3 hash function implementation.

# Purpose
The code is a C program designed to test and benchmark the `fd_murmur3_32` hash function and related hash operations. It includes a set of predefined test vectors, each containing a message, its size, a seed, and the expected hash value. The program verifies the correctness of the `fd_murmur3_32` function by comparing the computed hash values against the expected values from the test vectors. If a mismatch occurs, an error is logged.

Additionally, the program benchmarks the performance of the `fd_murmur3_32` function, as well as the `fd_pchash` and `fd_pchash_inverse` functions, by measuring the time taken to process a large number of hash operations. The benchmarking results are logged, providing insights into the hash rate and efficiency of these functions. The program initializes and cleans up resources such as random number generators and logs the results of the tests and benchmarks.
# Imports and Dependencies

---
- `../fd_ballet.h`
- `fd_murmur3.h`


# Global Variables

---
### fd\_murmur3\_32\_test\_vector
- **Type**: ``fd_murmur3_32_test_vector_t const``
- **Description**: An array of test vectors for the Murmur3 32-bit hash function. Each element in the array is a structure containing a precomputed hash value, a message string, the size of the message, and a seed value.
- **Use**: Used to verify the correctness of the Murmur3 32-bit hash function implementation by comparing computed hash values against expected values.


# Data Structures

---
### fd\_murmur3\_32\_test\_vector
- **Type**: ``struct``
- **Members**:
    - `hash`: Stores the expected hash value for the test vector.
    - `msg`: Points to the message string to hash.
    - `sz`: Indicates the size of the message in bytes.
    - `seed`: Specifies the seed value for the hash function.
- **Description**: Defines a test vector for the Murmur3 32-bit hash function, containing the expected hash, the message to hash, the size of the message, and the seed used for hashing.


---
### fd\_murmur3\_32\_test\_vector\_t
- **Type**: ``struct``
- **Members**:
    - `hash`: Stores the expected hash value for the test vector.
    - `msg`: Points to the message string to hash.
    - `sz`: Indicates the size of the message in bytes.
    - `seed`: Specifies the seed value for the hash function.
- **Description**: Defines a test vector for the Murmur3 32-bit hash function, containing the expected hash, the message to hash, its size, and the seed used for hashing.


# Functions

---
### main<!-- {{#callable:main}} -->
[View Source →](<../../../../../src/ballet/murmur3/test_murmur3.c#L45>)

Initializes the environment, tests hash functions, and benchmarks their performance.
- **Inputs**:
    - `argc`: The number of command-line arguments.
    - `argv`: An array of command-line arguments.
- **Logic and Control Flow**:
    - Calls `fd_boot` to initialize the environment with command-line arguments.
    - Creates a random number generator `rng` using `fd_rng_new` and `fd_rng_join`.
    - Iterates over `fd_murmur3_32_test_vector` to test the [`fd_murmur3_32`](<fd_murmur3.c.md#fd_murmur3_32>) hash function against known test vectors, logging errors if the computed hash does not match the expected hash.
    - Performs a series of tests on [`fd_pchash`](<fd_murmur3.h.md#fd_pchash>) and [`fd_pchash_inverse`](<fd_murmur3.h.md#fd_pchash_inverse>) to ensure they produce consistent results.
    - Benchmarks the [`fd_murmur3_32`](<fd_murmur3.c.md#fd_murmur3_32>) hash function with small inputs, logging the time taken per hash.
    - Benchmarks the [`fd_murmur3_32`](<fd_murmur3.c.md#fd_murmur3_32>) hash function with larger, randomly generated inputs, logging the throughput in GiB/s.
    - Benchmarks the [`fd_pchash`](<fd_murmur3.h.md#fd_pchash>) function, logging the time taken per hash.
    - Benchmarks the [`fd_pchash_inverse`](<fd_murmur3.h.md#fd_pchash_inverse>) function, logging the time taken per hash.
    - Deletes the random number generator using `fd_rng_delete` and `fd_rng_leave`.
    - Logs a 'pass' message and calls `fd_halt` to terminate the program.
- **Output**: Returns 0 to indicate successful execution.
- **Functions Called**:
    - [`fd_murmur3_32`](<fd_murmur3.c.md#fd_murmur3_32>)
    - [`fd_pchash`](<fd_murmur3.h.md#fd_pchash>)
    - [`fd_pchash_inverse`](<fd_murmur3.h.md#fd_pchash_inverse>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)