<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines data structures and functions for handling sBPF instructions and opcodes.

# Purpose
This C header file defines data structures and functions for handling eBPF (extended Berkeley Packet Filter) instructions. It includes several structures to represent different types of eBPF opcodes, such as `fd_sbpf_opcode_any_t`, `fd_sbpf_opcode_normal_t`, and `fd_sbpf_opcode_mem_t`, which are used to categorize opcodes based on their characteristics. The `fd_sbpf_instr_t` structure represents a complete eBPF instruction, including fields for the opcode, destination register, source register, offset, and immediate value. The file also provides inline functions for converting between `ulong` and `fd_sbpf_instr_t`, and for checking if an instruction marks the start or end of a function. These utilities facilitate the manipulation and interpretation of eBPF instructions in a program.
# Imports and Dependencies

---
- `../../util/fd_util.h`


# Data Structures

---
### fd\_sbpf\_opcode\_any
- **Type**: ``struct``
- **Members**:
    - `op_class`: A 3-bit field that specifies the operation class.
    - `_unknown`: A 5-bit field reserved for unknown or unspecified use.
- **Description**: Defines a structure with two fields, `op_class` and `_unknown`, which are bit fields within an unsigned character (`uchar`).


---
### fd\_sbpf\_opcode\_any\_t
- **Type**: ``struct``
- **Members**:
    - ``op_class``: 3-bit field that specifies the operation class.
    - ``_unknown``: 5-bit field reserved for unknown or unspecified use.
- **Description**: Defines a structure with two fields, `op_class` and `_unknown`, where `op_class` is used to specify the class of operation, and `_unknown` is reserved for future or unspecified use. This structure is part of a larger system for handling SBPF (Solana Berkeley Packet Filter) instructions, where it serves as a generic representation of an opcode with minimal information.


---
### fd\_sbpf\_opcode\_normal
- **Type**: ``struct``
- **Members**:
    - `op_class`: 3-bit field that specifies the operation class.
    - `op_src`: 1-bit field that indicates the source of the operation.
    - `op_mode`: 4-bit field that defines the operation mode.
- **Description**: Defines a structure for a normal SBPF (Solana Berkeley Packet Filter) opcode, which includes fields for operation class, source, and mode, using bit fields to efficiently pack these attributes into a single byte.


---
### fd\_sbpf\_opcode\_normal\_t
- **Type**: ``struct``
- **Members**:
    - `op_class`: 3-bit field that specifies the operation class.
    - `op_src`: 1-bit field that indicates the source of the operation.
    - `op_mode`: 4-bit field that defines the mode of the operation.
- **Description**: Defines a structure for a normal opcode in the SBPF (Solana Berkeley Packet Filter) instruction set, with fields to specify the class, source, and mode of the operation.


---
### fd\_sbpf\_opcode\_mem
- **Type**: ``struct``
- **Members**:
    - `op_class`: Defines the operation class using 3 bits.
    - `op_size`: Specifies the size of the operation using 2 bits.
    - `op_addr_mode`: Indicates the addressing mode using 3 bits.
- **Description**: Defines a memory operation opcode with fields for operation class, size, and addressing mode, each represented by a specific number of bits within an unsigned character.


---
### fd\_sbpf\_opcode\_mem\_t
- **Type**: ``struct``
- **Members**:
    - `op_class`: Defines the class of the operation using 3 bits.
    - `op_size`: Specifies the size of the operation using 2 bits.
    - `op_addr_mode`: Indicates the addressing mode of the operation using 3 bits.
- **Description**: Defines a memory operation in the SBPF (Solana Berkeley Packet Filter) instruction set, using bit fields to specify the class, size, and addressing mode of the operation.


---
### fd\_sbpf\_opcode
- **Type**: `union`
- **Members**:
    - ``raw``: Stores the raw opcode as an unsigned character.
    - ``any``: Represents an opcode with a general structure, including an operation class and unknown bits.
    - ``normal``: Represents a normal opcode with an operation class, source, and mode.
    - ``mem``: Represents a memory-related opcode with an operation class, size, and address mode.
- **Description**: The `fd_sbpf_opcode` union provides a flexible representation of an opcode in the SBPF (Solana Berkeley Packet Filter) instruction set, allowing it to be interpreted in different formats such as raw, general, normal, or memory-related opcodes.


---
### fd\_sbpf\_opcode\_t
- **Type**: `union`
- **Members**:
    - ``raw``: Contains the raw opcode as an unsigned character.
    - ``any``: Represents an opcode with a class and unknown bits.
    - ``normal``: Represents a normal opcode with class, source, and mode bits.
    - ``mem``: Represents a memory opcode with class, size, and address mode bits.
- **Description**: Defines a union for different types of opcodes in the SBPF instruction set, allowing access to the opcode as a raw byte or as structured data for specific opcode types.


---
### fd\_sbpf\_instr
- **Type**: ``struct``
- **Members**:
    - `opcode`: Holds the operation code for the instruction using the `fd_sbpf_opcode_t` type.
    - `dst_reg`: Specifies the destination register using 4 bits.
    - `src_reg`: Specifies the source register using 4 bits.
    - `offset`: Represents a short integer offset value.
    - `imm`: Stores an immediate value as an unsigned integer.
- **Description**: Defines an instruction in the SBPF (Solana Berkeley Packet Filter) virtual machine, encapsulating the operation code, destination and source registers, an offset, and an immediate value for execution.


---
### fd\_sbpf\_instr\_t
- **Type**: ``struct``
- **Members**:
    - `opcode`: Contains the operation code for the instruction, represented as a `fd_sbpf_opcode_t` union.
    - `dst_reg`: Specifies the destination register, using 4 bits.
    - `src_reg`: Specifies the source register, using 4 bits.
    - `offset`: Holds a short integer value for the instruction's offset.
    - `imm`: Stores an immediate value as an unsigned integer.
- **Description**: Defines an instruction in the SBPF (Solana Berkeley Packet Filter) virtual machine, encapsulating the operation code, destination and source registers, an offset, and an immediate value.


# Functions

---
### fd\_sbpf\_instr<!-- {{#callable:fd_sbpf_instr}} -->
[View Source →](<../../../../../src/ballet/sbpf/fd_sbpf_instr.h#L47>)

Converts an unsigned long integer to an `fd_sbpf_instr_t` structure using a union for type conversion.
- **Inputs**:
    - `u`: An unsigned long integer representing the instruction data to convert.
- **Logic and Control Flow**:
    - Declare a union with an unsigned long and an `fd_sbpf_instr_t` structure.
    - Assign the input unsigned long `u` to the union's unsigned long member.
    - Return the `fd_sbpf_instr_t` structure from the union.
- **Output**: An `fd_sbpf_instr_t` structure that represents the instruction data from the input unsigned long.


---
### fd\_sbpf\_ulong<!-- {{#callable:fd_sbpf_ulong}} -->
[View Source →](<../../../../../src/ballet/sbpf/fd_sbpf_instr.h#L54>)

Converts an `fd_sbpf_instr_t` instruction to its `ulong` representation.
- **Inputs**:
    - `instr`: An `fd_sbpf_instr_t` structure representing an SBPF instruction.
- **Logic and Control Flow**:
    - Declare a union with a `ulong` and an `fd_sbpf_instr_t` named `_`.
    - Assign the input `instr` to the `instr` field of the union `_`.
    - Return the `ulong` field of the union `_`.
- **Output**: A `ulong` value that represents the input `fd_sbpf_instr_t` instruction.


---
### fd\_sbpf\_is\_function\_start<!-- {{#callable:fd_sbpf_is_function_start}} -->
[View Source →](<../../../../../src/ballet/sbpf/fd_sbpf_instr.h#L61>)

Checks if a given instruction marks the start of a function in the SBPF instruction set.
- **Inputs**:
    - `instr`: An `fd_sbpf_instr_t` structure representing a single SBPF instruction.
- **Logic and Control Flow**:
    - Check if the `raw` field of the `opcode` in `instr` is equal to `0x07`.
    - Check if the `dst_reg` field of `instr` is equal to `0x0A`.
    - Return `1` (true) if both conditions are met, otherwise return `0` (false).
- **Output**: Returns an integer `1` if the instruction is a function start, otherwise returns `0`.


---
### fd\_sbpf\_is\_function\_end<!-- {{#callable:fd_sbpf_is_function_end}} -->
[View Source →](<../../../../../src/ballet/sbpf/fd_sbpf_instr.h#L66>)

Checks if the given instruction marks the end of a function.
- **Inputs**:
    - `instr`: An `fd_sbpf_instr_t` structure representing a single instruction with an opcode and other fields.
- **Logic and Control Flow**:
    - Access the `raw` field of the `opcode` within the `instr` structure.
    - Return `1` if the `raw` value is `0x05` or `0x9D`, indicating the end of a function.
    - Return `0` otherwise.
- **Output**: Returns an integer `1` if the instruction is a function end marker, otherwise returns `0`.



---
Made with ❤️ by [Driver](https://www.driver.ai/)