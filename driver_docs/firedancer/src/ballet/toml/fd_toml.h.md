<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

APIs for parsing TOML config files with error handling and deserialization into fd_pod structures.

# Purpose
The `fd_toml.h` file is a C header file that provides an API for parsing TOML configuration files. It defines error codes for various parsing errors and includes a structure, `fd_toml_err_info_t`, to store information about parse failures, such as the line number where the error occurred. The primary function, [`fd_toml_parse`](<#fd_toml_parse>), deserializes a TOML document into an `fd_pod` object, using specified scratch memory for processing. The function returns success or an error code, and optionally fills an error information structure. The header also includes the [`fd_toml_strerror`](<#fd_toml_strerror>) function, which returns a human-readable string describing a given error code. The implementation notes that the parser supports a subset of the TOML specification and lists several known limitations and deviations from the standard.
# Imports and Dependencies

---
- `../../util/pod/fd_pod.h`


# Data Structures

---
### fd\_toml\_err\_info
- **Type**: ``struct``
- **Members**:
    - ``line``: 1-indexed line number indicating where the error occurred in the TOML file.
- **Description**: Contains information about a TOML parse failure, specifically the line number where the error occurred. This structure is used to provide detailed error information when parsing TOML files fails, allowing users to identify and correct issues in the TOML configuration.


---
### fd\_toml\_err\_info\_t
- **Type**: ``struct``
- **Members**:
    - `line`: 1-indexed line number indicating where the error occurred in the TOML document.
- **Description**: Contains information about a TOML parse failure, specifically the line number where the error occurred. This structure is used to provide detailed error information when parsing TOML documents fails, helping users to identify and correct issues in the TOML configuration files.


# Function Declarations (Public API)

---
### fd\_toml\_parse<!-- {{#callable_declaration:fd_toml_parse}} -->
[View Source →](<../../../../../src/ballet/toml/fd_toml.h#L33>)

Deserializes a TOML document into an object tree within a pod.
- **Description**: Use this function to parse a TOML document and insert its object tree into a provided pod. The function requires a pointer to the TOML data and its size, a pod for storing the parsed data, and a scratch memory area for temporary storage during parsing. Ensure the scratch memory is at least 4kB to avoid deserialization failures with long strings or sub-tables. The function returns success or an error code indicating the type of failure. Optionally, provide a structure to receive error details, including the line number of any parse failure. The function is not secure against untrusted input and does not optimize for performance.
- **Inputs**:
    - `toml`: Pointer to the first byte of the TOML data. If `toml_sz` is 0, this pointer is ignored and can be invalid.
    - `toml_sz`: Size in bytes of the TOML data. Must be greater than 0 to process the TOML data.
    - `pod`: Pointer to a local join to an `fd_pod_t` where the parsed object tree will be stored. Caller retains ownership.
    - `scratch`: Pointer to a memory area used for temporary storage during parsing. Must not be null.
    - `scratch_sz`: Size in bytes of the scratch memory. Recommended to be at least 4kB. If too small, parsing may fail.
    - `opt_err`: Optional pointer to a `fd_toml_err_info_t` structure to receive error information. If null, error details are not provided.
- **Output**: Returns `FD_TOML_SUCCESS` on success or an error code (`FD_TOML_ERR_*`) on failure. If `opt_err` is provided, it is initialized with error information.
- **See Also**: [`fd_toml_parse`](<fd_toml.c.md#fd_toml_parse>)  (Implementation)


---
### fd\_toml\_strerror<!-- {{#callable_declaration:fd_toml_strerror}} -->
[View Source →](<../../../../../src/ballet/toml/fd_toml.h#L116>)

Returns a human-readable error message for a given error code.
- **Description**: Use this function to obtain a descriptive error message for a specific error code returned by TOML parsing functions. This is useful for debugging and logging purposes, as it translates error codes into understandable text. The function handles both known error codes and unknown ones, providing a default message for the latter. It is important to use this function with error codes returned by `fd_toml_parse` to ensure accurate error descriptions.
- **Inputs**:
    - `err`: An integer representing the error code. Valid values are the negative error codes defined for TOML parsing, such as `FD_TOML_ERR_POD`, `FD_TOML_ERR_SCRATCH`, etc. The function also handles unknown error codes by returning a generic message.
- **Output**: A pointer to a constant character string containing the error message. The string is statically allocated and should not be modified or freed by the caller.
- **See Also**: [`fd_toml_strerror`](<fd_toml.c.md#fd_toml_strerror>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)