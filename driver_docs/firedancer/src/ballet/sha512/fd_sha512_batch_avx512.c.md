<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Optimized SHA-512 batch processing using AVX-512 SIMD instructions for hashing multiple messages.

# Purpose
The code implements a batch processing function for the SHA-512 cryptographic hash algorithm using AVX-512 SIMD instructions. It is designed to handle multiple messages in parallel, optimizing the hashing process for systems that support AVX-512. The function [`fd_sha512_private_batch_avx512`](<#fd_sha512_private_batch_avx512>) processes a batch of messages, computing their SHA-512 hashes. If the batch size is less than five, it delegates the task to a different function, [`fd_sha512_private_batch_avx`](<#fd_sha512_private_batch_avx>), which likely uses a different SIMD instruction set or a non-SIMD approach.

The function prepares the data by appending necessary padding and size information to each message, ensuring they conform to the SHA-512 specification. It then processes the messages in blocks, using SIMD operations to perform the SHA-512 state updates efficiently. The function uses a series of transformations and logical operations to compute the hash values, which are stored in the provided `batch_hash` array. The code includes optimizations for handling message tails and uses a predefined set of constants for the SHA-512 algorithm. The function is part of a larger library, as indicated by the inclusion of headers like `fd_sha512.h` and `fd_avx512.h`, and it is intended to be used internally within the library rather than as a public API.
# Imports and Dependencies

---
- `fd_sha512.h`
- `../../util/simd/fd_avx512.h`


# Functions

---
### fd\_sha512\_private\_batch\_avx512<!-- {{#callable:fd_sha512_private_batch_avx512}} -->
[View Source →](<../../../../../src/ballet/sha512/fd_sha512_batch_avx512.c#L14>)

Processes a batch of messages using the SHA-512 hashing algorithm with AVX-512 optimizations.
- **Inputs**:
    - `batch_cnt`: The number of messages in the batch to process.
    - `_batch_data`: A pointer to the data of the messages to hash.
    - `batch_sz`: An array of sizes for each message in the batch.
    - `_batch_hash`: An array of pointers where the resulting hashes will be stored.
- **Logic and Control Flow**:
    - Check if `batch_cnt` is less than 5; if so, call [`fd_sha512_private_batch_avx`](<fd_sha512_batch_avx.c.md#fd_sha512_private_batch_avx>) and return.
    - Initialize pointers and arrays for processing the tail blocks of each message.
    - Iterate over each message in the batch to allocate and populate tail blocks with padding and size information.
    - Initialize SHA-512 state variables and constants for processing.
    - Enter a loop to process each block of the messages, switching to tail blocks when necessary.
    - Load and transpose message blocks, then compute SHA-512 state updates using the `SHA_CORE` macro.
    - Update the SHA-512 state for active lanes and advance to the next message segment blocks.
    - Store the final hash values in the provided `_batch_hash` array.
- **Output**: Stores the SHA-512 hash of each message in the provided `_batch_hash` array.
- **Functions Called**:
    - [`fd_sha512_private_batch_avx`](<fd_sha512_batch_avx.c.md#fd_sha512_private_batch_avx>)


# Function Declarations (Public API)

---
### fd\_sha512\_private\_batch\_avx<!-- {{#callable_declaration:fd_sha512_private_batch_avx}} -->
[View Source →](<../../../../../src/ballet/sha512/fd_sha512_batch_avx512.c#L8>)

Computes SHA-512 hashes for a batch of messages using AVX instructions.
- **Description**: Use this function to compute SHA-512 hashes for multiple messages in a batch, leveraging AVX instructions for optimization. This function is suitable for processing batches of messages where the count is less than 5. For batch counts of 5 or more, a different function is used. The function requires the caller to provide the message data, sizes, and storage for the resulting hashes. It processes each message, appending necessary padding and size information as per the SHA-512 specification. Ensure that the input pointers are valid and that the batch count is appropriate for this function.
- **Inputs**:
    - `batch_cnt`: The number of messages in the batch. Must be less than 5 for this function to process the batch.
    - `batch_data`: Pointer to the array of message data. Each message is expected to be contiguous in memory. Must not be null.
    - `batch_sz`: Pointer to an array of sizes for each message in the batch. Each size corresponds to the length of the message in bytes. Must not be null.
    - `batch_hash`: Pointer to an array of pointers where each pointer points to a buffer that will store the resulting hash for each message. Each buffer must be large enough to hold a SHA-512 hash (64 bytes). Must not be null.
- **Output**: None
- **See Also**: [`fd_sha512_private_batch_avx`](<fd_sha512_batch_avx.c.md#fd_sha512_private_batch_avx>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)