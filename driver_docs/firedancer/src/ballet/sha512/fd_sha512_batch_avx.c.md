<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

An implementation of a batch SHA-512 hashing function optimized with AVX for processing multiple messages.

# Purpose
The code implements a batch processing function for the SHA-512 cryptographic hash algorithm using AVX (Advanced Vector Extensions) instructions. The function [`fd_sha512_private_batch_avx`](<#fd_sha512_private_batch_avx>) is designed to compute SHA-512 hashes for multiple data blocks simultaneously, leveraging SIMD (Single Instruction, Multiple Data) capabilities to enhance performance. The function processes data in batches, where each batch can contain up to four data blocks, as indicated by the `FD_SHA512_BATCH_MAX` constant. The function handles both the preparation of data blocks, including padding and message size encoding, and the computation of the hash values using the SHA-512 algorithm's core operations.

The function begins by checking if the batch count is less than two, in which case it processes each block individually using the `fd_sha512_hash` function. For larger batch sizes, it prepares the data by appending necessary padding and size information, then processes the data blocks in parallel using AVX instructions. The function uses a series of transformations and state updates to compute the hash values, which are stored in the provided output buffers. The code includes several optimizations, such as using vectorized operations for data loading and state updates, to improve the efficiency of the hash computation. The function is part of a larger library, as indicated by the inclusion of headers like `fd_sha512.h` and `fd_avx.h`, and is intended to be used in contexts where high-performance hash computation is required.
# Imports and Dependencies

---
- `fd_sha512.h`
- `../../util/simd/fd_avx.h`


# Functions

---
### fd\_sha512\_private\_batch\_avx<!-- {{#callable:fd_sha512_private_batch_avx}} -->
[View Source →](<../../../../../src/ballet/sha512/fd_sha512_batch_avx.c#L10>)

Processes a batch of messages using the SHA-512 hashing algorithm with AVX optimizations.
- **Inputs**:
    - `batch_cnt`: The number of messages in the batch to process.
    - `_batch_data`: A pointer to the data of the messages to hash.
    - `batch_sz`: An array of sizes for each message in the batch.
    - `_batch_hash`: An array of pointers where the resulting hashes will be stored.
- **Logic and Control Flow**:
    - Checks if `batch_cnt` is less than 2; if so, processes each message individually using [`fd_sha512_hash`](<fd_sha512.c.md#fd_sha512_hash>) and returns.
    - Initializes variables for tail data and scratch space for processing.
    - Iterates over each message in the batch to allocate and populate tail blocks, appending necessary padding and size information.
    - Sets initial SHA-512 state values and prepares for processing using AVX instructions.
    - Processes each message block in a loop, updating the SHA-512 state for active lanes using AVX instructions.
    - Switches lanes to tail processing when necessary and continues processing until all blocks are processed.
    - Stores the final hash results in the provided `_batch_hash` array.
- **Output**: Stores the SHA-512 hash of each message in the batch in the provided `_batch_hash` array.
- **Functions Called**:
    - [`fd_sha512_hash`](<fd_sha512.c.md#fd_sha512_hash>)



---
Made with ❤️ by [Driver](https://www.driver.ai/)