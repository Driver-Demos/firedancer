<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Utility functions for the bn254 (alt_bn128) curve, including point compression, decompression, and arithmetic.

# Purpose
The code defines a C header file that provides utility functions for operations on the `bn254` elliptic curve, also known as `alt_bn128`. This file is part of a library that facilitates cryptographic computations involving elliptic curves, specifically focusing on the `bn254` curve. The header file includes other necessary headers such as `fd_ballet_base.h`, `fd_uint256.h`, and `fd_bn254_scalar.h`, which likely provide foundational types and operations needed for the elliptic curve computations.

The file declares several functions that perform operations on points in the elliptic curve groups G1 and G2. These operations include addition, scalar multiplication, and pairing checks, as well as compression and decompression of points. The functions [`fd_bn254_g1_add_syscall`](<#fd_bn254_g1_add_syscall>), [`fd_bn254_g1_scalar_mul_syscall`](<#fd_bn254_g1_scalar_mul_syscall>), and [`fd_bn254_pairing_is_one_syscall`](<#fd_bn254_pairing_is_one_syscall>) are designed to handle specific elliptic curve operations, while [`fd_bn254_g1_compress`](<#fd_bn254_g1_compress>), [`fd_bn254_g1_decompress`](<#fd_bn254_g1_decompress>), [`fd_bn254_g2_compress`](<#fd_bn254_g2_compress>), and [`fd_bn254_g2_decompress`](<#fd_bn254_g2_decompress>) manage the serialization and deserialization of elliptic curve points. The header file defines a constant `FD_BN254_PAIRING_BATCH_MAX` to specify the maximum batch size for pairing operations, indicating that the library may support batch processing of pairings. The functions are intended to be used by other parts of the software that require cryptographic operations on the `bn254` curve.
# Imports and Dependencies

---
- `../fd_ballet_base.h`
- `../bigint/fd_uint256.h`
- `./fd_bn254_scalar.h`


# Function Declarations (Public API)

---
### fd\_bn254\_g1\_add\_syscall<!-- {{#callable_declaration:fd_bn254_g1_add_syscall}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L12>)

Adds two points on the bn254 curve and outputs the result.
- **Description**: Use this function to add two points on the bn254 elliptic curve. The function expects an input array containing two points, each represented as 64 bytes, making a total of 128 bytes. If the input size is less than 128 bytes, the function pads the input with zeros. The function validates that each point is in the correct subgroup before performing the addition. If the input size exceeds 128 bytes or if the points are not valid, the function returns an error. The result of the addition is stored in the output array as a 64-byte serialized point.
- **Inputs**:
    - `out`: A 64-byte array where the function will store the serialized result of the point addition. The caller must provide a buffer of this size.
    - `in`: A constant array of bytes representing two points on the bn254 curve, each point being 64 bytes, for a total of 128 bytes. The function pads with zeros if the input size is less than 128 bytes.
    - `in_sz`: The size of the input array in bytes. Must not exceed 128 bytes. If greater, the function returns an error.
- **Output**: Returns 0 on success, indicating the result is stored in the output array. Returns -1 on error, such as invalid input size or points not in the correct subgroup.
- **See Also**: [`fd_bn254_g1_add_syscall`](<fd_bn254.c.md#fd_bn254_g1_add_syscall>)  (Implementation)


---
### fd\_bn254\_g1\_scalar\_mul\_syscall<!-- {{#callable_declaration:fd_bn254_g1_scalar_mul_syscall}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L19>)

Performs scalar multiplication on a G1 point of the bn254 curve.
- **Description**: Use this function to perform scalar multiplication on a point in the G1 group of the bn254 elliptic curve. The function requires an input buffer containing a point and a scalar, and it outputs the result of the multiplication. The input size must not exceed a specified limit, which can be either 96 or 128 bytes depending on the `check_correct_sz` flag. The function validates the point but does not validate the scalar. It returns an error if the input size is invalid or if the point is not in the correct subgroup.
- **Inputs**:
    - `out`: A 64-byte buffer where the function will store the result of the scalar multiplication. The caller must allocate this buffer.
    - `in`: A pointer to a buffer containing the input data, which includes a point and a scalar. The buffer must be at least `in_sz` bytes long.
    - `in_sz`: The size of the input buffer in bytes. It must not exceed 96 bytes if `check_correct_sz` is true, or 128 bytes if false. If the size is invalid, the function returns an error.
    - `check_correct_sz`: A flag indicating whether to enforce a stricter input size check. If true, the input size must not exceed 96 bytes; otherwise, it must not exceed 128 bytes.
- **Output**: Returns 0 on success, or -1 if the input size is invalid or the point is not in the correct subgroup.
- **See Also**: [`fd_bn254_g1_scalar_mul_syscall`](<fd_bn254.c.md#fd_bn254_g1_scalar_mul_syscall>)  (Implementation)


---
### fd\_bn254\_pairing\_is\_one\_syscall<!-- {{#callable_declaration:fd_bn254_pairing_is_one_syscall}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L25>)

Checks if a pairing operation on bn254 curve elements results in one.
- **Description**: Use this function to verify if the result of a pairing operation on elements of the bn254 curve is equal to one. This function processes input data representing multiple pairs of elements from the G1 and G2 groups of the bn254 curve. It requires the input data to be formatted correctly, with each pair occupying 192 bytes. The function outputs a 32-byte big-endian integer, which is set to 1 if the pairing result is one, and 0 otherwise. Ensure that the input size is a multiple of 192 bytes to avoid unexpected behavior.
- **Inputs**:
    - `out`: A 32-byte buffer where the function writes the result. The buffer must be allocated by the caller and will contain a big-endian integer, either 0 or 1.
    - `in`: A pointer to the input data, which must be a sequence of bytes representing pairs of elements from the G1 and G2 groups. Each pair must occupy 192 bytes.
    - `in_sz`: The size of the input data in bytes. It must be a multiple of 192 to correctly represent pairs of elements.
- **Output**: Returns 0 on success. The output buffer contains 1 if the pairing result is one, otherwise 0. Returns -1 if the input data is invalid.
- **See Also**: [`fd_bn254_pairing_is_one_syscall`](<fd_bn254.c.md#fd_bn254_pairing_is_one_syscall>)  (Implementation)


---
### fd\_bn254\_g1\_compress<!-- {{#callable_declaration:fd_bn254_g1_compress}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L37>)

Compresses a point in G1.
- **Description**: Use this function to compress a point in the G1 group of the bn254 curve. The input is a 64-byte buffer representing the point (x, y) in big-endian format, with additional flags. The function outputs a 32-byte buffer containing the x-coordinate, also in big-endian format, with appropriate flags set. This function does not verify if the input point is valid within G1. It returns the output buffer on success or NULL if the input cannot be processed.
- **Inputs**:
    - `out`: A 32-byte buffer where the compressed x-coordinate and flags will be stored. The caller must allocate this buffer.
    - `in`: A 64-byte buffer representing the point (x, y) in big-endian format, with additional flags. The buffer must not be null.
- **Output**: Returns the `out` buffer on success, or NULL if the input point cannot be processed.
- **See Also**: [`fd_bn254_g1_compress`](<fd_bn254.c.md#fd_bn254_g1_compress>)  (Implementation)


---
### fd\_bn254\_g1\_decompress<!-- {{#callable_declaration:fd_bn254_g1_decompress}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L48>)

Decompresses a point in G1 from its x-coordinate.
- **Description**: Use this function to decompress a point in the G1 group of the bn254 curve from a 32-byte big-endian buffer representing the x-coordinate, with additional flags. The function writes the decompressed point (x, y) into a 64-byte big-endian buffer without flags. It returns the output buffer on success, indicating that the point (x, y) is in G1, or NULL on failure. Ensure the input buffer is correctly formatted before calling this function.
- **Inputs**:
    - `out`: A 64-byte buffer where the decompressed point (x, y) will be stored. The buffer must be allocated by the caller and will contain no flags after the function executes.
    - `in`: A 32-byte big-endian buffer representing the x-coordinate of a point, with additional flags. The input must be correctly formatted, and the caller retains ownership.
- **Output**: Returns the output buffer on success, or NULL on failure.
- **See Also**: [`fd_bn254_g1_decompress`](<fd_bn254.c.md#fd_bn254_g1_decompress>)  (Implementation)


---
### fd\_bn254\_g2\_compress<!-- {{#callable_declaration:fd_bn254_g2_compress}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L60>)

Compresses a point in G2.
- **Description**: Use this function to compress a point in the G2 group of the bn254 curve. The input must be a 128-byte big-endian buffer representing the point (x, y) with additional flags. The function outputs a 64-byte big-endian buffer containing the x-coordinate with the appropriate flags set. It does not verify if the point (x, y) is in G2. If the input is invalid or the conversion fails, the function returns NULL.
- **Inputs**:
    - `out`: A 64-byte buffer where the compressed x-coordinate and flags will be stored. The caller must allocate this buffer.
    - `in`: A 128-byte big-endian buffer representing the point (x, y) with additional flags. The input must not be null and must be correctly formatted.
- **Output**: Returns a pointer to the output buffer on success, or NULL on failure.
- **See Also**: [`fd_bn254_g2_compress`](<fd_bn254.c.md#fd_bn254_g2_compress>)  (Implementation)


---
### fd\_bn254\_g2\_decompress<!-- {{#callable_declaration:fd_bn254_g2_decompress}} -->
[View Source →](<../../../../../src/ballet/bn254/fd_bn254.h#L73>)

Decompresses a point in G2 from a 64-byte input to a 128-byte output.
- **Description**: Use this function to decompress a point in the G2 group of the bn254 curve. The input must be a 64-byte big-endian buffer representing the x-coordinate of a point, with additional flags. The function writes the decompressed point (x, y) into the 128-byte output buffer, with no flags set. It returns the output buffer on success or NULL on failure. Note that the function does not verify if the decompressed point is in G2, so success does not imply membership in G2.
- **Inputs**:
    - `out`: A 128-byte buffer where the decompressed point (x, y) will be stored. The caller must allocate this buffer before calling the function.
    - `in`: A 64-byte big-endian buffer representing the x-coordinate of a point, with additional flags. The input must not be null.
- **Output**: Returns the output buffer on success, or NULL on failure.
- **See Also**: [`fd_bn254_g2_decompress`](<fd_bn254.c.md#fd_bn254_g2_decompress>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)