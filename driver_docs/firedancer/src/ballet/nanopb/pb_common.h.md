<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Common support functions for field iteration and UTF-8 validation in nanopb encoding and decoding.

# Purpose
The `pb_common.h` file is a C header file that provides common support functions for `pb_encode.c` and `pb_decode.c`, which are likely related to protocol buffer encoding and decoding. It defines functions for initializing and manipulating field iterators, which are used to traverse fields in a protocol buffer message. The functions include [`pb_field_iter_begin`](<#pb_field_iter_begin>), [`pb_field_iter_begin_extension`](<#pb_field_iter_begin_extension>), and [`pb_field_iter_next`](<#pb_field_iter_next>), among others, which help in iterating over fields, including extensions, and finding specific fields by tag. The header also includes conditional support for UTF-8 validation through the [`pb_validate_utf8`](<#pb_validate_utf8>) function, which is only available if `PB_VALIDATE_UTF8` is defined. The file ensures compatibility with C++ by using `extern "C"` linkage specification.
# Imports and Dependencies

---
- `pb_firedancer.h`


# Function Declarations (Public API)

---
### pb\_field\_iter\_begin<!-- {{#callable_declaration:pb_field_iter_begin}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L16>)

Initializes a field iterator to the beginning of a message descriptor.
- **Description**: Use this function to initialize a field iterator for a given message descriptor and message. It prepares the iterator to start at the beginning of the message fields. This function is useful when you need to iterate over the fields of a message. It must be called before using the iterator with other functions. If the message type is empty, the function returns false, indicating that there are no fields to iterate over.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure that will be initialized. Must not be null. The caller retains ownership.
    - `desc`: A pointer to a `pb_msgdesc_t` structure that describes the message. Must not be null. The caller retains ownership.
    - `message`: A pointer to the message data. Must not be null. The caller retains ownership.
- **Output**: Returns `false` if the message type is empty, otherwise returns `true`.
- **See Also**: [`pb_field_iter_begin`](<pb_common.c.md#pb_field_iter_begin>)  (Implementation)


---
### pb\_field\_iter\_begin\_extension<!-- {{#callable_declaration:pb_field_iter_begin_extension}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L19>)

Get a field iterator for an extension field.
- **Description**: Use this function to initialize a field iterator for a given extension field. It is necessary to call this function when you want to iterate over fields in an extension. The function returns false if the message type associated with the extension is empty. Ensure that the `iter` and `extension` parameters are valid and properly initialized before calling this function.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure that will be initialized to iterate over the fields of the extension. Must not be null.
    - `extension`: A pointer to a `pb_extension_t` structure representing the extension field to iterate over. Must not be null and must be properly initialized.
- **Output**: Returns a boolean value: true if the iterator was successfully initialized, or false if the message type is empty.
- **See Also**: [`pb_field_iter_begin_extension`](<pb_common.c.md#pb_field_iter_begin_extension>)  (Implementation)


---
### pb\_field\_iter\_begin\_const<!-- {{#callable_declaration:pb_field_iter_begin_const}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L24>)

Initialize a field iterator for a const message.
- **Description**: Use this function to initialize a field iterator for a message described by `desc` without modifying the message content. This function is useful when you need to iterate over fields of a message that should not be altered. The function returns false if the message type described by `desc` is empty, indicating that there are no fields to iterate over. Ensure that the `iter` and `desc` parameters are valid and that `message` points to a valid message structure.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure that will be initialized to the beginning of the message fields. Must not be null.
    - `desc`: A pointer to a `pb_msgdesc_t` structure that describes the message type. Must not be null.
    - `message`: A pointer to the message data. The pointer is const, indicating that the message data should not be modified. Must not be null.
- **Output**: Returns false if the message type is empty, otherwise true.
- **See Also**: [`pb_field_iter_begin_const`](<pb_common.c.md#pb_field_iter_begin_const>)  (Implementation)


---
### pb\_field\_iter\_begin\_extension\_const<!-- {{#callable_declaration:pb_field_iter_begin_extension_const}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L25>)

Get a field iterator for a constant extension field.
- **Description**: Use this function to initialize a field iterator for a constant extension field in a protocol buffer message. This function is useful when you need to iterate over fields in an extension without modifying them. It is important to note that while the pointers in the `pb_field_iter_t` structure will be non-const, they should not be written to when using this function. The function returns false if the extension is empty, indicating that there are no fields to iterate over.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure that will be initialized to the beginning of the extension field. Must not be null.
    - `extension`: A pointer to a constant `pb_extension_t` structure representing the extension field to iterate over. Must not be null.
- **Output**: Returns a boolean value: true if the iterator is successfully initialized, or false if the extension is empty.
- **See Also**: [`pb_field_iter_begin_extension_const`](<pb_common.c.md#pb_field_iter_begin_extension_const>)  (Implementation)


---
### pb\_field\_iter\_next<!-- {{#callable_declaration:pb_field_iter_next}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L29>)

Advances the field iterator to the next field.
- **Description**: Use this function to move the field iterator to the next field in a message. It is useful when iterating over fields in a protocol buffer message. The function returns false when the iterator wraps back to the first field, indicating that all fields have been iterated over. This function should be called after initializing the iterator with one of the `pb_field_iter_begin` functions.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure. This must be initialized before calling this function. The function modifies the iterator to point to the next field. The pointer must not be null.
- **Output**: Returns a boolean value: true if the iterator successfully advances to the next field, or false if it wraps back to the first field.
- **See Also**: [`pb_field_iter_next`](<pb_common.c.md#pb_field_iter_next>)  (Implementation)


---
### pb\_field\_iter\_find<!-- {{#callable_declaration:pb_field_iter_find}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L33>)

Advance the iterator to a field with a specified tag.
- **Description**: Use this function to move the field iterator to a field with a specific tag number within a message descriptor. It is useful when you need to locate a particular field in a protocol buffer message. The function must be called with a valid iterator that has been initialized with one of the `pb_field_iter_begin` functions. If the specified tag is not found, the function returns false. The function does not modify the iterator if the tag is already at the current position.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure. This must be a valid iterator that has been initialized. The caller retains ownership and must ensure it is not null.
    - `tag`: A 32-bit unsigned integer representing the tag number of the field to find. The tag must be within the valid range of the message descriptor.
- **Output**: Returns true if the field with the specified tag is found and the iterator is advanced to it. Returns false if no such field exists.
- **See Also**: [`pb_field_iter_find`](<pb_common.c.md#pb_field_iter_find>)  (Implementation)


---
### pb\_field\_iter\_find\_extension<!-- {{#callable_declaration:pb_field_iter_find_extension}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L37>)

Finds a field with type `PB_LTYPE_EXTENSION` in the iterator.
- **Description**: Use this function to locate a field of type `PB_LTYPE_EXTENSION` within a protocol buffer field iterator. It searches through the fields starting from the current position of the iterator. If it finds an extension field, it returns true and updates the iterator to point to this field. If no such field is found, it returns false and the iterator remains unchanged. This function is useful when you need to process or access extension fields specifically. Ensure that the iterator is properly initialized before calling this function.
- **Inputs**:
    - `iter`: A pointer to a `pb_field_iter_t` structure. This must be initialized and point to a valid field iterator. The function will update this iterator to point to the found extension field if successful. The pointer must not be null.
- **Output**: Returns true if an extension field is found and the iterator is updated to point to it; otherwise, returns false.
- **See Also**: [`pb_field_iter_find_extension`](<pb_common.c.md#pb_field_iter_find_extension>)  (Implementation)


---
### pb\_validate\_utf8<!-- {{#callable_declaration:pb_validate_utf8}} -->
[View Source →](<../../../../../src/ballet/nanopb/pb_common.h#L41>)

Validates a UTF-8 encoded string.
- **Description**: Use this function to check if a given string is valid UTF-8 encoded. It processes the string to ensure that all characters conform to UTF-8 encoding rules, including checking for overlong encodings, surrogate pairs, and invalid code points. This function is useful when you need to ensure that a string is correctly encoded before processing it further. It does not modify the input string and returns a boolean indicating the validity of the UTF-8 encoding.
- **Inputs**:
    - `s`: A pointer to a null-terminated string that you want to validate. The string must not be null, and the caller retains ownership of the string. If the string is not valid UTF-8, the function returns false.
- **Output**: Returns a boolean value: true if the string is valid UTF-8, false otherwise.
- **See Also**: [`pb_validate_utf8`](<pb_common.c.md#pb_validate_utf8>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)