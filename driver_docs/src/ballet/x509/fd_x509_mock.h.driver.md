# Purpose
This C header file, `fd_x509_gen.h`, is designed to facilitate the generation and handling of mock X.509 certificates specifically for use in QUIC peer-to-peer communications. The file includes functionality to create dummy certificates using an Ed25519 public key, which are intentionally crafted to appear valid to a rustls peer, despite being semantically invalid (e.g., hardcoded to 'localhost'). The header defines the size of these mock certificates and provides two main functions: [`fd_x509_mock_cert`](#fd_x509_mock_cert), which generates the certificate, and [`fd_x509_mock_pubkey`](#fd_x509_mock_pubkey), which extracts the public key from a generated certificate. The documentation within the file suggests that the use of X.509 certificates is a temporary measure, with a recommendation to transition to RFC 7250 raw public keys for improved security and efficiency.
# Imports and Dependencies

---
- `../../util/fd_util_base.h`


# Global Variables

---
### fd\_x509\_mock\_pubkey
- **Type**: `function`
- **Description**: The `fd_x509_mock_pubkey` function is designed to extract the Ed25519 public key from a dummy X.509 certificate that was generated using the `fd_x509_mock_cert` function. It takes a pointer to the certificate and its size as parameters and returns a pointer to the public key within the certificate if successful, or NULL if parsing fails.
- **Use**: This function is used to retrieve the public key from a mock X.509 certificate for further processing or validation.


# Function Declarations (Public API)

---
### fd\_x509\_mock\_cert<!-- {{#callable_declaration:fd_x509_mock_cert}} -->
Generates a dummy X.509 certificate using an Ed25519 public key.
- **Description**: This function is used to create a mock X.509 certificate for testing purposes, specifically for QUIC peer-to-peer connections. The generated certificate is semantically invalid and is intended to be used only in environments where such a certificate is acceptable, such as testing with rustls peers. The function requires a buffer to store the certificate and an Ed25519 public key to embed within the certificate. The certificate is of a fixed size, defined by FD_X509_MOCK_CERT_SZ, and contains an invalid signature. This function should not be used in production environments where valid certificates are required.
- **Inputs**:
    - `buf`: A buffer with a size of at least FD_X509_MOCK_CERT_SZ bytes where the generated certificate will be stored. The caller must ensure the buffer is properly allocated and has the required size.
    - `public_key`: An array of 32 bytes representing the Ed25519 public key to be embedded in the certificate. The caller must ensure this array is properly initialized with a valid public key.
- **Output**: None
- **See also**: [`fd_x509_mock_cert`](fd_x509_mock.c.driver.md#fd_x509_mock_cert)  (Implementation)


---
### fd\_x509\_mock\_pubkey<!-- {{#callable_declaration:fd_x509_mock_pubkey}} -->
Extracts the Ed25519 public key from a dummy X.509 certificate.
- **Description**: Use this function to retrieve the Ed25519 public key from a dummy X.509 certificate that was generated using the `fd_x509_mock_cert` function. This function is useful when you need to access the public key embedded within a mock certificate for testing or validation purposes. The function expects the certificate to be in a specific format and size, as defined by the mock certificate generation process. It returns a pointer to the public key within the certificate if successful, or NULL if the parsing fails. Ensure that the certificate data is valid and correctly sized before calling this function.
- **Inputs**:
    - `cert`: A pointer to the byte array containing the dummy X.509 certificate. The certificate must have been generated by `fd_x509_mock_cert` and should not be null.
    - `cert_sz`: The size of the certificate in bytes. It should match the expected size of a mock certificate, which is defined by `FD_X509_MOCK_CERT_SZ`.
- **Output**: Returns a pointer to the Ed25519 public key within the certificate on success, or NULL if parsing fails.
- **See also**: [`fd_x509_mock_pubkey`](fd_x509_mock.c.driver.md#fd_x509_mock_pubkey)  (Implementation)


